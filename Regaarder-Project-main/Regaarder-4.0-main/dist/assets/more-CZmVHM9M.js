import{c as e,u as t,b as r,j as s,g as a}from"./index-Dffz9O_H.js";import{b as o,d as l,e as n}from"./vendor-Cml8jNaD.js";import{S as i}from"./StaffLoginModal-BtHlrr__.js";import{S as c}from"./SharedBottomBar-ftLq5vqx.js";import{C as d}from"./chevron-left-BLVcuK2V.js";import{U as m}from"./user-ruYZ-ydt.js";import{V as x}from"./video-BU_QG1We.js";import{G as g}from"./gift-DGnD2VHC.js";import{C as f}from"./credit-card-BYcmV_YY.js";import{B as h}from"./bell-BCAj_mH0.js";import{S as p}from"./settings-BP8PaU3C.js";import{C as u}from"./chevron-right-D9r8tnUK.js";import{A as b}from"./arrow-right-Bo65QuJQ.js";import"./alert-circle-BhRc8O2u.js";import"./home-Dd5N3dNo.js";import"./pencil-Dwd5jUWx.js";const j=e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),y=(e,t)=>{try{const r=getComputedStyle(document.documentElement).getPropertyValue(e);return r?r.trim():t||""}catch(r){return t||""}};y("--color-gold","#CB8A00"),y("--color-gold-light","rgba(203,138,0,0.4)"),y("--color-neutral-light-bg","#FFF9E6");const w=({selectedLanguage:e="English"})=>s.jsx(c,{selectedLanguage:e,activeTabOverride:"More"}),N=()=>{const e=t(),{selectedLanguage:c}=r(),[y,N]=o.useState("More"),[v,S]=o.useState(!0),C=()=>{e.openAuthModal()},k=()=>{e.logout()},L=()=>s.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center mx-auto w-full max-w-md",children:[s.jsx(m,{className:"w-14 h-14 text-gray-500 mx-auto mb-6"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:a("Sign in to access more features",c)}),s.jsx("p",{className:"text-sm text-gray-500 mb-8 leading-relaxed",children:a("Create an account or log in to manage your settings",c)}),s.jsxs("button",{onClick:C,className:"w-full flex items-center justify-center space-x-2 py-3 px-4 text-black font-bold rounded-xl shadow-lg transition duration-150 transform hover:scale-[1.01] active:scale-95",style:{backgroundColor:"var(--color-gold)",boxShadow:"0 6px 18px rgba(var(--color-gold-rgb, 203,138,0), 0.18)"},children:[s.jsx("span",{children:a("Log In / Sign Up",c)}),s.jsx(b,{className:"w-5 h-5 ml-2"})]})]}),M=()=>{const e=l(),r=t(),[d,b]=o.useState(!1),[y,w]=o.useState(!1),[N,C]=o.useState(()=>{try{return parseInt(localStorage.getItem("notifications_count")||"0",10)||0}catch(e){return 0}});n.useEffect(()=>{let e=!0;const t=()=>{try{const t=parseInt(localStorage.getItem("notifications_count")||"0",10)||0;e&&C(t)}catch(t){}};t();const r=setInterval(t,3e3),s=e=>{"notifications_count"===e.key&&t()};return window.addEventListener("storage",s),()=>{e=!1,clearInterval(r),window.removeEventListener("storage",s)}},[]);const L=[{icon:m,label:"Profile Settings",href:"/settings"},{icon:m,label:"User Profile",href:"/userprofile"},{icon:x,label:"Creator Profile",href:"/creatorprofile"},{icon:g,label:"Earn Rewards",href:"/referrals"},{icon:f,label:"Payment Methods",href:"#"},{icon:h,label:"Notifications",href:"/notifications?from=more",badge:N},{icon:p,label:"Help & Support",href:"#"}];return s.jsxs("div",{className:"w-full max-w-md space-y-3",children:[L.map((t,o)=>s.jsxs("button",{onClick:()=>{if(t.isStaff)return w(!0);if("Help & Support"===t.label)return e("/support");if("Help & Support"!==t.label&&!r?.user)return r.openAuthModal();if("Creator Profile"===t.label&&r?.user&&!r.user.isCreator)return b(!0);try{t.href&&"#"!==t.href&&e(t.href)}catch(s){}},className:"w-full bg-white p-4 rounded-2xl shadow-sm flex items-center justify-between group active:scale-[0.99] transition-transform border border-gray-100",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(t.icon,{className:"w-6 h-6",style:{color:"var(--color-gold)"}}),s.jsx("span",{className:"text-gray-700 font-medium text-base",children:a(t.label,c)})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[t.badge&&t.badge>0&&s.jsx("span",{className:"text-white text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full",style:{backgroundColor:"var(--color-gold)"},children:t.badge}),s.jsx(u,{className:"w-5 h-5 text-gray-300 group-hover:text-gray-500"})]})]},o)),s.jsxs("button",{onClick:()=>{if(!r.user)return r.openAuthModal();S(!v)},className:"w-full bg-white p-4 rounded-2xl shadow-sm flex items-center justify-between group active:scale-[0.99] transition-transform border border-gray-100 mt-3",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[v?s.jsx(x,{className:"w-6 h-6 text-green-600"}):s.jsx(m,{className:"w-6 h-6",style:{color:"var(--color-gold)"}}),s.jsx("span",{className:"text-gray-700 font-medium text-base",children:a(v?"Switch to User Mode":"Switch to Creator Mode",c)})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-xs font-bold px-3 py-1.5 rounded-lg transition-colors "+(v?"bg-green-100 text-green-700":""),children:a(v?"Creator":"User",c)}),s.jsx(u,{className:"w-5 h-5 text-gray-300 group-hover:text-gray-500"})]})]}),s.jsx("div",{className:"pt-4",children:s.jsxs("button",{onClick:k,className:"w-full bg-white p-4 rounded-2xl shadow-sm flex items-center space-x-4 active:scale-[0.99] transition-transform border border-gray-100",children:[s.jsx(j,{className:"w-6 h-6 text-red-500"}),s.jsx("span",{className:"text-red-500 font-medium text-base",children:a("Log Out",c)})]})}),s.jsx(i,{isOpen:y,onClose:()=>w(!1),onLoginSuccess:t=>{w(!1),e("/staff")}}),d&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>b(!1),children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",onClick:e=>e.stopPropagation(),children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a("Creator Profile",c)}),s.jsx("p",{className:"text-sm text-gray-600 mt-3",children:a("Creator profiles are available to verified creators. Want to become a creator?",c)}),s.jsxs("div",{className:"mt-6 flex space-x-3",children:[s.jsx("button",{className:"flex-1 py-3 rounded-xl bg-gray-100 font-medium",onClick:()=>b(!1),children:a("Maybe later",c)}),s.jsx("button",{className:"flex-1 py-3 rounded-xl font-bold text-white",style:{backgroundColor:"var(--color-gold)"},onClick:async()=>{b(!1);try{const e=localStorage.getItem("regaarder_token"),s=window&&window.__BACKEND_URL__||"https://pwin.onrender.com";try{await fetch(`${s}/creator/complete`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({isCreator:!0})})}catch(t){console.warn("Persisting creator flag failed",t)}const a={...(r&&r.user?r.user:JSON.parse(localStorage.getItem("regaarder_user")||"{}"))||{},isCreator:!0};try{localStorage.setItem("regaarder_user",JSON.stringify(a))}catch(t){}if(r&&r.login){const e=localStorage.getItem("regaarder_token");r.login({...a,token:e})}}catch(s){console.warn("Join Now flow error",s)}try{e("/creatorprofile")}catch(t){}},children:a("Join Now",c)})]})]})})]})},_=l();return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center",children:[s.jsxs("div",{className:"w-full max-w-xl flex flex-col flex-1",style:{paddingBottom:"calc(80px + env(safe-area-inset-bottom))"},children:[s.jsx("header",{className:"bg-white border-b border-gray-100 p-4 sticky top-0 z-20 flex-shrink-0",style:{paddingTop:"calc(16px + env(safe-area-inset-top, 0px))",marginBottom:"4px"},children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(d,{className:"w-6 h-6 text-gray-700 cursor-pointer transition hover:text-gray-900",style:{minWidth:44,minHeight:44,padding:9},onClick:()=>{try{_(-1)}catch(e){_("/home")}}}),s.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:a("More",c)})]})}),s.jsx("p",{className:"text-sm text-gray-500 px-4 pt-3 pb-2",children:a("Settings and options",c)}),s.jsx("main",{className:"flex-1 overflow-y-auto flex flex-col items-center p-4",children:s.jsx("div",{className:"w-full flex flex-col pb-12",children:e.user?s.jsx(M,{}):s.jsx(L,{})})})]}),s.jsx(w,{selectedLanguage:c})]})};export{N as default};
