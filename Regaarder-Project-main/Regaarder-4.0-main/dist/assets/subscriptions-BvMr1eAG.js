import{g as e,j as s,C as t}from"./index-BquHsqrT.js";import{b as r}from"./vendor-Cml8jNaD.js";import{S as a}from"./SharedBottomBar-DxwbZ5xd.js";import{F as l}from"./pencil-ff90-lub.js";import{C as o}from"./crown-Q_Pt9y_w.js";import{S as i}from"./sparkles-Dj-c0sCz.js";import"./home-Boow_oaN.js";const n=(()=>{try{return getComputedStyle(document.documentElement).getPropertyValue("--color-accent").trim()||"#9333ea"}catch(e){return"#9333ea"}})(),c=`rgba(${parseInt(n.slice(1,3),16)}, ${parseInt(n.slice(3,5),16)}, ${parseInt(n.slice(5,7),16)}, 0.12)`,d=`rgba(${parseInt(n.slice(1,3),16)}, ${parseInt(n.slice(3,5),16)}, ${parseInt(n.slice(5,7),16)}, 0.1)`,x=()=>{const[x,m]=r.useState(null),[u,p]=r.useState(null),[h,g]=r.useState(!0),[b,f]=r.useState(null),[y,j]=r.useState(()=>("undefined"!=typeof window?localStorage.getItem("regaarder_language"):"English")||"English");r.useEffect(()=>{const e=()=>{j(localStorage.getItem("regaarder_language")||"English")};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);const w=s=>e(s,y);r.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("regaarder_token")||localStorage.getItem("authToken");if(!e)return void g(!1);window.location.protocol,window.location.hostname;const s=window.__BACKEND_URL__||"https://pwin.onrender.com",t=await fetch(`${s}/payment/subscription`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const r=(await t.json()).subscription;r&&r.active&&r.tier&&(m(r.tier),p(r));const a=await fetch(`${s}/users/me`,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){const e=await a.json();f(e.user),e.user.userPlan&&!r?.tier&&m(e.user.userPlan)}}}catch(e){console.error("Error fetching subscription:",e)}finally{g(!1)}})()},[]);const v=()=>{try{window.location.href="/sponsorship.jsx"}catch(e){console.warn("Navigation failed",e)}},N={starter:{name:w("Starter (Free)"),price:"$0/month",color:"#6B7280",features:[w("1 active free request at a time"),w("Max 3 paid requests active at a time"),w("Max $150 total value for paid requests"),w("Invite contributors (viral growth)"),w("Maximum video quality: 360p")]},pro:{name:w("Pro"),price:"$8.24/month",color:n,badge:w("FLASH DEAL -45% OFF"),features:[w("Unlimited free requests (with decay)"),w("Up to 5 active paid requests"),w("No hard cap on request value"),w("Target specific creators"),w("Boosting available"),w("Contributor pooling enabled"),w("Priority visibility (slower decay)"),w("Repost faster after no response"),w("Priority creator matching"),w("No ads"),w("Faster request response")]},starterCreator:{name:w("Starter Creator"),price:"$0/month",color:"#10B981",features:[w("Max 3 paid requests per day"),w("Daily paid value cap: $150–$200"),w("Unlimited free requests (optional)"),w("Standard visibility in feed"),w("Standard response window"),w("Creator dashboard & monetization")]},proCreator:{name:w("Pro Creator"),price:"$14.99/month",color:n,badge:w("BEST VALUE"),features:[w("All in Starter Creator"),w("Up to 15 paid requests per day"),w("No daily value cap"),w("High-value requests unlocked"),w("Targeted requests with priority access"),w("Boosted requests with priority"),w("Queue management (accept/defer)"),w("Higher algorithmic trust weight"),w("Add Merch links & other links in video"),w("Direct access to sponsors"),w("Upload videos independently (no requests)"),w("Priority support"),w("Up to 80% revenue share")]}};return s.jsxs("div",{className:"min-h-screen text-gray-900",style:{background:"linear-gradient(135deg, rgba(var(--color-gold-rgb), 0.03) 0%, white 50%)"},children:[s.jsxs("div",{className:"max-w-md mx-auto px-4 pb-28",style:{paddingTop:"calc(24px + env(safe-area-inset-top, 0px))"},children:[(()=>{const e=localStorage.getItem("regaarder_user"),r=e?JSON.parse(e):null,a=r?.subscription&&r.subscription.tier&&"free"!==r.subscription.tier&&"Free"!==r.subscription.tier&&!1!==r.subscription.isActive,o=w(a?"You're on a premium plan, no ads will be shown":"Free tier account, ads will be shown"),i=a?"bg-green-50":"bg-blue-50",n=a?"border-green-200":"border-blue-200",c=a?"text-green-800":"text-blue-800",d=a?"text-green-600":"text-blue-600";return s.jsx("div",{className:`mb-6 px-4 py-3 rounded-lg border ${i} ${n}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`flex-shrink-0 mt-0.5 ${d}`,children:a?s.jsx(t,{size:18}):s.jsx(l,{size:18})}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:`text-sm font-medium ${c}`,children:o})})]})})})(),h?s.jsx("div",{className:"flex flex-col items-center justify-start text-center space-y-6 pt-8",children:s.jsx("div",{className:"text-gray-500",children:"Loading..."})}):x&&N[x]?s.jsx("div",{className:"flex flex-col items-stretch text-center space-y-6 pt-8",children:(()=>{const e=N[x],r=u?.expiryDate?new Date(u.expiryDate):null,a=r?Math.ceil((r-new Date)/864e5):null;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[s.jsx(t,{className:"w-5 h-5 text-green-600"}),s.jsx("h3",{className:"font-semibold text-green-800",children:w("Active Subscription")})]}),r&&s.jsx("p",{className:"text-sm text-green-700",children:w(a>0?`Renews in ${a} days`:"Renewing soon")})]}),s.jsxs("div",{className:"rounded-2xl border-2 p-6 bg-white shadow-lg",style:{borderColor:e.color},children:[e.badge&&s.jsx("div",{className:"inline-block text-xs font-bold px-3 py-1.5 rounded-full text-white mb-4",style:{backgroundColor:e.color},children:e.badge}),s.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:e.color},children:e.name}),s.jsx("div",{className:"text-3xl font-bold mb-6",style:{color:e.color},children:e.price}),s.jsx("div",{className:"text-left space-y-2 mb-6",children:e.features.map((r,a)=>s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(t,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:e.color}}),s.jsx("span",{className:"text-sm text-gray-700",children:r})]},a))}),u?.benefits&&u.benefits.length>0&&s.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:w("Your Active Benefits:")}),s.jsx("ul",{className:"text-sm text-blue-800 space-y-1",children:u.benefits.map((e,t)=>s.jsxs("li",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-blue-600 mt-1",children:"✓"}),s.jsx("span",{children:e})]},t))})]}),s.jsx("button",{onClick:v,className:"w-full py-3 rounded-xl text-white font-semibold transition-all hover:opacity-90 mb-3",style:{backgroundColor:e.color},children:w("Manage Subscription")}),s.jsx("button",{onClick:async()=>{if(confirm(w("Are you sure you want to cancel your subscription?")))try{const e=localStorage.getItem("authToken"),s=(window.location.protocol,window.location.hostname,window.__BACKEND_URL__||"https://pwin.onrender.com");(await fetch(`${s}/payment/subscription/cancel`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).ok&&(alert(w("Subscription cancelled successfully")),window.location.reload())}catch(e){console.error("Cancel subscription error:",e),alert(w("Failed to cancel subscription"))}},className:"w-full py-2 rounded-xl text-gray-600 font-semibold transition-all hover:bg-gray-100 border border-gray-200",children:w("Cancel Subscription")})]}),s.jsx("div",{className:"p-4 rounded-xl text-sm",style:{backgroundColor:c},children:s.jsx("p",{className:"text-gray-700",children:w("Want to upgrade or change your plan? Visit the upgrade page to explore all available plans.")})})]})})()}):s.jsxs("div",{className:"flex flex-col items-center text-center space-y-6 pt-8",children:[s.jsx("div",{className:"w-24 h-24 rounded-2xl flex items-center justify-center",style:{background:`linear-gradient(135deg, ${c} 0%, rgba(255,255,255,0.3) 100%)`,boxShadow:"0 4px 12px rgba(203,138,0,0.1)"},children:s.jsx(o,{className:"w-12 h-12",style:{color:n}})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:w("No Active Subscription")}),s.jsx("p",{className:"text-sm text-gray-500 max-w-xs mx-auto leading-relaxed",children:w("You haven't upgraded your plan yet. Unlock premium features and exclusive benefits!")})]}),s.jsxs("div",{className:"w-full max-w-sm space-y-3 pt-4",children:[s.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-xl",style:{backgroundColor:c},children:[s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:d},children:s.jsx(i,{className:"w-4 h-4",style:{color:n}})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-800",children:w("Premium Content")}),s.jsx("p",{className:"text-xs text-gray-500",children:w("Access exclusive videos and features")})]})]}),s.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-xl",style:{backgroundColor:c},children:[s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:d},children:s.jsx(o,{className:"w-4 h-4",style:{color:n}})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-800",children:w("Priority Support")}),s.jsx("p",{className:"text-xs text-gray-500",children:w("Get help faster with 24/7 priority support")})]})]}),s.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-xl",style:{backgroundColor:c},children:[s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:d},children:s.jsx(l,{className:"w-4 h-4",style:{color:n}})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-800",children:w("Unlimited Requests")}),s.jsx("p",{className:"text-xs text-gray-500",children:w("Request as many videos as you want")})]})]})]}),s.jsxs("div",{className:"pt-6 w-full max-w-sm",children:[s.jsxs("button",{onClick:v,className:"w-full py-4 rounded-xl text-white font-semibold text-base transition-all hover:opacity-90 shadow-lg flex items-center justify-center space-x-2",style:{backgroundColor:n,boxShadow:"0 4px 12px rgba(203, 138, 0, 0.3)"},children:[s.jsx(o,{className:"w-5 h-5"}),s.jsx("span",{children:w("Upgrade Your Plan")})]}),s.jsx("p",{className:"text-xs text-gray-400 mt-3",children:w("Start your premium journey today")})]})]})]}),s.jsx(a,{selectedLanguage:localStorage.getItem("regaarder_language")||"English"})]})};export{x as default};
