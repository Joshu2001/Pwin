const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/home-Bm5sJ1cs.js","assets/index-BKYn6iV9.js","assets/vendor-Cml8jNaD.js","assets/index-CLKSAEKd.css","assets/StaffLoginModal-CdjFz4Dx.js","assets/alert-circle-DiWV1LQK.js","assets/SharedBottomBar-DKslIFTu.js","assets/home-D2R2EF6b.js","assets/pencil-B_m0G62f.js","assets/video-ClAf9Zjn.js","assets/x-BF461D-v.js","assets/config-DzyQUiLS.js","assets/media-DUtXZMv0.js","assets/dollar-sign-CSHtgu3V.js","assets/sparkles-B0augY0x.js","assets/share-2-BhgWO0YS.js","assets/alert-triangle-DU7eCqI8.js","assets/thumbs-down-BVEof3Zw.js","assets/book-open-CcJrLnAq.js","assets/globe-pLGKX3wn.js","assets/clock-9q65ch_Z.js","assets/chevron-right-BPwlRaOT.js","assets/chevron-left-DomCfE3z.js","assets/chevron-down-CYteudV1.js","assets/pin-h0-g-uLd.js","assets/bookmark-D60PTAbZ.js","assets/crown-Cc7T05a7.js","assets/camera-WxCbf2-8.js","assets/zap-BSOmeMRS.js","assets/list-plus-B2YLINdr.js","assets/folder-BAXhFSBs.js","assets/users-BSSAY5fL.js","assets/shield-CUvPnz_J.js","assets/history-Dxbx4plR.js","assets/gift-DmmwwNmx.js","assets/credit-card-BM3Qou3L.js","assets/user-CgQ5Tzhp.js","assets/trending-up-9nqdZQMd.js","assets/message-square-Cr3wc8ue.js","assets/heart-off-BHdqzpmz.js","assets/heart-DlP0_1np.js","assets/more-vertical-DkquHF8d.js","assets/lightbulb-D39VEQ9N.js","assets/trophy-DS8FsrRD.js","assets/star-eD3IyywF.js","assets/search-8ZCipJsy.js","assets/settings-B7dMoS0S.js","assets/bell-D9Y28xtX.js","assets/watchhistory-B5r3wR_X.js","assets/check-circle-DvTTtkoo.js","assets/likedvideos-BihKYU0p.js","assets/navigation-CVpX3VBE.js"])))=>i.map(i=>d[i]);
import{c as e,u as t,a as r,_ as n,g as o,j as a,i,e as s,P as l}from"./index-BKYn6iV9.js";import{g as c,u as d,b as u,e as p,d as h}from"./vendor-Cml8jNaD.js";import{r as m}from"./media-DUtXZMv0.js";import{W as f}from"./config-DzyQUiLS.js";import{S as g}from"./star-eD3IyywF.js";import{T as x}from"./trending-up-9nqdZQMd.js";import{C as y}from"./clock-9q65ch_Z.js";import{G as v}from"./globe-pLGKX3wn.js";import{B as b}from"./book-open-CcJrLnAq.js";import{V as w}from"./video-ClAf9Zjn.js";const j=e("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]),k=e("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),S=e("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),N=({cta:e})=>{const[t,r]=u.useState(!1);return u.useEffect(()=>{const t=1e3*(e.overlayCtaDelay||0),n=1e3*(e.overlayCtaDuration||3),o=setTimeout(()=>{r(!0)},t),a=setTimeout(()=>{r(!1)},t+n);return()=>{clearTimeout(o),clearTimeout(a)}},[e.overlayCtaDelay,e.overlayCtaDuration]),t?a.jsxs("div",{style:{width:"100%",padding:"12px 16px",background:"rgba(0,0,0,0.8)",display:"flex",flexDirection:"column",alignItems:"center",gap:8,animation:"fadeIn 0.3s ease-in"},children:[a.jsx("style",{children:"\n\t\t\t\t@keyframes fadeIn {\n\t\t\t\t\tfrom { opacity: 0; }\n\t\t\t\t\tto { opacity: 1; }\n\t\t\t\t}\n\t\t\t\t@keyframes pulse-chevron {\n\t\t\t\t\t0%, 100% { transform: translateY(0px); opacity: 0.6; }\n\t\t\t\t\t50% { transform: translateY(8px); opacity: 1; }\n\t\t\t\t}\n\t\t\t\t.pulse-chevron {\n\t\t\t\t\tanimation: pulse-chevron 1.5s ease-in-out infinite;\n\t\t\t\t}\n\t\t\t"}),a.jsx("div",{className:"pulse-chevron",style:{fontSize:24,color:e.overlayCtaColor||"#4B9EFF"},children:"v"}),"text"===e.overlayCtaType?a.jsx("button",{onClick:t=>{t.stopPropagation(),e.link&&window.open(e.link,"_blank")},style:{width:"100%",padding:"12px 16px",background:e.overlayCtaColor||"#4B9EFF",color:"#fff",border:"none",borderRadius:8,fontSize:14,fontWeight:700,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(75, 158, 255, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:e.overlayCtaText}):"image"===e.overlayCtaType?a.jsx("img",{src:e.overlayCtaMedia,alt:"CTA",onClick:()=>{e.link&&window.open(e.link,"_blank")},style:{width:"100%",maxHeight:"120px",objectFit:"contain",borderRadius:8,cursor:"pointer"}}):"gif"===e.overlayCtaType?a.jsx("img",{src:e.overlayCtaMedia,alt:"CTA GIF",onClick:()=>{e.link&&window.open(e.link,"_blank")},style:{width:"100%",maxHeight:"120px",objectFit:"contain",borderRadius:8,cursor:"pointer"}}):"video"===e.overlayCtaType?a.jsx("video",{src:e.overlayCtaMedia,autoPlay:!0,loop:!0,onClick:()=>{e.link&&window.open(e.link,"_blank")},style:{width:"100%",maxHeight:"120px",objectFit:"contain",borderRadius:8,cursor:"pointer",background:"#000"}}):null]}):null},C=({ad:e,forceLandscapeCss:t,onDismiss:r})=>{const[n,o]=u.useState(!1),[i,s]=u.useState(!1),[l,c]=u.useState(!1),[d,p]=u.useState(!0),h=u.useRef(0),m=u.useRef(null),f=u.useRef(null),g=e.overlayExitTransition||"fade",x=["fade","dissolve","blinds","wilt"],y="random"===g?x[Math.floor(Math.random()*x.length)]:g;u.useEffect(()=>{o(!1),s(!1),c(!1),p(!0)},[e.overlayVideoUrl]),u.useEffect(()=>{if(!n||l)return;const t=1e3*(e.duration||10),r=setTimeout(()=>{if(f.current)try{f.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*")}catch{}if(m.current)try{m.current.pause()}catch{}v()},t);return()=>clearTimeout(r)},[n,e.duration,l]);const v=()=>{c(!0),r&&r(e.id),setTimeout(()=>p(!1),600)};if(!d)return null;const b=t=>{if("none"===e.overlayBadgeType)return null;if(t&&!e.overlayBadgePosition?.includes("-player"))return null;if(!t&&e.overlayBadgePosition?.includes("-player"))return null;const r=e.overlayBadgePosition||(t?"top-left-player":"top-left-video");let n={position:"absolute",zIndex:601,pointerEvents:"none"};return r.includes("top")&&(n.top="calc(env(safe-area-inset-top, 20px) + 12px)"),r.includes("bottom")&&(n.bottom=12),r.includes("left")&&(n.left=12),r.includes("right")&&(n.right=12),a.jsx("div",{style:n,children:"sponsoredBy"===e.overlayBadgeType&&e.overlayBadgeLogo?a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,background:e.overlayBadgeColor||"#000",padding:"6px 12px",borderRadius:6,color:"#fff",fontSize:12,fontWeight:600,opacity:.95},children:[a.jsx("span",{children:"Sponsored by"}),a.jsx("img",{src:e.overlayBadgeLogo,alt:"sponsor",style:{height:20,maxWidth:80,objectFit:"contain"}})]}):a.jsx("div",{style:{background:e.overlayBadgeColor||"#ff0000",padding:"6px 12px",borderRadius:6,color:"#fff",fontSize:12,fontWeight:700,letterSpacing:"0.5px",opacity:.95,minWidth:45,textAlign:"center"},children:"AD"})})};return a.jsx("div",{style:{position:"fixed",inset:t?"auto":0,top:t?"50%":0,left:t?"50%":0,transform:t?"translate(-50%, -50%) rotate(90deg)":"none",width:t?"100vh":"100vw",height:t?"100vw":"100vh",zIndex:600,background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",pointerEvents:"auto",opacity:l?0:1,transition:"opacity 0.5s cubic-bezier(0.4, 0, 1, 1)"},onClick:()=>{e.link&&window.open(e.link,"_blank")},children:a.jsxs("div",{style:{opacity:n?1:0,visibility:n?"visible":"hidden",transition:"opacity 0.4s ease-out, visibility 0s linear "+(n?"0s":"0.4s"),width:"100%",height:"100%",display:"flex",flexDirection:"column",position:"relative",pointerEvents:n?"auto":"none",...(()=>{const e={transition:"all 0.5s cubic-bezier(0.4, 0, 1, 1)",transformOrigin:"center center"};if(!l)return{...e,opacity:1,transform:"scale(1)"};switch(y){case"fade":default:return{...e,opacity:0};case"dissolve":return{...e,opacity:0,transform:"scale(0.95)"};case"blinds":return{...e,opacity:0,transform:"scaleY(0)",transformOrigin:"top center"};case"wilt":return{...e,opacity:0,transform:"rotateX(90deg) scaleY(0)",transformOrigin:"center center"}}})()},children:[b(!0),a.jsx("div",{style:{flex:1,width:"100%",overflow:"hidden",position:"relative"},children:a.jsxs("div",{style:{position:"absolute",inset:0,width:"100%",height:"100%"},children:[b(!1),e.overlayVideoUrl&&!i?(()=>{const t=(e=>{let t="";if(e.includes("youtu.be/"))t=e.split("youtu.be/")[1].split("?")[0];else if(e.includes("youtube.com"))try{t=new URL(e).searchParams.get("v")||""}catch{}return t})(e.overlayVideoUrl);return(r=e.overlayVideoUrl)&&(r.includes("youtube.com")||r.includes("youtu.be"))&&t?a.jsxs("div",{style:{position:"relative",width:"100%",height:"100%"},children:[a.jsx("iframe",{ref:f,width:"100%",height:"100%",src:`https://www.youtube-nocookie.com/embed/${t}?autoplay=1&mute=1&controls=0&modestbranding=1&showinfo=0&rel=0&iv_load_policy=3&fs=0&disablekb=1&playsinline=1&enablejsapi=1&origin=${encodeURIComponent(window.location.origin)}&loop=1&playlist=${t}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; autoplay",style:{background:"#000",width:"100%",height:"100%",border:"none",display:"block",pointerEvents:"none",transform:"scale(1.3)",transformOrigin:"center center"},onLoad:()=>{const e=()=>{try{const e=f.current&&f.current.contentWindow;e&&(e.postMessage(JSON.stringify({event:"command",func:"unMute"}),"*"),e.postMessage(JSON.stringify({event:"command",func:"setVolume",args:[100]}),"*"))}catch{}};setTimeout(e,500),setTimeout(e,1500),setTimeout(e,2500),setTimeout(()=>o(!0),2500)}}),a.jsx("div",{style:{position:"absolute",inset:0,zIndex:3}})]}):a.jsx("video",{ref:m,src:e.overlayVideoUrl,autoPlay:!0,muted:!1,playsInline:!0,crossOrigin:"anonymous",onCanPlay:()=>o(!0),onLoadedData:()=>o(!0),onEnded:()=>v(),onError:t=>{console.error("Ad video failed to load (attempt "+(h.current+1)+")",t),h.current<2?(h.current+=1,setTimeout(()=>{try{const t=m.current;t&&(t.src=e.overlayVideoUrl+(e.overlayVideoUrl.includes("?")?"&":"?")+"_r="+h.current,t.load())}catch(t){console.warn("Ad video retry failed",t)}},1500*h.current)):(s(!0),o(!0))},style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"contain",background:"#000",display:"block",pointerEvents:"none"}});var r})():a.jsxs("div",{ref:e=>{e&&!n&&o(!0)},style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",background:e.overlayAdBgColor||"#1a1a1a",padding:20},children:[e.overlayAdEmoji&&a.jsx("div",{style:{fontSize:56,marginBottom:16},children:e.overlayAdEmoji}),e.overlayAdCompanyName&&a.jsx("div",{style:{fontSize:20,fontWeight:700,color:e.overlayAdTextColor||"#fff",marginBottom:12,textAlign:"center"},children:e.overlayAdCompanyName}),a.jsx("div",{style:{fontSize:16,lineHeight:1.6,fontWeight:600,color:e.overlayAdTextColor||"#fff",textAlign:"center"},children:a.jsx("div",{style:{marginBottom:8},children:e.overlayAdText||"Advertisement"})}),e.overlayBtnText&&a.jsx("button",{style:{marginTop:16,padding:"10px 28px",background:"rgba(255,255,255,0.2)",color:e.overlayAdTextColor||"#fff",border:"1px solid rgba(255,255,255,0.3)",borderRadius:8,fontSize:14,fontWeight:600,cursor:"pointer"},onClick:()=>{e.link&&window.open(e.link,"_blank")},children:e.overlayBtnText})]})]})}),(e.overlayCtaText||e.overlayCtaMedia)&&a.jsx(N,{cta:e})]})})},T=({size:e=20})=>a.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})}),E=({size:e=20})=>a.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M6 9l6 6 6-6"})}),L=({active:e=!1,size:t=24,inCircle:r=!1,color:n})=>{const o=n??(r||e?"#60a5fa":"#fff"),i=t>32?2.6:2;return a.jsxs("svg",{width:t,height:t,fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",style:{display:"block"},children:[a.jsx("rect",{x:"5",y:"11",width:"14",height:"8",rx:"2",stroke:o,strokeWidth:i}),a.jsx("path",{d:"M7 11V8a5 5 0 0110 0v3",stroke:o,strokeWidth:i})]})},I=({size:e=24,color:t="#fff"})=>{const r=e>32?2.6:2;return a.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:r,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",style:{display:"block"},children:[a.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]})},P=()=>a.jsxs("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",style:{color:"currentColor"},children:[a.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),a.jsx("path",{d:"M7 15h2M11 15h2M15 15h2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("path",{d:"M7 11h10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),M=()=>a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},children:[a.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),a.jsx("rect",{x:"12",y:"11",width:"8",height:"6",rx:"1",fill:"black",stroke:"currentColor",strokeWidth:"2"})]}),A=()=>a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},children:[a.jsx("circle",{cx:"5",cy:"12",r:"2",fill:"currentColor"}),a.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"}),a.jsx("circle",{cx:"19",cy:"12",r:"2",fill:"currentColor"})]}),R=({size:e=18})=>a.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("circle",{cx:"8.5",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M20 8v6M23 11h-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),z=()=>a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M5 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16l-7-3.5L5 21V5z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),B=()=>a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M5 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16l-7-3.5L5 21V5z",fill:"currentColor"})}),W=()=>a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),$=({filled:e=!1})=>a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",style:{color:"currentColor"},fill:"none",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z",stroke:e?"none":"currentColor",fill:e?"currentColor":"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),D=({size:e=24,color:t="currentColor"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-heart-off-icon lucide-heart-off","aria-hidden":"true",style:{display:"block"},children:[a.jsx("path",{d:"M10.5 4.893a5.5 5.5 0 0 1 1.091.931.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 1.872-1.002 3.356-2.187 4.655"}),a.jsx("path",{d:"m16.967 16.967-3.459 3.346a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5a5.5 5.5 0 0 1 2.747-4.761"}),a.jsx("path",{d:"m2 2 20 20"})]}),O=()=>a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),V=({width:e=56,height:t=56})=>a.jsx("svg",{width:e,height:t,viewBox:"0 0 24 24",fill:"#000",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M5 3.868v16.264c0 .878.966 1.41 1.71.948l13.011-8.132a1.12 1.12 0 0 0 0-1.896L6.71 2.92C5.966 2.458 5 2.99 5 3.868z"})}),_=({width:e=56,height:t=56})=>a.jsxs("svg",{width:e,height:t,viewBox:"0 0 24 24",fill:"#000",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1"})]}),U=()=>a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"mr-2",children:[a.jsx("path",{d:"M11.5 12L20 18V6L11.5 12Z",transform:"scale(-1 1) translate(-31 0)",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),a.jsx("path",{d:"M6 6v12",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]}),F=()=>a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"ml-2",children:[a.jsx("path",{d:"M11.5 12L20 18V6L11.5 12Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),a.jsx("path",{d:"M6 6v12",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]}),Y=()=>a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),a.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),H=()=>a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}),a.jsx("path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}),a.jsx("path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}),a.jsx("path",{d:"M2 2l20 20"})]}),X=()=>a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"m17 2 4 4-4 4"}),a.jsx("path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}),a.jsx("path",{d:"m7 22-4-4 4-4"}),a.jsx("path",{d:"M21 13v1a4 4 0 0 1-4 4H3"})]}),J=()=>a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M13 21h8"}),a.jsx("path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"})]}),q=()=>a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M8 7h10v10H8z"}),a.jsx("path",{d:"M16 7v-2a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8"})]}),Q=()=>a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"}),a.jsx("path",{d:"M16 6l-4-4-4 4"}),a.jsx("path",{d:"M12 2v11"})]}),K=()=>a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"6",height:"6"}),a.jsx("rect",{x:"15",y:"3",width:"6",height:"6"}),a.jsx("rect",{x:"3",y:"15",width:"6",height:"6"}),a.jsx("path",{d:"M15 15h2v2h-2zM19 19h2v2h-2zM15 19h2v2h-2z"})]}),G=()=>a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("path",{d:"M7 10l5 5 5-5"}),a.jsx("path",{d:"M12 15V3"})]}),Z=({bg:e,children:t,label:r,onClick:n})=>a.jsxs("button",{"aria-label":r,onClick:n,className:"flex flex-col items-center text-xs",type:"button",children:[a.jsx("div",{style:{background:e},className:"w-12 h-12 rounded-full flex items-center justify-center mb-2",children:t}),a.jsx("div",{className:"text-gray-300 text-xs",children:r})]}),ee=()=>a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"}),a.jsx("path",{d:"M12 2v14"}),a.jsx("path",{d:"M8 6l4-4 4 4"})]}),te=e=>{if(!e)return 0;const t=String(e).split(":").map(e=>parseInt(e)||0);return 3===t.length?3600*t[0]+60*t[1]+t[2]:2===t.length?60*t[0]+t[1]:1===t.length?t[0]:0},re=({item:e,idx:t,filtered:r,onVideoClick:n,setToastMessage:o,toastTimerRef:i,sharePopoverFor:s,setSharePopoverFor:l,accentColor:c,accentText:d,makeShareLink:p,copyToClipboard:h,setShowShareModal:f,videoRef:g})=>{const[x,y]=u.useState(0),[v,b]=u.useState(e.thumbnail||e.imageUrl);return u.useEffect(()=>{let t=!1;const r=e.url||e.videoUrl;if(r){if((n=r)&&(n.includes("youtube.com")||n.includes("youtu.be"))){const n=te(e.time),o=("number"==typeof e.duration&&e.duration>0?e.duration:0)||n;o>0&&y(o);const a=(e=>{if(!e)return"";if(e.includes("youtu.be/"))return e.split("youtu.be/")[1].split(/[?&#]/)[0];if(e.includes("youtube.com"))try{return new URL(e).searchParams.get("v")||""}catch{return""}return""})(r);return a&&!v&&b(`https://img.youtube.com/vi/${a}/mqdefault.jpg`),void(o<=0&&a&&fetch(`https://noembed.com/embed?url=https://www.youtube.com/watch?v=${a}`).then(e=>e.json()).then(e=>{if(!t&&e&&e.duration){const t=te(String(e.duration));t>0&&y(t)}}).catch(()=>{}))}var n;try{const e=document.createElement("video");e.preload="metadata",e.crossOrigin="anonymous";const n=()=>{t||!e.duration||isNaN(e.duration)||y(Math.round(e.duration))};e.addEventListener("loadedmetadata",n,{once:!0}),e.src=m(r),e.load();const o=setTimeout(()=>{t||(e.pause(),e.src="")},5e3);return()=>{t=!0,clearTimeout(o),e.pause(),e.src=""}}catch(o){}}},[e.url,e.videoUrl]),a.jsxs("div",{onClick:n,role:"button",tabIndex:0,style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",transition:"all 200ms ease"},onMouseEnter:e=>e.currentTarget.style.background="#f9f9f9",onMouseLeave:e=>e.currentTarget.style.background="#fff",children:[a.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden flex-shrink-0",style:{background:v?`url(${encodeURI(v)}) center/cover no-repeat`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundColor:"#667eea"},children:a.jsx("div",{className:"absolute right-2 bottom-1 bg-black/70 text-white text-xs px-2 py-0.5 rounded",children:(()=>{const t=e.duration||x||0,r="number"==typeof t&&t>0?t:te(e.time);return`${Math.floor(r/60)}:${String(Math.floor(r%60)).padStart(2,"0")}`})()})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:700,lineHeight:"1.3"},children:e.title}),a.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:[e.creator," ",e.tags&&e.tags[0]?a.jsx("span",{style:{background:"#e6f2ff",color:"#2563eb",padding:"2px 6px",borderRadius:8,marginLeft:8,fontSize:11},children:e.tags[0]}):null]})]})]},e.id)};function ne({profileName:e,profileAvatar:t,textItems:r,textInterval:n,textAnimation:o,cardAnimation:i,cardEffect:s,link:l,borderColor:c,cardExitAnimation:d,duration:p}){const[h,m]=u.useState(0),[f,g]=u.useState(!0);u.useEffect(()=>{console.log("BottomAdPreviewBar received:",{profileName:e,textItems:r,textItemsLength:r?.length,textAnimation:o,cardAnimation:i,cardEffect:s,borderColor:c,cardExitAnimation:d,duration:p})},[e,r,o,i,s,c,d,p]),u.useEffect(()=>{if(!r||0===r.length)return;if(1===r.length)return;const e=setInterval(()=>{m(e=>(e+1)%r.length)},n||5e3);return()=>clearInterval(e)},[r,n]);const x=(()=>{const e={fade:"fadeInText 0.5s ease-in-out",slideLeft:"slideLeftText 0.5s ease-in-out",slideRight:"slideRightText 0.5s ease-in-out",bounce:"bounceText 0.5s ease-in-out",scale:"scaleText 0.5s ease-in-out"};return e[o]||e.fade})(),y=(()=>{const e={fade:"fadeInCard 0.5s ease-in-out",lineFirst:"linefirstCard 0.6s ease-in-out",slideDown:"slideDownCard 0.5s ease-in-out",bounceIn:"bounceInCard 0.6s ease-in-out",scaleUp:"scaleUpCard 0.5s ease-in-out"};let t=e[i]||e.fade;if(s&&"none"!==s){t=`${t}, ${s} ${{pulse:"2s",shake:"2s",glow:"2s",float:"2s",rotate:"2s"}[s]||"2s"} ease-in-out 0.5s infinite`}if(d&&"none"!==d){t=`${t}, ${{fadeOut:"fadeOut",slideOut:"slideOut",scaleDown:"scaleDown",bounceOut:"bounceOut",rotateOut:"rotateOut"}[d]||"fadeOut"} 0.5s ease-in-out ${p||30}s forwards`}return t})();let v="";if(r&&r.length>0){const e=r[h];"string"==typeof e?v=e:e&&"object"==typeof e&&(v=e.text||e.content||"")}return a.jsxs("div",{style:{animation:y,display:"flex",alignItems:"center",gap:"12px",backgroundColor:"rgba(255, 255, 255, 0.12)",borderRadius:"8px",padding:"12px 14px",minWidth:"280px",flex:"0 0 auto",borderTop:`2px solid ${c||"rgba(255, 255, 255, 0.2)"}`,border:"1.5px solid rgba(255, 255, 255, 0.25)",cursor:l?"pointer":"default",transition:"all 200ms ease",opacity:1,position:"relative"},onClick:()=>{l&&window.open(l,"_blank")},children:[a.jsx("div",{style:{width:"52px",height:"52px",borderRadius:"6px",backgroundColor:"#333",flexShrink:0,border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:t?a.jsx("img",{src:t,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},onError:e=>{e.target.style.display="none"}}):a.jsx("span",{style:{fontSize:"20px",opacity:.5},children:"ðŸ“·"})}),a.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"6px"},children:[a.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#ffffff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e||"Sponsored"}),a.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.75)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:"1.2",animation:x,minHeight:"16px"},children:v||"Check out our offer"},h)]}),a.jsx("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"18px",flexShrink:0,display:"flex",alignItems:"center"},children:"â†’"})]})}function oe({discoverItems:e=null,initialVideo:l=null,onChevronDown:h=null}={}){const N="undefined"!=typeof window&&localStorage.getItem("regaarder_language")||"English",te=t(),{accentColor:oe}=r(),[ae]=c(),ie=d(),se=l||ie&&ie.state&&ie.state.video||null,le=u.useRef(null),[ce,ue]=u.useState(!1),[pe,he]=u.useState(!1),[me,fe]=u.useState(!1),[ge,xe]=u.useState(!1),[ye,ve]=u.useState(!1),[be,we]=u.useState(!1),[je,ke]=u.useState(!1),Se=u.useRef(null),[Ne,Ce]=u.useState(se||null),[Te,Ee]=u.useState(()=>{if(se){const e=se.videoUrl||se.url||se.src||"";return e?e.includes("youtube.com")||e.includes("youtu.be")?e:m(e):""}return""}),Le=e=>e&&(e.includes("youtube.com")||e.includes("youtu.be")),Ie=e=>{if(!e)return"";if(e.includes("youtu.be/"))return e.split("youtu.be/")[1].split(/[?&#]/)[0];if(e.includes("youtube.com"))try{return new URL(e).searchParams.get("v")||""}catch{return""}return""},[Pe,Me]=u.useState(()=>{if(se){const e=se.videoUrl||se.url||se.src||"";return Le(e)}return!1}),[Ae,Re]=u.useState(()=>{if(se){const e=se.videoUrl||se.url||se.src||"";return Ie(e)}return""}),ze=u.useRef(null),[Be,We]=u.useState(!1),[$e,De]=u.useState(()=>se&&se.title||""),[Oe,Ve]=u.useState(()=>se&&se.author||""),[_e,Ue]=u.useState([]),[Fe,Ye]=u.useState(""),[He,Xe]=u.useState(!0);u.useEffect(()=>{try{const e=localStorage.getItem("videoplayer_quick_load");if(e){const t=JSON.parse(e);if(t.url&&(Le(t.url)?(Me(!0),Re(Ie(t.url)),Ee(t.url)):(Me(!1),Re(""),Ee(m(t.url))),t.title&&De(t.title),t.creator&&Ve(t.creator),t.creatorName&&Ve(t.creatorName),t.time)){const e=(t.time||"").split(":");if(2===e.length){const t=60*(parseInt(e[0])||0)+(parseInt(e[1])||0);t>0&&Et(t)}}localStorage.removeItem("videoplayer_quick_load")}}catch(e){console.error("Failed to load quick video data:",e)}},[]);const Je=e=>`vx:pref:${e}`,qe=(e,t)=>{const r=e,[n,o]=u.useState(()=>((e,t)=>{try{const r=localStorage.getItem(Je(e));return null===r?t:JSON.parse(r)}catch(r){return t}})(r,t));return u.useEffect(()=>{((e,t)=>{try{localStorage.setItem(Je(e),JSON.stringify(t))}catch(r){}})(r,n)},[r,n]),[n,o]},[Qe,Ke]=u.useState(!1),Ge=u.useRef(null),Ze=u.useRef(null),[et,tt]=u.useState(!1),[rt,nt]=u.useState(!1),ot=u.useRef(null),[at,it]=u.useState([]);u.useEffect(()=>{if(!Ne)return;const e=Ne.id||Ne.src||Ne.url||$e||null;if(!e)return;(async()=>{try{try{const t=localStorage.getItem("likedVideos");if(t){JSON.parse(t).some(t=>String(t.videoId)===String(e))&&tt(!0)}}catch{}const t=localStorage.getItem("regaarder_token");if(!t)return;const r=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,n=await fetch(`${r}/likes/status?videoId=${encodeURIComponent(e)}`,{headers:{Authorization:`Bearer ${t}`}});if(n.ok){const e=await n.json();"boolean"==typeof e.liked&&tt(e.liked),"boolean"==typeof e.disliked&&nt(e.disliked)}}catch(t){}})()},[Ne,$e]);const st=e=>{try{e?.stopPropagation?.()}catch{}me?(fe(!1),Ke(!1),Ge.current&&(clearTimeout(Ge.current),Ge.current=null),Ze.current&&(clearTimeout(Ze.current),Ze.current=null),we(!1),xe(!1),ve(!1),ct(!0)):(fe(!0),ct(!0))},[lt,ct]=u.useState(!0),[dt,ut]=u.useState(!0),pt=u.useRef(null),ht=e=>{if(Pe&&ze.current&&Tt>0){try{const t=mt*Tt,r=Math.max(0,Math.min(Tt,t+e));ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[r,!0]}),"*"),ft(r/Tt),It.current=r,Pt.current=Date.now()}catch{}return}const t=bt.current;if(t&&"number"==typeof t.currentTime&&t.duration){const r=Math.max(0,Math.min(t.duration,(t.currentTime||0)+e));try{t.currentTime=r}catch{}}},[mt,ft]=u.useState(.05),gt=u.useRef(null),xt=u.useRef(!1),[yt,vt]=u.useState(!1),bt=u.useRef(null),[wt,jt]=u.useState(0),[kt,St]=u.useState(!1),[Nt,Ct]=u.useState(!1),[Tt,Et]=u.useState(0),Lt=u.useRef(null);u.useEffect(()=>{if(Pe&&0===Tt)if(se&&se.duration&&se.duration>0)Et(se.duration);else if(se&&se.time){const e=(se.time||"").split(":");if(2===e.length){const t=60*(parseInt(e[0])||0)+(parseInt(e[1])||0);t>0&&Et(t)}}},[Pe,se]),u.useEffect(()=>{if(!Pe||!Ae)return;We(!1);const e=setTimeout(()=>{St(!0),We(!0)},2e3),t=e=>{try{if("string"!=typeof e.data)return;const t=JSON.parse(e.data);if("infoDelivery"===t.event&&t.info){const e=t.info;if(e.duration&&e.duration>0&&Et(t=>{if(t!==e.duration){try{Ae&&localStorage.setItem(`yt_dur_${Ae}`,String(Math.floor(e.duration)))}catch{}return e.duration}return t}),"number"==typeof e.currentTime&&e.currentTime>=0){const t=e.duration||Tt;It.current=e.currentTime,Pt.current=Date.now(),t>0&&!xt.current&&ft(e.currentTime/t)}if("number"==typeof e.playerState)if(1===e.playerState)St(!0),We(!0);else if(2===e.playerState)St(!1);else if(0===e.playerState&&!Ht.current)try{const e=ze.current&&ze.current.contentWindow;if(e){e.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[0,!0]}),"*");!!JSON.parse(localStorage.getItem("loopVideo")||"false")?(e.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*"),St(!0)):(e.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*"),St(!1),"function"==typeof Lt.current&&Lt.current())}}catch{St(!1)}}if("onStateChange"===t.event&&"number"==typeof t.info)if(1===t.info)St(!0),We(!0);else if(2===t.info)St(!1);else if(0===t.info&&!Ht.current)try{const e=ze.current&&ze.current.contentWindow;if(e){e.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[0,!0]}),"*");!!JSON.parse(localStorage.getItem("loopVideo")||"false")?(e.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*"),St(!0)):(e.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*"),St(!1),"function"==typeof Lt.current&&Lt.current())}}catch{St(!1)}}catch{}};window.addEventListener("message",t);const r=()=>{try{ze.current&&ze.current.contentWindow&&ze.current.contentWindow.postMessage(JSON.stringify({event:"listening"}),"*")}catch{}},n=()=>{try{if(Ht.current)return;ze.current&&ze.current.contentWindow&&(ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"unMute"}),"*"),ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"setVolume",args:[100]}),"*"))}catch{}},o=()=>{try{if(Ht.current)return;ze.current&&ze.current.contentWindow&&ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*")}catch{}},a=setTimeout(r,500),i=setTimeout(r,1500),s=setTimeout(r,3e3),l=setInterval(r,1e3),c=setTimeout(()=>{o(),n()},800),d=setTimeout(()=>{o(),n()},2e3),u=setTimeout(()=>{o(),n()},3500),p=[];if(qn>0){const e=()=>{try{ze.current&&ze.current.contentWindow&&(ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[qn,!0]}),"*"),It.current=qn,Pt.current=Date.now(),ft(Tt>0?qn/Tt:0))}catch{}};p.push(setTimeout(e,1200)),p.push(setTimeout(e,2500)),p.push(setTimeout(e,4e3))}return()=>{clearTimeout(e),clearTimeout(a),clearTimeout(i),clearTimeout(s),clearInterval(l),clearTimeout(c),clearTimeout(d),clearTimeout(u),p.forEach(e=>clearTimeout(e)),window.removeEventListener("message",t)}},[Pe,Ae]);const It=u.useRef(0),Pt=u.useRef(Date.now()),Mt=u.useRef(!1);u.useEffect(()=>{Mt.current=kt},[kt]),u.useEffect(()=>{if(!Pe||!Ae)return;const e=setInterval(()=>{if(!Mt.current||xt.current||Tt<=0)return;const e=(Date.now()-Pt.current)/1e3,t=It.current+e;t>=0&&t<=Tt&&ft(t/Tt)},250);return()=>clearInterval(e)},[Pe,Ae,Tt]),u.useEffect(()=>{if(Te&&Le(Te)&&!Pe){Me(!0);const e=Ie(Te);e&&Re(e)}},[Te,Pe]),u.useEffect(()=>{if(!Te||Pe)return;const e=bt.current;if(!e)return;const t=setTimeout(()=>{try{0===e.readyState&&Te&&e.load()}catch{}},50);return()=>clearTimeout(t)},[Te,Pe]);const[At,Rt]=u.useState([]),[zt,Bt]=u.useState([]);u.useLayoutEffect(()=>{try{bt.current&&jt(e=>e+1)}catch{}},[]),u.useEffect(()=>{try{bt.current&&jt(e=>e+1)}catch{}},[Te]);const[Wt,$t]=u.useState([]),[Dt,Ot]=u.useState([]),Vt=u.useRef(new Set),_t=u.useRef(new Set),Ut=u.useCallback(e=>{Vt.current.add(e),Ot(t=>t.filter(t=>t.id!==e))},[]),Ft=u.useRef(!1),Yt=u.useRef(!1),Ht=u.useRef(!1);u.useEffect(()=>{const e=Dt&&Dt.some(e=>"overlay"===e.type);if(e&&!Ht.current){if(Ht.current=!0,Ft.current=kt,Pe&&ze.current)try{ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*"),ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"mute"}),"*")}catch{}const e=bt.current;if(e){Yt.current=e.muted,e.muted=!0;try{e.pause()}catch{}}St(!1)}else if(!e&&Ht.current){if(Ht.current=!1,Pe&&ze.current){const e=()=>{try{ze.current&&ze.current.contentWindow&&(ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"unMute"}),"*"),ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"setVolume",args:[100]}),"*"),ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*"))}catch{}};e(),setTimeout(e,300),setTimeout(e,800),setTimeout(e,1500),St(!0)}const e=bt.current;if(e){e.muted=!1;try{e.play()}catch{}St(!0)}}},[Dt,Pe]);const[Xt,Jt]=u.useState("landscape"),[qt,Qt]=u.useState(16/9),[Kt,Gt]=u.useState(!1),[Zt,er]=u.useState(!1),[tr,rr]=qe("discover:query",""),[nr,or]=qe("discover:selectedChip","All Videos"),[ar,ir]=u.useState(null);u.useEffect(()=>{if(e)return;let t=!1;try{const e=localStorage.getItem("discoverAllVideos");if(e&&e.trim()){const r=JSON.parse(e);if(Array.isArray(r)&&r.length>0)return void(t||ir(r))}}catch(r){}return n(()=>import("./home-Bm5sJ1cs.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47])).then(e=>{if(t)return;const r=e.default||e.homeVideos||e.VIDEOS||e.discoverItems||null;Array.isArray(r)&&ir(r)}).catch(()=>{}),()=>{t=!0}},[e]);const sr=u.useRef([]),[lr,cr]=u.useState(-1),dr=sr,ur=u.useRef(-1),pr=u.useRef(0);u.useEffect(()=>{try{const t=localStorage.getItem("videoplayer_source"),r=localStorage.getItem("videoplayer_index");if(t){const n=JSON.parse(t);if(Array.isArray(n)&&n.length)if(dr.current=n,null==r||void 0===r||isNaN(parseInt(r,10)))try{const e=se&&(se.id||se.url||se.videoUrl)||ae.get("id")||null;if(e){const t=n.findIndex(t=>String(t)===String(e));-1!==t&&(ur.current=t,cr(t))}}catch(e){}else ur.current=parseInt(r,10),cr(ur.current)}}catch(e){}},[se,ae]),u.useEffect(()=>{const t=t=>{try{const o=Date.now();if(o-pr.current<650)return;const a=t.deltaY<0?1:-1,i=dr.current||[];try{console.debug&&console.debug("wheel nav: list length",i&&i.length||0)}catch{}if(!i||!i.length)return;let s=ur.current;"number"!=typeof s&&(s=-1);const l=s+a;if(l<0||l>=i.length)return;pr.current=o;const c=i[l];let d=null;try{const t=e&&e.length?e:ar||[];Array.isArray(t)&&(d=t.find(e=>e.id&&String(e.id)===String(c)||e.url&&String(e.url)===String(c)||e.videoUrl&&String(e.videoUrl)===String(c))),d||n(()=>import("./home-Bm5sJ1cs.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47])).then(e=>{const t=e.default||e.VIDEOS||e.homeVideos||e.discoverItems||null;if(Array.isArray(t)){const e=t.find(e=>e.id&&String(e.id)===String(c)||e.url&&String(e.url)===String(c)||e.videoUrl&&String(e.videoUrl)===String(c));e&&(d=e)}}).catch(()=>{})}catch(r){}if(d){ur.current=l,cr(l);try{De(d.title||"Video")}catch{}try{Ve(d.creator||d.channel||"")}catch{}try{const e=d.url||d.videoUrl||d.src||"";if(Le(e)?(Me(!0),Re(Ie(e)),Ee(e)):(Me(!1),Re(""),Ee(m(e))),d.time){const e=(d.time||"").split(":");if(2===e.length){const t=60*(parseInt(e[0])||0)+(parseInt(e[1])||0);t>0&&Et(t)}}}catch{}try{ct(!0),ji(1600)}catch{}try{Cn("Next video")}catch{}}else if("string"==typeof c&&/^(https?:)?\/\//.test(c)){ur.current=l,cr(l);try{Le(c)?(Me(!0),Re(Ie(c)),Ee(c)):(Me(!1),Re(""),Ee(m(c))),De("Video"),Ve("")}catch{}}}catch(r){}};return window.addEventListener("wheel",t,{passive:!0}),()=>window.removeEventListener("wheel",t)},[ar,e]),u.useEffect(()=>{const e=e=>{try{const t=e&&e.detail?e.detail:null;"string"==typeof t&&t!==nr&&or(t)}catch{}},t=e=>{try{const t=e&&e.detail?e.detail:null;"string"==typeof t&&t!==tr&&rr(t)}catch{}};return window.addEventListener("discover:chip",e),window.addEventListener("discover:query",t),()=>{window.removeEventListener("discover:chip",e),window.removeEventListener("discover:query",t)}},[nr,tr,or,rr]),u.useEffect(()=>{try{window.dispatchEvent(new CustomEvent("discover:chip",{detail:nr}))}catch{}},[nr]),u.useEffect(()=>{try{window.dispatchEvent(new CustomEvent("discover:query",{detail:tr}))}catch{}},[tr]),Boolean(e&&e.length||ar&&ar.length);const hr=u.useRef(null),mr=u.useRef(null),[fr,gr]=u.useState("#000000"),xr=u.useRef(!1),[yr,vr]=u.useState(!1),[br,wr]=u.useState(0),[jr,kr]=u.useState(0),[Sr,Nr]=u.useState({w:160,h:90}),Cr=u.useRef(null),Tr=e=>{const t=gt.current;if(!t)return;const r=t.getBoundingClientRect(),n=Math.max(0,Math.min(1,(e-r.left)/r.width));ft(n);const o=Sr.w,a=Sr.h,i=r.left+n*r.width,s=r.top-a-10;wr(Math.max(8,i-o/2)),kr(Math.max(8,s));const l=Cr.current;if(l&&Tt>0)try{xr.current=!0,l.currentTime=n*Tt}catch{}};u.useEffect(()=>{const e=Cr.current;if(!e)return;const t=()=>{yr&&xr.current&&((()=>{const e=Cr.current,t=hr.current;if(!e||!t)return;const r=t.getContext("2d"),{w:n,h:o}=Sr;t.width=n,t.height=o;const a=e.videoWidth||n,i=e.videoHeight||o,s=Math.min(n/a,o/i),l=a*s,c=i*s,d=(n-l)/2,u=(o-c)/2;r.fillStyle="#000",r.fillRect(0,0,n,o);try{r.drawImage(e,0,0,a,i,d,u,l,c)}catch{}})(),xr.current=!1)};return e.addEventListener("seeked",t),()=>e.removeEventListener("seeked",t)},[yr,Sr]),u.useEffect(()=>{try{const e=Cr.current;if(!e)return;if(yr&&void 0!==Te&&Te){if(e.src!==Te){e.src=Te;try{e.load()}catch{}}}else{try{e.pause()}catch{}try{e.removeAttribute&&e.removeAttribute("src"),e.load&&e.load()}catch{}}}catch(e){}},[yr,Te]);const Er=u.useCallback(()=>{try{const t=bt.current;if(!t||t.readyState<2)return;mr.current||(mr.current=document.createElement("canvas"));const r=mr.current,n=32,o=32;r.width=n,r.height=o;const a=r.getContext("2d",{willReadFrequently:!0});try{a.drawImage(t,0,0,n,o)}catch(e){return}const i=a.getImageData(0,0,n,o).data,s=new Map;let l=0,c=null;for(let e=0;e<i.length;e+=4){const t=i[e],r=i[e+1],n=i[e+2];if(i[e+3]<40)continue;const o=t>>3<<10|r>>3<<5|n>>3,a=(s.get(o)||0)+1;s.set(o,a),a>l&&(l=a,c=o)}if(null==c)return;const d=c>>10&31,u=c>>5&31,p=31&c,h=u<<3|u>>2,m=p<<3|p>>2,f=e=>e.toString(16).padStart(2,"0"),g=`#${f(d<<3|d>>2)}${f(h)}${f(m)}`;gr(g)}catch(t){}},[bt]);u.useEffect(()=>{let e=null;return kt&&(Er(),e=setInterval(Er,1200)),()=>{e&&clearInterval(e)}},[kt,Er]),u.useEffect(()=>{const e=e=>{if(!xt.current)return;const t=e.clientX||e.touches&&e.touches[0]?.clientX;t&&Tr(t)},t=()=>{if(xt.current)if(xt.current=!1,vt(!1),setTimeout(()=>vr(!1),200),Pe&&ze.current&&Tt>0)try{const e=mt*Tt;ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[e,!0]}),"*")}catch{}else{const e=bt.current;if(e&&Tt>0)try{e.currentTime=mt*Tt}catch{}}};return window.addEventListener("pointermove",e),window.addEventListener("pointerup",t),()=>{window.removeEventListener("pointermove",e),window.removeEventListener("pointerup",t)}},[Tt,Sr,mt]);const[Lr,Ir]=u.useState(!1),[Pr,Mr]=u.useState(!1),[Ar,Rr]=u.useState(""),[zr,Br]=u.useState(""),[Wr,$r]=u.useState(.62*window.innerHeight),Dr=u.useRef(.32*window.innerHeight),Or=u.useRef(.95*window.innerHeight),Vr=u.useRef({dragging:!1,startY:0,startHeight:0}),[_r,Ur]=u.useState(.62*window.innerHeight),Fr=u.useRef(.32*window.innerHeight),Yr=u.useRef(.95*window.innerHeight),Hr=u.useRef({dragging:!1,startY:0,startHeight:0}),[Xr,Jr]=u.useState(.7*window.innerHeight),qr=u.useRef(.3*window.innerHeight),Qr=u.useRef(.95*window.innerHeight),Kr=u.useRef({dragging:!1,startY:0,startHeight:0}),[Gr,Zr]=qe("tipHeight",.58*window.innerHeight),en=u.useRef(.28*window.innerHeight),tn=u.useRef(.95*window.innerHeight),rn=u.useRef({dragging:!1,startY:0,startHeight:0}),nn=e=>{e.preventDefault();const t=e.clientY??(e.touches&&e.touches[0]?.clientY);Vr.current.dragging=!0,Vr.current.startY=t,Vr.current.startHeight=Wr,window.addEventListener("pointermove",on),window.addEventListener("pointerup",an)},on=e=>{if(!Vr.current.dragging)return;const t=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof t)return;const r=Vr.current.startY-t;let n=Vr.current.startHeight+r;n=Math.max(Dr.current,Math.min(Or.current,n)),$r(n)},an=e=>{Vr.current.dragging&&(Vr.current.dragging=!1,window.removeEventListener("pointermove",on),window.removeEventListener("pointerup",an))},sn=e=>{e.preventDefault();const t=e.clientY??(e.touches&&e.touches[0]?.clientY);Hr.current.dragging=!0,Hr.current.startY=t,Hr.current.startHeight=_r,window.addEventListener("pointermove",ln),window.addEventListener("pointerup",cn)},ln=e=>{if(!Hr.current.dragging)return;const t=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof t)return;const r=Hr.current.startY-t;let n=Hr.current.startHeight+r;n=Math.max(Fr.current,Math.min(Yr.current,n)),Ur(n)},cn=e=>{Hr.current.dragging&&(Hr.current.dragging=!1,window.removeEventListener("pointermove",ln),window.removeEventListener("pointerup",cn))},dn=e=>{e.preventDefault();const t=e.clientY??(e.touches&&e.touches[0]?.clientY);Kr.current.dragging=!0,Kr.current.startY=t,Kr.current.startHeight=Xr,window.addEventListener("pointermove",un),window.addEventListener("pointerup",pn)},un=e=>{if(!Kr.current.dragging)return;const t=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof t)return;const r=Kr.current.startY-t;let n=Kr.current.startHeight+r;n=Math.max(qr.current,Math.min(Qr.current,n)),Jr(n)},pn=e=>{Kr.current.dragging&&(Kr.current.dragging=!1,window.removeEventListener("pointermove",un),window.removeEventListener("pointerup",pn))},hn=e=>{e.preventDefault();const t=e.clientY??(e.touches&&e.touches[0]?.clientY);rn.current.dragging=!0,rn.current.startY=t,rn.current.startHeight=Gr,window.addEventListener("pointermove",mn),window.addEventListener("pointerup",fn)},mn=e=>{if(!rn.current.dragging)return;const t=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof t)return;const r=rn.current.startY-t;let n=rn.current.startHeight+r;n=Math.max(en.current,Math.min(tn.current,n)),Zr(n)},fn=e=>{rn.current.dragging&&(rn.current.dragging=!1,window.removeEventListener("pointermove",mn),window.removeEventListener("pointerup",fn))};u.useEffect(()=>()=>{window.removeEventListener("pointermove",on),window.removeEventListener("pointerup",an),window.removeEventListener("pointermove",ln),window.removeEventListener("pointerup",cn),window.removeEventListener("pointermove",un),window.removeEventListener("pointerup",pn),window.removeEventListener("pointermove",mn),window.removeEventListener("pointerup",fn)},[]),u.useEffect(()=>{const e=e=>{try{const t=e.target&&e.target.closest&&e.target.closest("button");if(!t)return;if(!t.closest(".modal-dialog"))return;t.setAttribute("data-pressed","true")}catch{}},t=()=>{try{document.querySelectorAll(".modal-dialog button[data-pressed]").forEach(e=>e.removeAttribute("data-pressed"))}catch{}};return window.addEventListener("pointerdown",e,{passive:!0}),window.addEventListener("pointerup",t),window.addEventListener("pointercancel",t),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("pointerup",t),window.removeEventListener("pointercancel",t)}},[]),u.useEffect(()=>{if(se)try{const e=se.videoUrl||se.url||se.src||"";e&&(Le(e)?(Ee(e),Me(!0),Re(Ie(e))):(Ee(m(e)),Me(!1),Re(""))),se.title&&De(se.title),se.author&&Ve(se.author);try{null!=se.seekTo&&(Jn.current=se.seekTo)}catch{}}catch(e){}},[se]),u.useEffect(()=>{const e=ae.get("src"),t=ae.get("title"),r=ae.get("channel");se&&Te||(e&&!Te&&(Le(e)?(Ee(e),Me(!0),Re(Ie(e))):(Ee(m(e)),Me(!1),Re(""))),t&&!$e&&De(t),r&&!Oe&&Ve(r))},[ae,se,Te]),u.useEffect(()=>{Ne&&Ne.overlays&&Array.isArray(Ne.overlays)?Rt(Ne.overlays):Rt([])},[Ne]),u.useEffect(()=>{if(!bt.current||0===At.length)return void Bt([]);const e=bt.current.currentTime,t=At.filter(t=>{const r=t.timeSec,n=t.timeSec+(t.durationSec||3);return e>=r&&e<n});Bt(t)},[At]),u.useEffect(()=>{const e=bt.current;if(!e)return;const t=()=>{const t=e.currentTime,r=At.filter(e=>{const r=e.timeSec,n=e.timeSec+(e.durationSec||3);return t>=r&&t<n});Bt(r)};return e.addEventListener("timeupdate",t),()=>e.removeEventListener("timeupdate",t)},[At]),u.useEffect(()=>{let e=[];console.log("[ADS] videoInfo:",Ne?{id:Ne.id,title:Ne.title,hasAds:!!Ne.ads,adsType:typeof Ne.ads,adsKeys:Ne.ads?Object.keys(Ne.ads):"N/A"}:"null");const t=e=>e&&"default2"===e.type?{...e,default2Title:e.default2Title||e.title||"",default2Description:e.default2Description||e.description||"",default2Logo:e.default2Logo||e.logo||e.image||"",default2Image:e.default2Image||e.image||e.logo||"",default2Link:e.default2Link||e.link||"",default2BgColor:e.default2BgColor||e.bgColor||"#ffffff",default2TextColor:e.default2TextColor||e.textColor||"#111827",default2LineColor:e.default2LineColor||e.lineColor||"#d946ef"}:e;if(Ne&&Ne.ads&&(Array.isArray(Ne.ads.bottom)&&(e=[...e,...Ne.ads.bottom.map(t)]),Array.isArray(Ne.ads.overlays))){const t=Ne.ads.overlays.map(e=>({...e,type:e.type||"overlay"}));e=[...e,...t]}Ne&&Array.isArray(Ne.ads)&&Ne.ads.length>0&&!Ne.ads[0].type&&(e=[...e,...Ne.ads.map(t)]),console.log("Loaded ads:",e.length,e),$t(e);const r=e.filter(e=>0===(e.startTime||0));r.length>0&&(console.log("Immediate ad display for:",r),Ot(r))},[Ne]),u.useEffect(()=>{if(!bt.current)return;const e=bt.current.currentTime,t=Vt.current,r=Wt.filter(r=>{if(t.has(r.id))return!1;const n=r.startTime||0,o=n+(r.duration||3);return e>=n&&e<o});r.length>0&&Ot(r)},[Wt]),u.useEffect(()=>{const e=bt.current;if(!e)return;const t=()=>{const t=e.currentTime,r=Vt.current,n=Wt.filter(e=>{if(r.has(e.id))return!1;const n=e.startTime||0,o=n+(e.duration||3);return t>=n&&t<o});Ot(n)};return e.addEventListener("timeupdate",t),()=>e.removeEventListener("timeupdate",t)},[Wt]),u.useEffect(()=>{if(!Pe||0===Wt.length)return;const e=setInterval(()=>{if(Ht.current)return;const e=It.current,t=Vt.current,r=Wt.filter(r=>{if(t.has(r.id))return!1;const n=r.startTime||0;if(0===n)return!1;const o=n+(r.duration||3);return e>=n&&e<o});r.length>0&&Ot(r)},500);return()=>clearInterval(e)},[Pe,Wt]),u.useEffect(()=>{Dt.filter(e=>"default2"===e.type&&e.id&&!_t.current.has(e.id)).forEach(e=>{_t.current.add(e.id);const t=1e3*(e.duration||10);setTimeout(()=>{Vt.current.has(e.id)||Ut(e.id)},t)})},[Dt,Ut]);const[gn,xn]=u.useState(!1),[yn,vn]=u.useState(0),[bn,wn]=u.useState(!1),[jn,kn]=u.useState(""),Sn=u.useRef(null),Nn=u.useRef(!1),Cn=u.useCallback(e=>{const t="vx:swipe-toast-seen";try{localStorage.getItem(t)&&(Nn.current=!0)}catch{}if(!Nn.current){Nn.current=!0;try{localStorage.setItem(t,"1")}catch{}kn(e),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1600)}},[]),Tn=u.useRef(null),En=u.useRef(null),Ln=async e=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(e);else{const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}wn(!0),setTimeout(()=>wn(!1),1500),kn("Link copied"),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1600)}catch{}},In=(e,t)=>{try{localStorage.setItem((e=>`notes:${e}`)(e),JSON.stringify(t))}catch{}},Pn=e=>`bookmarks:${e}`,Mn=e=>{try{const t=localStorage.getItem(Pn(e));return t?JSON.parse(t):[]}catch{return[]}},An=(e,t)=>{try{localStorage.setItem(Pn(e),JSON.stringify(t))}catch{}},[Rn,zn]=u.useState(!1),[Bn,Wn]=u.useState(""),[$n,Dn]=u.useState(0),[On,Vn]=u.useState(0),[_n,Un]=u.useState(0),[Fn,Yn]=u.useState(!1),[Hn,Xn]=u.useState([]),Jn=u.useRef(null),[qn,Qn]=u.useState(()=>{try{const e=new URLSearchParams(window.location.search||"").get("t");if(null!=e){const t=parseInt(e,10);if(!isNaN(t)&&t>0)return t}}catch{}try{if(se&&se.seekTo>0)return Math.floor(se.seekTo)}catch{}return 0}),[Kn,Gn]=u.useState(null);u.useEffect(()=>{function e(e){try{const t=Kn;if(!t)return;const r=e.target;if(r&&r.closest&&r.closest(`[data-share-anchor="${t}"]`))return;if(r&&r.closest&&r.closest(`[data-share-key="${t}"]`))return;Gn(null)}catch{}}return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[Kn]);const Zn=(e,t)=>{try{return`${window.location?`${window.location.origin}${window.location.pathname}`:""}?video=${encodeURIComponent(e)}&t=${Math.max(0,Math.floor(t||0))}`}catch{return e}},[eo,to]=u.useState(!1),[ro,no]=u.useState({show:!1,x:0,y:0}),[oo,ao]=u.useState(!1),io=u.useRef(null),so=u.useRef(null),lo=()=>{try{const e=bt.current,t=e?Math.floor(e.currentTime||0):Math.floor(mt*Tt||0);Dn(t),Vn(Math.max(0,t-5)),Un(Math.min(Tt,t+15)),Wn(""),Yn(!1),zn(!0)}catch{}};u.useEffect(()=>{try{const e=new URLSearchParams(window.location.search||""),t=e.get("video"),r=e.get("t");if(t){try{Ee(m(decodeURIComponent(t)))}catch{Ee(m(t))}if(null!=r){const e=parseInt(r,10);Number.isNaN(e)||(Jn.current=e)}}}catch{}},[]),u.useEffect(()=>{try{if(!Te)return void Xn([]);const e=Mn(Te)||[];if(Xn(e),null!=Jn.current){const e=Jn.current;Jn.current=null,setTimeout(()=>{try{if(Pe&&ze.current&&ze.current.contentWindow)return ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[e,!0]}),"*"),Qn(e),It.current=e,Pt.current=Date.now(),void(Tt>0&&ft(e/Tt));const t=bt.current;if(t){try{t.src=m(Te)}catch{}try{t.currentTime=Math.max(0,e)}catch{}try{ct(!0),ji(2e3)}catch{}}}catch{}},180)}}catch{}},[Te]);const co=(e=1800)=>{Wi.current&&(clearTimeout(Wi.current),Wi.current=null),Wi.current=setTimeout(()=>{Ri(!1),Wi.current=null},e)},uo=e=>{const t=Math.max(0,Math.floor(e||0));return`${Math.floor(t/60)}:${String(t%60).padStart(2,"0")}`},po=e=>{try{e?.stopPropagation?.()}catch{}try{navigator.vibrate&&navigator.vibrate(12)}catch{}setTimeout(()=>{try{window.location.href="./watchtogether.jsx"}catch{}},50)},[ho,mo]=u.useState(!1),[fo,go]=u.useState(""),[xo,yo]=u.useState(!1),vo="undefined"!=typeof window?window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`:"http://localhost:4000";u.useEffect(()=>{try{if(!Te)return void yo(!1);const e=localStorage.getItem("regaarder_token");fetch(`${vo}/bookmarks`,{headers:e?{Authorization:`Bearer ${e}`}:{}}).then(e=>e.json()).then(e=>{if(e&&e.success){const t=Array.isArray(e.videos)&&e.videos.some(e=>String(e.videoUrl)===String(Te));yo(!!t)}}).catch(()=>{})}catch{}},[Te]);const[bo,wo]=u.useState(!1),[jo,ko]=qe("captionsEnabled",!1),[So,No]=qe("captionLanguage","English"),[Co,To]=qe("captionFontSize",16),[Eo,Lo]=qe("captionPosition","Bottom"),[Io,Po]=qe("captionTextColor","#FFFFFF"),[Mo,Ao]=qe("captionBgOpacity","100% Black"),[Ro,zo]=u.useState(o("Example subtitle text","undefined"!=typeof window&&localStorage.getItem("regaarder_language")||"English")),[Bo,Wo]=u.useState(!1),[$o,Do]=u.useState(!1),[Oo,Vo]=u.useState(!1),[_o,Uo]=u.useState(!1),[Fo,Yo]=u.useState(!1),[Ho,Xo]=u.useState(!1),[Jo,qo]=u.useState(!1),[Qo,Ko]=u.useState(!1),[Go,Zo]=u.useState("Iâ€™d like a video about â€¦"),[ea,ta]=u.useState(!1),[ra,na]=u.useState(!1);ra||(Go||"").length,Math.min((Go||"").length/120,1);const[oa,aa]=u.useState(!1),[ia,sa]=u.useState(!1),la=u.useRef({startX:0,startY:0}),[ca,da]=u.useState(0),ua=u.useRef(!1);u.useEffect(()=>{try{localStorage.getItem("vx:hint:gesture")||(sa(!0),da(0))}catch{}},[]),u.useEffect(()=>{if(ce)try{const e="handleHintShownOptions";localStorage.getItem(e)||(Wo(!0),setTimeout(()=>Wo(!1),3400),localStorage.setItem(e,"1"))}catch{}},[ce]),u.useEffect(()=>{if(bo)try{const e="handleHintShownCaptions";localStorage.getItem(e)||(Do(!0),setTimeout(()=>Do(!1),3400),localStorage.setItem(e,"1"))}catch{}},[bo]),u.useEffect(()=>{if(Lr)try{const e="handleHintShownShare";localStorage.getItem(e)||(Vo(!0),setTimeout(()=>Vo(!1),3400),localStorage.setItem(e,"1"))}catch{}},[Lr]),u.useEffect(()=>{if(gn)try{const e="handleHintShownTip";localStorage.getItem(e)||(Uo(!0),setTimeout(()=>Uo(!1),3400),localStorage.setItem(e,"1"))}catch{}},[gn]),u.useEffect(()=>{if(Pr)try{const e="handleHintShownReport";localStorage.getItem(e)||(Yo(!0),setTimeout(()=>Yo(!1),3400),localStorage.setItem(e,"1"))}catch{}},[Pr]);const[pa,ha]=u.useState(!1),[ma,fa]=u.useState(!1);u.useEffect(()=>{if(ma)try{const e="handleHintShownNotes";localStorage.getItem(e)||(Xo(!0),setTimeout(()=>Xo(!1),3400),localStorage.setItem(e,"1"))}catch{}},[ma]),u.useEffect(()=>{try{const e="handleHintShownQuickOptions";if(localStorage.getItem(e))return;let t=null;try{t=ua.current}catch{}!0!==t||ia||qo(!0);try{ua.current=ia}catch{}}catch{}},[ia]);const[ga,xa]=qe("progressColor",oe||"#9333ea"),[ya,va]=qe("loopVideo",!1),[ba,wa]=qe("autoPlayEnabled",!0);u.useEffect(()=>{const e=bt.current;if(!e||!Te||!ba)return;if(Pe)return;let t=!1;const r=async()=>{if(t)return;if(Ht.current)return;const e=bt.current;if(e)try{if(e.muted=!0,e.playsInline=!0,e.autoplay=!0,e.preload="auto",0===e.readyState){const t=m(Te);if(t){if(e.src!==t)try{e.src=t}catch{}try{e.load()}catch{}}}const r=e.play();if(r&&"function"==typeof r.then&&(await r,!t)){St(!0);try{e.muted=!1,e.volume=1}catch{}}}catch{}},n=()=>{r()},o=()=>{"visible"===document.visibilityState&&r()};try{e.addEventListener("canplay",n)}catch{}try{e.addEventListener("loadeddata",n)}catch{}try{document.addEventListener("visibilitychange",o)}catch{}return e.readyState>=2?r():(setTimeout(()=>{r()},150),setTimeout(()=>{r()},600),setTimeout(()=>{r()},1500)),()=>{t=!0;try{e.removeEventListener("canplay",n)}catch{}try{e.removeEventListener("loadeddata",n)}catch{}try{document.removeEventListener("visibilitychange",o)}catch{}}},[Te,ba,wt,Pe]),u.useEffect(()=>{const e=setTimeout(async()=>{try{const e=localStorage.getItem("regaarder_token");if(!e)return;const t=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;await fetch(`${t}/users/preferences`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({preferences:{progressColor:ga}})})}catch(e){}},2e3);return()=>clearTimeout(e)},[ga]);const ja=(e,t=1)=>{let r=e.replace("#","").trim();3===r.length&&(r=r.split("").map(e=>e+e).join(""));return`rgba(${parseInt(r.substr(0,2),16)}, ${parseInt(r.substr(2,2),16)}, ${parseInt(r.substr(4,2),16)}, ${t})`},ka=ga,Sa="#9333ea",Na=ja(ga,.06),Ca=(e=>{let t=e.replace("#","").trim();3===t.length&&(t=t.split("").map(e=>e+e).join(""));return.2126*(parseInt(t.substr(0,2),16)/255)+.7152*(parseInt(t.substr(2,2),16)/255)+.0722*(parseInt(t.substr(4,2),16)/255)>.6?"#000":"#fff"})(ga),[Ta,Ea]=qe("darkMode",!0),[La,Ia]=qe("selectedQuality","480p"),[Pa,Ma]=u.useState("Auto"===La),Aa=u.useRef({}),Ra=u.useRef("480p"),za=()=>{try{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(!e)return"480p";const t=e.effectiveType,r=e.downlink;return"4g"===t&&r>=10?"1440p":"4g"===t&&r>=5?"1080p":"4g"===t&&r>=2.5||"3g"===t&&r>=2.5?"720p":"3g"===t||r>=1.5?"480p":"2g"===t||r>=.5?"360p":"240p"}catch(e){return"480p"}};u.useEffect(()=>{if("Auto"!==La)return void Ma(!1);Ma(!0);const e=bt.current;if(!e)return;const t=za();Ra.current=t;const r=navigator.connection||navigator.mozConnection||navigator.webkitConnection,n=()=>{const t=za();if(t!==Ra.current&&(Ra.current=t,!e.paused))try{const r=Ba(t);if(r&&(e.currentSrc||e.src||"").split("?")[0]!==r.split("?")[0]){const t=e.currentTime||0;e.pause(),e.src=m(r),e.load(),e.currentTime=Math.max(0,Math.min(t,e.duration||1/0)),e.play().catch(()=>{})}}catch(r){}};return r?(r.addEventListener("change",n),()=>r.removeEventListener("change",n)):void 0},[La]);const Ba=e=>{const t="Auto"===e?Ra.current:e;if(Aa.current&&Aa.current[t])return Aa.current[t];const r=Te&&Te.trim()?Te.trim():"";try{if(/\b\d{3,4}p\b/.test(r))return r.replace(/\b\d{3,4}p\b/,t);const e=new URL(r,window.location.origin);return e.searchParams.set("quality",t),e.toString()}catch(n){return r}};u.useEffect(()=>{try{if(Pe&&ze.current&&ze.current.contentWindow){const e="Auto"===La?"default":{"144p":"tiny","240p":"small","360p":"medium","480p":"large","720p":"hd720","1080p":"hd1080","1440p":"hd1440","2160p":"hd2160"}[La]||"default";try{ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"setPlaybackQuality",args:[e]}),"*")}catch{}return}const e=bt.current;if(!e)return;if("Auto"===La)return;const t=Ba(La);if(!t)return;if((e.currentSrc||e.src||"").split("?")[0]===t.split("?")[0])return;const r=!e.paused&&!e.ended,n=e.currentTime||0;if(e.pause(),e.src=m(t),e.load(),e.currentTime=Math.max(0,Math.min(n,e.duration||1/0)),r){const t=e.play();t&&t.catch&&t.catch(()=>{})}}catch(e){}},[La,Pe]);const[Wa,$a]=qe("playbackSpeed",1),[Da,Oa]=qe("incognitoMode",!1),[Va,_a]=u.useState(!1),Ua=(e,t={})=>{try{window.dispatchEvent(new CustomEvent(e,{detail:t}))}catch(r){}};u.useCallback(()=>{const e={videoUrl:Te,videoTitle:$e,creatorName:Oe,time:Date.now(),incognito:Da};Ua("player:watch",e)},[Te,$e,Oe,Da]),u.useEffect(()=>{try{bt.current&&(bt.current.playbackRate=Wa)}catch{}try{ze.current&&ze.current.contentWindow&&ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"setPlaybackRate",args:[Wa]}),"*")}catch{}},[Wa]),u.useEffect(()=>{try{bt.current&&(bt.current.loop=ya)}catch{}},[ya]),u.useEffect(()=>{const e=bt.current;if(!e)return;const t=async()=>{if(ya)try{e.currentTime=0,await e.play(),St(!0)}catch(t){}};return e.addEventListener("ended",t),()=>e.removeEventListener("ended",t)},[ya]),u.useEffect(()=>{const e=bt.current;if(!e)return;if(Da)return;let t=!0;const r={current:null};n(()=>import("./watchhistory-B5r3wR_X.js"),__vite__mapDeps([48,1,2,3,11,6,7,8,22,45,33,42,49])).then(e=>{t&&(r.current=e.recordWatchProgress)}).catch(()=>{});const o=(t=!1)=>{try{const n=r.current;if("function"!=typeof n)return;n({videoId:Ne?.id||Te||$e||null,userId:null,lastWatchedTime:Math.floor(e.currentTime||0),duration:Math.floor(e.duration||0),timestamp:(new Date).toISOString(),isComplete:Boolean(t)})}catch(n){}},a=()=>o(!1),i=()=>o(!0);e.addEventListener("pause",a),e.addEventListener("ended",i);const s=setInterval(()=>{try{e.paused||e.ended||o(!1)}catch{}},15e3),l=()=>o(e.ended||!1);window.addEventListener("pagehide",l);const c=()=>{"hidden"===document.visibilityState&&l()};return document.addEventListener("visibilitychange",c),()=>{t=!1;try{e.removeEventListener("pause",a),e.removeEventListener("ended",i)}catch{}try{window.removeEventListener("pagehide",l),document.removeEventListener("visibilitychange",c)}catch{}clearInterval(s)}},[Te,$e,Da]);const[Fa,Ya]=qe("doubleTap",!0),[Ha,Xa]=u.useState(!1),[Ja,qa]=u.useState(!1),[Qa,Ka]=u.useState(!1),[Ga,Za]=u.useState(!1),[ei,ti]=u.useState(!1),[ri,ni]=u.useState("left"),[oi,ai]=u.useState({x:20,y:220}),ii=u.useRef({dragging:!1,startX:0,startY:0,origX:0,origY:0,nextX:0,nextY:0}),si=u.useRef(!1),li=u.useRef(null),ci=u.useRef(null);u.useEffect(()=>{},[]),u.useEffect(()=>{if(!Ha||Qa)return;const e=setTimeout(()=>{qa(!0);const e=setTimeout(()=>{Xa(!1),qa(!1),Ka(!1),Za(!1)},260);return()=>clearTimeout(e)},7e3);return()=>clearTimeout(e)},[Ha]);const di=e=>{const t=ii.current;if(t.dragging){if(t.dragging=!1,e.target.releasePointerCapture)try{e.target.releasePointerCapture(e.pointerId)}catch{}ai({x:t.nextX,y:t.nextY});try{li.current&&(li.current.style.transition="transform 220ms ease, left 220ms ease, top 220ms ease")}catch{}ci.current&&(cancelAnimationFrame(ci.current),ci.current=null)}};p.useEffect(()=>{let e=null,t=null;return me?(xe(!0),ve(!0),we(!0),Ze.current&&(clearTimeout(Ze.current),Ze.current=null),Ze.current=setTimeout(()=>{we(!1),Ze.current=null},1400),e=setTimeout(()=>xe(!1),1200),t=setTimeout(()=>ve(!1),1350)):(xe(!1),ve(!1),we(!1)),()=>{e&&clearTimeout(e),t&&clearTimeout(t)}},[me]),u.useEffect(()=>()=>{Ge.current&&(clearTimeout(Ge.current),Ge.current=null),Ze.current&&(clearTimeout(Ze.current),Ze.current=null),pt.current&&(clearTimeout(pt.current),pt.current=null),Ii.current&&(clearTimeout(Ii.current),Ii.current=null),Wi.current&&(clearTimeout(Wi.current),Wi.current=null),Se.current&&(clearTimeout(Se.current),Se.current=null)},[]);const ui=async()=>{if(Dt&&Dt.some(e=>"overlay"===e.type))return;if(Pe&&ze.current){try{ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"unMute"}),"*"),ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"setVolume",args:[100]}),"*"),kt?(ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*"),St(!1)):(ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*"),St(!0));try{ji()}catch{}}catch{}return}const e=bt.current;if(e)try{if(e.paused||e.ended){e.muted=!1,e.volume=1,await e.play(),St(!0);try{ji()}catch{}}else{e.pause(),St(!1);try{ji()}catch{}}}catch{}},[pi,hi]=u.useState(!1),mi=u.useRef(null),fi=()=>{const e=ae.get("id")||Ne&&(Ne.id||Ne.videoId)||"";if(e&&"custom"!==e)return`${f}/share/video/${encodeURIComponent(e)}`;const t=Te||"";return t?`${f}/videoplayer?src=${encodeURIComponent(t)}`:`${f}/home`},gi=async()=>{const e=fi();try{await navigator.clipboard.writeText(e),hi(!0);try{navigator.vibrate&&navigator.vibrate(10)}catch{}mi.current&&clearTimeout(mi.current),mi.current=setTimeout(()=>hi(!1),1600)}catch(t){try{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),hi(!0),mi.current&&clearTimeout(mi.current),mi.current=setTimeout(()=>hi(!1),1600)}catch{}}},[xi,yi]=u.useState(!1),vi=Pe,bi=async()=>{const e=bt.current;if(!e&&!Pe)return;try{if(document.fullscreenElement||document.webkitFullscreenElement){await(async()=>document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():void 0)(),Gt(!1);try{await(screen.orientation?.unlock?.())}catch{}return}const t=document.documentElement||e;await(async e=>{if(e)return e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.webkitEnterFullscreen?e.webkitEnterFullscreen():void 0})(t);const r=async()=>{try{try{await(screen.orientation?.lock?.("landscape-primary"))}catch{await(screen.orientation?.lock?.("landscape"))}}catch{Gt(!0)}};await new Promise(e=>setTimeout(e,100)),await r(),setTimeout(()=>{"undefined"!=typeof window&&window.innerHeight>window.innerWidth&&Gt(!0)},300);const n=async()=>{if(document.fullscreenElement||document.webkitFullscreenElement){"undefined"!=typeof window&&window.innerHeight>window.innerWidth&&Gt(!0)}document.removeEventListener("fullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n)};document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n)}catch{}};u.useEffect(()=>{const e=()=>{if(document.fullscreenElement||document.webkitFullscreenElement){er(!0),Jt("landscape");const e="undefined"!=typeof window&&window.innerHeight>window.innerWidth;Gt(e)}else{er(!1),Jt(qt<1?"portrait":"landscape"),Gt(!1);try{screen.orientation?.unlock?.()}catch{}}};document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e);const t=bt.current,r=()=>{Jt("landscape"),Gt(!1)},n=()=>{Jt(qt<1?"portrait":"landscape"),Gt(!1)};if(t&&t.addEventListener){try{t.addEventListener("webkitbeginfullscreen",r)}catch{}try{t.addEventListener("webkitendfullscreen",n)}catch{}}const o=()=>{(screen.orientation?.type||"").startsWith("landscape")&&Gt(!1)};return window.addEventListener("orientationchange",o),()=>{if(document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),window.removeEventListener("orientationchange",o),t&&t.removeEventListener){try{t.removeEventListener("webkitbeginfullscreen",r)}catch{}try{t.removeEventListener("webkitendfullscreen",n)}catch{}}}},[qt]);const wi=e=>{try{ji()}catch{}xt.current=!0,vt(!0);const t=e.clientX||e.touches&&e.touches[0]?.clientX;vr(!0),Nr("portrait"===Xt?{w:112,h:200}:{w:180,h:100}),t&&Tr(t)},ji=(e=2500)=>{ct(!0),ut(!0),pt.current&&(clearTimeout(pt.current),pt.current=null),pt.current=setTimeout(()=>{ut(!1),pt.current=null},e)};u.useEffect(()=>{try{ji(1200)}catch{}},[kt]),u.useEffect(()=>{ct(!0)},[]);const ki=u.useRef(null);u.useEffect(()=>{if(Zt||Kt)return kt?(ki.current&&clearTimeout(ki.current),ki.current=setTimeout(()=>{ct(!1),ut(!1),ki.current=null},2e3),()=>{ki.current&&(clearTimeout(ki.current),ki.current=null)}):(ct(!0),void(ki.current&&(clearTimeout(ki.current),ki.current=null)))},[Zt,Kt,kt,lt]),u.useLayoutEffect(()=>{if("undefined"!=typeof window)try{const t=window.Capacitor||("undefined"!=typeof Capacitor?Capacitor:null);if(t&&t.Plugins){if(t.Plugins.ImmersiveMode)try{t.Plugins.ImmersiveMode.setImmersive({enabled:!0})}catch(e){}if(t.Plugins.StatusBar){try{t.Plugins.StatusBar.hide()}catch(e){}try{t.Plugins.StatusBar.setOverlaysWebView({overlay:!0})}catch(e){}}if(t.Plugins.NavigationBar)try{t.Plugins.NavigationBar.hide()}catch(e){}if(t.Plugins.SystemBars){try{t.Plugins.SystemBars.hide?.({bar:"StatusBar"})}catch(e){}try{t.Plugins.SystemBars.hide?.({bar:"NavigationBar"})}catch(e){}}}let r=document.querySelector('meta[name="viewport"]');r||(r=document.createElement("meta"),r.name="viewport",document.head.appendChild(r)),r.setAttribute("content","width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no, maximum-scale=1"),document.documentElement.requestFullscreen;const n=document.createElement("style");n.textContent="\n\t\t\t\thtml, body {\n\t\t\t\t\twidth: 100vw;\n\t\t\t\t\theight: 100vh;\n\t\t\t\t\tmax-width: 100vw;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tpadding: 0;\n\t\t\t\t\tborder: 0;\n\t\t\t\t\tbackground: #000;\n\t\t\t\t}\n\t\t\t";const o="regaarder-immersive-style";let a=document.getElementById(o);return a&&a.remove(),n.id=o,document.head.appendChild(n),document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",()=>{try{const e=document.getElementById(o);e&&e.remove()}catch(e){}try{const t=window.Capacitor||("undefined"!=typeof Capacitor?Capacitor:null);if(t&&t.Plugins){if(t.Plugins.ImmersiveMode)try{t.Plugins.ImmersiveMode.setImmersive({enabled:!1})}catch(e){}if(t.Plugins.StatusBar)try{t.Plugins.StatusBar.show()}catch(e){}if(t.Plugins.NavigationBar)try{t.Plugins.NavigationBar.show()}catch(e){}if(t.Plugins.SystemBars){try{t.Plugins.SystemBars.show?.({bar:"StatusBar"})}catch(e){}try{t.Plugins.SystemBars.show?.({bar:"NavigationBar"})}catch(e){}}}}catch(e){}try{window.screen&&window.screen.orientation&&window.screen.orientation.unlock&&window.screen.orientation.unlock()}catch(e){}document.documentElement.style.overflow="",document.body.style.overflow=""}}catch(e){}},[]),u.useEffect(()=>{if(window.NativePiP&&"function"==typeof window.NativePiP.setPipAllowed)try{window.NativePiP.setPipAllowed(!0)}catch{}const e=window.Capacitor||("undefined"!=typeof Capacitor?Capacitor:null);if(e&&e.Plugins&&e.Plugins.PiPMode)try{e.Plugins.PiPMode.setPipAllowed({allowed:!0})}catch{}return()=>{if(window.NativePiP&&"function"==typeof window.NativePiP.setPipAllowed)try{window.NativePiP.setPipAllowed(!1)}catch{}if(e&&e.Plugins&&e.Plugins.PiPMode)try{e.Plugins.PiPMode.setPipAllowed({allowed:!1})}catch{}}},[]),u.useEffect(()=>{const e=bt.current;if(!e)return;const t=()=>{console.log("[PiP] Mobile: Entered browser Picture-in-Picture");try{Ct(!0),ct(!1)}catch{}},r=()=>{console.log("[PiP] Mobile: Left browser Picture-in-Picture");try{Ct(!1),ct(!0)}catch{}};e.addEventListener("enterpictureinpicture",t),e.addEventListener("leavepictureinpicture",r);const n=e=>{const t=!!(e&&e.detail&&e.detail.pip);console.log("[PiP] Mobile: Android pipModeChanged:",t);try{Ct(t),ct(!t)}catch{}if(t)try{if(ze&&ze.current&&ze.current.contentWindow){const e=ze.current;setTimeout(()=>{try{e.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*")}catch{}},300),setTimeout(()=>{try{e.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*")}catch{}},1e3),setTimeout(()=>{try{e.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*")}catch{}},2500)}}catch{}};window.addEventListener("pipModeChanged",n);const o=e=>{try{if(Ht.current)return;const t=!!(e&&e.detail&&e.detail.play);if(ze&&ze.current&&ze.current.contentWindow){const e=ze.current;return void(t?(setPipYtFlash(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*"),St(!0),setTimeout(()=>setPipYtFlash(!1),2e3)})})):(St(!1),e.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*")))}const r=bt.current;r&&(t?r.play():r.pause(),St(t))}catch{}};return window.addEventListener("pipTogglePlay",o),()=>{try{e.removeEventListener("enterpictureinpicture",t)}catch{}try{e.removeEventListener("leavepictureinpicture",r)}catch{}try{window.removeEventListener("pipModeChanged",n)}catch{}try{window.removeEventListener("pipTogglePlay",o)}catch{}}},[wt]),u.useEffect(()=>{ct(!0)},[me]),u.useEffect(()=>{(ce||bo||Lr||pa)&&ct(!0)},[ce,bo,Lr,pa]);const Si=u.useCallback((e,t)=>{const r=Date.now(),n=[];for(let a=0;a<15;a++){const e=(24*a+(24*Math.random()-12))*Math.PI/180,t=80+120*Math.random(),r=Math.cos(e)*t,o=Math.sin(e)*t,i=16+14*Math.random(),s=600+400*Math.random(),l=80*Math.random();n.push({dx:r,dy:o,size:i,duration:s,delay:l,angle:40*Math.random()-20})}const o={id:r,x:e,y:t,particles:n};it(e=>[...e,o]),setTimeout(()=>{it(e=>e.filter(e=>e.id!==r))},1200)},[]),[Ni,Ci]=u.useState(!1),Ti=u.useRef({x:0,y:0}),Ei=u.useRef(!1),Li=u.useRef(!1),Ii=u.useRef(null),Pi=u.useRef(!1),Mi=u.useRef({x:0,y:0}),[Ai,Ri]=u.useState(!1),[zi,Bi]=u.useState({x:0,y:0}),Wi=u.useRef(null),$i=u.useRef(null);u.useEffect(()=>{const e=e=>{try{if(!Ai)return;if(e.target&&e.target.closest&&e.target.closest(".quick-action-card"))return;Ri(!1),Wi.current&&(clearTimeout(Wi.current),Wi.current=null)}catch{}};return window.addEventListener("pointerdown",e,{passive:!0}),()=>window.removeEventListener("pointerdown",e)},[Ai]);const[Di,Oi]=u.useState(0),[Vi,_i]=u.useState(!1),Ui=u.useRef(Math.min(480,"undefined"!=typeof window?Math.round(.92*window.innerWidth):360));u.useEffect(()=>{const e=()=>{"undefined"!=typeof window&&(Ui.current=Math.min(480,Math.round(.92*window.innerWidth)))};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const Fi=()=>{Ci(!1),Oi(0),Ei.current=!1,Li.current=!1},Yi=u.useRef({x:0,y:0}),Hi=e=>{if(!Ni)return;const t=Ui.current,r=Math.max(100,.25*t);Di>-t+r?(_i(!1),Oi(0)):(_i(!0),Oi(-t)),Ci(!1);try{e.target?.releasePointerCapture?.(e.pointerId)}catch{}};u.useEffect(()=>{try{const e=bt.current;if(!e)return;e.style.pointerEvents=Vi||Ni?"none":""}catch(e){}},[Vi,Ni]);const Xi=()=>{St(!1);try{const e=bt.current;e&&e.pause()}catch(r){}if(ya)return;if(!ba)return void Ko(!0);const e=sr.current||[];let t="number"==typeof lr?lr+1:0;if(t<e.length&&e[t]){let n=e[t];if("string"==typeof n)if(ar){const e=ar.find(e=>String(e.id)===String(n)||String(e.url)===String(n)||String(e.src)===String(n));e?n=e:(n.includes("/")||n.startsWith("http"))&&(n={url:n,title:"Video",creator:""})}else(n.includes("/")||n.startsWith("http"))&&(n={url:n,title:"Video",creator:""});n&&(n.url||n.src||n.videoUrl)?(De(n.title||"Video"),Ve(n.creator||""),Ee(m(n.url||n.src||n.videoUrl)),Ce(n.id?n:null),$t([]),Ot([]),Rt([]),Bt([]),Vt.current=new Set,_t.current=new Set,ct(!0),ji(1600),Cn("Next video"),cr(t),setTimeout(async()=>{try{const e=bt.current;if(e){const t=n.url||n.src||n.videoUrl;t&&(e.src=m(t)),e.currentTime=0;const r=e.play();r&&r.catch&&r.catch(()=>{}),St(!0)}}catch(r){}},120)):Ko(!0)}else Ko(!0)};Lt.current=Xi;const Ji=!!h;return a.jsxs("div",{className:"bg-black w-full overflow-hidden flex flex-col pip-ready"+(Nt?" vx-pip-active":""),style:{boxSizing:"border-box",margin:0,padding:0,border:0,position:Ji?"absolute":"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",maxWidth:"100vw",paddingLeft:Nt?0:"env(safe-area-inset-left, 0px)",paddingRight:Nt?0:"env(safe-area-inset-right, 0px)",paddingTop:Nt?0:"env(safe-area-inset-top, 0px)",paddingBottom:Nt?0:"env(safe-area-inset-bottom, 0px)"},onClick:e=>{try{if(e.target&&e.target.closest&&e.target.closest("button"))return;e.target&&e.target.closest&&e.target.closest(".video-center")||ct(!1)}catch{}},children:[a.jsx("style",{children:'\n\t\t\t\t\t.modal-dialog button{ transition: transform .12s ease, filter .12s ease, box-shadow .12s ease, opacity .12s; cursor: pointer; }\n\t\t\t\t\t.modal-dialog button:active, .modal-dialog button[data-pressed="true"]{ transform: translateY(1px) scale(0.985); filter: brightness(0.94); opacity: 0.98; }\n\t\t\t\t\t.modal-dialog button{ pointer-events: auto !important; }\n\t\t\t\t\t/* slightly reduce active effect for toggles/switch inner elements */\n\t\t\t\t\t.modal-dialog button .w-5{ transition: transform .12s ease; }\n\n\t\t\t\t\t/* â”€â”€ PiP mode: show ONLY the video, hide everything else â”€â”€ */\n\t\t\t\t\t/* JS-triggered: applied before entering PiP via button tap */\n\t\t\t\t\t.vx-pip-active { padding: 0 !important; overflow: hidden !important; }\n\t\t\t\t\t.vx-pip-active > *:not(.vx-video-area):not(.vx-overlay-ads) { display: none !important; }\n\t\t\t\t\t.vx-pip-active .vx-video-area { position: absolute !important; inset: 0 !important; width: 100% !important; height: 100% !important; flex: none !important; margin: 0 !important; padding: 0 !important; border-radius: 0 !important; z-index: 1 !important; overflow: hidden !important; }\n\t\t\t\t\t/* Force ALL wrapper divs to fill 100% â€” transparent bg prevents black-layer stacking on YouTube */\n\t\t\t\t\t.vx-pip-active .vx-video-area div:not(.vx-pip-yt-cover) { position: absolute !important; inset: 0 !important; top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important; width: 100% !important; height: 100% !important; margin: 0 !important; padding: 0 !important; transform: none !important; border-radius: 0 !important; max-width: 100% !important; max-height: 100% !important; background: transparent !important; }\n\t\t\t\t\t/* Native video: use cover to fill PiP window completely */\n\t\t\t\t\t.vx-pip-active .vx-video-area video { position: absolute !important; inset: 0 !important; width: 100% !important; height: 100% !important; object-fit: cover !important; border-radius: 0 !important; }\n\t\t\t\t\t/* YouTube iframe: no transform in PiP â€” scale causes white screen in tiny viewport. Use slightly larger size to avoid blank edges. */\n\t\t\t\t\t.vx-pip-active .vx-video-area iframe { position: absolute !important; inset: -2px !important; width: calc(100% + 4px) !important; height: calc(100% + 4px) !important; border-radius: 0 !important; transform: none !important; border: none !important; background: #000 !important; }\n\t\t\t\t\t.vx-pip-active .vx-video-area button { display: none !important; }\n\t\t\t\t\t.vx-pip-active .vx-video-area svg { display: none !important; }\n\t\t\t\t\t.vx-pip-active .vx-video-area span { display: none !important; }\n\t\t\t\t\t/* PiP unpause black flash cover â€” appears instantly, dissolves after YT branding settles */\n\t\t\t\t\t.vx-pip-yt-cover { position: absolute !important; inset: 0 !important; z-index: 10 !important; background: #000 !important; pointer-events: none !important; opacity: 1 !important; transition: opacity 0.35s ease-out !important; }\n\t\t\t\t\t.vx-pip-yt-cover.dissolve { opacity: 0 !important; }\n\t\t\t\t\t/* Auto-detect PiP via viewport size â€” works even when WebView is throttled */\n\t\t\t\t\t@media screen and (max-height: 300px) {\n\t\t\t\t\t\t.pip-ready { padding: 0 !important; overflow: hidden !important; }\n\t\t\t\t\t\t.pip-ready > *:not(.vx-video-area):not(.vx-overlay-ads) { display: none !important; }\n\t\t\t\t\t\t.pip-ready .vx-video-area { position: absolute !important; inset: 0 !important; width: 100% !important; height: 100% !important; flex: none !important; margin: 0 !important; padding: 0 !important; border-radius: 0 !important; z-index: 1 !important; overflow: hidden !important; }\n\t\t\t\t\t\t.pip-ready .vx-video-area div:not(.vx-pip-yt-cover) { position: absolute !important; inset: 0 !important; top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important; width: 100% !important; height: 100% !important; margin: 0 !important; padding: 0 !important; transform: none !important; border-radius: 0 !important; max-width: 100% !important; max-height: 100% !important; background: transparent !important; }\n\t\t\t\t\t\t.pip-ready .vx-video-area video { position: absolute !important; inset: 0 !important; width: 100% !important; height: 100% !important; object-fit: cover !important; border-radius: 0 !important; }\n\t\t\t\t\t\t/* YouTube iframe: slightly oversized to prevent blank edges at PiP size */\n\t\t\t\t\t\t.pip-ready .vx-video-area iframe { position: absolute !important; inset: -2px !important; width: calc(100% + 4px) !important; height: calc(100% + 4px) !important; border-radius: 0 !important; transform: none !important; border: none !important; background: #000 !important; }\n\t\t\t\t\t\t.pip-ready .vx-video-area button { display: none !important; }\n\t\t\t\t\t\t.pip-ready .vx-video-area svg { display: none !important; }\n\t\t\t\t\t\t.pip-ready .vx-video-area span { display: none !important; }\n\t\t\t\t\t}\n\t\t\t\t'}),a.jsx("style",{children:"\n\t\t\t\t\t/* single move animation (moves downward). Rotating the wrapper will change visual direction */\n\t\t\t\t\t@keyframes vx-gesture-move { 0% { transform: translateY(-4px) translateX(0) scale(0.98); opacity: .95 } 40% { transform: translateY(40px) translateX(0) scale(1); opacity: .98 } 70% { transform: translateY(40px) translateX(0) scale(1); opacity: .98 } 100% { transform: translateY(40px) translateX(0) scale(1); opacity: .0 } }\n\t\t\t\t\t@keyframes vx-pulse { 0% { transform: scale(1); opacity: 1 } 50% { transform: scale(1.04); opacity: 0.9 } 100% { transform: scale(1); opacity: 1 } }\n\t\t\t\t\t@keyframes vx-toast-in { 0% { transform: translateX(-50%) translateY(-10px); opacity: 0 } 100% { transform: translateX(-50%) translateY(0); opacity: 1 } }\n\t\t\t\t\t@keyframes vx-gesture-fadein { 0% { opacity: 0 } 100% { opacity: 1 } }\n\t\t\t\t\t@keyframes vx-gesture-textfade { 0% { opacity: 0; transform: translateY(8px) } 100% { opacity: 1; transform: translateY(0) } }\n\t\t\t\t\t@keyframes vx-gesture-press { 0% { transform: scale(1); opacity: 0.95 } 30% { transform: scale(0.88); opacity: 1 } 60% { transform: scale(0.88); opacity: 1 } 100% { transform: scale(1); opacity: 0.95 } }\n\t\t\t\t\t@keyframes vx-gesture-doubletap { 0% { transform: scale(1) } 15% { transform: scale(0.92) } 25% { transform: scale(1.02) } 45% { transform: scale(0.92) } 55% { transform: scale(1.06) } 70% { transform: scale(1) } 100% { transform: scale(1) } }\n\t\t\t\t\t@keyframes vx-gesture-ripple { 0% { transform: scale(0.6); opacity: 0.6 } 100% { transform: scale(1.4); opacity: 0 } }\n\t\t\t\t\t/* White pulsing dot for Watch Together floating button */\n\t\t\t\t\t@keyframes wt-pulse { 0% { transform: scale(1); opacity: 0.9 } 50% { transform: scale(1.6); opacity: 0.0 } 100% { transform: scale(1); opacity: 0.0 } }\n\t\t\t\t\t\n\t\t\t\t\t/* Heart Explosion - Radial firework animation for double-tap like */\n\t\t\t\t\t@keyframes heart-explode {\n\t\t\t\t\t\t0% { transform: translate(0, 0) scale(0.3) rotate(var(--heart-rot, 0deg)); opacity: 1; }\n\t\t\t\t\t\t20% { transform: translate(calc(var(--heart-dx) * 0.6), calc(var(--heart-dy) * 0.6)) scale(1.1) rotate(var(--heart-rot, 0deg)); opacity: 1; }\n\t\t\t\t\t\t60% { transform: translate(calc(var(--heart-dx) * 0.9), calc(var(--heart-dy) * 0.9)) scale(0.85) rotate(var(--heart-rot, 0deg)); opacity: 0.7; }\n\t\t\t\t\t\t100% { transform: translate(var(--heart-dx), var(--heart-dy)) scale(0.4) rotate(var(--heart-rot, 0deg)); opacity: 0; }\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t/* Bottom Ad Text Animations */\n\t\t\t\t\t@keyframes fadeInText { 0% { opacity: 0; } 100% { opacity: 1; } }\n\t\t\t\t\t@keyframes slideLeftText { 0% { transform: translateX(20px); opacity: 0; } 100% { transform: translateX(0); opacity: 1; } }\n\t\t\t\t\t@keyframes slideRightText { 0% { transform: translateX(-20px); opacity: 0; } 100% { transform: translateX(0); opacity: 1; } }\n\t\t\t\t\t@keyframes bounceText { 0% { transform: translateY(10px); opacity: 0; } 60% { transform: translateY(-5px); opacity: 1; } 100% { transform: translateY(0); opacity: 1; } }\n\t\t\t\t\t@keyframes scaleText { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }\n\t\t\t\t\t\n\t\t\t\t\t/* Bottom Ad Card Animations */\n\t\t\t\t\t@keyframes fadeInCard { 0% { opacity: 0; } 100% { opacity: 1; } }\n\t\t\t\t\t@keyframes linefirstCard { 0% { background-image: linear-gradient(90deg, transparent 0%, transparent 100%); opacity: 0; } 30% { background-image: linear-gradient(90deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.1) 100%); opacity: 1; } 100% { background-image: linear-gradient(90deg, transparent 0%, transparent 100%); opacity: 1; } }\n\t\t\t\t\t@keyframes slideDownCard { 0% { transform: translateY(-20px); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } }\n\t\t\t\t\t@keyframes bounceInCard { 0% { transform: scale(0.85); opacity: 0; } 50% { transform: scale(1.05); } 100% { transform: scale(1); opacity: 1; } }\n\t\t\t\t\t@keyframes scaleUpCard { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }\n\t\t\t\t\t\n\t\t\t\t\t/* Card Effect Animations */\n\t\t\t\t\t@keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.02); opacity: 0.95; } 100% { transform: scale(1); opacity: 1; } }\n\t\t\t\t\t@keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-2px); } 50% { transform: translateX(2px); } 75% { transform: translateX(-2px); } 100% { transform: translateX(0); } }\n\t\t\t\t\t@keyframes glow { 0% { box-shadow: 0 0 8px rgba(139, 92, 246, 0.3); } 50% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.6); } 100% { box-shadow: 0 0 8px rgba(139, 92, 246, 0.3); } }\n\t\t\t\t\t@keyframes float { 0% { transform: translateY(0); } 50% { transform: translateY(-4px); } 100% { transform: translateY(0); } }\n\t\t\t\t\t@keyframes rotate { 0% { transform: rotate(0deg) scale(1); } 50% { transform: rotate(1deg) scale(1.01); } 100% { transform: rotate(0deg) scale(1); } }\n\t\t\t\t\t\n\t\t\t\t\t/* Bottom Ad Exit Animations */\n\t\t\t\t\t@keyframes fadeOut { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(1); } }\n\t\t\t\t\t@keyframes slideOut { 0% { opacity: 1; transform: translateX(0); } 100% { opacity: 0; transform: translateX(100%); } }\n\t\t\t\t\t@keyframes scaleDown { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(0.7); } }\n\t\t\t\t\t@keyframes bounceOut { 0% { opacity: 1; transform: translateY(0) scale(1); } 50% { opacity: 1; transform: translateY(-10px) scale(1.05); } 100% { opacity: 0; transform: translateY(-30px) scale(0.8); } }\n\t\t\t\t\t@keyframes rotateOut { 0% { opacity: 1; transform: rotate(0deg) scale(1); } 100% { opacity: 0; transform: rotate(15deg) scale(0.8); } }\n\t\t\t\t"}),ia&&a.jsx("div",{"aria-hidden":!0,style:{position:"fixed",inset:0,zIndex:1200,display:"flex",alignItems:"center",justifyContent:"center",background:"radial-gradient(ellipse at center, rgba(0,0,0,0.55) 0%, rgba(0,0,0,0.65) 100%)",pointerEvents:"none",animation:"vx-gesture-fadein 400ms ease-out"},children:a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:20,maxWidth:320,padding:"0 24px"},children:[a.jsx("div",{style:{display:"flex",gap:6,marginBottom:4},children:[0,1,2,3,4].map(e=>a.jsx("div",{style:{width:ca===e?20:6,height:6,borderRadius:3,background:ca===e?"var(--color-gold, #ca8a04)":"rgba(255,255,255,0.25)",transition:"all 300ms ease"}},e))}),a.jsxs("div",{style:{width:96,height:96,borderRadius:24,background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",animation:"vx-pulse 2000ms ease-in-out infinite"},children:[0===ca&&a.jsx("div",{style:{transform:"rotate(180deg)"},children:a.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",stroke:"rgba(255,255,255,0.95)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"vx-gesture-move 1400ms ease-in-out infinite",filter:"drop-shadow(0 6px 12px rgba(0,0,0,0.35))"},children:[a.jsx("path",{d:"M18 11V7a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v4"}),a.jsx("path",{d:"M14 10V5a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v7"}),a.jsx("path",{d:"M10 10V7a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v9a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3v-1"})]})}),1===ca&&a.jsx("div",{style:{transform:"rotate(0deg)"},children:a.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",stroke:"rgba(255,255,255,0.95)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"vx-gesture-move 1400ms ease-in-out infinite",filter:"drop-shadow(0 6px 12px rgba(0,0,0,0.35))"},children:[a.jsx("path",{d:"M18 11V7a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v4"}),a.jsx("path",{d:"M14 10V5a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v7"}),a.jsx("path",{d:"M10 10V7a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v9a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3v-1"})]})}),2===ca&&a.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",stroke:"rgba(255,255,255,0.95)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"vx-gesture-press 1600ms ease-in-out infinite",filter:"drop-shadow(0 6px 12px rgba(0,0,0,0.35))"},children:[a.jsx("path",{d:"M18 11V7a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v4"}),a.jsx("path",{d:"M14 10V5a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v7"}),a.jsx("path",{d:"M10 10V7a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v9a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3v-1"})]}),3===ca&&a.jsx("div",{style:{transform:"rotate(90deg)"},children:a.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",stroke:"rgba(255,255,255,0.95)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"vx-gesture-move 1400ms ease-in-out infinite",filter:"drop-shadow(0 6px 12px rgba(0,0,0,0.35))"},children:[a.jsx("path",{d:"M18 11V7a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v4"}),a.jsx("path",{d:"M14 10V5a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v7"}),a.jsx("path",{d:"M10 10V7a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v9a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3v-1"})]})}),4===ca&&a.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",stroke:"rgba(255,255,255,0.95)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"vx-gesture-doubletap 1200ms ease-in-out infinite",filter:"drop-shadow(0 6px 12px rgba(0,0,0,0.35))"},children:[a.jsx("path",{d:"M18 11V7a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v4"}),a.jsx("path",{d:"M14 10V5a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v7"}),a.jsx("path",{d:"M10 10V7a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v9a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3v-1"})]})]}),a.jsxs("div",{style:{textAlign:"center"},children:[a.jsxs("div",{style:{color:"#fff",fontSize:20,fontWeight:700,marginBottom:6,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial',animation:"vx-gesture-textfade 400ms ease-out"},children:[0===ca&&"Swipe Up",1===ca&&"Swipe Down",2===ca&&"Press & Hold",3===ca&&"Swipe Left",4===ca&&"Double Tap"]}),a.jsxs("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:14,fontWeight:500,lineHeight:1.4,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial'},children:[0===ca&&"to see the next video",1===ca&&"to see the previous video",2===ca&&"for quick options",3===ca&&"to discover more",4===ca&&"to like a video"]})]}),a.jsx("button",{onClick:()=>{try{localStorage.setItem("vx:hint:gesture","1")}catch{}sa(!1),da(0)},style:{pointerEvents:"auto",marginTop:8,background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.15)",borderRadius:20,padding:"8px 24px",color:"rgba(255,255,255,0.7)",fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 200ms"},children:"Skip Tutorial"})]})}),!Dt.some(e=>"overlay"===e.type&&("fullscreen"===e.overlayAdPosition||"videoPlayer"===e.overlayAdPosition))&&a.jsxs("div",{className:"w-full flex items-center justify-between",style:{position:Kt||Dt.some(e=>"default2"===e.type)?"fixed":"relative",left:Kt?"50%":0,right:Kt?"auto":0,top:Kt?"50%":Dt.some(e=>"default2"===e.type)?0:"auto",width:Kt?"100vh":"100%",transform:Kt?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 50%))":"none",transformOrigin:"center",paddingTop:"calc(env(safe-area-inset-top, 0px) + 14px)",paddingBottom:8,paddingLeft:Kt?20:16,paddingRight:Kt?20:16,marginTop:4,marginLeft:Kt?"0":"auto",marginRight:Kt?"0":"auto",zIndex:500,boxSizing:"border-box",transition:"opacity 220ms ease, backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease",opacity:lt||me||Dt.some(e=>"default2"===e.type)?1:0,pointerEvents:"auto",background:Ta?"linear-gradient(180deg, rgba(0,0,0,0.36), rgba(0,0,0,0.28))":"linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.6))",border:Ta?"1px solid rgba(255,255,255,0.02)":"1px solid rgba(0,0,0,0.06)",borderBottom:Ta?"1px solid rgba(255,255,255,0.06)":"1px solid rgba(0,0,0,0.12)",boxShadow:"none",backdropFilter:"none",WebkitBackdropFilter:"none"},children:[a.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10",style:{color:Ta?"#fff":"#111"},onClick:e=>{try{e.stopPropagation()}catch{}try{bt.current&&bt.current.pause()}catch{}try{St(!1)}catch{}const t=bt.current,r=Pe?Math.floor(mt*(Tt||0)):t?t.currentTime:0,n=t&&(t.currentSrc||t.src)||Te||Ne?.src||Ne?.videoUrl||Ne?.url||ae.get("src")||"",o=m(n)||n,a={video:{id:ae.get("id")||"custom",title:$e||null,src:o,url:o,videoUrl:o,thumbnail:Ne?.thumbnail||Ne?.imageUrl||"",imageUrl:Ne?.imageUrl||Ne?.thumbnail||"",author:Oe||null,creator:Oe||null,channel:Oe||null},time:Math.floor(r||0),paused:!1,title:$e||null,creatorName:Oe||null,duration:Pe?Math.floor(Tt||0):t?Math.floor(t.duration||0):0};if(h&&"function"==typeof h){try{h(a)}catch{}try{"undefined"!=typeof window&&"function"==typeof window.setFooterTab&&window.setFooterTab("home")}catch{}}else{try{localStorage.setItem("miniPlayerData",JSON.stringify(a))}catch{}try{void 0!==i&&s&&s("miniPlayerRequest",a)}catch{}try{void 0!==i&&s&&s("switchToHome",a)}catch{}try{"undefined"!=typeof window&&"function"==typeof window.setFooterTab&&window.setFooterTab("home")}catch{}try{window.history&&window.history.length>1?window.history.back():navigate("/home",{state:{miniPlayerData:a},replace:!0})}catch{try{navigate("/home",{state:{miniPlayerData:a},replace:!0})}catch{}}}},children:a.jsx(E,{})}),!Qa&&(Ha||Ja)&&!Dt.some(e=>"overlay"===e.type&&("fullscreen"===e.overlayAdPosition||"videoPlayer"===e.overlayAdPosition))&&a.jsxs("button",{className:"flex items-center text-white pl-3 pr-4 py-1.5 rounded-full text-sm font-medium",onClick:e=>po(e),style:{background:"#6b5bd1",transition:"opacity 260ms ease, transform 260ms ease",opacity:Ha?1:0,pointerEvents:Ha?"auto":"none",boxShadow:"0 8px 24px rgba(0,0,0,0.28)",marginLeft:12},children:[a.jsx(R,{size:18}),a.jsx("span",{className:"ml-2 whitespace-nowrap",children:"Watch Together"})]}),a.jsxs("div",{className:"flex items-center space-x-4",style:{transition:"opacity 220ms ease",pointerEvents:"auto"},children:[a.jsx("div",{className:"w-9 flex items-center justify-center",style:{pointerEvents:"auto"},children:me?a.jsx("button",{onClick:st,"aria-pressed":me,"aria-label":me?"Unlock controls":"Lock controls",className:"w-9 h-9 p-1.5 flex items-center justify-center rounded-xl transition-shadow focus:outline-none "+(be?"animate-pulse":""),style:{color:je?ka:me?"#9CA3AF":Ta?"#fff":"#111",background:me?"#1e2736":"transparent",zIndex:400,position:"relative",opacity:je?1:me?.28:1},children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-lock-icon lucide-lock",children:[a.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}):a.jsx("div",{className:"w-9 h-9"})}),a.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10","aria-haspopup":"dialog","aria-expanded":bo,onClick:()=>wo(!0),style:{opacity:me?.28:1,pointerEvents:me?"none":"auto",color:Ta?me?"#9CA3AF":"#fff":me?"#9CA3AF":"#111"},children:a.jsx(P,{})}),a.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10",onClick:async e=>{e.stopPropagation();const t=globalVideoRef&&globalVideoRef.current||bt.current;try{if(window.NativePiP&&"function"==typeof window.NativePiP.enterPiP)return Ct(!0),ct(!1),void requestAnimationFrame(()=>{requestAnimationFrame(()=>{try{window.NativePiP.enterPiP(),console.log("[PiP] Called NativePiP.enterPiP (CSS pre-applied)")}catch(e){console.warn("[PiP] NativePiP.enterPiP failed",e),Ct(!1),ct(!0)}})})}catch(n){console.warn("[PiP] NativePiP bridge failed",n),Ct(!1),ct(!0)}try{const e=window.Capacitor||("undefined"!=typeof Capacitor?Capacitor:null);if(e&&e.Plugins&&e.Plugins.PiPMode)return Ct(!0),ct(!1),await e.Plugins.PiPMode.enterPiP({width:16,height:9}),void console.log("[PiP] Entered Android native PiP via Capacitor")}catch(o){console.warn("[PiP] Capacitor PiP failed",o),Ct(!1),ct(!0)}try{if(document.pictureInPictureEnabled&&t&&"function"==typeof t.requestPictureInPicture&&!t.disablePictureInPicture)return document.pictureInPictureElement===t?void(await document.exitPictureInPicture()):(await t.requestPictureInPicture(),void console.log("[PiP] Entered browser Picture-in-Picture"))}catch(a){console.warn("[PiP] Browser PiP not available",a)}const r=t?t.currentTime:0;try{const e=null,n=t&&(t.currentSrc||t.src)||Te||"",o="",a=ae.get("id")||"custom",c={video:{...e||{},id:a,title:$e||e&&e.title||null,src:n,url:n,videoUrl:n,thumbnail:o,imageUrl:o,author:Oe||e&&e.author||null,creator:Oe||e&&e.creator||null,channel:Oe||e&&e.channel||null},time:Math.floor(r||0),paused:!1,title:$e||null,creatorName:Oe||null,duration:t?Math.floor(t.duration||0):0};console.log("[PiP] Falling back to in-app mini player ->",c);try{localStorage.setItem("miniPlayerData",JSON.stringify(c))}catch(l){console.warn("localStorage set failed",l)}try{void 0!==i&&s&&s("miniPlayerRequest",c)}catch(l){}const d=new URLSearchParams;d.set("mini","1"),c.video&&c.video.id&&d.set("id",c.video.id),"number"==typeof c.time&&d.set("t",String(Math.floor(c.time)));const u=`/home?${d.toString()}`;navigate(u,{state:{miniPlayerData:c}})}catch(c){console.error("Failed to store mini player data / navigate",c);try{navigate("/home")}catch(l){}}},style:{opacity:me?.28:1,pointerEvents:me?"none":"auto",color:Ta?me?"#9CA3AF":"#fff":me?"#9CA3AF":"#111"},children:a.jsx(M,{})}),a.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10","aria-haspopup":"dialog","aria-expanded":ce,onClick:()=>ue(!0),style:{opacity:me?.28:1,pointerEvents:me?"none":"auto",color:Ta?me?"#9CA3AF":"#fff":me?"#9CA3AF":"#111"},children:a.jsx(A,{})})]})]}),a.jsx("button",{style:{position:"absolute",top:"calc(env(safe-area-inset-top, 0px) + 18px)",left:16,width:44,height:44,borderRadius:"50%",background:lt||me||Dt.some(e=>"default2"===e.type)?"transparent":"rgba(0,0,0,0.45)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,pointerEvents:"auto",cursor:"pointer",opacity:lt||me||Dt.some(e=>"default2"===e.type)?0:.85,transition:"opacity 220ms ease, background 220ms ease",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",color:"#fff",padding:0},onClick:e=>{try{e.stopPropagation()}catch{}try{bt.current&&bt.current.pause()}catch{}try{St(!1)}catch{}const t=bt.current,r=Pe?Math.floor(mt*(Tt||0)):t?t.currentTime:0,n=t&&(t.currentSrc||t.src)||Te||"",o=m(n)||n,a={video:{id:ae.get("id")||"custom",title:$e||null,src:o,url:o,videoUrl:o,thumbnail:"",imageUrl:"",author:Oe||null,creator:Oe||null,channel:Oe||null},time:Math.floor(r||0),paused:!1,title:$e||null,creatorName:Oe||null,duration:Pe?Math.floor(Tt||0):t?Math.floor(t.duration||0):0};if(h&&"function"==typeof h){try{h(a)}catch{}try{"undefined"!=typeof window&&"function"==typeof window.setFooterTab&&window.setFooterTab("home")}catch{}}else{try{localStorage.setItem("miniPlayerData",JSON.stringify(a))}catch{}try{void 0!==i&&s&&s("miniPlayerRequest",a)}catch{}try{void 0!==i&&s&&s("switchToHome",a)}catch{}try{"undefined"!=typeof window&&"function"==typeof window.setFooterTab&&window.setFooterTab("home")}catch{}try{window.history&&window.history.length>1?window.history.back():navigate("/home",{state:{miniPlayerData:a},replace:!0})}catch{try{navigate("/home",{state:{miniPlayerData:a},replace:!0})}catch{}}}},"aria-label":"Go back",children:a.jsx(E,{size:24})}),a.jsxs("div",{className:"w-full mt-0 mb-0 px-4",style:{position:Kt?"fixed":"relative",left:Kt?"50%":"auto",top:Kt?"50%":"auto",width:Kt?"100vh":"100%",transform:Kt?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 120px))":"none",transformOrigin:"center",zIndex:450,marginLeft:Kt?"0":"auto",marginRight:Kt?"0":"auto",visibility:lt?"visible":"hidden",opacity:lt?1:0,transition:"opacity 220ms ease, backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease",pointerEvents:lt?"auto":"none"},children:[!Dt.some(e=>"overlay"===e.type&&("fullscreen"===e.overlayAdPosition||"videoPlayer"===e.overlayAdPosition))&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h1",{className:"text-white text-base font-normal leading-snug tracking-wide",style:{maxWidth:"calc(100% - 36px)"},children:$e}),a.jsx("button",{className:"text-gray-300 flex-shrink-0",style:{marginTop:1},children:a.jsx(T,{size:18})})]}),a.jsxs("div",{className:"flex items-center mt-0.5 space-x-2",children:[a.jsx("span",{className:"text-gray-400 text-sm underline decoration-gray-500 underline-offset-2",children:Oe}),a.jsx("span",{className:"bg-[#1e2736] text-xs px-2 py-0.5 rounded-[6px] font-medium tracking-wide",style:{color:ka},children:"Requested"})]})]}),Qa&&!Dt.some(e=>"overlay"===e.type&&("fullscreen"===e.overlayAdPosition||"videoPlayer"===e.overlayAdPosition))&&a.jsxs(a.Fragment,{children:[ei&&a.jsx("button",{"aria-label":"Show Watch Together",className:"fixed flex items-center justify-center w-12 h-12 rounded-full text-white shadow-lg",style:{left:"left"===ri?8:"auto",right:"right"===ri?8:"auto",top:Kt?Math.max(20,oi.y):Math.max(80,oi.y),transition:"transform 220ms ease, opacity 220ms",zIndex:pa?30:20,background:"#6b5bd1",boxShadow:"0 10px 26px rgba(0,0,0,0.28)"},onClick:e=>po(e),children:a.jsx(T,{})}),Ga&&!ei&&!Kt&&a.jsx("button",{ref:li,"aria-label":"Watch Together (floating)",className:"fixed flex items-center justify-center rounded-full text-white shadow-xl backdrop-blur-md",style:{width:56,height:56,background:"linear-gradient(135deg, rgba(30, 41, 59, 0.85), rgba(15, 23, 42, 0.95))",border:"1px solid rgba(255,255,255,0.1)",left:Kt?"50%":oi.x,top:Kt?"50%":oi.y,transform:Kt?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 120px))":"none",transition:ii.current.dragging?"none":"transform 220ms ease, left 220ms ease, top 220ms ease",zIndex:pa?30:20,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 12px 28px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.15)"},onPointerDown:e=>{e.preventDefault();const t=ii.current;si.current=!1,t.dragging=!0,ci.current&&(cancelAnimationFrame(ci.current),ci.current=null);const r=e.clientX??(e.touches&&e.touches[0]?.clientX),n=e.clientY??(e.touches&&e.touches[0]?.clientY);t.startX=r,t.startY=n,t.origX=oi.x,t.origY=oi.y,t.nextX=oi.x,t.nextY=oi.y;try{li.current&&(li.current.style.transition="none")}catch{}if(e.target.setPointerCapture)try{e.target.setPointerCapture(e.pointerId)}catch{}},onPointerMove:e=>{const t=ii.current;if(!t.dragging)return;const r=e.clientX??(e.touches&&e.touches[0]?.clientX),n=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof r||"number"!=typeof n)return;(Math.abs(r-t.startX)>3||Math.abs(n-t.startY)>3)&&(si.current=!0);const o=t.origX+(r-t.startX),a=t.origY+(n-t.startY),i=Math.max(6,Math.min(window.innerWidth-56-6,o)),s=Math.max(6,Math.min(window.innerHeight-56-6,a));t.nextX=i,t.nextY=s,ci.current||(ci.current=requestAnimationFrame(()=>{li.current&&(li.current.style.left=`${t.nextX}px`,li.current.style.top=`${t.nextY}px`),ci.current=null}));const l=r-t.startX,c=n-t.startY;if(Math.abs(l)>=80||Math.abs(c)>=80){t.dragging=!1;try{e.target?.releasePointerCapture?.(e.pointerId)}catch{}Za(!1),Ka(!1),ci.current&&(cancelAnimationFrame(ci.current),ci.current=null)}},onPointerUp:di,onPointerCancel:di,onClick:e=>{e.stopPropagation(),si.current?si.current=!1:po(e)},children:a.jsx(R,{size:22,strokeWidth:2,style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"}})})]})]}),a.jsxs("div",{className:"flex-1 flex items-center justify-center relative video-center vx-video-area",style:{minHeight:0,touchAction:"none",width:"100%",overflow:"hidden"},onClick:e=>{if(e.stopPropagation(),Dt&&Dt.some(e=>"overlay"===e.type))return;if(me){try{ke(!0),Se.current&&clearTimeout(Se.current),Se.current=setTimeout(()=>{ke(!1),Se.current=null},1100)}catch{}try{Ke(!0),Ge.current&&clearTimeout(Ge.current),Ge.current=setTimeout(()=>Ke(!1),1600)}catch{}return}try{ji()}catch{}const t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,n=t.width/2,o=.3*t.width;ot.current?(clearTimeout(ot.current),ot.current=null,Fa&&(tt(!0),Si(e.clientX,e.clientY))):ot.current=setTimeout(()=>{try{Math.abs(r-n)<o?ui():ji()}catch{}ot.current=null},250)},onPointerDown:e=>{try{ji()}catch{}const t=e.clientX??(e.touches&&e.touches[0]?.clientX),r=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof t||"number"!=typeof r)return;const n=window.innerWidth;if(!(t<.3*n||t>.7*n)){Ti.current={x:t,y:r},la.current={startX:t,startY:r},Ci(!0),Oi(0);try{Pi.current=!1,Mi.current={x:t,y:r},Ii.current&&(clearTimeout(Ii.current),Ii.current=null),Ii.current=setTimeout(()=>{Pi.current=!0,Ci(!1),Oi(0);try{ia&&2===ca&&(da(3),la.current={startX:t,startY:r})}catch{}try{try{qo(!1),localStorage.setItem("handleHintShownQuickOptions","1")}catch{}Bi({x:t,y:r}),Ri(!0);try{navigator.vibrate&&navigator.vibrate(10)}catch{}Wi.current&&(clearTimeout(Wi.current),Wi.current=null),Wi.current=setTimeout(()=>{Ri(!1),Wi.current=null},3e3)}catch(e){}},550)}catch(o){}try{if(ia&&!localStorage.getItem("vx:hint:gesture"))try{localStorage.setItem("vx:hint:gesture","1")}catch{}}catch{}try{e.target?.setPointerCapture?.(e.pointerId)}catch{}}},onPointerMove:e=>{if(!Ni&&!Ii.current)return;const t=e.clientX??(e.touches&&e.touches[0]?.clientX),r=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof t||"number"!=typeof r)return;try{if(Ii.current){const e=t-(Mi.current.x||0),n=r-(Mi.current.y||0);Math.hypot(e,n)>12&&(clearTimeout(Ii.current),Ii.current=null)}}catch(s){}const n=t-Ti.current.x,o=r-Ti.current.y;try{if(ia){const e=la.current;if(0===ca&&r-e.startY<-80&&Math.abs(t-e.startX)<140){try{const e={id:"next-placeholder-1",url:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",title:"Flowers for your grave",creator:"Richard Castle",duration:10,thumbnail:""};De(e.title),Ve(e.creator),Ee(m(e.url)),Ce(null),$t([]),Ot([]),Rt([]),Bt([]),Vt.current=new Set,_t.current=new Set,ct(!0),ji(1600),Cn("Next video"),setTimeout(async()=>{try{const t=bt.current;if(t){t.src=m(e.url),t.currentTime=0;try{t.pause()}catch{}St(!1)}}catch(s){}},120)}catch(s){}return da(1),void(la.current={startX:t,startY:r})}if(1===ca&&r-e.startY>80&&Math.abs(t-e.startX)<140){try{const e=sr.current||[],t="number"==typeof lr?lr-1:-1;if(t>=0&&e[t]){const r=e[t];De(r.title||"Video"),Ve(r.creator||""),Ee(m(r.url)),ct(!0),ji(1600),Cn("Previous video"),cr(t),setTimeout(async()=>{try{const e=bt.current;if(e){r.url&&(e.src=m(r.url)),e.currentTime=0;try{e.pause()}catch{}St(!1)}}catch(s){}},120)}else kn("No previous video"),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1600)}catch(s){}return da(2),void(la.current={startX:t,startY:r})}if(3===ca&&t-e.startX<-80&&Math.abs(r-e.startY)<160){try{_i(!0)}catch{}return kn("Discover opened"),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1400),da(4),void setTimeout(()=>{try{localStorage.setItem("vx:hint:gesture","1")}catch{}sa(!1),da(0)},2800)}}}catch(s){}if(o<-80&&Math.abs(n)<140&&!Li.current){Li.current=!0;const e=sr.current||[];let t="number"==typeof lr?lr+1:0;if(t<e.length&&e[t]){let r=e[t];if("string"==typeof r)if(ar){const e=ar.find(e=>String(e.id)===String(r)||String(e.url)===String(r)||String(e.src)===String(r));e?r=e:(r.includes("/")||r.startsWith("http"))&&(r={url:r,title:"Video",creator:""})}else(r.includes("/")||r.startsWith("http"))&&(r={url:r,title:"Video",creator:""});if(r&&(r.url||r.src||r.videoUrl)){const e=r.url||r.src||r.videoUrl;if(De(r.title||"Video"),Ve(r.creator||""),Le(e)?(Me(!0),Re(Ie(e)),Ee(e)):(Me(!1),Re(""),Ee(m(e))),Et(0),ft(0),r.time){const e=(r.time||"").split(":");if(2===e.length){const t=60*(parseInt(e[0])||0)+(parseInt(e[1])||0);t>0&&Et(t)}}Ce(r.id?r:null),$t([]),Ot([]),Rt([]),Bt([]),Vt.current=new Set,_t.current=new Set,ct(!0),ji(1600),Cn("Next video"),cr(t),Le(e)?St(!1):setTimeout(async()=>{try{const t=bt.current;if(t){e&&(t.src=m(e)),t.currentTime=0;try{t.pause()}catch{}St(!1)}}catch(s){}},120)}else kn("No next video"),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1600)}else kn("No next video"),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1600);return void Fi()}if(o>80&&Math.abs(n)<140&&!Ei.current){Ei.current=!0;const e=sr.current||[];let t="number"==typeof lr?lr-1:-1;if(t>=0&&e[t]){let r=e[t];if("string"==typeof r)if(ar){const e=ar.find(e=>String(e.id)===String(r)||String(e.url)===String(r)||String(e.src)===String(r));e?r=e:(r.includes("/")||r.startsWith("http"))&&(r={url:r,title:"Video",creator:""})}else(r.includes("/")||r.startsWith("http"))&&(r={url:r,title:"Video",creator:""});if(r&&(r.url||r.src||r.videoUrl)){const e=r.url||r.src||r.videoUrl;if(De(r.title||"Video"),Ve(r.creator||""),Le(e)?(Me(!0),Re(Ie(e)),Ee(e)):(Me(!1),Re(""),Ee(m(e))),Et(0),ft(0),r.time){const e=(r.time||"").split(":");if(2===e.length){const t=60*(parseInt(e[0])||0)+(parseInt(e[1])||0);t>0&&Et(t)}}Ce(r.id?r:null),$t([]),Ot([]),Rt([]),Bt([]),Vt.current=new Set,_t.current=new Set,ct(!0),ji(1600),Cn("Previous video"),cr(t),Le(e)?St(!1):setTimeout(async()=>{try{const t=bt.current;if(t){e&&(t.src=m(e)),t.currentTime=0;try{t.pause()}catch{}St(!1)}}catch(s){}},120)}else kn("No previous video"),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1600)}else kn("No previous video"),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1600);return void Fi()}if(Math.abs(o)>140&&Math.abs(n)<60)return void Fi();const a=-Ui.current,i=Math.max(a,Math.min(0,n));Oi(i)},onPointerUp:async e=>{if(Ii.current&&(clearTimeout(Ii.current),Ii.current=null),Pi.current){Pi.current=!1;try{e.target?.releasePointerCapture?.(e.pointerId)}catch{}return Ci(!1),void Oi(0)}if(!Ni)return;try{const t=e.clientY??(e.changedTouches&&e.changedTouches[0]?.clientY)??(e.touches&&e.touches[0]?.clientY)??0,o=e.clientX??(e.changedTouches&&e.changedTouches[0]?.clientX)??(e.touches&&e.touches[0]?.clientX)??0,a=t-(Ti.current.y||0),i=o-(Ti.current.x||0);if(a>80&&Math.abs(i)<140){const t=sr.current||[];let o=currentIndexRef.current;if(!Array.isArray(t)||0===t.length||"number"!=typeof o||o<=0){Oi(0),_i(!1),Ci(!1);try{e.target?.releasePointerCapture?.(e.pointerId)}catch{}return}const a=t[o-1];try{const e=await n(()=>import("./home-Bm5sJ1cs.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47])),t=e.getVideoById,r=e.VIDEOS||e.default?.VIDEOS||e.homeVideos||e.discoverItems||null;let i=null;if("function"==typeof t&&(i=t(a)),!i&&Array.isArray(r)&&(i=r.find(e=>e.id&&String(e.id)===String(a)||e.url&&String(e.url)===String(a)||e.src&&String(e.src)===String(a))),!i&&"string"==typeof a&&/^(https?:)?\/\//.test(a)&&(i={id:a,title:"Video",src:a}),i){const e=m(i.src||i.url||"");currentIndexRef.current=o-1,De(i.title||"Video"),Ve(i.creator||i.channel||""),Ee(m(e)),Ce(i.id?i:null),$t([]),Ot([]),Rt([]),Bt([]),Vt.current=new Set,_t.current=new Set,ct(!0),ji(1600),Cn("Previous video"),setTimeout(async()=>{try{const t=bt.current;if(t&&e){t.src=m(e),t.currentTime=0;try{t.pause()}catch{}St(!1)}}catch(t){}},120)}}catch(r){}Oi(0),_i(!1),Ci(!1);try{e.target?.releasePointerCapture?.(e.pointerId)}catch{}return}}catch(r){}const t=Math.max(100,.25*Ui.current);Di<=-t?(_i(!0),Oi(-Ui.current)):Oi(0),Ci(!1);try{e.target?.releasePointerCapture?.(e.pointerId)}catch{}},children:[a.jsxs("div",{style:{position:Kt?"fixed":"absolute",...Kt?{inset:0}:{top:0,left:0,right:0,bottom:140},width:Kt?"100vw":void 0,height:Kt?"100vh":void 0,zIndex:Kt?30:10,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",background:"#000"},children:[a.jsxs("div",{ref:le,"aria-hidden":!1,style:Kt?{position:"absolute",top:"50%",left:"50%",width:"100vh",height:"100vw",transform:"translate(-50%, -50%) rotate(90deg)",transformOrigin:"center center",overflow:"hidden",background:"#000"}:{position:"relative",width:"100%",height:"100%",maxWidth:"100vw",borderRadius:0,display:"block",overflow:"hidden",background:"#000"},children:[Pe&&Ae?a.jsxs(a.Fragment,{children:[a.jsx("iframe",{ref:ze,src:`https://www.youtube-nocookie.com/embed/${Ae}?autoplay=1&mute=1&controls=0&modestbranding=1&showinfo=0&rel=0&iv_load_policy=3&fs=0&disablekb=1&playsinline=1&enablejsapi=1&origin=${encodeURIComponent(window.location.origin)}${qn>0?`&start=${qn}`:""}`,className:"w-full h-full border-0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!1,style:{position:"absolute",inset:0,width:"100%",height:"100%",background:"#000",pointerEvents:"none",transform:"scale(1.3)",transformOrigin:"center center"},title:"Video player"}),!Be&&a.jsx("div",{style:{position:"absolute",inset:0,zIndex:2,background:"#000",pointerEvents:"none",transition:"opacity 0.3s ease-out"}}),a.jsx("div",{style:{position:"absolute",inset:0,zIndex:3}}),!Zt&&a.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"12%",background:"linear-gradient(to top, #000 15%, transparent 100%)",zIndex:4,pointerEvents:"none"}}),!Zt&&a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"8%",background:"linear-gradient(to bottom, #000 5%, transparent 100%)",zIndex:4,pointerEvents:"none"}}),Nt&&pipYtFlash&&a.jsx("div",{className:"vx-pip-yt-cover"})]}):a.jsx("video",{ref:bt,src:Te,className:"w-full h-full bg-black",autoPlay:!0,muted:!0,playsInline:!0,"webkit-playsinline":"true","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-orientation":"portrait",preload:"auto",fetchpriority:"high",poster:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:Zt||Kt?"cover":"contain",background:"#000"},onLoadedMetadata:e=>{try{const t=e.target;Et(t.duration||0),Qt(t.videoWidth&&t.videoHeight?t.videoWidth/t.videoHeight:16/9)}catch(t){}},onTimeUpdate:e=>{try{xt.current||ft(e.target.currentTime/(e.target.duration||1))}catch(t){}},onEnded:Xi,onPause:()=>St(!1),onPlay:()=>St(!0),onCanPlay:()=>{try{const e=bt.current;e&&e.paused&&ba&&e.play().catch(()=>{})}catch{}},onError:e=>{try{const t=e.target;t&&Te&&!t._retried&&(t._retried=!0,setTimeout(()=>{try{t.src=m(Te),t.load()}catch{}},1500))}catch{}}}),a.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",zIndex:25},children:zt.map(e=>"link"===e.type?a.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{position:"absolute",left:`${e.positionX??5}%`,top:`${e.positionY??80}%`,padding:"8px 14px",borderRadius:"8px",backgroundColor:`${e.linkColor}33`,border:`2px solid ${e.linkColor}`,color:e.linkColor,textDecoration:"none",fontWeight:"bold",fontSize:"14px",cursor:"pointer",pointerEvents:"auto",transition:"all 200ms ease",transform:"scale(1)",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",display:"inline-block",whiteSpace:"nowrap",maxWidth:"calc(100% - 40px)",overflow:"hidden",textOverflow:"ellipsis"},onMouseEnter:t=>{t.target.style.transform="scale(1.05)",t.target.style.backgroundColor=`${e.linkColor}44`},onMouseLeave:t=>{t.target.style.transform="scale(1)",t.target.style.backgroundColor=`${e.linkColor}33`},children:["ðŸ”— ",e.linkText]},e.id):a.jsx("div",{style:{position:"absolute",left:`${e.positionX??5}%`,top:`${e.positionY??80}%`,borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.4)",border:"2px solid rgba(255,255,255,0.3)",opacity:.95,pointerEvents:"none"},children:a.jsx("img",{src:e.imageData,alt:"Video overlay",style:{width:"160px",maxHeight:"160px",objectFit:"cover",display:"block"}})},e.id))})]}),lt&&dt&&!kt&&!(Dt&&Dt.some(e=>"overlay"===e.type))&&a.jsx("button",{className:"transform active:scale-95 transition-transform","aria-label":"Play",onClick:e=>{e.stopPropagation(),ui()},style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",border:"1px solid rgba(255,255,255,0.08)",zIndex:20,outline:"none",filter:"none",width:88,height:88,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:44,background:"rgba(0,0,0,0.32)",boxShadow:"0 6px 14px rgba(0,0,0,0.36)",pointerEvents:dt?"auto":"none",opacity:dt?1:0,transition:"opacity 360ms ease"},children:a.jsx(V,{width:56,height:56})}),lt&&dt&&kt&&!(Dt&&Dt.some(e=>"overlay"===e.type))&&a.jsx("button",{className:"transform active:scale-95 transition-transform","aria-label":"Pause",onClick:e=>{e.stopPropagation(),ui()},style:{position:"absolute",left:"50%",top:"50%",transform:Kt?"translate(-50%, -50%) rotate(90deg)":"translate(-50%, -50%)",border:"1px solid rgba(255,255,255,0.08)",zIndex:20,outline:"none",filter:"none",width:88,height:88,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:44,background:"rgba(0,0,0,0.32)",boxShadow:"0 6px 14px rgba(0,0,0,0.36)",pointerEvents:dt?"auto":"none",opacity:dt?1:0,transition:"opacity 360ms ease, transform 200ms ease"},children:a.jsx(_,{width:56,height:56})})]}),ge&&a.jsx("div",{className:"fixed top-16 left-1/2 -translate-x-1/2 z-50 pointer-events-none",role:"status","aria-live":"polite",children:a.jsxs("div",{className:"flex items-start gap-3 bg-white text-black rounded-lg px-4 py-2 shadow-lg min-w-[220px] sm:min-w-[280px]",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-green-600 flex items-center justify-center text-white text-sm",children:"âœ“"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium",children:"Screen locked"}),a.jsx("div",{className:"text-xs text-gray-600",children:"Only play/pause available"})]})]})}),ye&&a.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center pointer-events-none",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-36 h-36 rounded-full flex items-center justify-center shadow-2xl",style:{background:"#bb890aff"},children:a.jsx(L,{inCircle:!1,size:80,color:ka})}),a.jsx("div",{className:"rounded-full px-4 py-2 bg-black/50 text-white border border-white/10 text-sm",style:{minWidth:140,textAlign:"center"},children:"Screen Locked"})]})}),Qe&&a.jsx("div",{"aria-hidden":"true",style:{position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:"calc(env(safe-area-inset-bottom, 20px) + 180px)",zIndex:320,pointerEvents:"none"},children:a.jsx("div",{className:"bg-red-700 text-white rounded-md px-4 py-2 shadow-lg text-sm",children:"Screen locked. Tap the lock icon to unlock."})})]}),at.map(e=>a.jsx("div",{style:{position:"fixed",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:9999},children:e.particles.map((t,r)=>a.jsx("div",{style:{position:"absolute",left:e.x,top:e.y,"--heart-dx":`${t.dx}px`,"--heart-dy":`${t.dy}px`,"--heart-rot":`${t.angle}deg`,animation:`heart-explode ${t.duration}ms cubic-bezier(0.25, 0.46, 0.45, 0.94) ${t.delay}ms forwards`,willChange:"transform, opacity",pointerEvents:"none"},children:a.jsx("svg",{width:t.size,height:t.size,viewBox:"0 0 24 24",fill:"#ff2d55",style:{filter:"drop-shadow(0 2px 6px rgba(255,45,85,0.5))"},children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})},r))},e.id)),!Dt.some(e=>"overlay"===e.type&&("fullscreen"===e.overlayAdPosition||"videoPlayer"===e.overlayAdPosition))&&a.jsxs("div",{className:"w-full flex flex-col pb-2",style:{position:"fixed",zIndex:500,left:Kt?"50%":0,right:Kt?"auto":0,top:Kt?"50%":"auto",bottom:Kt?"auto":"calc(env(safe-area-inset-bottom, 20px) + 38px)",width:Kt?"100vh":void 0,transform:Kt?"translate(-50%, -50%) rotate(90deg) translateY(calc(50vw - 50%))":"none",transformOrigin:"center",boxSizing:"border-box",paddingLeft:20,paddingRight:20,transition:"opacity 220ms ease, bottom 200ms ease",opacity:Kt?lt?1:0:me?.28:lt?1:0,pointerEvents:Kt?lt?"auto":"none":me?"none":lt?"auto":"none",background:Ta?"linear-gradient(180deg, rgba(0,0,0,0.30), rgba(0,0,0,0.22))":"linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.6))",borderTop:Ta?"1px solid rgba(255,255,255,0.02)":"1px solid rgba(0,0,0,0.06)",boxShadow:Ta?"inset 0 1px 0 rgba(255,255,255,0.01), 0 -6px 16px rgba(0,0,0,0.44)":"inset 0 1px 0 rgba(255,255,255,0.6), 0 -6px 18px rgba(0,0,0,0.06)",backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)"},children:[a.jsx("div",{className:"w-full py-4 flex items-center",children:a.jsxs("div",{ref:gt,role:"slider","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(100*mt),onPointerDown:e=>{wi(e)},onClick:e=>{const t=e.clientX||e.touches&&e.touches[0]?.clientX,r=gt.current;if(t&&r){const e=r.getBoundingClientRect(),n=Math.max(0,Math.min(1,(t-e.left)/e.width));if(ft(n),Tr(t),Pe&&ze.current&&Tt>0)try{ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[n*Tt,!0]}),"*")}catch{}else{const e=bt.current;if(e&&Tt>0)try{e.currentTime=n*Tt}catch{}}}},className:"relative w-full select-none touch-none cursor-pointer",style:{height:20,display:"flex",alignItems:"center"},children:[a.jsxs("div",{className:"absolute left-0 right-0 rounded-full",style:{height:8,background:Ta?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.06)",boxShadow:Ta?"inset 0 1px 1px rgba(255,255,255,0.02), inset 0 -1px 2px rgba(0,0,0,0.35)":"inset 0 1px 1px rgba(255,255,255,0.6), inset 0 -1px 2px rgba(0,0,0,0.08)",top:"50%",transform:"translateY(-50%)",overflow:"hidden",borderRadius:999},children:[a.jsx("div",{style:{height:"100%",width:100*mt+"%",background:ga,opacity:1,borderRadius:999,boxShadow:"0 2px 6px rgba(0,0,0,0.08)"}}),(Hn||[]).map(e=>{const t=100*(Tt>0?Math.max(0,Math.min(1,(e.time||0)/Tt)):0);return a.jsx("div",{style:{position:"absolute",left:`${t}%`,top:0,bottom:0,width:3,transform:"translateX(-50%)",background:Sa,opacity:.98,pointerEvents:"none",borderRadius:2}},e.id)})]}),a.jsxs("div",{className:"absolute z-20 flex items-center justify-center",style:{left:100*mt+"%",top:"50%",transform:"translate(-50%, -50%)",width:24,height:24,pointerEvents:"auto",touchAction:"none"},onPointerDown:e=>{e.stopPropagation?.();try{e.target?.setPointerCapture?.(e.pointerId)}catch{}wi(e)},children:[a.jsx("div",{className:"absolute",style:{width:36,height:36,borderRadius:"50%",background:ga,opacity:yt?.28:.12,filter:"blur(6px)",top:"50%",left:"50%",transform:`translate(-50%, -50%) scale(${yt?1.18:1})`,transition:"transform 120ms ease, opacity 120ms ease"}}),a.jsx("div",{style:{width:12,height:12,borderRadius:4,background:ga,boxShadow:"0 2px 6px rgba(0,0,0,0.35)",position:"relative",zIndex:2,transform:yt?"scale(1.9)":"scale(1)",transition:"transform 120ms cubic-bezier(.2,.9,.3,1)"}})]})]})}),a.jsx("canvas",{ref:hr,style:{position:"fixed",left:br,top:jr,width:Sr.w,height:Sr.h,display:yr?"block":"none",borderRadius:10,overflow:"hidden",zIndex:90,boxShadow:"0 8px 24px rgba(0,0,0,0.6)",background:"#000"},"aria-hidden":!yr}),a.jsx("video",{ref:Cr,src:"",preload:"metadata",muted:!0,playsInline:!0,style:{position:"absolute",left:-9999,width:1,height:1,opacity:0,pointerEvents:"none"},"aria-hidden":"true"}),a.jsxs("div",{className:"flex items-center justify-between text-white mt-1",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-xs font-medium text-gray-200 tracking-wide",children:(()=>{const e=bt.current,t=Pe||!e?Math.floor(mt*(Tt||0)):Math.floor(e.currentTime||mt*Tt||0),r=Math.floor(Tt||0),n=e=>`${Math.floor(e/60)}:${String(Math.floor(e%60)).padStart(2,"0")}`;return`${n(t)} / ${n(r||0)}`})()}),a.jsxs("button",{onClick:()=>he(!pe),className:"text-[10px] px-1.5 py-0.5 rounded font-bold hover:opacity-80 transition-opacity relative",style:{background:"#1e2736",color:ka,border:`1px solid ${Na}`,cursor:"pointer"},children:[La,pe&&a.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-[#0f1419] rounded-lg shadow-lg border border-gray-700 py-2 z-50",style:{minWidth:"120px",backgroundColor:"#0f1419",borderColor:"rgba(255,255,255,0.08)"},onClick:e=>e.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Ia("Auto"),he(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-800 transition-colors",style:{color:"Auto"===La?ka:"rgba(255,255,255,0.8)",backgroundColor:"Auto"===La?"rgba(255,255,255,0.06)":"transparent",fontWeight:"Auto"===La?"600":"400"},children:"Auto"}),["144p","240p","360p","480p","720p","1080p","1440p","2160p"].map(e=>{const t=["144p","240p","360p","480p","720p","1080p","1440p","2160p"],r=(()=>{try{if(te&&te.user&&te.user.subscription){const e=te.user.subscription,t=te.user.alaCarteAddons?.includes("Video Quality - Up to 2160p (4K)"),r=te.user.alaCarteAddons?.includes("Video Quality - Up to 1440p");if("pro"===e.tier||"Pro"===e.tier||"Pro Creator"===e.tier)return t?"2160p":r?"1440p":"1080p"}const e=te?.user?.alaCarteAddons?.includes("Video Quality - Up to 1440p"),t=te?.user?.alaCarteAddons?.includes("Video Quality - Up to 2160p (4K)");return t?"2160p":e?"1440p":"360p"}catch(e){return"360p"}})(),n=t.indexOf(r),o=!(t.indexOf(e)<=n);return a.jsx("button",{disabled:o,onClick:()=>{o||(Ia(e),he(!1))},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-800 transition-colors relative group",style:{color:o?"rgba(255,255,255,0.4)":La===e?ka:"rgba(255,255,255,0.8)",backgroundColor:La===e?"rgba(255,255,255,0.06)":"transparent",fontWeight:La===e?"600":"400",cursor:o?"not-allowed":"pointer",opacity:o?.6:1},title:o?`Upgrade to unlock ${e}`:"",children:a.jsxs("span",{className:"flex items-center justify-between w-full",children:[a.jsx("span",{children:e}),o&&a.jsx("span",{className:"text-xs",children:"ðŸ”’"})]})},e)})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-6",style:{alignItems:"center"},children:[a.jsx("button",{onClick:()=>{if(he(!1),!te.user)return te.openAuthModal();ha(!0)},className:"p-1.5 hover:opacity-80 transition-opacity",children:a.jsx(W,{})}),a.jsx("button",{onClick:()=>{me||fa(!0)},className:"p-1.5 hover:opacity-80 transition-opacity",style:{pointerEvents:me?"none":"auto",color:Ta?"#fff":"#111"},"aria-label":"Notes",children:a.jsx(J,{})}),a.jsx("button",{onClick:()=>bi(),className:"p-1.5 hover:opacity-80 transition-opacity",children:a.jsx(O,{})})]})]})]}),Dt&&Dt.length>0&&a.jsxs("div",{className:"vx-overlay-ads",children:[Dt.filter(e=>"video"===e.type).map(e=>a.jsx("div",{onClick:()=>{e.videoAdLink&&window.open(e.videoAdLink,"_blank")},style:{position:"fixed",inset:Kt?"auto":0,top:Kt?"50%":0,left:Kt?"50%":0,width:Kt?"100vh":"100vw",height:Kt?"100vw":"100vh",transform:Kt?"translate(-50%, -50%) rotate(90deg)":"none",background:"rgba(0, 0, 0, 0.95)",zIndex:50,display:"flex",alignItems:"center",justifyContent:"center",padding:20,cursor:"pointer"},children:a.jsxs("div",{style:{width:"100%",maxWidth:400,background:"#000",borderRadius:12,position:"relative",display:"flex",flexDirection:"column",aspectRatio:9/16,overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.8)"},onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{style:{flex:1,background:"linear-gradient(135deg, #111827 0%, #1f2937 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280",fontSize:14,position:"relative",overflow:"hidden"},children:[e.videoAdSrc||e.videoAdUrl||e.overlayVideoUrl?a.jsx("video",{src:e.videoAdSrc||e.videoAdUrl||e.overlayVideoUrl,autoPlay:!0,muted:!0,playsInline:!0,loop:!0,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",background:"#000"},onError:e=>{e.target.style.display="none"}}):null,a.jsxs("div",{style:{position:"absolute",inset:"40px 20px",background:`linear-gradient(135deg, ${e.videoAdCtaColor||"#3b82f6"}${e.videoAdSrc||e.videoAdUrl||e.overlayVideoUrl?"cc":""} 0%, ${e.videoAdCtaColor?`${e.videoAdCtaColor}dd`:"#1e40af"} 100%)`,borderRadius:12,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",zIndex:10,border:"2px solid rgba(255, 255, 255, 0.1)"},children:[a.jsx("div",{style:{width:"100%",height:"120px",background:"rgba(0, 0, 0, 0.3)",borderRadius:8,marginBottom:16,display:"flex",alignItems:"center",justifyContent:"center",color:"#90caf9",fontWeight:600,fontSize:14},children:"ðŸŽ¬ Ad Video"}),a.jsx("div",{style:{color:"white",fontSize:16,fontWeight:700,marginBottom:12,textAlign:"center"},children:e.videoAdTitle||"Your Ad Title"}),a.jsx("button",{style:{padding:"12px 24px",background:e.videoAdCtaColor||"#0b74de",color:"white",border:"none",borderRadius:8,fontSize:14,fontWeight:700,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},onClick:()=>{e.videoAdLink&&window.open(e.videoAdLink,"_blank")},children:e.videoAdCtaText||"Learn More"})]})]}),a.jsx("button",{onClick:t=>{t.stopPropagation(),Ut(e.id)},style:{position:"absolute",top:16,right:16,width:36,height:36,borderRadius:"50%",background:"rgba(0,0,0,0.6)",color:"#fff",border:"none",fontSize:20,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:20},children:"âœ•"})]})},e.id||`video-ad-${Math.random()}`)),Dt.filter(e=>"default2"===e.type).map(e=>a.jsxs("div",{onClick:()=>{e.default2Link&&window.open(e.default2Link,"_blank")},style:{position:"fixed",inset:Kt?"auto":0,top:Kt?"50%":0,left:Kt?"50%":0,width:Kt?"100vh":"100vw",height:Kt?"100vw":"100vh",transform:Kt?"translate(-50%, -50%) rotate(90deg)":"none",background:"rgba(0, 0, 0, 0.95)",zIndex:50,display:"flex",alignItems:"center",justifyContent:"center",padding:20,cursor:"pointer"},children:[a.jsx("button",{onClick:t=>{t.stopPropagation(),Ut(e.id)},style:{position:"absolute",top:16,right:16,width:36,height:36,borderRadius:"50%",background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.3)",color:"#fff",fontSize:20,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:60,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",transition:"all 0.2s ease"},"aria-label":"Close ad",children:"âœ•"}),a.jsxs("div",{style:{width:"100%",maxWidth:400,maxHeight:"90vh",overflowY:"auto",background:"#000",borderRadius:12,position:"relative",display:"flex",flexDirection:"column",aspectRatio:9/16,boxShadow:"0 20px 60px rgba(0, 0, 0, 0.8)"},onClick:e=>e.stopPropagation(),children:[a.jsx("div",{style:{flex:1,background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280",fontSize:14,position:"relative"},children:e.default2Image||e.default2Logo||e.imageUrl||e.thumbnail?a.jsx("img",{src:e.default2Image||e.default2Logo||e.imageUrl||e.thumbnail,alt:e.default2Title||"Ad",style:{width:"100%",height:"100%",objectFit:"cover"}}):a.jsx("div",{children:"Video Content Area"})}),a.jsx("div",{style:{background:"#000",padding:"16px",borderTop:`3px solid ${e.default2LineColor||"#d946ef"}`},children:[1,2].map(t=>a.jsxs("div",{style:{marginBottom:1===t?12:0,padding:"12px 14px",background:e.default2BgColor||"#ffffff",border:`2px solid ${e.default2LineColor||"#d946ef"}`,borderLeft:`3px solid ${e.default2LineColor||"#d946ef"}`,borderRadius:8,display:"flex",alignItems:"center",gap:10,cursor:"pointer",transition:"all 0.2s ease",minHeight:"70px"},onMouseEnter:t=>{t.currentTarget.style.background=e.default2BgColor||"#f5f5f5"},onMouseLeave:t=>{t.currentTarget.style.background=e.default2BgColor||"#ffffff"},onClick:()=>{e.default2Link&&window.open(e.default2Link,"_blank")},children:[e.default2Logo&&a.jsx("img",{src:e.default2Logo,alt:"logo",style:{width:50,height:50,borderRadius:8,objectFit:"cover",flexShrink:0},onError:e=>e.target.style.display="none"}),a.jsxs("div",{style:{flex:1,minWidth:0},children:[a.jsx("div",{style:{fontSize:13,fontWeight:700,color:e.default2TextColor||"#111827",marginBottom:4},children:e.default2Title||"Card Title"}),a.jsx("div",{style:{fontSize:12,color:e.default2TextColor||"#6b7280"},children:e.default2Description||"Card description"})]}),a.jsx("div",{style:{fontSize:20,color:e.default2LineColor||"#d946ef",flexShrink:0},children:"â†’"})]},t))})]})]},e.id||`default2-ad-${Math.random()}`)),Dt.filter(e=>"overlay"===e.type).map(e=>{const t=e.overlayAdPosition||"bottom",r="bottom"===t,n="top"===t,o="videoOverlay"===t,i="videoPlayer"===t;return"fullscreen"===t?a.jsxs("div",{style:{position:"fixed",inset:Kt?"auto":0,top:Kt?"50%":0,left:Kt?"50%":0,width:Kt?"100vh":"100vw",height:Kt?"100vw":"100vh",transform:Kt?"translate(-50%, -50%) rotate(90deg)":"none",background:e.overlayAdBgColor||"#E41E24",zIndex:50,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:"calc(env(safe-area-inset-top, 20px) + 40px)",paddingBottom:"calc(env(safe-area-inset-bottom, 20px) + 40px)",paddingLeft:40,paddingRight:40,cursor:"pointer",opacity:e.overlayAdOpacity||1,textAlign:"center"},onClick:()=>{e.link&&window.open(e.link,"_blank")},children:[a.jsx("div",{style:{width:120,height:120,borderRadius:"12px",background:"rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:24,border:"2px solid rgba(255,255,255,0.3)",overflow:"hidden"},children:e.overlayProfileUrl?a.jsx("img",{src:e.overlayProfileUrl,alt:"Company",style:{width:"100%",height:"100%",objectFit:"cover"}}):a.jsx("span",{style:{fontSize:40,opacity:.6},children:"ðŸ“·"})}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16,alignItems:"center",justifyContent:"center",color:e.overlayAdTextColor||"#fff",textAlign:"center",maxWidth:"85%"},children:e.overlayAdTextItems&&e.overlayAdTextItems.length>0?e.overlayAdTextItems.map((e,t)=>a.jsx("div",{style:{fontSize:28,fontWeight:700,lineHeight:1.3},children:e.text},t)):a.jsx("div",{style:{fontSize:28,fontWeight:700,lineHeight:1.3},children:e.overlayAdText||"Important Announcement"})}),a.jsx("button",{style:{padding:"14px 40px",background:"#fff",color:e.overlayAdBgColor||"#E41E24",border:"none",borderRadius:8,fontSize:16,fontWeight:700,cursor:"pointer",marginTop:16,transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 16px rgba(0,0,0,0.2)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)"},onClick:t=>{t.stopPropagation(),e.link&&window.open(e.link,"_blank")},children:e.overlayBtnText||"Learn More"})]},e.id||`overlay-ad-${Math.random()}`):i?a.jsx(C,{ad:e,forceLandscapeCss:Kt,onDismiss:Ut},e.id||`video-player-ad-${Math.random()}`):a.jsxs("div",{style:{position:"fixed",...n&&(Kt?{top:"50%",left:"50%",right:"auto",width:"100vh",transform:"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 50%))"}:{top:"env(safe-area-inset-top, 20px)",left:0,right:0}),...r&&(Kt?{top:"50%",left:"50%",right:"auto",width:"100vh",transform:"translate(-50%, -50%) rotate(90deg) translateY(calc(50vw - 50% - 100px))"}:{bottom:"calc(env(safe-area-inset-bottom, 20px) + 100px)",left:0,right:0}),...o&&(Kt?{top:"50%",left:"50%",bottom:"auto",right:"auto",transform:"translate(-50%, -50%) rotate(90deg)",maxWidth:"90vh"}:{bottom:"50%",left:"50%",transform:"translateX(-50%)",maxWidth:"90%"}),zIndex:40,background:e.overlayAdBgColor||"#E41E24",color:e.overlayAdTextColor||"#fff",padding:"12px 16px",display:"flex",alignItems:"center",gap:12,overflow:"hidden",opacity:e.overlayAdOpacity||1,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",borderRadius:o?8:0,cursor:"pointer"},onClick:()=>{e.link&&window.open(e.link,"_blank")},children:[a.jsx("div",{style:{background:e.overlayBrandBgColor||e.overlayAdBgColor||"#E41E24",color:e.overlayBrandTextColor||e.overlayAdTextColor||"#fff",padding:"6px 10px",borderRadius:6,fontWeight:700,fontSize:16,whiteSpace:"nowrap",flexShrink:0,opacity:e.overlayTagOpacity||1},children:e.overlayAdEmoji||"âš¡"}),a.jsxs("div",{style:{flex:1,overflow:"hidden",whiteSpace:"nowrap"},children:["marquee"!==e.overlayTextAnimation&&e.overlayTextAnimation?null:a.jsx("style",{children:`\n\t\t\t\t\t\t\t\t\t\t\t@keyframes marquee-${e.id} {\n\t\t\t\t\t\t\t\t\t\t\t\t0% { transform: translateX(100%); }\n\t\t\t\t\t\t\t\t\t\t\t\t100% { transform: translateX(-100%); }\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t`}),a.jsxs("div",{style:{display:"flex",gap:40,animation:"marquee"!==e.overlayTextAnimation&&e.overlayTextAnimation?"none":`marquee-${e.id} 20s linear infinite`,opacity:"fade"===e.overlayTextAnimation?"var(--fade-opacity, 1)":1,fontSize:14,fontWeight:600},children:[e.overlayAdTextItems&&e.overlayAdTextItems.length>0?e.overlayAdTextItems.map((e,t)=>a.jsx("span",{style:{whiteSpace:"nowrap"},children:e.text},t)):a.jsx("span",{children:e.overlayAdText||"Important Update"}),e.overlayAdTextItems&&e.overlayAdTextItems.length>0?e.overlayAdTextItems.map((e,t)=>a.jsx("span",{style:{whiteSpace:"nowrap"},children:e.text},`repeat-${t}`)):a.jsx("span",{children:e.overlayAdText||"Important Update"})]})]})]},e.id||`overlay-ticker-${Math.random()}`)}),Dt.filter(e=>!e.type||"bottom"===e.type).length>0&&a.jsx("div",{style:{position:"fixed",bottom:"calc(env(safe-area-inset-bottom, 20px) + 150px)",left:0,right:0,zIndex:38,backgroundColor:"rgba(0, 0, 0, 0.95)",borderTop:`2px solid ${Dt.filter(e=>!e.type||"bottom"===e.type)[0]?.borderColor||"rgba(255, 255, 255, 0.2)"}`,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",padding:"12px 16px",display:"flex",alignItems:"center",gap:"12px",maxHeight:"180px",overflowX:"auto",overflowY:"auto",scrollBehavior:"smooth",boxShadow:"0 -4px 12px rgba(0, 0, 0, 0.5)"},children:Dt.filter(e=>!e.type||"bottom"===e.type).slice(0,2).map((e,t)=>a.jsx(ne,{profileName:e.profileName||e.name,profileAvatar:e.profileAvatar||e.avatar,textItems:e.textItems||(e.text?[{text:e.text}]:[]),textInterval:e.textInterval||5e3,textAnimation:e.textAnimation||"fade",cardAnimation:e.cardAnimation||"fade",cardEffect:e.cardEffect||"none",cardExitAnimation:e.cardExitAnimation||"fadeOut",borderColor:e.borderColor||"rgba(255, 255, 255, 0.2)",duration:e.duration||30,link:e.link},e.id||`ad-${t}`))})]}),Dt.filter(e=>"default2"===e.type&&e.default2Link).map(e=>a.jsx("button",{style:{position:"fixed",bottom:"calc(env(safe-area-inset-bottom, 20px) + 80px)",left:0,margin:0,marginLeft:0,padding:"10px 18px",background:e.default2BgColor||"#ffffff",color:e.default2TextColor||"#111827",border:`2px solid ${e.default2LineColor||"#d946ef"}`,borderLeft:"none",borderRadius:"0 8px 8px 0",fontSize:14,fontWeight:700,cursor:"pointer",boxShadow:`0 4px 16px ${e.default2LineColor||"#d946ef"}55`,whiteSpace:"nowrap",zIndex:9999,pointerEvents:"auto",transition:"all 0.2s ease",letterSpacing:"0.3px",transform:"translateX(0)"},onClick:t=>{t.stopPropagation(),e.default2Link&&window.open(e.default2Link,"_blank")},children:"Visit Link"},`visit-link-${e.id||"default2"}`)),ce&&a.jsx("div",{className:"fixed inset-0 z-[1200] bg-black/60 flex items-end sm:items-center justify-center",onClick:()=>ue(!1),style:{backdropFilter:"none",WebkitBackdropFilter:"none",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"modal-dialog w-full max-w-md bg-[#0b0b0b] rounded-t-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Options",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:Wr,maxHeight:Or.current,overflow:"hidden",display:"flex",flexDirection:"column",marginBottom:12,borderRadius:24},children:[a.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:nn,onTouchStart:nn,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:a.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:nn,onTouchStart:nn,style:{cursor:"ns-resize"}})}),Bo&&a.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:o("Drag to resize",N)}),a.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 px-2 text-center",children:o("More Options",N)}),a.jsxs("div",{className:"space-y-2 overflow-auto",style:{maxHeight:`calc(${Wr}px - 64px)`,paddingRight:6,paddingBottom:64},children:[a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none",onClick:async()=>{if(te.user)try{const e=localStorage.getItem("regaarder_token");xo?(await fetch(`${vo}/bookmarks/videos`,{method:"DELETE",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({videoUrl:Te})}),yo(!1),kn(o("Removed bookmark",N))):(await fetch(`${vo}/bookmarks/videos`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({videoUrl:Te,title:$e})}),yo(!0),kn(o("Bookmarked",N))),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1400)}catch{}else te.openAuthModal()},"aria-pressed":!1,style:{background:"transparent",outline:"none",boxShadow:"none",border:"none",WebkitTapHighlightColor:"transparent"},onPointerDown:e=>{try{e.currentTarget.style.outline="none"}catch{}},children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:a.jsx(z,{})}),a.jsx("span",{className:"text-gray-900",children:o("Bookmark",N)})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{ue(!1),lo()},style:{background:"transparent",outline:"none",boxShadow:"none",border:"none",WebkitTapHighlightColor:"transparent"},children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",style:{color:Sa},children:a.jsx(z,{})}),a.jsx("span",{className:"text-gray-900",children:o("Bookmark Moment",N)})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{ue(!1),Ir(!0)},children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:a.jsx(ee,{})}),a.jsx("span",{className:"text-gray-900",children:o("Share",N)})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{ue(!1),xn(!0)},children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-black/10 text-gray-900",children:a.jsx(Y,{})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"text-gray-900 font-medium leading-tight",children:o("Tip Creator",N)}),a.jsx("div",{className:"text-xs text-gray-500",children:o("Support",N)+" @"+Oe})]})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{if(!Da){Oa(!0);try{localStorage.setItem("watchIncognito","1")}catch{}return Ua("player:incognitoChanged",{incognito:!0}),kn(o("Incognito ON â€” actions won't be saved",N)),Sn.current&&clearTimeout(Sn.current),void(Sn.current=setTimeout(()=>kn(""),1600))}_a(!0)},"aria-pressed":Da,children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:a.jsx(H,{})}),a.jsx("span",{className:"text-gray-900",children:o("Watch Incognito",N)}),a.jsx("span",{style:{marginLeft:"auto"},children:a.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:Da?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:o(Da?"On":"Off",N)})})]}),Va&&a.jsxs("div",{style:{padding:12,background:"#fff",borderRadius:12,marginTop:8,border:"1px solid #e5e7eb",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[a.jsx("div",{style:{fontWeight:700,color:"#111",marginBottom:6},children:o("Turn off Incognito?",N)}),a.jsx("div",{style:{fontSize:13,color:"#6b7280",marginBottom:10},children:o("Your watch history and likes will be saved.",N)}),a.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[a.jsx("button",{className:"px-3 py-2 rounded-lg bg-transparent text-gray-900 border border-gray-300",onClick:()=>_a(!1),children:o("Cancel",N)}),a.jsx("button",{className:"px-3 py-2 rounded-lg text-white",style:{background:"#111"},onClick:()=>{Oa(!1);try{localStorage.setItem("watchIncognito","0")}catch{}Ua("player:incognitoChanged",{incognito:!1}),kn(o("Incognito OFF",N)),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1400),_a(!1)},children:o("Turn Off",N)})]})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors "+(ya?"bg-black/5":"hover:bg-gray-100"),onClick:()=>{va(e=>{const t=!e;try{bt.current&&(bt.current.loop=t)}catch{}return kn(o(t?"Loop enabled":"Loop disabled",N)),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1400),t})},children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:a.jsx(X,{})}),a.jsx("span",{className:"text-gray-900",children:o("Loop Video",N)}),a.jsx("span",{style:{marginLeft:"auto"},children:a.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:ya?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:o(ya?"On":"Off",N)})})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors "+(ba?"bg-black/5":"hover:bg-gray-100"),onClick:()=>{wa(e=>{const t=!e;return kn(o(t?"Auto-play enabled":"Auto-play disabled",N)),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1400),t})},children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M8 5v14l11-7Z"})})}),a.jsx("span",{className:"text-gray-900",children:o("Auto-play",N)}),a.jsx("span",{style:{marginLeft:"auto"},children:a.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:ba?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:o(ba?"On":"Off",N)})})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors justify-between",onClick:()=>{ue(!1),fa(!0)},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:a.jsx(J,{})}),a.jsx("span",{className:"text-gray-900",children:o("Notes",N)})]}),a.jsx("span",{className:"text-xs bg-gray-200 px-2 py-0.5 rounded-full text-gray-700",children:o("Premium",N)})]}),a.jsx("div",{className:"border-t border-gray-200 my-3"}),a.jsxs("div",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",stroke:"#111",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900 leading-tight",children:o("Dark Mode",N)}),a.jsx("div",{className:"text-gray-500 text-xs",children:o("Improve visibility",N)})]})]}),a.jsx("button",{"aria-pressed":Ta,onClick:()=>Ea(e=>!e),className:"bg-transparent border-0",style:{marginLeft:"auto"},children:a.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:Ta?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:o(Ta?"On":"Off",N)})})]}),a.jsx("div",{className:"border-t border-gray-200 mt-1"}),a.jsxs("div",{className:"px-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-gray-500 text-sm",children:o("Playback Speed",N)}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:!0,readOnly:!0,className:"hidden"}),a.jsx("div",{className:"w-10 h-5 bg-gray-200 rounded-full p-0.5 flex items-center",children:a.jsx("div",{className:"w-4 h-4 bg-white shadow-sm rounded-full translate-x-3"})})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"flex gap-2 mb-3",style:{overflowX:"auto",paddingBottom:4},children:[.5,.75,1,1.25,1.5,1.75,2].map(e=>{const t=Math.abs(Wa-e)<1e-4;return a.jsxs("button",{onClick:()=>$a(e),"aria-pressed":t,className:"py-2 px-3 rounded-full text-sm font-medium "+(t?"bg-[#111] text-white":"bg-gray-100 text-gray-700"),children:[e,"x"]},e)})}),a.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[a.jsx("input",{name:"playbackSpeedRange",type:"range",min:.25,max:2,step:.01,value:Wa,onChange:e=>$a(Math.max(.25,Math.min(2,Number(e.target.value)))),style:{flex:1},"aria-label":"Playback speed"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[a.jsx("input",{name:"playbackSpeedNumber",type:"number",value:Wa,min:.25,max:2,step:.01,onChange:e=>{const t=Number(e.target.value);Number.isFinite(t)&&$a(t)},onBlur:e=>{let t=Number(e.target.value);Number.isFinite(t)||(t=1),t=Math.max(.25,Math.min(2,Math.round(100*t)/100)),$a(t)},style:{width:72,padding:"6px 8px",borderRadius:8,background:"#fff",color:"#111",border:"1px solid #e5e7eb"},"aria-label":"Custom playback speed"}),a.jsx("div",{className:"text-gray-500",children:"x"})]})]})]})]}),a.jsx("div",{className:"border-t border-gray-200 my-3"}),a.jsx("div",{className:"px-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:o("Double Tap to Seek",N)}),a.jsx("div",{className:"text-gray-500 text-xs",children:o("Tap sides Â±10s, center to like",N)})]}),a.jsx("button",{"aria-pressed":Fa,onClick:()=>Ya(e=>!e),className:"bg-transparent border-0",style:{marginLeft:"auto"},children:a.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:Fa?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:o(Fa?"On":"Off",N)})})]})}),a.jsxs("div",{className:"px-2 pt-2",children:[a.jsxs("div",{className:"flex gap-2 mb-3",children:[a.jsx("button",{onClick:()=>ht(-10),className:"flex-1 flex items-center justify-center gap-2 bg-gray-100 rounded-xl py-3 text-gray-900 text-sm",children:a.jsxs("div",{className:"inline-flex items-center",children:[a.jsx(U,{}),a.jsx("span",{className:"font-medium",children:"-10s"})]})}),a.jsx("button",{onClick:()=>ht(10),className:"flex-1 flex items-center justify-center gap-2 bg-gray-100 rounded-xl py-3 text-gray-900 text-sm",children:a.jsxs("div",{className:"inline-flex items-center",children:[a.jsx("span",{className:"font-medium",children:"+10s"}),a.jsx(F,{})]})})]}),a.jsx("div",{className:"border-t border-gray-200 mb-3"}),a.jsx("div",{className:"text-gray-500 text-sm mb-2",children:o("Progress Bar Color",N)}),a.jsx("input",{name:"progressColor",value:ga,onChange:e=>xa(e.target.value),className:"w-full bg-white text-gray-900 border border-gray-200 rounded-xl px-3 py-2 placeholder-gray-400",placeholder:ga}),a.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[o("Current",N),": ",ga]}),a.jsx("div",{className:"text-gray-500 text-sm mt-3 mb-2",children:o("Quick Presets",N)}),a.jsx("div",{className:"grid grid-cols-6 gap-2",children:["#ca8a04","#a95bf3","#dc2626","#db2777","#9333ea","#c084fc","#0891b2","#059669","#65a30d","#84cc16","#eab308","#f59e0b"].map(e=>a.jsx("button",{onClick:()=>xa(e),className:"w-full h-9 rounded-lg",style:{background:e,boxShadow:ga.toLowerCase()===e.toLowerCase()?"0 0 0 3px #fff inset, 0 0 0 2px #e5e7eb":void 0,border:ga.toLowerCase()===e.toLowerCase()?"2px solid #e5e7eb":void 0},"aria-label":`Set color ${e}`},e))}),a.jsx("div",{className:"border-t border-[#232323] my-3"}),a.jsx("div",{className:"text-gray-300 text-sm mb-1",children:o("Adaptive Streaming (ABR)",N)}),a.jsxs("div",{className:"text-sm mb-3",style:{color:ka},children:["âœ“ ",o("Auto quality adjustment enabled",N)]}),a.jsx("div",{className:"text-gray-400 text-sm mb-3",children:o("Supported: MP4, MKV, AVI, WebM, MOV",N)}),a.jsx("button",{onClick:e=>{e.stopPropagation(),ue(!1),Mr(!0)},className:"text-left text-white text-sm opacity-90 underline",children:o("Report an issue",N)})]}),a.jsx("div",{style:{height:28}}),a.jsx("div",{"aria-hidden":"true",style:{position:"absolute",left:0,right:0,bottom:0,height:64,pointerEvents:"none",background:"linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,0.92))"}})]})]})}),bo&&a.jsx("div",{className:"fixed inset-0 z-[1200] flex items-end sm:items-center justify-center",onClick:()=>wo(!1),style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":o("Subtitle Settings",N),style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:_r,maxHeight:Yr.current,overflow:"hidden",marginBottom:12},children:[a.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:sn,onTouchStart:sn,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:a.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:sn,onTouchStart:sn,style:{cursor:"ns-resize"}})}),$o&&a.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:o("Drag to resize",N)}),a.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 px-2 text-center",children:o("Subtitle Settings",N)}),a.jsxs("div",{className:"overflow-auto",style:{maxHeight:`calc(${_r}px - 72px)`,paddingRight:6},children:[a.jsxs("div",{className:"flex items-center justify-between px-2 py-3 bg-gray-100 rounded-xl mb-3",children:[a.jsx("div",{children:a.jsx("div",{className:"text-gray-900",children:o("Enable Subtitles",N)})}),a.jsx("button",{onClick:()=>ko(e=>!e),"aria-pressed":jo,className:"w-12 h-6 rounded-full p-0.5 "+(jo?"bg-[#3b82f6]":"bg-gray-300"),children:a.jsx("div",{className:"w-5 h-5 bg-white rounded-full transform transition "+(jo?"translate-x-6":"translate-x-0")})})]}),a.jsxs("div",{className:"px-2 mb-3",children:[a.jsx("div",{className:"text-gray-700 text-sm mb-2",children:o("Language",N)}),a.jsxs("select",{value:So,onChange:e=>No(e.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[a.jsx("option",{value:"English",children:o("English",N)}),a.jsx("option",{value:"Spanish",children:o("Spanish",N)}),a.jsx("option",{value:"French",children:o("French",N)}),a.jsx("option",{value:"German",children:o("German",N)}),a.jsx("option",{value:"Portuguese",children:o("Portuguese",N)})]})]}),a.jsxs("div",{className:"px-2 mb-3",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{className:"text-gray-700 text-sm",children:[o("Font Size",N),": ",Co,"px"]})}),a.jsx("input",{name:"captionFontSizeRange",type:"range",min:"12",max:"28",value:Co,onChange:e=>To(Number(e.target.value)),className:"w-full"})]}),a.jsxs("div",{className:"px-2 mb-3",children:[a.jsx("div",{className:"text-gray-700 text-sm mb-2",children:o("Position",N)}),a.jsxs("select",{value:Eo,onChange:e=>Lo(e.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[a.jsx("option",{value:"Bottom",children:o("Bottom",N)}),a.jsx("option",{value:"Center",children:o("Center",N)}),a.jsx("option",{value:"Top",children:o("Top",N)})]})]}),a.jsxs("div",{className:"px-2 mb-3",children:[a.jsx("div",{className:"text-gray-700 text-sm mb-2",children:o("Text Color",N)}),a.jsx("div",{className:"flex items-center gap-3",children:["#FFFFFF","#FDE047","#34D399","#06B6D4","#F472B6"].map(e=>a.jsx("button",{onClick:()=>Po(e),className:"w-8 h-8 rounded-full border "+(Io===e?"ring-2 ring-gray-900":"ring-0"),style:{background:e},"aria-label":`Set caption color ${e}`},e))})]}),a.jsxs("div",{className:"px-2 mb-4",children:[a.jsx("div",{className:"text-gray-700 text-sm mb-2",children:o("Background Opacity",N)}),a.jsxs("select",{value:Mo,onChange:e=>Ao(e.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[a.jsx("option",{value:"100% Black",children:o("100% Black",N)}),a.jsx("option",{value:"80% Black",children:o("80% Black",N)}),a.jsx("option",{value:"60% Black",children:o("60% Black",N)}),a.jsx("option",{value:"40% Black",children:o("40% Black",N)}),a.jsx("option",{value:"0% (No Background)",children:o("0% (No Background)",N)})]})]}),a.jsxs("div",{className:"px-2 mb-4",children:[a.jsx("div",{className:"text-gray-500 text-xs mb-2",children:o("Preview",N)}),a.jsx("div",{className:"w-full rounded-md px-3 py-2",style:{background:Mo.includes("100")?"rgba(0,0,0,1)":Mo.includes("80")?"rgba(0,0,0,0.8)":Mo.includes("60")?"rgba(0,0,0,0.6)":Mo.includes("40")?"rgba(0,0,0,0.4)":"transparent"},children:a.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,onInput:e=>zo(e.currentTarget.textContent||""),className:"w-full outline-none",style:{color:Io,fontSize:Co,textAlign:"center",minHeight:28,display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"pre-wrap",wordBreak:"break-word",cursor:"text"},"aria-label":"Caption preview - editable",children:Ro})})]}),a.jsx("div",{className:"px-2",children:a.jsx("button",{onClick:()=>wo(!1),className:"w-full bg-[#111] text-white py-2 rounded-xl",children:o("Done",N)})}),a.jsx("div",{style:{height:20}})]})]})}),Lr&&a.jsx("div",{className:"fixed inset-0 z-[1200] flex items-end sm:items-center justify-center",onClick:()=>Ir(!1),style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"none",WebkitBackdropFilter:"none",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Share Video",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:Xr,maxHeight:Qr.current,overflow:"hidden",marginBottom:12},children:[a.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:dn,onTouchStart:dn,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:a.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:dn,onTouchStart:dn,style:{cursor:"ns-resize"}})}),Oo&&a.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:o("Drag to resize",N)}),a.jsx("div",{className:"mb-2",children:a.jsx("h3",{className:"text-gray-900 text-lg font-semibold text-center",children:o("Share Video",N)})}),a.jsx("p",{className:"text-gray-500 text-sm mb-4",children:o("Share this video with your friends and followers",N)}),a.jsxs("div",{ref:Tn,className:"overflow-auto flex-1 pr-1",style:{paddingRight:6},children:[a.jsx("div",{className:"text-gray-700 text-sm mb-3",children:o("Quick Actions",N)}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>{gi()},"aria-pressed":pi,children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white text-gray-900 shadow-sm",children:a.jsx(q,{})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"text-gray-900 font-medium",children:o(pi?"Copied":"Copy Link",N)}),a.jsx("div",{className:"text-gray-500 text-xs",children:o("Copy video URL to clipboard",N)})]}),a.jsx("div",{className:"ml-auto text-xs text-green-600",children:pi?o("Copied",N):""})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>(async()=>{const e="function"==typeof fi?fi():"";if(e){try{navigator.share?(await navigator.share({title:$e||"Watch on Regaarder",text:$e?`${$e} â€” Watch on Regaarder`:"Watch on Regaarder",url:e}),kn(o("Shared",N))):(await Ln(e),kn(o("Link copied",N)))}catch(t){try{await Ln(e)}catch{}kn(o("Link copied",N))}Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1600)}})(),children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-gray-900",children:a.jsx(Q,{})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"text-gray-900 font-medium",children:o("Share via...",N)}),a.jsx("div",{className:"text-gray-500 text-xs",children:o("Open system share menu",N)})]})]}),ho&&a.jsxs("div",{ref:En,className:"flex flex-col items-center mb-4 mt-2",children:[a.jsx("img",{src:fo,alt:"QR code",className:"w-40 h-40 bg-white p-1 rounded-md"}),a.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[a.jsx("button",{onClick:()=>{try{navigator.clipboard?.writeText(fo),kn(o("QR URL copied",N)),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1600)}catch{}},className:"px-3 py-1 bg-gray-100 rounded-md text-sm text-gray-900",children:o("Copy QR URL",N)}),a.jsx("button",{onClick:()=>{if(!fo)return;const e=document.createElement("a");e.href=fo,e.download="video-qr.png",document.body.appendChild(e),e.click(),e.remove()},className:"px-3 py-1 bg-gray-100 rounded-md text-sm text-gray-900",children:o("Download QR",N)}),a.jsx("button",{onClick:()=>mo(!1),className:"px-3 py-1 bg-gray-200 rounded-md text-sm text-gray-900",children:o("Close",N)})]})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>{(async e=>{if(e)try{if("undefined"!=typeof window&&window.QRCode&&"function"==typeof window.QRCode.toDataURL){const t=await window.QRCode.toDataURL(e,{width:360});go(t)}else if("undefined"!=typeof window&&"function"==typeof window.kjua){const t=window.kjua({text:e,fill:"#000",back:"#fff",size:360});if(t&&"CANVAS"===t.tagName)go(t.toDataURL("image/png"));else{if(!t)throw new Error("kjua returned no element");{const e=(new XMLSerializer).serializeToString(t),r=btoa(unescape(encodeURIComponent(e)));go("data:image/svg+xml;base64,"+r)}}}else{const t=`https://api.qrserver.com/v1/create-qr-code/?size=360x360&data=${encodeURIComponent(e)}`;go(t)}mo(!0),setTimeout(()=>{try{En.current?En.current.scrollIntoView({behavior:"smooth",block:"center"}):Tn.current&&(Tn.current.scrollTop=Tn.current.scrollHeight)}catch{}},90)}catch(t){const r=`https://api.qrserver.com/v1/create-qr-code/?size=360x360&data=${encodeURIComponent(e)}`;go(r),mo(!0),setTimeout(()=>{try{En.current&&En.current.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},90)}})(fi())},children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-gray-900",children:a.jsx(K,{})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"text-gray-900 font-medium",children:o("QR Code",N)}),a.jsx("div",{className:"text-gray-500 text-xs",children:o("Generate QR code for sharing",N)})]})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl "+(vi?"opacity-40 cursor-not-allowed":""),onClick:e=>{xi||vi||(async e=>{try{if(e?.stopPropagation?.(),!Te)return;if(Pe)return kn(o("Download not available for YouTube videos",N)),Sn.current&&clearTimeout(Sn.current),void(Sn.current=setTimeout(()=>kn(""),2e3));yi(!0);try{const e=document.createElement("a");return e.href=Te,e.download="",document.body.appendChild(e),e.click(),e.remove(),void setTimeout(()=>yi(!1),600)}catch(t){}try{const e=await fetch(Te),t=await e.blob(),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download="video.mp4",document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(r)}catch(t){}finally{yi(!1)}}finally{}})(e)},disabled:xi||vi,style:{background:"#f3f4f6"},"aria-busy":xi,children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white text-gray-900 shadow-sm",children:a.jsx(G,{})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"text-gray-900 font-medium",children:vi?o("Download unavailable",N):xi?"Downloading...":"Download"}),a.jsx("div",{className:"text-gray-500 text-xs",children:vi?o("YouTube videos cannot be downloaded",N):xi?"Preparing file...":"Includes Regaarder watermark"})]})]})]}),a.jsx("div",{className:"text-gray-700 text-sm mb-3",children:"Share to Social Media"}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(Z,{bg:"#e6f0ff",label:"Facebook",onClick:()=>{return e=fi(),window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}`,"_blank","noopener");var e},children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:a.jsx("path",{d:"M22 12a10 10 0 1 0-11.5 9.86v-6.99H8.9v-2.87h1.6V9.41c0-1.57.93-2.45 2.36-2.45.68 0 1.39.12 1.39.12v1.53h-.78c-.77 0-1.01.48-1.01.98v1.17h1.72l-.28 2.87h-1.44v6.99A10 10 0 0 0 22 12z",fill:"#1877F2"})})}),a.jsx(Z,{bg:"#e6f9ff",label:"Twitter",onClick:()=>((e,t="Watch this video")=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}&url=${encodeURIComponent(e)}`,"_blank","noopener"))(fi()),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:a.jsx("path",{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53A4.48 4.48 0 0 0 22.43 1s-2 1-3 1a4.48 4.48 0 0 0-7.86 3v1A12.94 12.94 0 0 1 3 2s-4 9 5 13a13 13 0 0 1-7 2c9 5 20 0 20-11.5A4.5 4.5 0 0 0 23 3z",fill:"#1DA1F2"})})}),a.jsx(Z,{bg:"#ffe6f0",label:"Instagram",onClick:()=>{return e=fi(),Ln(e),void alert("Link copied â€” open Instagram and paste it into a new post or story.");var e},children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:[a.jsxs("linearGradient",{id:"igGrad",x1:"0",x2:"1",y1:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#f58529"}),a.jsx("stop",{offset:"50%",stopColor:"#dd2a7b"}),a.jsx("stop",{offset:"100%",stopColor:"#8134af"})]}),a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"5",fill:"url(#igGrad)"}),a.jsx("path",{d:"M12 7.5a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9z",fill:"#fff",opacity:"0.95"}),a.jsx("circle",{cx:"17.5",cy:"6.5",r:"1",fill:"#fff",opacity:"0.95"})]})}),a.jsx(Z,{bg:"#f3f4f6",label:"Email",onClick:()=>{return e=fi(),void(window.location.href=`mailto:?subject=${encodeURIComponent("Watch video")}&body=${encodeURIComponent(e)}`);var e},children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:[a.jsx("path",{d:"M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5z",fill:"#e5e7eb"}),a.jsx("path",{d:"M4 7l8 6 8-6",stroke:"#9ca3af",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]}),a.jsx("div",{className:"text-gray-700 text-sm mb-2",children:"Video URL"}),a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("input",{name:"videoUrl",value:fi(),readOnly:!0,className:"flex-1 bg-gray-100 text-gray-900 rounded-xl px-3 py-2 text-sm border-0 outline-none","aria-label":"Video URL"}),a.jsx("button",{onClick:()=>gi(),className:"px-3 py-2 rounded-xl text-sm",style:{background:pi?ka:"#1b1b1b",color:pi?Ca:"#fff"},children:pi?"Copied":"Copy"})]}),a.jsx("div",{style:{height:20}}),jn&&a.jsxs("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",bottom:20,zIndex:520},onTouchStart:e=>{e.currentTarget.dataset.dragStartX=e.touches[0].clientX},onTouchMove:e=>{const t=parseFloat(e.currentTarget.dataset.dragStartX||"0"),r=e.touches[0].clientX-t;e.currentTarget.style.transform=`translateX(calc(-50% + ${r}px))`},onTouchEnd:e=>{const t=parseFloat(e.currentTarget.dataset.dragStartX||"0"),r=e.changedTouches[0].clientX-t;Math.abs(r)>80?kn(""):e.currentTarget.style.transform="translateX(-50%)",e.currentTarget.dataset.dragStartX="0"},children:[a.jsx("div",{className:"bg-black/80 text-white text-sm px-4 py-2 rounded-md cursor-grab select-none",style:{animation:"toastSlideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},children:jn}),a.jsx("style",{children:"\n\t\t\t\t\t\t\t\t\t\t@keyframes toastSlideDown {\n\t\t\t\t\t\t\t\t\t\t\tfrom {\n\t\t\t\t\t\t\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\t\t\t\t\t\t\ttransform: translateY(-20px) scale(0.95);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tto {\n\t\t\t\t\t\t\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\t\t\t\t\t\t\ttransform: translateY(0) scale(1);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t"})]})]})]})}),gn&&a.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>xn(!1),style:{zIndex:710,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-t-2xl p-4 shadow-xl flex flex-col mx-0 sm:mx-4",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Tip the Creator",style:{background:"linear-gradient(180deg, rgba(6,6,6,0.9), rgba(0,0,0,0.95))",border:"1px solid rgba(255,255,255,0.03)",position:"relative",height:Gr,maxHeight:tn.current,overflow:"hidden"},children:[a.jsxs("div",{className:"w-full h-8 flex items-center justify-center",onPointerDown:hn,onTouchStart:hn,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:[a.jsx("div",{className:"w-12 h-1 bg-gray-600 rounded-full touch-none",onPointerDown:hn,onTouchStart:hn,style:{cursor:"ns-resize"}}),a.jsx("button",{onClick:()=>xn(!1),className:"absolute right-4 top-3 text-gray-300 p-1 rounded-full hover:bg-white/5",children:"âœ•"})]}),_o&&a.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:o("Drag to resize",N)}),a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:ka,color:Ca},children:a.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold",style:{color:Ca},children:"$"})}),a.jsx("div",{children:a.jsxs("div",{className:"text-gray-300 text-sm",children:[o("Show your appreciation for",N)," @",Oe,"'s ",o("amazing content",N)]})})]}),a.jsx("div",{style:{display:"flex",gap:10,marginBottom:12},children:[1,5,10,25].map(e=>a.jsxs("button",{onClick:()=>vn(e),className:"px-4 py-2 rounded-full border",style:{background:"#0b0b0b",border:"1px solid rgba(255,255,255,0.04)",minWidth:64,textAlign:"center",color:"#fff"},children:["$ ",e]},e))}),a.jsxs("div",{style:{marginBottom:12},children:[a.jsx("div",{className:"text-white font-semibold mb-2",children:o("Custom Amount",N)}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("span",{style:{padding:"10px 12px",background:"#0b0b0b",border:"1px solid rgba(255,255,255,0.04)",borderRadius:8,color:"#fff"},children:"$"}),a.jsx("input",{name:"tipAmount",type:"number",min:"0",step:"0.01",value:yn,onChange:e=>vn(parseFloat(e.target.value||0)),style:{flex:1,padding:"10px 12px",borderRadius:8,border:"1px solid rgba(255,255,255,0.04)",background:"#0b0b0b",color:"#fff"}})]})]}),a.jsxs("div",{style:{background:ja(ka,.12),padding:12,borderRadius:8,marginBottom:12},children:[a.jsx("div",{className:"text-white text-sm font-medium mb-2",children:o("Your tip helps:",N)}),a.jsxs("ul",{className:"list-inside list-disc text-gray-200 text-sm",style:{marginLeft:16},children:[a.jsx("li",{children:o("Support the creator directly",N)}),a.jsx("li",{children:o("Encourage more great content",N)}),a.jsx("li",{children:o("Show your appreciation",N)})]})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[a.jsx("button",{className:"px-4 py-3 rounded-lg",style:{background:ka,color:Ca,fontWeight:700},onClick:()=>{kn(`${o("Tip sent",N)}: $${Number(yn||0).toFixed(2)}`),xn(!1),vn(0),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1800)},children:`$ ${o("Send",N)} ${Number(yn||0).toFixed(2)}`}),a.jsx("button",{className:"px-4 py-3 rounded-lg bg-transparent text-white border border-white/10",onClick:()=>xn(!1),children:o("Cancel",N)})]})]})}),Rn&&a.jsx("div",{className:"fixed inset-0 flex items-start sm:items-center justify-center pt-24 sm:pt-0",onClick:()=>zn(!1),style:{zIndex:720,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"w-full max-w-md rounded-2xl shadow-2xl flex flex-col mx-4 overflow-hidden",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Bookmark This Moment",style:{background:"linear-gradient(135deg, #fbfbfd 0%, #f9f9fc 100%)",border:"1px solid rgba(147,51,234,0.08)",position:"relative",maxHeight:"85vh",animation:"modalSlideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1)"},children:[a.jsxs("div",{className:"px-5 py-5 border-b border-gray-100 flex items-start gap-4 bg-white/50 backdrop-blur-sm sticky top-0 z-10",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",style:{background:`${Sa}12`,border:`1.5px solid ${Sa}20`},children:a.jsx("div",{className:"w-6 h-6 flex items-center justify-center",style:{color:Sa,fontWeight:700},children:a.jsx(z,{})})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{className:"text-gray-900 text-xl font-bold tracking-tight",children:o("Bookmark This Moment",N)}),a.jsxs("div",{className:"text-gray-600 text-sm mt-0.5",children:[o("Save this timestamp at",N)," ",a.jsx("span",{style:{color:Sa,fontWeight:600},children:uo($n)})]})]})]}),a.jsxs("div",{className:"px-5 py-6 space-y-6 overflow-y-auto custom-scrollbar",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-gray-900 font-semibold text-sm mb-2 block",children:o("Label (optional)",N)}),a.jsx("input",{name:"bookmarkLabel",value:Bn,onChange:e=>Wn(e.target.value),placeholder:o("Best scene, Important moment...",N),className:"w-full px-4 py-3 rounded-xl text-sm transition-all focus:outline-none focus:ring-2 bg-white border border-gray-200 text-gray-900 placeholder-gray-400",style:{outlineColor:Sa},onFocus:e=>e.target.style.borderColor=Sa,onBlur:e=>e.target.style.borderColor="#e5e7eb"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-gray-900 font-semibold text-sm mb-3 flex items-center justify-between",children:[a.jsx("span",{children:o("Segment (optional)",N)}),a.jsx("span",{className:"text-xs text-gray-500 font-normal bg-gray-100 px-2 py-1 rounded-md",children:"Previewing video frame"})]}),a.jsxs("div",{className:"mb-4 p-4 rounded-xl bg-gray-50/80 border border-gray-100",children:[a.jsxs("div",{className:"relative h-14 bg-white rounded-lg overflow-hidden border cursor-pointer shadow-sm group",style:{borderColor:`${Sa}40`},onClick:e=>{const t=e.currentTarget.getBoundingClientRect(),r=(e.clientX-t.left)/t.width,n=Math.max(0,Math.min(Tt,r*Tt));bt.current&&(bt.current.currentTime=n);Math.abs(n-On)<Math.abs(n-_n)?Vn(Math.min(n,_n)):Un(Math.max(n,On))},children:[a.jsxs("div",{className:"absolute inset-0 flex",children:[a.jsx("div",{style:{width:On/Tt*100+"%",background:"#f3f4f6"}}),a.jsx("div",{style:{width:(_n-On)/Tt*100+"%",background:`${Sa}15`}}),a.jsx("div",{style:{flex:1,background:"#f3f4f6"}})]}),a.jsx("div",{className:"absolute top-0 h-full w-1 hover:w-1.5 transition-all z-10",style:{left:On/Tt*100+"%",background:Sa}}),a.jsx("div",{className:"absolute top-0 h-full w-1 hover:w-1.5 transition-all z-10",style:{left:_n/Tt*100+"%",background:Sa}}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-3 text-[10px] font-bold pointer-events-none select-none",style:{color:Sa},children:[a.jsx("span",{className:"bg-white/80 px-1 rounded",children:uo(On)}),a.jsx("span",{className:"bg-white/80 px-1 rounded",children:uo(_n)})]})]}),a.jsx("div",{className:"text-center mt-2 text-[10px] text-gray-400",children:"Click timeline to adjust & preview frame"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1.5 block uppercase tracking-wide",children:"Start Time"}),a.jsx("div",{className:"relative",children:a.jsx("input",{type:"number",min:"0",max:Tt,step:"0.1",value:On.toFixed(1),onChange:e=>{const t=Math.max(0,Math.min(Tt,parseFloat(e.target.value)||0));Vn(t),bt.current&&(bt.current.currentTime=t)},className:"w-full px-3 py-2.5 rounded-lg text-sm bg-white border border-gray-200 text-center font-mono",style:{color:"#111"}})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1.5 block uppercase tracking-wide",children:"End Time"}),a.jsx("div",{className:"relative",children:a.jsx("input",{type:"number",min:"0",max:Tt,step:"0.1",value:_n.toFixed(1),onChange:e=>{const t=Math.max(0,Math.min(Tt,parseFloat(e.target.value)||0));Un(t),bt.current&&(bt.current.currentTime=t)},className:"w-full px-3 py-2.5 rounded-lg text-sm bg-white border border-gray-200 text-center font-mono",style:{color:"#111"}})})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"px-3 py-1.5 bg-gray-100 rounded-md text-xs font-medium text-gray-600",children:["Duration: ",uo(_n-On)]}),a.jsxs("label",{className:"flex-1 flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all border hover:border-purple-200",style:{background:Fn?`${Sa}08`:"#fff",border:"1px solid "+(Fn?`${Sa}40`:"#e5e7eb")},children:[a.jsx("input",{type:"checkbox",checked:Fn,onChange:e=>Yn(e.target.checked),className:"w-4 h-4 rounded cursor-pointer",style:{accentColor:Sa}}),a.jsx("div",{children:a.jsx("div",{className:"text-xs font-bold text-gray-800 uppercase tracking-wide",children:"Loop Segment"})})]})]})]})]}),a.jsxs("div",{className:"px-5 py-5 border-t border-gray-200/50 bg-gray-50/50 flex flex-col gap-3 sm:flex-row sm:gap-3 sticky bottom-0 z-10 backdrop-blur-md",children:[a.jsxs("button",{className:"flex-1 px-4 py-3.5 rounded-xl w-full flex items-center justify-center font-bold text-sm transition-all hover:shadow-lg active:scale-95 shadow-md",style:{background:Sa,color:"#fff"},onClick:()=>{try{const e={id:Date.now(),time:$n,label:(Bn||"").trim(),startTime:On,endTime:_n,shareSegment:Fn},t=[e,...Mn(Te)];An(Te,t);try{Xn(t)}catch{}zn(!1),Wn(""),kn("Bookmark saved"),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1400)}catch{}},children:[a.jsx("span",{style:{display:"inline-flex",alignItems:"center",marginRight:8},children:a.jsx(z,{size:18,strokeWidth:2.5})}),o("Save Bookmark",N)]}),a.jsx("button",{className:"flex-1 px-4 py-3.5 rounded-xl w-full font-bold text-sm transition-all hover:bg-gray-200 active:scale-95",style:{background:"#fff",color:"#4b5563",border:"1px solid #e5e7eb"},onClick:()=>zn(!1),children:o("Cancel",N)})]})]})}),Ai&&a.jsxs("div",{ref:$i,className:"pointer-events-auto quick-action-card",onPointerDown:e=>e.stopPropagation(),style:{position:"fixed",left:zi.x,top:zi.y,transform:"translate(-50%, -120%)",zIndex:950,minWidth:280,padding:10,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,boxShadow:"0 10px 30px rgba(0,0,0,0.5)",backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)",background:Ta?"rgba(8,10,12,0.72)":"rgba(255,255,255,0.92)"},children:[a.jsx("button",{onClick:t=>{t?.stopPropagation?.(),te.user?(tt(t=>{const r=!t;if(r){nt(!1);try{const e=localStorage.getItem("regaarder_token");if(e){const t=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${t}/dislikes`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({videoId:Te||$e||null})}).catch(()=>{})}}catch(o){}}try{const e=localStorage.getItem("regaarder_token");if(e){const t=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${t}/likes`,{method:r?"POST":"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({videoId:Te||$e||null})}).catch(()=>{})}}catch(o){}try{Da||n(()=>import("./likedvideos-BihKYU0p.js"),__vite__mapDeps([50,1,2,3,51,11,6,7,8,22,42])).then(t=>{t&&"function"==typeof t.recordLike&&t.recordLike({videoId:Te||$e||null,url:Te||null,title:$e||null,creatorName:Oe,imageUrl:(()=>{try{const t=e&&Array.isArray(e)?e:ar||[];if(Array.isArray(t)&&t.length){const e=t.find(e=>e.url&&String(e.url)===String(Te)||e.videoUrl&&String(e.videoUrl)===String(Te)||e.title&&String(e.title)===String($e));if(e)return e.thumbnail||e.imageUrl||null}}catch{}return null})(),liked:r,timestamp:(new Date).toISOString()})})}catch{}return r}),Sn.current&&clearTimeout(Sn.current),kn(o("Liked",N)),Sn.current=setTimeout(()=>kn(""),1200),co(1800)):te.openAuthModal()},"aria-label":"Like",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:et?ka:Ta?"#fff":"#111"},children:a.jsx($,{filled:et})}),a.jsx("button",{onClick:e=>{e?.stopPropagation?.(),te.user?(nt(e=>{const t=!e;t&&tt(!1);try{const e=localStorage.getItem("regaarder_token");if(e){const r=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${r}/dislikes`,{method:t?"POST":"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({videoId:Te||$e||null})}).catch(()=>{})}}catch(r){}try{!Da&&t&&n(()=>import("./likedvideos-BihKYU0p.js"),__vite__mapDeps([50,1,2,3,51,11,6,7,8,22,42])).then(e=>{e&&"function"==typeof e.recordLike&&e.recordLike({videoId:Te||$e||null,url:Te||null,title:$e||null,creatorName:Oe,liked:!1,timestamp:(new Date).toISOString()})})}catch{}return t}),Sn.current&&clearTimeout(Sn.current),kn(o("Video Disliked",N)),Sn.current=setTimeout(()=>kn(""),1200),co(1800)):te.openAuthModal()},"aria-label":"Dislike",className:"p-1 rounded-lg",style:{background:"transparent",border:rt?"1px solid #ef4444":"none",borderRadius:8,padding:6,color:rt?"#ef4444":Ta?"#fff":"#111"},children:a.jsx(D,{})}),a.jsx("button",{onClick:()=>{Ri(!1),Wi.current&&clearTimeout(Wi.current),lo()},"aria-label":"Bookmark Moment",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:Sa},children:a.jsx(z,{})}),a.jsx("button",{onClick:e=>{e.stopPropagation(),me||(Sn.current&&clearTimeout(Sn.current),kn("Your screen is locked"),Sn.current=setTimeout(()=>kn(""),1600));try{st()}catch{}Ri(!1),Wi.current&&(clearTimeout(Wi.current),Wi.current=null)},"aria-label":me?"Unlock controls":"Lock controls",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:me?ka:Ta?"#fff":"#111"},children:me?a.jsx(L,{}):a.jsx(I,{})})]}),eo&&a.jsx("div",{className:"fixed inset-0 flex items-center justify-center",onClick:()=>to(!1),style:{zIndex:2200,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-2xl w-[90%] max-w-sm",onClick:e=>e.stopPropagation(),style:{color:"#111"},children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx("div",{className:"w-11 h-11 rounded-xl flex items-center justify-center border",style:{background:"#fbfbfd",borderColor:"rgba(0,0,0,0.04)"},children:a.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center",style:{color:Sa,fontWeight:700},children:a.jsx(z,{})})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{className:"text-black text-lg font-semibold",children:"Bookmark This Moment"}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Save this timestamp at ",a.jsx("strong",{children:uo($n)})]})]})]}),a.jsx("div",{className:"mb-3",children:a.jsx("input",{name:"bookmarkLabel_quick",value:Bn,onChange:e=>Wn(e.target.value),placeholder:"Label (optional)",className:"w-full px-3 py-2 rounded-md border"})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{className:"flex-1 px-4 py-2 rounded-md",style:{background:Sa,color:"#fff",fontWeight:700},onClick:()=>{try{const e={id:Date.now(),time:$n,label:(Bn||"").trim()},t=[e,...Mn(Te)];An(Te,t);try{Xn(t)}catch{}to(!1),Wn(""),kn("Moment Bookmarked"),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1400);try{localStorage.setItem("vx:pref:segmentBookmarksEnabled",JSON.stringify(!0))}catch{}try{const e=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,t=localStorage.getItem("regaarder_token");fetch(`${e}/bookmarks/segments`,{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({videoUrl:Te,label:(Bn||"").trim(),startTime:Math.floor($n||0),endTime:Math.floor($n||0)})}).catch(()=>{})}catch{}try{no({show:!0,x:zi.x,y:zi.y}),so.current&&clearTimeout(so.current),so.current=setTimeout(()=>ao(!0),30),io.current&&clearTimeout(io.current),io.current=setTimeout(()=>{no({show:!1,x:0,y:0}),ao(!1),io.current=null},900)}catch{}}catch{}},children:"Save"}),a.jsx("button",{className:"flex-1 px-4 py-2 rounded-md",style:{background:"#f3f4f6"},onClick:()=>to(!1),children:"Cancel"})]})]})}),ro.show&&a.jsx("div",{style:{position:"fixed",left:ro.x,top:ro.y,transform:"translate(-50%, -120%)",zIndex:2250},"aria-hidden":!0,children:a.jsx("div",{style:{transition:"transform 900ms ease, opacity 900ms ease",transform:oo?"translate(-50%, -120%) scale(1.6)":"translate(-50%, -120%) scale(1)",opacity:oo?0:1},children:a.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-transparent",children:a.jsx(B,{})})})}),jn&&a.jsxs("div",{role:"status","aria-live":"polite",style:{position:"fixed",left:"50%",transform:"translateX(-50%)",top:"18%",zIndex:4e3,pointerEvents:"auto",willChange:"transform, opacity",animation:"toastSlideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},onTouchStart:e=>{e.currentTarget.dataset.dragStartX=e.touches[0].clientX},onTouchMove:e=>{const t=parseFloat(e.currentTarget.dataset.dragStartX||"0"),r=e.touches[0].clientX-t;e.currentTarget.style.transform=`translateX(calc(-50% + ${r}px))`},onTouchEnd:e=>{const t=parseFloat(e.currentTarget.dataset.dragStartX||"0"),r=e.changedTouches[0].clientX-t;Math.abs(r)>80?kn(""):e.currentTarget.style.transform="translateX(-50%)",e.currentTarget.dataset.dragStartX="0"},children:[a.jsx("div",{className:"bg-black/80 text-white text-sm px-4 py-2 rounded-md cursor-grab select-none",style:{boxShadow:"0 8px 24px rgba(0,0,0,0.36)"},children:jn}),a.jsx("style",{children:"\n\t\t\t\t\t\t\t@keyframes toastSlideDown {\n\t\t\t\t\t\t\t\tfrom {\n\t\t\t\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\t\t\t\ttransform: translateY(-20px) scale(0.95);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tto {\n\t\t\t\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\t\t\t\ttransform: translateY(0) scale(1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t"})]}),Pr&&a.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>Mr(!1),style:{zIndex:700,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"modal-dialog w-full bg-white rounded-t-2xl p-4 shadow-xl flex flex-col mx-0 sm:mx-4",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Report an Issue",style:{position:"relative",maxHeight:.92*window.innerHeight,overflow:"hidden"},children:[a.jsx("div",{className:"w-full h-8 flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full touch-none",style:{cursor:"ns-resize"}})}),Fo&&a.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:o("Drag to resize",N)}),a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-50 flex items-center justify-center",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[a.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z",fill:ka}),a.jsx("path",{d:"M12 9v4",stroke:"#111",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("circle",{cx:"12",cy:"17",r:"1",fill:"#111"})]})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-black text-xl font-semibold",children:o("Report an Issue",N)}),a.jsx("div",{className:"text-gray-500 text-sm",children:o("Help us improve your experience by reporting any issues you encounter",N)})]})]}),a.jsx("button",{onClick:()=>Mr(!1),className:"text-gray-600 p-1 rounded-full hover:bg-gray-100",children:"âœ•"})]}),a.jsxs("div",{className:"overflow-auto flex-1 pt-2",style:{paddingRight:6},children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"text-black font-semibold mb-2",children:o("Issue Category",N)}),a.jsxs("div",{style:{position:"relative"},children:[a.jsxs("select",{value:Ar,onChange:e=>Rr(e.target.value),className:"w-full bg-white text-black rounded-xl px-3 py-2 border border-gray-200 appearance-none",children:[a.jsx("option",{value:"",disabled:!0,children:o("Select an issue type",N)}),a.jsx("option",{value:"bug",children:o("Bug",N)}),a.jsx("option",{value:"playback",children:o("Playback Issue",N)}),a.jsx("option",{value:"inappropriate",children:o("Inappropriate Content",N)}),a.jsx("option",{value:"other",children:o("Other",N)})]}),a.jsx("div",{style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:"#6b7280"},children:a.jsx(E,{size:18})})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"text-black font-semibold mb-2",children:[o("Describe the issue",N)," ",a.jsx("span",{className:"text-gray-500 font-normal",children:o("(Optional)",N)})]}),a.jsx("textarea",{value:zr,onChange:e=>Br(e.target.value.slice(0,500)),placeholder:o("Please provide details about the issue you're experiencing...",N),className:"w-full bg-white text-black border border-gray-200 rounded-xl px-3 py-3 h-28 resize-none outline-none",maxLength:500}),a.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[zr.length,"/",500," ",o("characters",N)]})]}),a.jsxs("div",{className:"mb-4 bg-gray-50 border border-gray-100 rounded-lg p-3 text-sm text-gray-800",children:[a.jsx("div",{className:"text-gray-800 text-sm mb-2",children:o("Report will include:",N)}),a.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700",children:[a.jsxs("li",{children:[o("Video:",N)," ",$e]}),a.jsxs("li",{children:[o("Creator:",N)," ",Oe]}),a.jsxs("li",{children:[o("Timestamp:",N)," ",(()=>{try{const e=bt.current,t=e?Math.floor(e.currentTime||0):Math.floor(mt*Tt||0),r=Math.floor(t/60);return`${r}:${String(t%60).padStart(2,"0")}`}catch{return"0:00"}})()]})]})]}),a.jsxs("div",{className:"flex flex-col gap-3 mb-6",children:[a.jsx("button",{className:"w-full px-4 py-3 rounded-lg font-medium",style:{background:ka,color:Ca},onClick:()=>{try{const e=localStorage.getItem("regaarder_token"),t=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,r=bt.current,n=r?Math.floor(r.currentTime||0):Math.floor(mt*Tt||0);fetch(`${t}/reports`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({videoId:Te||$e||null,title:$e,creator:Oe,timestamp:n,category:Ar,description:zr})}).catch(()=>{})}catch(e){}kn(o("Report submitted",N)),Mr(!1),Rr(""),Br(""),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1800)},children:o("Submit Report",N)}),a.jsx("button",{className:"w-full px-4 py-3 rounded-lg bg-transparent text-black border border-gray-200",onClick:()=>Mr(!1),children:o("Cancel",N)})]})]})]})}),pa&&a.jsx(de,{isOpen:pa,onClose:()=>ha(!1),requestId:Ne?.id||$e||"unknown",selectedLanguage:N}),ma&&a.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>fa(!1),style:{zIndex:700,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl flex flex-col mx-4",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Notes",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",maxHeight:.92*window.innerHeight,overflow:"hidden",marginBottom:12},children:[a.jsx("div",{className:"w-full h-10 flex items-center justify-center",children:a.jsx("div",{role:"separator",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",style:{cursor:"ns-resize"}})}),Ho&&a.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:o("Drag to resize",N)}),a.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 text-center",children:o("Notes",N)}),a.jsxs("div",{className:"overflow-auto flex-1",style:{paddingRight:6},children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"text-gray-900 font-semibold mb-2",children:o("New Note",N)}),a.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[a.jsx("div",{style:{display:"flex",gap:6},children:["ðŸ“Œ","ðŸ˜€","â¤ï¸","ðŸ”¥"].map(e=>a.jsx("button",{onClick:()=>Ye(t=>t+e),className:"px-2 py-1 rounded bg-gray-100 text-gray-900",children:e},e))}),a.jsxs("label",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:6},children:[a.jsx("input",{name:"attachTimestamp",type:"checkbox",checked:He,onChange:e=>Xe(e.target.checked),className:"w-4 h-4"}),a.jsx("span",{className:"text-gray-500 text-xs",children:o("Attach timestamp",N)})]})]}),a.jsx("textarea",{value:Fe,onChange:e=>Ye(e.target.value),placeholder:o("Add notes... e.g. 'Interesting point', 'Check later'",N),className:"w-full bg-gray-50 text-gray-900 border border-gray-200 rounded-xl px-3 py-3 h-28 resize-none outline-none"}),a.jsxs("div",{className:"flex items-center justify-end gap-3 mt-3",children:[a.jsx("button",{className:"px-4 py-2 rounded-lg bg-transparent text-gray-700 border border-gray-300",onClick:()=>{Ye(""),Xe(!0)},children:o("Reset",N)}),a.jsx("button",{className:"px-4 py-2 rounded-lg",style:{background:"#111",color:"#fff"},onClick:()=>{const e=Fe.trim();if(!e)return;const t=He&&bt.current?Math.floor(bt.current.currentTime||0):null,r=[{id:Date.now(),text:e,time:t},..._e||[]];Ue(r),In(Te,r),Ye(""),Xe(!0)},children:o("Add Note",N)})]})]}),a.jsx("div",{children:0===(_e||[]).length?a.jsx("div",{className:"text-gray-400 text-center py-8",children:o("No notes yet.",N)}):a.jsx("div",{className:"space-y-3",children:_e.map(e=>a.jsxs("div",{className:"bg-gray-50 border border-gray-100 p-3 rounded-lg flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",style:{whiteSpace:"pre-wrap"},children:e.text}),null!=e.time&&a.jsx("button",{className:"text-sm text-gray-500 mt-2 hover:underline",onClick:()=>{try{bt.current&&(bt.current.currentTime=e.time,ct(!0))}catch{}},children:uo(e.time)})]}),a.jsx("div",{children:a.jsx("button",{className:"text-sm text-gray-400 ml-3 hover:text-red-500",onClick:()=>{const t=_e.filter(t=>t.id!==e.id);Ue(t),In(Te,t)},children:o("Delete",N)})})]},e.id))})})]})]})}),a.jsxs("div",{"aria-hidden":!Vi&&!Ni,style:{pointerEvents:Vi||Ni?"auto":"none",position:"fixed",top:0,right:0,height:"100vh",width:Ui.current,maxWidth:"100%",zIndex:1e3},children:[(Vi||Ni&&0!==Di)&&a.jsx("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),_i(!1),Oi(0)},style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.36)",opacity:Vi?1:Math.min(.6,Math.max(0,-Di/Ui.current)),transition:Ni?"none":"opacity 220ms ease",zIndex:999}}),a.jsxs("div",{onPointerDown:e=>{const t=e.clientX??(e.touches&&e.touches[0]?.clientX),r=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"==typeof t){Yi.current={x:t,y:r},Ci(!0),Oi(-Ui.current);try{e.target?.setPointerCapture?.(e.pointerId)}catch{}}},onPointerMove:e=>{if(!Ni)return;const t=e.clientX??(e.touches&&e.touches[0]?.clientX);if("number"!=typeof t)return;const r=t-Yi.current.x,n=Ui.current;let o=-n+Math.max(0,r);o=Math.min(0,Math.max(-n,o)),Oi(o)},onPointerUp:Hi,onPointerCancel:Hi,onClick:e=>{e.preventDefault(),e.stopPropagation();const t=e.target;t&&"function"==typeof t.closest&&t.closest('button, input, textarea, select, a, [role="button"]')||(_i(!1),Oi(0))},style:{position:"absolute",right:0,top:0,height:"100%",width:Ui.current,background:"#fff",color:"#111",transform:`translateX(${Math.max(0,Ui.current+Di)}px)`,transition:Ni?"none":"transform 260ms cubic-bezier(.2,.9,.2,1)",boxShadow:"-20px 0 40px rgba(0,0,0,0.35)",borderLeft:"1px solid rgba(0,0,0,0.06)",overflowY:"auto",zIndex:1e3,display:"flex",flexDirection:"column",touchAction:"none"},children:[a.jsxs("div",{style:{padding:18,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(0,0,0,0.06)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[a.jsx("div",{className:"w-9 h-9 rounded-md flex items-center justify-center bg-gray-100",style:{color:"#111"},children:a.jsx(j,{size:20,strokeWidth:2.5})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:18,fontWeight:700},children:"Discover More"}),a.jsx("div",{style:{fontSize:12,color:"#6b7280"},children:"Search and explore related videos"})]})]}),a.jsx("button",{"aria-label":"Close",onPointerDown:e=>{e.preventDefault(),e.stopPropagation()},onPointerUp:e=>{e.preventDefault(),e.stopPropagation()},onClick:e=>{e.preventDefault(),e.stopPropagation(),_i(!1),Oi(0)},style:{border:"none",background:"transparent",fontSize:24,cursor:"pointer",color:"#6b7280",padding:"4px"},children:"âœ•"})]}),a.jsxs("div",{style:{padding:14},children:[a.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:a.jsx("input",{name:"discoverQuery",value:tr,onChange:e=>rr(e.target.value),placeholder:"Search videos...",style:{flex:1,padding:"10px 12px",borderRadius:10,border:"1px solid #e6e6e6",outline:"none"}})}),a.jsx("div",{style:{marginTop:12,display:"flex",gap:8,overflowX:"auto",overflowY:"hidden",paddingBottom:8,whiteSpace:"nowrap",scrollBehavior:"smooth"},children:[{name:"Recommended",icon:g},{name:"Trending Now",icon:x},{name:"New",icon:y},{name:"Travel",icon:v},{name:"Education",icon:b},{name:"Entertainment",icon:w},{name:"Music",icon:S},{name:"Sports",icon:k},{name:"Bookmarks",icon:z},{name:"Liked",icon:$}].map(e=>{const t=e.name===nr,r=e.icon;return a.jsxs("button",{onClick:()=>or(e.name),style:{display:"flex",alignItems:"center",gap:6,paddingLeft:12,paddingRight:12,paddingTop:10,paddingBottom:10,borderRadius:"8px",border:"none",cursor:"pointer",fontSize:13,transition:"all 150ms ease-in-out",background:t?ka:"#fff",color:t?Ca:"#4b5563",fontWeight:t?700:500,boxShadow:t?`0 4px 10px rgba(0, 0, 0, 0.3), 0 0 10px ${ka}33, inset 0 1px 0 rgba(255, 255, 255, 0.6)`:"0 1px 3px rgba(0, 0, 0, 0.05), inset 0 1px 0 #ffffff",flexShrink:0,whiteSpace:"nowrap"},children:[a.jsx(r,{size:16,strokeWidth:2.5}),e.name]},e.name)})})]}),a.jsxs("div",{style:{padding:12,display:"flex",flexDirection:"column",gap:12,flex:1,overflowY:"auto",minHeight:0},children:[(()=>{const t=void 0!==e&&e&&e.length?e:ar&&ar.length?ar:[],r=(tr||"").trim().toLowerCase();if("Bookmarks"===nr){const e=(()=>{const e=[];try{for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);if(r&&r.startsWith("bookmarks:")){const t=r.slice(10);try{const n=localStorage.getItem(r),o=n?JSON.parse(n):[];o&&o.length&&e.push({url:t,bookmarks:o})}catch{}}}}catch(t){}return e})();return e.length?e.flatMap(e=>{const r=(t||[]).find(t=>t.url===e.url)||{};return(e.bookmarks||[]).map(t=>{const n=r.thumbnail||"https://placehold.co/220x128/000000/ffffff?text=Video",o=t.label||r.title||e.url,i=r.creator||"",s=r.duration||0,l=`${e.url}::${t.id}`;return a.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{try{_i(!1),e.url&&Ee(m(e.url)),setTimeout(()=>{try{const r=bt.current;if(r){e.url&&(r.src=m(e.url));try{r.currentTime=Math.max(0,Math.floor(t.time||0))}catch{}try{const e=r.play();e&&e.catch&&e.catch(()=>{}),St(!0)}catch{}try{ct(!0),ji(2e3)}catch{}}}catch{}},180);try{kn("Playing from bookmarked moment"),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1400)}catch{}}catch{}},style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",position:"relative"},children:[a.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden",style:{background:`url(${n}) center/cover no-repeat`},children:a.jsx("div",{className:"absolute right-2 bottom-1 bg-black/70 text-white text-xs px-2 py-0.5 rounded",children:uo(t.time||0)})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:700},children:o}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:6},children:[a.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[i,s?a.jsx("span",{style:{background:"#e6f2ff",color:"#2563eb",padding:"2px 6px",borderRadius:8,marginLeft:8,fontSize:11},children:(()=>{const e=s||0;return`${Math.floor(e/60)}:${String(e%60).padStart(2,"0")}`})()}):null]}),a.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:a.jsx("button",{"aria-label":"Share bookmarked moment","data-share-anchor":l,onClick:e=>{e.stopPropagation?.();try{Gn(e=>e===l?null:l)}catch{}},className:"p-1.5 rounded-full hover:bg-gray-100",style:{border:"none",background:"transparent",cursor:"pointer",display:"flex",alignItems:"center"},children:a.jsx(ee,{})})})]})]}),Kn===l&&a.jsxs("div",{role:"dialog","aria-label":"Share bookmark","data-share-key":l,className:"min-w-[220px] sm:min-w-[260px] bg-white rounded-xl p-4 shadow-2xl",style:{position:"absolute",right:12,top:56,zIndex:1100,border:"1px solid rgba(0,0,0,0.06)"},onClick:e=>e.stopPropagation(),children:[a.jsx("div",{style:{fontSize:13,fontWeight:700,marginBottom:8},children:"Share bookmarked moment"}),a.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:8},children:"This link opens the video at the saved time."}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[a.jsx("button",{onClick:()=>{try{const r=Zn(e.url,t.time);Ln(r),kn("Link copied"),Gn(null),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1600)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fafafa",cursor:"pointer",textAlign:"left"},children:"Copy link"}),a.jsx("button",{onClick:()=>{try{const r=Zn(e.url,t.time);try{window.location.href=`whatsapp://send?text=${encodeURIComponent(r)}`}catch{}setTimeout(()=>window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(r)}`,"_blank"),600),Gn(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Send to WhatsApp"}),a.jsx("button",{onClick:()=>{try{const r=Zn(e.url,t.time);try{window.location.href=`twitter://post?message=${encodeURIComponent(r)}`}catch{}setTimeout(()=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(r)}`,"_blank"),600),Gn(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Twitter"}),a.jsx("button",{onClick:()=>{try{const r=Zn(e.url,t.time);try{window.location.href=`fb-messenger://share?link=${encodeURIComponent(r)}`}catch{}setTimeout(()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(r)}`,"_blank"),600),Gn(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Facebook"}),a.jsx("button",{onClick:()=>{try{const r=Zn(e.url,t.time);try{window.location.href=`instagram://share?text=${encodeURIComponent(r)}`}catch{}setTimeout(()=>{Ln(r),kn("Link copied â€” share via Instagram"),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1600)},600),Gn(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Instagram"}),a.jsxs("div",{style:{display:"flex",gap:8,marginTop:6},children:[a.jsx("button",{onClick:()=>{try{Ir(!0),Gn(null)}catch{}},style:{flex:1,padding:"8px 10px",borderRadius:8,background:ka,color:Ca,border:"none",cursor:"pointer"},children:"More..."}),a.jsx("button",{onClick:()=>Gn(null),style:{padding:"8px 10px",borderRadius:8,background:"#f3f4f6",border:"none",cursor:"pointer"},children:"Close"})]})]})]})]},l)})}):a.jsx("div",{className:"text-gray-400 text-center py-8",children:"No bookmarks yet."})}if("Liked"===nr)try{const e=localStorage.getItem("likedVideos"),t=e?JSON.parse(e):[];return t&&t.length?t.map(e=>{const t=e.imageUrl||"https://placehold.co/220x128/000000/ffffff?text=Video",r=e.title||"Untitled Video",n=e.creatorName||"Unknown Creator",o=`liked-${e.videoId}`;return a.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{try{_i(!1),e.url&&Ee(m(e.url)),De(e.title||"Video"),Ve(e.creatorName||""),setTimeout(()=>{try{const t=bt.current;if(t){e.url&&(t.src=m(e.url)),t.currentTime=0;try{const e=t.play();e&&e.catch&&e.catch(()=>{}),St(!0)}catch{}try{ct(!0),ji(2e3)}catch{}}}catch{}},180);try{kn("Now playing"),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1400)}catch{}}catch{}},style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",position:"relative"},children:[a.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden",style:{background:`url(${t}) center/cover no-repeat`,minWidth:"112px"},children:a.jsx("div",{className:"absolute top-1 left-1 bg-red-600 text-white text-xs px-1.5 py-0.5 rounded",style:{fontSize:"10px"},children:"â™¥"})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:700},children:r}),a.jsx("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:n})]})]},o)}):a.jsx("div",{className:"text-gray-400 text-center py-8",children:"No liked videos yet."})}catch(i){return a.jsx("div",{className:"text-gray-400 text-center py-8",children:"Error loading liked videos."})}let n=t;"Recommended"===nr?n=t:"Trending Now"===nr?n=t.sort((e,t)=>(parseInt(t.views)||0)-(parseInt(e.views)||0)):"New"===nr?n=t.sort((e,t)=>(t.timestamp||0)-(e.timestamp||0)):["Recommended","Trending Now","New","Travel","Education","Entertainment","Music","Sports"].includes(nr)&&(n=t.filter(e=>{const t=(e.category||"").toLowerCase(),r=nr.toLowerCase();return t.includes(r)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(r))}),0===n.length&&(n=t));const o=r?n.filter(e=>(e.title||"").toLowerCase().includes(r)||(e.creator||"").toLowerCase().includes(r)):n;return 0===o.length?a.jsx("div",{className:"text-gray-400 text-center py-8",children:"No videos found for this category."}):o.map((e,t)=>a.jsx(re,{item:e,onVideoClick:async()=>{try{try{sr.current=o||[],cr(t)}catch{}De(e.title||"Video"),Ve(e.creator||"");try{_i(!1)}catch{}e.url&&Ee(m(e.url));try{ct(!0),ji(2600)}catch{}try{kn("Now playing"),Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>kn(""),1600)}catch{}setTimeout(async()=>{try{const t=bt.current;if(t){e.url&&(t.src=m(e.url)),t.currentTime=0,await t.play(),St(!0);try{ji(1600)}catch{}}}catch(i){}},120)}catch{}},setToastMessage:kn,toastTimerRef:Sn},e.id))})(),a.jsx("div",{style:{height:8}})]})]})]})]})}const ae=1,ie="https://placehold.co/40x40/CCCCCC/666666?text=JD",se=({comment:e,onReply:t,selectedLanguage:r})=>{const n=e.userId===ae?ie:"https://placehold.co/40x40/CCCCCC/666666?text=G",i=e.text.split(" "),s=i[0],l=s?.startsWith?.("@"),c=l?s.substring(1):null,d=l?i.slice(1).join(" "):e.text,[p,h]=u.useState(!1),[m,f]=u.useState(!1),[g,x]=u.useState("number"==typeof e.likes?e.likes:0);return a.jsxs("div",{className:"flex space-x-3 py-3 border-b border-gray-50 last:border-b-0 "+(l?"ml-6":""),children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:n,alt:e.userName,className:"w-8 h-8 rounded-full object-cover"})}),a.jsxs("div",{className:"flex-grow min-w-0",children:[a.jsxs("div",{className:"bg-gray-100 rounded-xl p-3 inline-block max-w-full",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-800 break-words",children:e.userName}),a.jsxs("p",{className:"text-sm text-gray-700 break-words",children:[l&&a.jsxs("span",{className:"text-indigo-600 font-medium mr-1",children:["@",c]}),d]})]}),a.jsxs("div",{className:"flex items-center space-x-3 mt-1 ml-1 text-xs text-gray-500",children:[a.jsx("span",{className:"font-medium",children:o("Just now",r)}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsxs("button",{onClick:()=>{h(e=>{const t=!e;return x(e=>Math.max(0,e+(t?1:-1))),t&&m&&f(!1),t})},"aria-pressed":p,className:"flex items-center gap-2 transition-colors",style:{background:p?"rgba(239,68,68,0.06)":"transparent",padding:"6px 8px",borderRadius:12,cursor:"pointer",border:"none"},children:[p?a.jsx(le,{size:14}):a.jsx(ce,{size:14}),a.jsx("span",{style:{fontSize:12,color:"#374151"},children:(y=g,y>=1e6?`${(y/1e6).toFixed(1).replace(/\.0$/,"")}M`:y>=1e3?`${(y/1e3).toFixed(1).replace(/\.0$/,"")}k`:String(y))})]}),a.jsx("button",{onClick:()=>{f(e=>{const t=!e;return t&&p&&(h(!1),x(e=>Math.max(0,e-1))),t})},"aria-pressed":m,className:"flex items-center transition-colors",style:{background:m?"#f3f4f6":"transparent",padding:"6px 8px",borderRadius:12,border:"none",cursor:"pointer"},title:"Dislike",children:a.jsx(D,{size:14})}),a.jsx("button",{onClick:()=>t(e),className:"hover:text-gray-700 transition-colors",style:{background:"transparent",border:"none",padding:6,cursor:"pointer"},children:o("Reply",r)})]})]})]})]});var y},le=({size:e=16,color:t="#ef4444"})=>a.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:t,stroke:"none","aria-hidden":"true",children:a.jsx("path",{d:"M12 21s-7.5-4.35-9.2-6.02C1.45 12.9 2 9.7 4.5 8.1 6.12 6.95 8.13 7 9 8.1c.87-1.1 2.88-1.15 4.5.0 1.83 1.15 3.05 3.07 3.7 4.0 2.2 1.6 3.05 4.8- - -",fillRule:"evenodd"})}),ce=({size:e=16,stroke:t="#ef4444"})=>a.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"})}),de=({isOpen:e,onClose:r,requestId:n,selectedLanguage:i})=>{const s=u.useRef(null),l=t(),c=u.useRef(null),d=u.useRef(null),[p,h]=u.useState(.9*window.innerHeight),m=.4*window.innerHeight,f=.95*window.innerHeight,[g,x]=u.useState([]),[y,v]=u.useState(""),[b,w]=u.useState(null),[j,k]=u.useState(!1),[S,N]=u.useState(null);u.useEffect(()=>{if(!e||!n)return;let t=!1;const r=window&&window.__BACKEND_URL__||"http://localhost:4000";return k(!0),N(null),fetch(`${r}/requests/${n}/comments`).then(async e=>{const r=await e.json().catch(()=>({}));if(!e.ok)throw new Error(r.error||"Failed to load comments");t||x(Array.isArray(r.comments)?r.comments:[])}).catch(e=>{t||N(e.message||"Network error")}).finally(()=>{t||k(!1)}),()=>{t=!0}},[e,n]);const C=u.useRef({dragging:!1,startY:0,startHeight:0}),[T,E]=u.useState(!1);u.useEffect(()=>{if(e)try{E(!0);const e=setTimeout(()=>E(!1),3400);return()=>clearTimeout(e)}catch{}},[e]),u.useEffect(()=>{if(!e)return;const t=setTimeout(()=>{try{d.current?.focus?.(),d.current?.scrollIntoView?.({behavior:"smooth",block:"nearest"})}catch{}},50);return()=>clearTimeout(t)},[e]);const L=u.useCallback(e=>{w(e),v(`@${e.userName} `),d.current&&d.current.focus()},[]),I=u.useCallback(()=>{w(null),v("")},[]),P=async()=>{if(!l.user)return void l.openAuthModal();if(""===y.trim())return;const e=y.trim(),t=window&&window.__BACKEND_URL__||"http://localhost:4000",r=(()=>{try{return localStorage.getItem("regaarder_token")}catch{return null}})();try{const a=await fetch(`${t}/requests/${n}/comments`,{method:"POST",headers:{"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{}},body:JSON.stringify({text:e,parentId:b?b.id:null})}),i=await a.json().catch(()=>({}));if(!a.ok)throw new Error(i.error||"Failed to post comment");const s=i.comment||null;if(s)x(e=>[...e,s]);else{const t={id:`c_${Date.now()}`,requestId:n,userId:l.user.id||"anon",userName:l.user.name||"You",text:e,parentId:b?b.id:null,createdAt:(new Date).toISOString()};x(e=>[...e,t])}v(""),w(null);try{window.dispatchEvent(new CustomEvent("request:comment_added",{detail:{requestId:n,comment:s||fallback}}))}catch(o){console.warn("Failed to dispatch comment event:",o)}setTimeout(()=>{try{c.current?.scrollTo({top:c.current.scrollHeight,behavior:"smooth"})}catch{}},80)}catch(a){N(a.message||"Network error"),setTimeout(()=>N(null),3e3)}},M=e=>{e.preventDefault();const t=e.clientY??(e.touches&&e.touches[0]?.clientY);C.current.dragging=!0,C.current.startY=t,C.current.startHeight=p,window.addEventListener("pointermove",A),window.addEventListener("pointerup",R)},A=e=>{if(!C.current.dragging)return;const t=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof t)return;const r=C.current.startY-t;let n=C.current.startHeight+r;n=Math.max(m,Math.min(f,n)),h(n)},R=e=>{C.current.dragging&&(C.current.dragging=!1,window.removeEventListener("pointermove",A),window.removeEventListener("pointerup",R),p<m+20&&r())};return u.useEffect(()=>()=>{window.removeEventListener("pointermove",A),window.removeEventListener("pointerup",R)},[]),e?a.jsx("div",{className:"fixed inset-0 z-[1200] flex items-end sm:items-center justify-center",onClick:r,style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{ref:s,className:"modal-dialog w-full max-w-md bg-white rounded-t-2xl shadow-xl overflow-hidden flex flex-col",style:{height:p},onClick:e=>e.stopPropagation(),children:[a.jsx("div",{className:"w-full h-10 flex items-center justify-center",children:a.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:M,onTouchStart:M,style:{cursor:"ns-resize"}})}),T&&a.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:o("Drag to resize",i)}),a.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-[#f3f4f6] flex items-center justify-center",children:a.jsx(ue,{size:16,stroke:"#6b7280"})}),a.jsx("h2",{className:"text-lg font-medium text-gray-800",children:o("Comments",i)})]})})}),a.jsx("div",{ref:c,className:"flex-1 overflow-y-auto px-4 py-3 flex",children:0===g.length?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center text-gray-500",children:[a.jsx(pe,{}),a.jsx("p",{className:"mt-6 text-lg font-medium text-gray-700",children:o("No comments yet",i)}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:o("Be the first to share your thoughts!",i)})]}):a.jsx("div",{className:"w-full",children:g.map(e=>a.jsx(se,{comment:e,onReply:L,selectedLanguage:i},e.id))})}),a.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 bg-white sticky bottom-0",style:{zIndex:30},children:[b&&a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-2",children:[a.jsxs("span",{children:[o("Replying to",i)," @",b.userName]}),a.jsx("button",{onClick:I,className:"text-indigo-600 hover:underline",children:o("Cancel",i)})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{name:"commentText",ref:d,value:y,onChange:e=>v(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),P())},placeholder:o("Add a comment... (use @ to mention)",i),className:"flex-1 bg-gray-100 border border-gray-200 rounded-xl px-4 py-3 text-sm text-gray-800 outline-none focus:outline-none focus:ring-1 focus:ring-gray-300 focus:border-gray-300"}),a.jsx("button",{onClick:P,className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center shadow-md","aria-label":"Send comment",children:a.jsx(he,{})})]})]})]})}):null},ue=({size:e=20,stroke:t="#9CA3AF"})=>a.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),pe=({size:e=96,stroke:t="#E5E7EB"})=>a.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),he=({size:e=18,color:t="#fff"})=>a.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M22 2L11 13"}),a.jsx("path",{d:"M22 2l-7 20  -2-7-7-2 20-11z"})]}),me=Object.freeze(Object.defineProperty({__proto__:null,VideoPlayer:()=>{h();const e=d(),[t,r]=u.useState("undefined"!=typeof window&&localStorage.getItem("regaarder_language")||"English");u.useEffect(()=>{const e=setInterval(()=>{const e=localStorage.getItem("regaarder_language")||"English";r(e)},1e3);return()=>clearInterval(e)},[]);const[o,i]=u.useState(null),[s,c]=u.useState(null),p=u.useRef(null),f=u.useRef(null),[g,x]=u.useState(0),[y,v]=u.useState(!1),b=u.useContext(l)||{},w=b.videoRef,j=b.setSource;b.play;const k=u.useRef([]),S=u.useRef(-1),[N,C]=u.useState(-1),T=u.useRef(0);if(u.useEffect(()=>{let t=!1;return(async()=>{try{const o=new URLSearchParams(window.location.search),a=o.get("id"),s=o.get("title"),l=o.get("channel"),d=o.get("subtitle"),u=o.get("src")||o.get("video")||o.get("url")||o.get("videoUrl")||o.get("v");let p=null;try{if(e&&e.state){const t=e.state.miniPlayerData||e.state.video||null;t&&(p=t.video||t||null,p&&!p.src&&(p.src=p.videoUrl||p.url||u||null))}}catch(r){}try{const e=await n(()=>import("./home-Bm5sJ1cs.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47])),t=e.getVideoById,r=e.VIDEOS||e.default?.VIDEOS||null;!p&&a&&"function"==typeof t&&(p=t(a)),p||(s||u)&&(p={id:a||(u?"custom":null),title:s||"",channel:l,subtitle:d,src:u||null}),!p&&Array.isArray(r)&&r.length&&(p=r[0])}catch(r){!p&&s&&(p={id:a||"custom",title:s,channel:l,subtitle:d,src:u||null})}if(t)return;if(!p)return void i("No video information available.");p&&!p.src&&(p.src=p.videoUrl||p.url||p.src||null),c(p);try{const e=localStorage.getItem("videoplayer_source"),t=localStorage.getItem("videoplayer_index");if(e){const r=JSON.parse(e);if(Array.isArray(r)&&r.length){k.current=r;const e=p.id||p.src||p.url||p.videoUrl||p.title;let n=r.findIndex(t=>String(t)===String(e)||String(t)===String(p.url)||String(t)===String(p.src)||"object"==typeof t&&(String(t.id)===String(e)||String(t.url)===String(e)));if(null!=t&&void 0!==t&&!isNaN(parseInt(t,10))){const o=parseInt(t,10);if(o>=0&&o<r.length){const t=r[o],a="object"==typeof t?t.id||t.url:t;-1!==n&&String(a)!==String(e)&&String(a)!==String(p.url)||(n=o)}}-1!==n?(S.current=n,C(n)):(S.current=0,C(0))}}}catch(r){}}catch(o){console.error("videoplayer parse error",o),i("Failed to parse video parameters.")}})(),()=>{t=!0}},[]),u.useEffect(()=>{if(!s)return;const e=w&&w.current||null;try{if(f.current&&e){try{f.current.innerHTML=""}catch{}try{f.current.appendChild(e)}catch{}try{e.style.display="block",e.className="w-full rounded-lg bg-black"}catch{}try{p.current=e}catch{}try{x(e=>e+1)}catch{}}}catch(t){}try{if("function"==typeof j&&s.src){let e=0;try{const t="playback:"+(s.id||s.src||s.url||s.title||""),r=localStorage.getItem(t);if(r){const t=JSON.parse(r);t&&t.currentTime&&(e=t.currentTime)}}catch{}j(s.src,e,!1);try{const e=m(s.src);e&&videoUrl!==e&&setVideoUrl(e)}catch{}}else if(e&&s.src){if(e.src!==(s.src?m(s.src):s.src)){e.src=s.src?m(s.src):s.src;try{e.load()}catch{}}try{e.currentTime=0}catch{}}}catch(t){}},[s,w,j,videoUrl]),u.useEffect(()=>{const e=w&&w.current||p.current;if(!e)return;const t=()=>{try{const t=e.videoWidth||16,r=e.videoHeight||9,n=t&&r?t/r:16/9;try{setDuration(e.duration||0)}catch{}try{setNaturalAspect(n)}catch{}try{setOrientation(n<1?"portrait":"landscape")}catch{}}catch{}},r=()=>{try{e.duration&&!draggingRef.current&&setProgress(e.currentTime/e.duration)}catch{}},n=()=>{try{console.debug("video seeking",e&&e.currentTime)}catch{}},o=()=>{try{console.debug("video seeked",e&&e.currentTime)}catch{}},a=()=>{try{setIsPlaying(!0),handlePlayRecord()}catch{}},i=()=>{try{setIsPlaying(!1)}catch{}},s=()=>{try{setIsPlaying(!1),setShowSuggestionCard(!0)}catch{}};return e.addEventListener("loadedmetadata",t),e.addEventListener("timeupdate",r),e.addEventListener("seeking",n),e.addEventListener("seeked",o),e.addEventListener("play",a),e.addEventListener("pause",i),e.addEventListener("ended",s),()=>{try{e.removeEventListener("loadedmetadata",t)}catch{}try{e.removeEventListener("timeupdate",r)}catch{}try{e.removeEventListener("seeking",n)}catch{}try{e.removeEventListener("seeked",o)}catch{}try{e.removeEventListener("play",a)}catch{}try{e.removeEventListener("pause",i)}catch{}try{e.removeEventListener("ended",s)}catch{}}},[w]),u.useEffect(()=>{if(window.NativePiP&&"function"==typeof window.NativePiP.setPipAllowed)try{window.NativePiP.setPipAllowed(!0)}catch{}const e=window.Capacitor||("undefined"!=typeof Capacitor?Capacitor:null);if(e&&e.Plugins&&e.Plugins.PiPMode)try{e.Plugins.PiPMode.setPipAllowed({allowed:!0})}catch{}return()=>{if(window.NativePiP&&"function"==typeof window.NativePiP.setPipAllowed)try{window.NativePiP.setPipAllowed(!1)}catch{}if(e&&e.Plugins&&e.Plugins.PiPMode)try{e.Plugins.PiPMode.setPipAllowed({allowed:!1})}catch{}}},[]),u.useEffect(()=>{const e=w&&w.current||p.current;if(!e)return;const t=()=>{console.log("[PiP] Entered browser Picture-in-Picture");try{v(!0),setControlsVisible(!1)}catch{}},r=()=>{console.log("[PiP] Left browser Picture-in-Picture");try{v(!1),setControlsVisible(!0)}catch{}};e.addEventListener("enterpictureinpicture",t),e.addEventListener("leavepictureinpicture",r);const n=e=>{const t=!!(e&&e.detail&&e.detail.pip);console.log("[PiP] Android pipModeChanged:",t);try{v(t),setControlsVisible(!t)}catch{}if(t)try{const e=document.querySelector(".vx-video-area iframe");e&&e.contentWindow&&(setTimeout(()=>{try{e.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*")}catch{}},300),setTimeout(()=>{try{e.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*")}catch{}},1e3),setTimeout(()=>{try{e.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*")}catch{}},2500))}catch{}};return window.addEventListener("pipModeChanged",n),()=>{try{e.removeEventListener("enterpictureinpicture",t)}catch{}try{e.removeEventListener("leavepictureinpicture",r)}catch{}try{window.removeEventListener("pipModeChanged",n)}catch{}}},[w]),u.useEffect(()=>{const e=async e=>{try{const o=Date.now();if(o-T.current<650)return;const a=e.deltaY<0?1:-1,i=currentPlaylistRef.current||[];if(!i||!i.length)return;let s=S.current;"number"!=typeof s&&(s=-1);const l=s+a;if(l<0||l>=i.length)return;T.current=o;const d=i[l];try{const e=await n(()=>import("./home-Bm5sJ1cs.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47])),o=e.getVideoById,a=e.VIDEOS||e.default?.VIDEOS||e.homeVideos||e.discoverItems||null;let i=null;if("function"==typeof o&&(i=o(d)),!i&&Array.isArray(a)&&(i=a.find(e=>e.id&&String(e.id)===String(d)||e.url&&String(e.url)===String(d)||e.src&&String(e.src)===String(d))),i||"string"==typeof d&&/^(https?:)?\/\//.test(d)&&(i={id:d,title:"Video",src:d}),i){S.current=l,c(i);try{const e=p.current;e&&(i.src||i.url)&&(e.src=m(i.src||i.url),e.currentTime=0)}catch(t){}try{localStorage.setItem("videoplayer_index",String(l))}catch(r){}}}catch(t){}}catch(t){}};return window.addEventListener("wheel",e,{passive:!0}),()=>window.removeEventListener("wheel",e)},[]),o)return a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",style:{border:"none",display:"none"},children:[a.jsx("strong",{children:"Error:"})," ",o]})});if(!s)return a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"text-gray-600",children:"Loading video..."})});const E=s&&s.src&&(s.src.includes("youtube.com")||s.src.includes("youtu.be")),L=(()=>{if(!E||!s?.src)return"";const e=s.src;if(e.includes("youtu.be/"))return e.split("youtu.be/")[1].split(/[?&#]/)[0];if(e.includes("youtube.com"))try{return new URL(e).searchParams.get("v")||""}catch{return""}return""})();return a.jsx("div",{className:"min-h-screen bg-white p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:s.title}),s.channel&&a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:s.channel}),E&&L?a.jsxs("div",{className:"w-full rounded-lg bg-black relative",style:{aspectRatio:"16/9",overflow:"hidden"},children:[a.jsx("iframe",{src:`https://www.youtube-nocookie.com/embed/${L}?autoplay=1&controls=0&modestbranding=1&showinfo=0&rel=0&iv_load_policy=3&fs=0&disablekb=1&playsinline=1&enablejsapi=1&origin=${encodeURIComponent(window.location.origin)}`,className:"w-full h-full border-0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",style:{width:"100%",height:"100%",pointerEvents:"none",transform:"scale(1.3)",transformOrigin:"center center"},title:"Video player"}),a.jsx("div",{style:{position:"absolute",inset:0,zIndex:3}}),a.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"10%",background:"linear-gradient(to top, #000 15%, transparent 100%)",zIndex:4,pointerEvents:"none"}}),a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"6%",background:"linear-gradient(to bottom, #000 5%, transparent 100%)",zIndex:4,pointerEvents:"none"}})]}):s.src?a.jsx("div",{ref:f,className:"w-full rounded-lg bg-black"}):a.jsx("div",{className:"p-6 bg-[var(--color-gold-cream)] rounded-md text-[var(--color-gold)]",style:{borderColor:"var(--color-gold-light)",borderStyle:"solid"},children:"No playable source provided for this video."})]})})},default:oe},Symbol.toStringTag,{value:"Module"}));export{k as D,oe as M,me as V,S as a};
