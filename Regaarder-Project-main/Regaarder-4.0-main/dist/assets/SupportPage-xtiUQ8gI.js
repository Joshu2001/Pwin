import{b as e,j as t}from"./index-BzuB3mX8.js";import{d as s,b as a}from"./vendor-Cml8jNaD.js";import{S as i}from"./SharedBottomBar-CVOcO0up.js";import{C as r}from"./chevron-left-CWMQUHBI.js";import{A as o}from"./alert-circle-CMHD0Rck.js";import{U as l}from"./upload-DxzAQbIh.js";import{I as n}from"./image-DmOMdq_C.js";import{F as c}from"./file-5oN_UjGp.js";import{T as d,S as m}from"./trash-2-C176spKL.js";import{L as p}from"./loader-Cmg6CjGD.js";import{M as g}from"./message-circle-D4APY2tM.js";import"./home-Dt30oW78.js";import"./pencil-Dci8HX-Q.js";const u=({selectedLanguage:e="English"})=>t.jsx(i,{selectedLanguage:e,activeTabOverride:"More"}),x=()=>{const i=s(),{selectedLanguage:x}=e(),[h,b]=a.useState("list"),[y,f]=a.useState(""),[k,v]=a.useState(""),[j,N]=a.useState(""),[T,w]=a.useState([]),[S,E]=a.useState(!1),[F,P]=a.useState(""),[A,M]=a.useState(""),[R,z]=a.useState([]),[L,I]=a.useState(null),[C,D]=a.useState(""),[q,B]=a.useState(!1),[V,_]=a.useState(!1),O=a.useRef(null),H=()=>{let e=localStorage.getItem("anonymousUserId");return e||(e=`anon_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("anonymousUserId",e)),`${e}@anonymous.local`},$={English:{title:"Contact Support",subtitle:"We're here to help! Send us your issue and we'll get back to you soon.",yourName:"Your Name",yourNamePlaceholder:"Enter your name",ticketTitle:"Issue Title",ticketTitlePlaceholder:"e.g., Video not playing, Account issue, etc.",description:"Describe Your Issue",descriptionPlaceholder:"Please provide as much detail as possible so we can help you better...",addFiles:"Add Files/Images",send:"Send Ticket",sending:"Sending...",attachFiles:"Attach Files",dragDrop:"Drag files here or click to select",successTitle:"Ticket Submitted! ðŸŽ‰",successMessage:"Thank you for reaching out. Our support team will review your ticket and respond within 24 hours.",backToForm:"Send Another",close:"Back",requiredField:"This field is required",fileSizeError:"File size must be less than 5MB",maxFilesError:"Maximum 5 files allowed",maxTitleLength:"Title must be less than 100 characters",maxDescriptionLength:"Description must be less than 2000 characters",newTicket:"+ New Ticket",myTickets:"My Support Tickets",noTickets:"No support tickets yet",ticketId:"Ticket #",status:"Status",opened:"Opened",replies:"Replies",addReply:"Add Reply",reply:"Reply",pending:"Pending",resolved:"Resolved",youAnHourAgo:"You, an hour ago",staffResponse:"Staff Response",loading:"Loading..."},Spanish:{title:"Contactar Soporte",subtitle:"Â¡Estamos aquÃ­ para ayudarte! EnvÃ­anos tu problema y nos pondremos en contacto pronto.",yourName:"Tu Nombre",yourNamePlaceholder:"Ingresa tu nombre",ticketTitle:"TÃ­tulo del Problema",ticketTitlePlaceholder:"p. ej., Video no se reproduce, Problema de cuenta, etc.",description:"Describe Tu Problema",descriptionPlaceholder:"Por favor proporciona tantos detalles como sea posible para ayudarte mejor...",addFiles:"AÃ±adir Archivos/ImÃ¡genes",send:"Enviar Ticket",sending:"Enviando...",attachFiles:"Adjuntar Archivos",dragDrop:"Arrastra archivos aquÃ­ o haz clic para seleccionar",successTitle:"Â¡Ticket Enviado! ðŸŽ‰",successMessage:"Gracias por comunicarte con nosotros. Nuestro equipo de soporte revisarÃ¡ tu ticket y responderÃ¡ en 24 horas.",backToForm:"Enviar Otro",close:"AtrÃ¡s",requiredField:"Este campo es requerido",fileSizeError:"El tamaÃ±o del archivo debe ser menor a 5MB",maxFilesError:"MÃ¡ximo 5 archivos permitidos",maxTitleLength:"El tÃ­tulo debe tener menos de 100 caracteres",maxDescriptionLength:"La descripciÃ³n debe tener menos de 2000 caracteres",newTicket:"+ Nuevo Ticket",myTickets:"Mis Tickets de Soporte",noTickets:"Sin tickets de soporte aÃºn",ticketId:"Ticket #",status:"Estado",opened:"Abierto",replies:"Respuestas",addReply:"Agregar Respuesta",reply:"Responder",pending:"Pendiente",resolved:"Resuelto",youAnHourAgo:"TÃº, hace una hora",staffResponse:"Respuesta del Personal",loading:"Cargando..."},French:{title:"Contacter le Support",subtitle:"Nous sommes lÃ  pour vous aider! Envoyez-nous votre problÃ¨me et nous vous rÃ©pondrons bientÃ´t.",yourName:"Votre Nom",yourNamePlaceholder:"Entrez votre nom",ticketTitle:"Titre du ProblÃ¨me",ticketTitlePlaceholder:"p. ex., VidÃ©o ne se lit pas, ProblÃ¨me de compte, etc.",description:"DÃ©crivez Votre ProblÃ¨me",descriptionPlaceholder:"Veuillez fournir autant de dÃ©tails que possible pour mieux vous aider...",addFiles:"Ajouter des Fichiers/Images",send:"Envoyer le Ticket",sending:"Envoi...",attachFiles:"Joindre des Fichiers",dragDrop:"Faites glisser les fichiers ici ou cliquez pour sÃ©lectionner",successTitle:"Ticket EnvoyÃ©! ðŸŽ‰",successMessage:"Merci de nous avoir contactÃ©s. Notre Ã©quipe d'assistance examinera votre ticket et vous rÃ©pondra dans 24 heures.",backToForm:"Envoyer un Autre",close:"Retour",requiredField:"Ce champ est obligatoire",fileSizeError:"La taille du fichier doit Ãªtre infÃ©rieure Ã  5MB",maxFilesError:"Maximum 5 fichiers autorisÃ©s",maxTitleLength:"Le titre doit contenir moins de 100 caractÃ¨res",maxDescriptionLength:"La description doit contenir moins de 2000 caractÃ¨res",newTicket:"+ Nouveau Ticket",myTickets:"Mes Tickets de Support",noTickets:"Aucun ticket de support para le moment",ticketId:"Ticket #",status:"Statut",opened:"Ouvert",replies:"RÃ©ponses",addReply:"Ajouter une RÃ©ponse",reply:"RÃ©pondre",pending:"En attente",resolved:"RÃ©solu",youAnHourAgo:"Vous, il y a une heure",staffResponse:"RÃ©ponse du Personnel",loading:"Chargement..."},Vietnamese:{title:"LiÃªn há»‡ Há»— trá»£",subtitle:"ChÃºng tÃ´i á»Ÿ Ä‘Ã¢y Ä‘á»ƒ giÃºp báº¡n! Gá»­i váº¥n Ä‘á» cá»§a báº¡n vÃ  chÃºng tÃ´i sáº½ pháº£n há»“i sá»›m.",yourName:"TÃªn cá»§a báº¡n",yourNamePlaceholder:"Nháº­p tÃªn cá»§a báº¡n",ticketTitle:"TiÃªu Ä‘á» váº¥n Ä‘á»",ticketTitlePlaceholder:"VD: Video khÃ´ng phÃ¡t, Váº¥n Ä‘á» tÃ i khoáº£n, v.v.",description:"MÃ´ táº£ váº¥n Ä‘á» cá»§a báº¡n",descriptionPlaceholder:"Vui lÃ²ng cung cáº¥p cÃ ng nhiá»u chi tiáº¿t cÃ ng tá»‘t Ä‘á»ƒ chÃºng tÃ´i cÃ³ thá»ƒ giÃºp báº¡n tá»‘t hÆ¡n...",addFiles:"ThÃªm tá»‡p/HÃ¬nh áº£nh",send:"Gá»­i Ticket",sending:"Äang gá»­i...",attachFiles:"ÄÃ­nh kÃ¨m tá»‡p",dragDrop:"KÃ©o tá»‡p vÃ o Ä‘Ã¢y hoáº·c nháº¥p Ä‘á»ƒ chá»n",successTitle:"ÄÃ£ gá»­i Ticket! ðŸŽ‰",successMessage:"Cáº£m Æ¡n báº¡n Ä‘Ã£ liÃªn há»‡. Äá»™i ngÅ© há»— trá»£ cá»§a chÃºng tÃ´i sáº½ xem xÃ©t ticket cá»§a báº¡n vÃ  pháº£n há»“i trong vÃ²ng 24 giá».",backToForm:"Gá»­i ticket khÃ¡c",close:"Quay láº¡i",requiredField:"TrÆ°á»ng nÃ y lÃ  báº¯t buá»™c",fileSizeError:"KÃ­ch thÆ°á»›c tá»‡p pháº£i nhá» hÆ¡n 5MB",maxFilesError:"Tá»‘i Ä‘a 5 tá»‡p Ä‘Æ°á»£c phÃ©p",maxTitleLength:"TiÃªu Ä‘á» pháº£i Ã­t hÆ¡n 100 kÃ½ tá»±",maxDescriptionLength:"MÃ´ táº£ pháº£i Ã­t hÆ¡n 2000 kÃ½ tá»±",newTicket:"+ Ticket má»›i",myTickets:"CÃ¡c Ticket há»— trá»£ cá»§a tÃ´i",noTickets:"ChÆ°a cÃ³ ticket há»— trá»£ nÃ o",ticketId:"Ticket #",status:"Tráº¡ng thÃ¡i",opened:"ÄÃ£ má»Ÿ",replies:"Pháº£n há»“i",addReply:"ThÃªm pháº£n há»“i",reply:"Tráº£ lá»i",pending:"Äang chá»",resolved:"ÄÃ£ giáº£i quyáº¿t",youAnHourAgo:"Báº¡n, má»™t giá» trÆ°á»›c",staffResponse:"Pháº£n há»“i tá»« nhÃ¢n viÃªn",loading:"Äang táº£i..."},Filipino:{title:"Makipag-ugnay sa Suporta",subtitle:"Nandito kami upang tumulong! Ipadala ang iyong isyu at makikipag-ugnay kami sa lalong madaling panahon.",yourName:"Ang Iyong Pangalan",yourNamePlaceholder:"Ilagay ang iyong pangalan",ticketTitle:"Pamagat ng Isyu",ticketTitlePlaceholder:"Hal., Hindi nagpe-play ang video, Isyu sa account, atbp.",description:"Ilarawan ang Iyong Isyu",descriptionPlaceholder:"Mangyaring magbigay ng maraming detalye hangga't maaari upang matulungan ka namin nang mas mabuti...",addFiles:"Magdagdag ng mga File/Larawan",send:"Ipadala ang Ticket",sending:"Ipinapadala...",attachFiles:"Maglakip ng mga File",dragDrop:"I-drag ang mga file dito o i-click para pumili",successTitle:"Naisumite na ang Ticket! ðŸŽ‰",successMessage:"Salamat sa pakikipag-ugnay. Susuriin ng aming support team ang iyong ticket at tutugon sa loob ng 24 na oras.",backToForm:"Magpadala ng Isa Pa",close:"Bumalik",requiredField:"Kinakailangan ang field na ito",fileSizeError:"Ang laki ng file ay dapat mas mababa sa 5MB",maxFilesError:"Maximum na 5 file ang pinapayagan",maxTitleLength:"Ang pamagat ay dapat mas mababa sa 100 karakter",maxDescriptionLength:"Ang paglalarawan ay dapat mas mababa sa 2000 karakter",newTicket:"+ Bagong Ticket",myTickets:"Aking mga Support Ticket",noTickets:"Wala pang support ticket",ticketId:"Ticket #",status:"Katayuan",opened:"Binuksan",replies:"Mga Tugon",addReply:"Magdagdag ng Tugon",reply:"Tumugon",pending:"Nakabinbin",resolved:"Nalutas",youAnHourAgo:"Ikaw, isang oras na nakalipas",staffResponse:"Tugon ng Staff",loading:"Naglo-load..."},"Chinese Traditional":{title:"è¯ç¹«æ”¯æ´",subtitle:"æˆ‘å€‘éš¨æ™‚ç‚ºæ‚¨æä¾›å¹«åŠ©ï¼ç™¼é€æ‚¨çš„å•é¡Œï¼Œæˆ‘å€‘æœƒç›¡å¿«å›žè¦†ã€‚",yourName:"æ‚¨çš„å§“å",yourNamePlaceholder:"è¼¸å…¥æ‚¨çš„å§“å",ticketTitle:"å•é¡Œæ¨™é¡Œ",ticketTitlePlaceholder:"ä¾‹å¦‚ï¼šè¦–é »ç„¡æ³•æ’­æ”¾ã€å¸³æˆ¶å•é¡Œç­‰",description:"æè¿°æ‚¨çš„å•é¡Œ",descriptionPlaceholder:"è«‹æä¾›ç›¡å¯èƒ½å¤šçš„è©³ç´°ä¿¡æ¯ï¼Œä»¥ä¾¿æˆ‘å€‘æ›´å¥½åœ°å¹«åŠ©æ‚¨...",addFiles:"æ·»åŠ æ–‡ä»¶/åœ–ç‰‡",send:"ç™¼é€å·¥å–®",sending:"ç™¼é€ä¸­...",attachFiles:"é™„åŠ æ–‡ä»¶",dragDrop:"å°‡æ–‡ä»¶æ‹–åˆ°æ­¤è™•æˆ–é»žæ“Šé¸æ“‡",successTitle:"å·¥å–®å·²æäº¤ï¼ðŸŽ‰",successMessage:"æ„Ÿè¬æ‚¨çš„è¯ç¹«ã€‚æˆ‘å€‘çš„æ”¯æ´åœ˜éšŠå°‡å¯©æ ¸æ‚¨çš„å·¥å–®ä¸¦åœ¨24å°æ™‚å…§å›žè¦†ã€‚",backToForm:"å†ç™¼é€ä¸€å€‹",close:"è¿”å›ž",requiredField:"æ­¤æ¬„ä½ç‚ºå¿…å¡«",fileSizeError:"æ–‡ä»¶å¤§å°å¿…é ˆå°æ–¼5MB",maxFilesError:"æœ€å¤šå…è¨±5å€‹æ–‡ä»¶",maxTitleLength:"æ¨™é¡Œå¿…é ˆå°‘æ–¼100å€‹å­—ç¬¦",maxDescriptionLength:"æè¿°å¿…é ˆå°‘æ–¼2000å€‹å­—ç¬¦",newTicket:"+ æ–°å·¥å–®",myTickets:"æˆ‘çš„æ”¯æ´å·¥å–®",noTickets:"å°šç„¡æ”¯æ´å·¥å–®",ticketId:"å·¥å–® #",status:"ç‹€æ…‹",opened:"å·²é–‹å•Ÿ",replies:"å›žè¦†",addReply:"æ·»åŠ å›žè¦†",reply:"å›žè¦†",pending:"å¾…è™•ç†",resolved:"å·²è§£æ±º",youAnHourAgo:"æ‚¨ï¼Œä¸€å°æ™‚å‰",staffResponse:"å“¡å·¥å›žè¦†",loading:"è¼‰å…¥ä¸­..."},Estonian:{title:"VÃµtke Ã¼hendust toega",subtitle:"Oleme siin, et aidata! Saatke oma probleem ja me vastame peagi.",yourName:"Teie nimi",yourNamePlaceholder:"Sisestage oma nimi",ticketTitle:"Probleemi pealkiri",ticketTitlePlaceholder:"nt Video ei mÃ¤ngi, Konto probleem jne",description:"Kirjeldage oma probleemi",descriptionPlaceholder:"Palun esitage vÃµimalikult palju Ã¼ksikasju, et saaksime teid paremini aidata...",addFiles:"Lisa faile/pilte",send:"Saada pilet",sending:"Saatmine...",attachFiles:"Lisa failid",dragDrop:"Lohistage failid siia vÃµi klÃµpsake valimiseks",successTitle:"Pilet esitatud! ðŸŽ‰",successMessage:"TÃ¤name, et vÃµtsite meiega Ã¼hendust. Meie tugimeeskond vaatab teie pileti Ã¼le ja vastab 24 tunni jooksul.",backToForm:"Saada veel Ã¼ks",close:"Tagasi",requiredField:"See vÃ¤li on kohustuslik",fileSizeError:"Faili suurus peab olema alla 5MB",maxFilesError:"Maksimaalselt 5 faili lubatud",maxTitleLength:"Pealkiri peab olema alla 100 tÃ¤hemÃ¤rki",maxDescriptionLength:"Kirjeldus peab olema alla 2000 tÃ¤hemÃ¤rki",newTicket:"+ Uus pilet",myTickets:"Minu tugipiletid",noTickets:"Tugipileteid pole veel",ticketId:"Pilet #",status:"Olek",opened:"Avatud",replies:"Vastused",addReply:"Lisa vastus",reply:"Vasta",pending:"Ootel",resolved:"Lahendatud",youAnHourAgo:"Teie, tund tagasi",staffResponse:"Personali vastus",loading:"Laadimine..."},"EspaÃ±ol":{title:"Contactar Soporte",subtitle:"Â¡Estamos aquÃ­ para ayudarte! EnvÃ­anos tu problema y nos pondremos en contacto pronto.",yourName:"Tu Nombre",yourNamePlaceholder:"Ingresa tu nombre",ticketTitle:"TÃ­tulo del Problema",ticketTitlePlaceholder:"p. ej., Video no se reproduce, Problema de cuenta, etc.",description:"Describe Tu Problema",descriptionPlaceholder:"Por favor proporciona tantos detalles como sea posible para ayudarte mejor...",addFiles:"AÃ±adir Archivos/ImÃ¡genes",send:"Enviar Ticket",sending:"Enviando...",attachFiles:"Adjuntar Archivos",dragDrop:"Arrastra archivos aquÃ­ o haz clic para seleccionar",successTitle:"Â¡Ticket Enviado! ðŸŽ‰",successMessage:"Gracias por comunicarte con nosotros. Nuestro equipo de soporte revisarÃ¡ tu ticket y responderÃ¡ en 24 horas.",backToForm:"Enviar Otro",close:"AtrÃ¡s",requiredField:"Este campo es requerido",fileSizeError:"El tamaÃ±o del archivo debe ser menor a 5MB",maxFilesError:"MÃ¡ximo 5 archivos permitidos",maxTitleLength:"El tÃ­tulo debe tener menos de 100 caracteres",maxDescriptionLength:"La descripciÃ³n debe tener menos de 2000 caracteres",newTicket:"+ Nuevo Ticket",myTickets:"Mis Tickets de Soporte",noTickets:"Sin tickets de soporte aÃºn",ticketId:"Ticket #",status:"Estado",opened:"Abierto",replies:"Respuestas",addReply:"Agregar Respuesta",reply:"Responder",pending:"Pendiente",resolved:"Resuelto",youAnHourAgo:"TÃº, hace una hora",staffResponse:"Respuesta del Personal",loading:"Cargando..."}},K=$[x]||$.English;a.useEffect(()=>{"list"===h&&U()},[h]);const U=async()=>{B(!0);try{const e=localStorage.getItem("userEmail")||H(),t=(window.location.protocol,window.location.hostname,window.__BACKEND_URL__||"https://pwin.onrender.com"),s=await fetch(`${t}/support/tickets?userEmail=${encodeURIComponent(e)}`);if(s.ok){const e=await s.json();z(e.tickets||[])}}catch(e){console.error("Error loading tickets:",e)}finally{B(!1)}},G=e=>{if(!e)return;if(P(""),T.length+e.length>5)return void P(K.maxFilesError);const t=[];for(let s of e)s.size>5242880?P(K.fileSizeError):t.push({file:s,id:Math.random(),name:s.name,size:(s.size/1024/1024).toFixed(2)});w([...T,...t])},Y=e=>{e.preventDefault(),e.stopPropagation()},W=e=>{e.preventDefault(),e.stopPropagation(),G(e.dataTransfer.files)},J=async()=>{if(y.trim()&&k.trim()?k.length>100?(P(K.maxTitleLength),0):j.trim()?!(j.length>2e3&&(P(K.maxDescriptionLength),1)):(P(K.requiredField),0):(P(K.requiredField),0)){E(!0);try{const e=new FormData;e.append("userName",y.trim()),e.append("title",k),e.append("description",j),e.append("userId",localStorage.getItem("userId")||"anonymous");const t=localStorage.getItem("userEmail")||H();e.append("userEmail",t),T.forEach(t=>{e.append("file_",t.file)});window.location.protocol,window.location.hostname;const s=window.__BACKEND_URL__||"https://pwin.onrender.com",a=await fetch(`${s}/support/ticket`,{method:"POST",body:e});if(!a.ok){const e=await a.json().catch(()=>({}));throw new Error(e.error||"Failed to submit ticket")}const i=await a.json();M(i.ticketId),b("success")}catch(e){console.error("Ticket submission error:",e),P(e.message||"Failed to submit ticket. Please try again.")}finally{E(!1)}}},Q=()=>{f(""),v(""),N(""),w([]),P(""),b("form")},X=async()=>{if(C.trim()&&L){_(!0);try{window.location.protocol,window.location.hostname;const e=window.__BACKEND_URL__||"https://pwin.onrender.com";if((await fetch(`${e}/support/ticket/${L.id}/customer-response`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:C.trim(),userEmail:localStorage.getItem("userEmail")||H()})})).ok&&(D(""),await U(),L)){const e=R.find(e=>e.id===L.id);e&&I(e)}}catch(e){console.error("Error submitting reply:",e)}finally{_(!1)}}},Z=e=>{try{const t=new Date(e),s=new Date-t,a=Math.floor(s/6e4),i=Math.floor(a/60),r=Math.floor(i/24);return a<60?`${a}m ago`:i<24?`${i}h ago`:r<7?`${r}d ago`:t.toLocaleDateString()}catch{return""}};return"form"===h?t.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[t.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",style:{paddingTop:"calc(16px + env(safe-area-inset-top, 0px))"},children:t.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-4 flex items-center gap-4",children:[t.jsx("button",{onClick:()=>b("list"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(r,{size:24,className:"text-gray-700"})}),t.jsx("div",{children:t.jsx("h1",{className:"text-lg font-bold text-gray-900",children:K.title})})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:t.jsx("div",{className:"max-w-2xl mx-auto",children:t.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[F&&t.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-3",children:[t.jsx(o,{size:18,className:"text-red-600 flex-shrink-0 mt-0.5"}),t.jsx("p",{className:"text-xs text-red-700",children:F})]}),t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-2",children:K.yourName}),t.jsx("input",{type:"text",value:y,onChange:e=>{f(e.target.value),P("")},placeholder:K.yourNamePlaceholder,className:"w-full px-3.5 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-gold)] focus:border-transparent transition-all bg-white text-sm text-gray-900",maxLength:50})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-2",children:K.ticketTitle}),t.jsx("input",{type:"text",value:k,onChange:e=>{v(e.target.value),P("")},placeholder:K.ticketTitlePlaceholder,className:"w-full px-3.5 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-gold)] focus:border-transparent transition-all bg-white text-sm text-gray-900",maxLength:100}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[k.length,"/100"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-2",children:K.description}),t.jsx("textarea",{value:j,onChange:e=>{N(e.target.value),P("")},placeholder:K.descriptionPlaceholder,className:"w-full px-3.5 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-gold)] focus:border-transparent transition-all bg-white text-sm text-gray-900 resize-none",rows:4,maxLength:2e3}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[j.length,"/2000"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-semibold text-gray-900 mb-2",children:K.addFiles}),t.jsxs("div",{onDragOver:Y,onDrop:W,onClick:()=>O.current?.click(),className:"border-2 border-dashed border-gray-300 rounded-lg p-5 text-center cursor-pointer hover:border-[var(--color-gold)] hover:bg-[var(--color-gold)] hover:bg-opacity-3 transition-all",children:[t.jsx(l,{size:24,className:"mx-auto mb-2",style:{color:"var(--color-gold)"}}),t.jsx("p",{className:"text-xs font-medium text-gray-700",children:K.dragDrop}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Max 5MB per file, 5 files total"})]}),t.jsx("input",{ref:O,type:"file",multiple:!0,onChange:e=>G(e.target.files),className:"hidden"}),T.length>0&&t.jsx("div",{className:"mt-4 space-y-2",children:T.map(e=>t.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-2.5 flex-1 min-w-0",children:[e.file.type.startsWith("image/")?t.jsx(n,{size:16,className:"text-[var(--color-gold)] flex-shrink-0"}):t.jsx(c,{size:16,className:"text-gray-400 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-medium text-gray-700 truncate",children:e.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:[e.size," MB"]})]})]}),t.jsx("button",{onClick:()=>{return t=e.id,void w(T.filter(e=>e.id!==t));var t},className:"p-1.5 hover:bg-gray-200 rounded-lg transition-colors ml-2 flex-shrink-0",children:t.jsx(d,{size:14,className:"text-red-500"})})]},e.id))})]})]}),t.jsxs("div",{className:"mt-7 flex gap-3",children:[t.jsx("button",{onClick:()=>b("list"),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 text-sm font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:K.close}),t.jsx("button",{onClick:J,disabled:S,className:"flex-1 px-4 py-2.5 rounded-lg font-semibold text-white text-sm flex items-center justify-center gap-2 transition-all disabled:opacity-50",style:{backgroundColor:"var(--color-gold)"},children:S?t.jsxs(t.Fragment,{children:[t.jsx(p,{size:14,className:"animate-spin"}),K.sending]}):t.jsxs(t.Fragment,{children:[t.jsx(l,{size:14}),K.send]})})]})]})})})]}):"success"===h?t.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[t.jsx("div",{className:"bg-white border-b border-gray-200",style:{paddingTop:"calc(16px + env(safe-area-inset-top, 0px))"},children:t.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-4 flex items-center gap-4",children:[t.jsx("button",{onClick:()=>b("list"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(r,{size:24,className:"text-gray-700"})}),t.jsx("h1",{className:"text-lg font-bold text-gray-900",children:K.title})]})}),t.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:t.jsxs("div",{className:"w-full max-w-sm text-center",children:[t.jsx("div",{className:"w-14 h-14 mx-auto mb-4 rounded-full bg-green-100 flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:"ðŸŽ‰"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:K.successTitle}),t.jsx("p",{className:"text-gray-600 text-sm mb-5 leading-relaxed",children:K.successMessage}),t.jsxs("p",{className:"text-xs text-gray-500 font-mono bg-gray-50 p-2.5 rounded-lg mb-5",children:["Ticket ID: ",A]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>b("list"),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 text-sm font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:K.close}),t.jsx("button",{onClick:Q,className:"flex-1 px-4 py-2.5 rounded-lg font-semibold text-white text-sm transition-all",style:{backgroundColor:"var(--color-gold)"},children:K.backToForm})]})]})})]}):"ticket-detail"===h&&L?t.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[t.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",style:{paddingTop:"calc(16px + env(safe-area-inset-top, 0px))"},children:t.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-3 flex items-center gap-4",children:[t.jsx("button",{onClick:()=>{I(null),b("list")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(r,{size:20,className:"text-gray-700"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h1",{className:"text-base font-bold text-gray-900 truncate",children:L.title}),t.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Ticket #",String(L.id).slice(-10)]})]}),t.jsx("div",{className:"px-2.5 py-1 rounded-full text-xs font-semibold flex-shrink-0 "+("resolved"===L.status?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"),children:"resolved"===L.status?K.resolved:K.pending})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:t.jsxs("div",{className:"max-w-2xl mx-auto",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 mb-5",children:[t.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:[K.opened," Â· ",Z(L.createdAt)]}),t.jsx("p",{className:"text-xs font-semibold text-gray-900 mb-2",children:L.userName}),t.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap break-words",children:L.description})]}),t.jsxs("div",{className:"space-y-3",children:[L.responses&&L.responses.map(e=>t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[t.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[t.jsx(g,{size:14,className:"text-blue-600 mt-1 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-blue-900",children:e.staffName}),t.jsx("p",{className:"text-xs text-blue-700",children:Z(e.createdAt)})]})]}),t.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap break-words ml-6 -mt-2",children:e.message})]},e.id)),L.customerResponses&&L.customerResponses.map(e=>t.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 border border-gray-300",children:[t.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[t.jsx(g,{size:14,className:"text-gray-600 mt-1 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-900",children:"You"}),t.jsx("p",{className:"text-xs text-gray-600",children:Z(e.createdAt)})]})]}),t.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap break-words ml-6 -mt-2",children:e.message})]},e.id))]}),"resolved"!==L.status&&t.jsxs("div",{className:"mt-6 pt-5 border-t border-gray-200",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-900 mb-3",children:K.addReply}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("textarea",{value:C,onChange:e=>D(e.target.value),placeholder:"Type your message...",className:"flex-1 px-3.5 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-gold)] focus:border-transparent transition-all bg-white text-sm text-gray-900 resize-none",rows:2}),t.jsx("button",{onClick:X,disabled:!C.trim()||V,className:"p-2.5 rounded-lg font-semibold text-white transition-all disabled:opacity-50 flex-shrink-0",style:{backgroundColor:"var(--color-gold)"},children:V?t.jsx(p,{size:16,className:"animate-spin"}):t.jsx(m,{size:16})})]})]})]})})]}):t.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center",children:[t.jsxs("div",{className:"w-full max-w-xl flex flex-col flex-1",style:{paddingBottom:"calc(80px + env(safe-area-inset-bottom))"},children:[t.jsx("div",{className:"bg-white border-b border-gray-100 p-3 sticky top-0 z-20",style:{paddingTop:"calc(16px + env(safe-area-inset-top, 0px))"},children:t.jsx("div",{className:"flex items-center justify-between gap-2",children:t.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[t.jsx("button",{onClick:()=>i(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0",children:t.jsx(r,{size:20,className:"text-gray-700"})}),t.jsx("h1",{className:"text-lg font-semibold text-gray-900 whitespace-nowrap",children:K.myTickets})]})})}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6 flex items-center justify-center",children:t.jsx("div",{className:"max-w-2xl mx-auto",children:q?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(p,{size:20,className:"animate-spin text-gray-400"})}):0===R.length?t.jsxs("div",{className:"text-center space-y-6",children:[t.jsx(g,{size:32,className:"mx-auto text-gray-300"}),t.jsx("p",{className:"text-gray-600 text-sm font-medium",children:K.noTickets}),t.jsx("button",{type:"button",onClick:()=>{f(""),v(""),N(""),w([]),P(""),b("form")},className:"px-6 py-3 rounded-lg font-semibold text-white text-base transition-all hover:shadow-lg active:scale-95 cursor-pointer border-none outline-none inline-block",style:{backgroundColor:"var(--color-gold)",boxShadow:"0 2px 8px rgba(203, 138, 0, 0.3)"},children:"+ Ticket"})]}):t.jsx("div",{className:"space-y-2.5",children:R.map(e=>t.jsxs("button",{onClick:()=>{I(e),b("ticket-detail")},className:"w-full bg-white border border-gray-200 rounded-lg p-3 hover:border-[var(--color-gold)] hover:shadow-sm transition-all text-left",children:[t.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:e.title}),t.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Ticket #",String(e.id).slice(-10)," Â· ",Z(e.createdAt)]})]}),t.jsx("div",{className:"px-2.5 py-1 rounded-full text-xs font-semibold flex-shrink-0 "+("resolved"===e.status?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"),children:"resolved"===e.status?K.resolved:K.pending})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[t.jsx(g,{size:12}),t.jsxs("span",{children:[e.responses?.length||0," ",K.replies]})]})]},e.id))})})})]}),t.jsx(u,{selectedLanguage:x})]})};export{x as default};
