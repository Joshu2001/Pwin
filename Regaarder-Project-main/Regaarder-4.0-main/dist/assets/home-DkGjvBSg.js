const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/playlists-Dv1KJn3G.js","assets/index-BquHsqrT.js","assets/vendor-Cml8jNaD.js","assets/index-B9BnKVVM.css","assets/navigation-CVpX3VBE.js","assets/config-DzyQUiLS.js","assets/SharedBottomBar-DxwbZ5xd.js","assets/home-Boow_oaN.js","assets/pencil-ff90-lub.js","assets/chevron-left-BrX7WC8Y.js","assets/bookmark-CG5FfrLw.js","assets/lightbulb-BW-W7RRV.js","assets/list-plus-Dc54sk-3.js"])))=>i.map(i=>d[i]);
import{c as e,j as t,g as r,u as a,P as s,e as o,a as n,b as l,o as i,C as c,_ as d,d as m,M as u,f as g,S as h,E as x,h as p}from"./index-BquHsqrT.js";import{b as f,f as y,d as v,u as b,e as w}from"./vendor-Cml8jNaD.js";import{M as j,D as N,a as k}from"./Videoplayer-DxHLCspQ.js";import{S as C}from"./StaffLoginModal-Cyf0SLNy.js";import{S}from"./SharedBottomBar-DxwbZ5xd.js";import{V as I}from"./video-fkNkVxCL.js";import{X as E}from"./x-DuTMz0-a.js";import{W as L}from"./config-DzyQUiLS.js";import{r as T}from"./media-6x2eImMv.js";import{D as R}from"./dollar-sign-BsCGwt2U.js";import{S as $}from"./sparkles-Dj-c0sCz.js";import{S as P}from"./share-2-BNJ0ZBNA.js";import{A as U}from"./alert-triangle-_Q2MDnEw.js";import{I as _,S as D,a as A,T as z,M}from"./thumbs-down-DWYOuOna.js";import{B as O}from"./book-open-rvUyA4z7.js";import{G as B}from"./globe-55ALcR4S.js";import{C as q}from"./clock-B1tkXTCZ.js";import{C as F}from"./chevron-right-MAXxh-WE.js";import{C as W}from"./chevron-left-BrX7WC8Y.js";import{C as V}from"./chevron-down-DlX8s4uG.js";import{F as H,P as J}from"./pin--KmS2BsF.js";import{B as Y}from"./bookmark-CG5FfrLw.js";import{C as G}from"./crown-Q_Pt9y_w.js";import{C as X}from"./camera-Cy-IjbRt.js";import{Z as K}from"./zap-Bq_uha0_.js";import{L as Z}from"./list-plus-Dc54sk-3.js";import{F as Q}from"./folder-CZuRTACt.js";import{U as ee}from"./users-c4dz1qD3.js";import{S as te}from"./shield-BHs6vKGt.js";import{H as re}from"./history-DZwSNR4i.js";import{G as ae}from"./gift-C265vNq9.js";import{C as se}from"./credit-card-CRn5LCqR.js";import{U as oe}from"./user-BGWDSQjj.js";import{P as ne,M as le,F as ie}from"./pencil-ff90-lub.js";import{T as ce}from"./trending-up-Lg77UIwM.js";import{A as de}from"./alert-circle-Ca5O06sn.js";import{M as me}from"./message-square-Dku3p8X-.js";import{H as ue}from"./heart-off-BQn8x26r.js";import{H as ge}from"./heart-DxmWli3Q.js";import{M as he}from"./more-vertical-sCBbvlu9.js";import{L as xe}from"./lightbulb-BW-W7RRV.js";import{H as pe}from"./home-Boow_oaN.js";import{T as fe}from"./trophy-DKMu8-gp.js";import{S as ye}from"./star-CkjBsbxU.js";import{S as ve}from"./search-Di83Qrzc.js";import{S as be}from"./settings-pVSJkB-n.js";import{B as we}from"./bell-DfgChSA6.js";const je=e("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]),Ne=e("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),ke=e("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),Ce=({isOpen:e,onSelectRole:a,selectedLanguage:s="English",onLanguageSelect:o=null})=>{const[n,l]=f.useState(!1),i=[{name:"English",nativeName:"English",code:"US"},{name:"EspaÃ±ol",nativeName:"EspaÃ±ol",code:"ES"},{name:"Chinese Traditional",nativeName:"ç¹é«”ä¸­æ–‡",code:"TW"},{name:"Vietnamese",nativeName:"Tiáº¿ng Viá»‡t",code:"VN"},{name:"Filipino",nativeName:"Filipino",code:"PH"},{name:"Estonian",nativeName:"Eesti",code:"EE"}],c=i.find(e=>e.name===s)||i[0];return e?t.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-[999] px-4",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:e=>{e.target===e.currentTarget&&(a(null),l(!1))},children:[n&&y.createPortal(t.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.6)"},onClick:()=>l(!1),children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden",onClick:e=>e.stopPropagation(),children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:r("Choose Your Language",s)})}),t.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:i.map(e=>t.jsx("button",{onClick:()=>(e=>{localStorage.setItem("regaarder_language",e),o&&o(e),l(!1)})(e.name),className:"w-full px-6 py-4 text-left border-b border-gray-100 last:border-b-0 transition-colors "+(s===e.name?"bg-purple-50":"hover:bg-gray-50"),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-600",children:e.code}),t.jsx("div",{className:"text-base "+(s===e.name?"font-semibold text-purple-700":"text-gray-800"),children:e.nativeName})]}),s===e.name&&t.jsx("div",{className:"text-purple-600 text-xl",children:"âœ“"})]})},e.name))})]})}),document.body),t.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-sm w-full shadow-2xl animate-in fade-in scale-in duration-300 relative",children:[t.jsx("button",{onClick:e=>{e.stopPropagation(),l(!0)},className:"absolute top-4 right-4 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Change language",children:t.jsx("span",{className:"text-sm font-medium text-gray-700",children:c.code})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2 text-center mt-4",children:r("Welcome to Regaarder",s)}),t.jsx("p",{className:"text-sm text-gray-500 text-center mb-8",children:r("Who are you?",s)}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("button",{onClick:()=>a("user"),className:"w-full flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all duration-200 group text-left",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center",children:t.jsx(ke,{className:"w-6 h-6 text-blue-600",strokeWidth:1.8})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-semibold text-gray-900 group-hover:text-blue-700",children:r("Continue as a User",s)}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:r("Watch, request, and discover content",s)})]})]}),t.jsxs("button",{onClick:()=>a("creator"),className:"w-full flex items-center gap-4 p-4 border-2 border-gray-200 rounded-xl hover:border-purple-500 hover:bg-purple-50 transition-all duration-200 group text-left",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-50 flex items-center justify-center",children:t.jsx(I,{className:"w-6 h-6 text-purple-600",strokeWidth:1.8})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-semibold text-gray-900 group-hover:text-purple-700",children:r("Continue as a Creator",s)}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:r("Get paid creating what people ask for",s)})]})]})]})]})]}):null},Se=({isOpen:e,onClose:a,selectedLanguage:s="English"})=>e?t.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[999]",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:e=>{e.target===e.currentTarget&&a()},children:t.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-sm mx-4 shadow-2xl animate-in fade-in scale-in duration-300",children:[t.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full transition-colors duration-200","aria-label":"Close",children:t.jsx(E,{size:20,className:"text-gray-500"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-5xl mb-4 animate-bounce",children:"ðŸŽ‰"}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:r("Welcome to Regaarder",s)}),t.jsxs("div",{className:"space-y-4 mb-8 text-left",children:[t.jsx("p",{className:"text-gray-700 leading-relaxed",children:r("We're thrilled to have you.",s)}),t.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:r("On Regaarder, you don't just wait for creators to upload â€” you request the videos you want to watch and connect directly with your favorite creators.",s)}),t.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:r("Discover content made for you. Support creators like never before.",s)})]}),t.jsx("button",{onClick:a,className:"w-full py-3 px-6 bg-purple-500 hover:bg-purple-600 text-white font-semibold rounded-lg transition-all duration-200 active:scale-95 shadow-md hover:shadow-lg",children:r("Got It",s)})]})]})}):null,Ie=({isOpen:e,onClose:a,selectedLanguage:s="English"})=>e?t.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[999]",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:e=>{e.target===e.currentTarget&&a()},children:t.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-sm mx-4 shadow-2xl animate-in fade-in scale-in duration-300",children:[t.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full transition-colors duration-200","aria-label":"Close",children:t.jsx(E,{size:20,className:"text-gray-500"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-5xl mb-4 animate-bounce",children:"ðŸŽ¬"}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:r("Welcome to Regaarder",s)}),t.jsxs("div",{className:"space-y-4 mb-8 text-left",children:[t.jsx("p",{className:"text-gray-700 leading-relaxed",children:r("Hundreds of content requests are already waiting.",s)}),t.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:r("Apply to become a creator, connect with fans eager for your work, and start earning immediately.",s)})]}),t.jsx("button",{onClick:a,className:"w-full py-3 px-6 bg-purple-500 hover:bg-purple-600 text-white font-semibold rounded-lg transition-all duration-200 active:scale-95 shadow-md hover:shadow-lg",children:r("Got It",s)})]})]})}):null;var Ee,Le;(Le=Ee||(Ee={})).Unimplemented="UNIMPLEMENTED",Le.Unavailable="UNAVAILABLE";class Te extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const Re=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},a=r.Plugins=r.Plugins||{},s=()=>null!==t?t.name:(e=>{var t,r;return(null==e?void 0:e.androidBridge)?"android":(null===(r=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===r?void 0:r.bridge)?"ios":"web"})(e),o=e=>{var t;return null===(t=r.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},n=new Map;return r.convertFileSrc||(r.convertFileSrc=e=>e),r.getPlatform=s,r.handleError=t=>e.console.error(t),r.isNativePlatform=()=>"web"!==s(),r.isPluginAvailable=e=>{const t=n.get(e);return!!(null==t?void 0:t.platforms.has(s()))||!!o(e)},r.registerPlugin=(e,l={})=>{const i=n.get(e);if(i)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),i.proxy;const c=s(),d=o(e);let m;const u=a=>{let s;const o=(...o)=>{const n=(async()=>(!m&&c in l?m=m="function"==typeof l[c]?await l[c]():l[c]:null!==t&&!m&&"web"in l&&(m=m="function"==typeof l.web?await l.web():l.web),m))().then(t=>{const n=((t,a)=>{var s,o;if(!d){if(t)return null===(o=t[a])||void 0===o?void 0:o.bind(t);throw new Te(`"${e}" plugin is not implemented on ${c}`,Ee.Unimplemented)}{const o=null==d?void 0:d.methods.find(e=>a===e.name);if(o)return"promise"===o.rtype?t=>r.nativePromise(e,a.toString(),t):(t,s)=>r.nativeCallback(e,a.toString(),t,s);if(t)return null===(s=t[a])||void 0===s?void 0:s.bind(t)}})(t,a);if(n){const e=n(...o);return s=null==e?void 0:e.remove,e}throw new Te(`"${e}.${a}()" is not implemented on ${c}`,Ee.Unimplemented)});return"addListener"===a&&(n.remove=async()=>s()),n};return o.toString=()=>`${a.toString()}() { [capacitor code] }`,Object.defineProperty(o,"name",{value:a,writable:!1,configurable:!1}),o},g=u("addListener"),h=u("removeListener"),x=(e,t)=>{const r=g({eventName:e},t),a=async()=>{const a=await r;h({eventName:e,callbackId:a},t)},s=new Promise(e=>r.then(()=>e({remove:a})));return s.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await a()},s},p=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?x:g;case"removeListener":return h;default:return u(t)}}});return a[e]=p,n.set(e,{name:e,proxy:p,platforms:new Set([...Object.keys(l),...d?[c]:[]])}),p},r.Exception=Te,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},$e=(e=>e.Capacitor=Re(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),Pe=$e.registerPlugin;class Ue{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),r&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const a=this.listeners[e];if(a)a.forEach(e=>e(t));else if(r){let r=this.retainedEventArguments[e];r||(r=[]),r.push(t),this.retainedEventArguments[e]=r}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new $e.Exception(e,Ee.Unimplemented)}unavailable(e="not available"){return new $e.Exception(e,Ee.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const a=r.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const _e=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),De=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Ae extends Ue{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[r,a]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=De(r).trim(),a=De(a).trim(),t[r]=a}),t}async setCookie(e){try{const t=_e(e.key),r=_e(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),o=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${a}; path=${s}; ${o};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Pe("CapacitorCookies",{web:()=>new Ae});const ze=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),a=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((r,a,s)=>(r[a]=e[t[s]],r),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)r.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[r,a]of Object.entries(e.data||{}))t.set(r,a);r.body=t.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,r)=>{t.append(r,e)});else for(const r of Object.keys(e.data))t.append(r,e.data[r]);r.body=t;const a=new Headers(r.headers);a.delete("content-type"),r.headers=a}else(a.includes("application/json")||"object"==typeof e.data)&&(r.body=JSON.stringify(e.data));return r};class Me extends Ue{async request(e){const t=ze(e,e.webFetchExtra),r=((e,t=!0)=>e?Object.entries(e).reduce((e,r)=>{const[a,s]=r;let o,n;return Array.isArray(s)?(n="",s.forEach(e=>{o=t?encodeURIComponent(e):e,n+=`${a}=${o}&`}),n.slice(0,-1)):(o=t?encodeURIComponent(s):s,n=`${a}=${o}`),`${e}&${n}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),a=r?`${e.url}?${r}`:e.url,s=await fetch(a,t),o=s.headers.get("content-type")||"";let n,l,{responseType:i="text"}=s.ok?e:{};switch(o.includes("application/json")&&(i="json"),i){case"arraybuffer":case"blob":l=await s.blob(),n=await(async e=>new Promise((t,r)=>{const a=new FileReader;a.onload=()=>{const e=a.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},a.onerror=e=>r(e),a.readAsDataURL(e)}))(l);break;case"json":n=await s.json();break;default:n=await s.text()}const c={};return s.headers.forEach((e,t)=>{c[t]=e}),{data:n,headers:c,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}var Oe,Be,qe,Fe;Pe("CapacitorHttp",{web:()=>new Me}),(Be=Oe||(Oe={})).Dark="DARK",Be.Light="LIGHT",Be.Default="DEFAULT",(Fe=qe||(qe={})).StatusBar="StatusBar",Fe.NavigationBar="NavigationBar";class We extends Ue{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}if(Pe("SystemBars",{web:()=>new We}),"undefined"!=typeof document){const e="videoplayer-transitions";if(!document.getElementById(e)){const t=document.createElement("style");t.id=e,t.textContent="\n            @keyframes fadeInVideoplayer {\n                from {\n                    opacity: 0;\n                }\n                to {\n                    opacity: 1;\n                }\n            }\n            \n            @keyframes fadeOutVideoplayer {\n                from {\n                    opacity: 1;\n                }\n                to {\n                    opacity: 0;\n                }\n            }\n            \n            .fullscreen-videoplayer-entering {\n                animation: fadeInVideoplayer 0.3s ease-in-out forwards;\n            }\n            \n            .fullscreen-videoplayer-exiting {\n                animation: fadeOutVideoplayer 0.3s ease-in-out forwards;\n            }\n        ",document.head.appendChild(t)}}const Ve={display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},He=()=>{try{if("undefined"==typeof document)return;try{const e=document.getElementById("vp-launch-mask");e&&e.remove()}catch{}const e=document.createElement("div");e.id="vp-launch-mask",e.style.position="fixed",e.style.inset="0",e.style.background="#000",e.style.zIndex="99999",e.style.transition="opacity 300ms ease",e.style.opacity="1",e.style.pointerEvents="none",document.body.appendChild(e),setTimeout(()=>{try{const e=document.getElementById("vp-launch-mask");e&&(e.style.opacity="0",setTimeout(()=>{try{e.remove()}catch{}},350))}catch{}},400),setTimeout(()=>{try{const e=document.getElementById("vp-launch-mask");e&&e.remove()}catch{}},2e3)}catch(e){}},Je=$e&&$e.Plugins?$e.Plugins.ImmersiveMode:null,Ye=$e&&$e.Plugins?$e.Plugins.SystemBars:null,Ge=({className:e="",size:r=24,style:a={}})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:a,children:[t.jsx("path",{d:"m5 8 6 6"}),t.jsx("path",{d:"m4 14 6-6 2-3"}),t.jsx("path",{d:"M2 5h12"}),t.jsx("path",{d:"M7 2h1"}),t.jsx("path",{d:"m22 22-5-10-5 10"}),t.jsx("path",{d:"M14 18h6"})]}),Xe=({className:e="",size:r=24,style:a={}})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,style:a,children:t.jsx("path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"})}),Ke=({className:e="",size:r=20,style:a={}})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"currentColor",className:e,style:a,children:t.jsx("path",{d:"M12 21s-7.5-4.873-10-8.047C-0.1 8.98 4.12 4 8.5 6.5 10.7 7.9 12 10 12 10s1.3-2.1 3.5-3.5C19.88 4 24.1 8.98 22 12.953 19.5 16.127 12 21 12 21z"})}),Ze=({name:e,size:r=20,className:a="",...s})=>{const o={menu:M,bell:we,settings:be,search:ve,star:ye,chart:ce,cup:fe,home:pe,requests:ie,ideas:xe,more:le,moreVertical:he,x:E,heart:ge,thumbsDown:z,heartOff:ue,heartFilled:Ke,eye:p,message:me,share:P,alertCircle:de,alertTriangle:U,trendingUp:ce,pencil:ne,profile:oe,track:Xe,subscriptions:se,referral:ae,marketplace:A,bookmarks:O,history:re,editor:D,creator:X,premium:G,language:Ge,theme:m,policies:te,shield:te,"dollar-sign":R,users:ee,folder:Q,listPlus:Z,zap:K,camera:X,crown:G,video:I,sparkles:$,pin:J,bookmark:Y,info:_,eyeOff:x,flag:H,sun:h,moon:g,monitor:u,check:c,palette:m,chevronDown:V,chevronLeft:W,chevronRight:F,music:k,clock:q,dumbbell:N,globe:B,book:O,film:I,tag:Ne}[e];return o?t.jsx(o,{size:r,className:a,...s}):null},Qe=({position:e=null,onClose:a,onReportClick:s,onPinClick:o,onBookmarkClick:n,isBookmarked:l=!1,isPinned:i=!1,pinnedDays:c=null,onUnpinClick:d,onShareClick:m,onNotInterestedClick:u,onViewRequestClick:g,onAddToPlaylistClick:h,selectedLanguage:x="English"})=>{const p=i?`${r("Unpin",x)}${c?` (${c}${r("d left",x)})`:""}`:r("Pin to top",x),f=r(l?"Bookmarked":"Bookmark",x),y=[{icon:"share",label:r("Share video",x),color:"text-gray-800",action:m},{icon:"pin",label:p,color:"text-gray-800",action:i?d:o},{icon:"bookmark",label:f,color:l?"text-gray-500":"text-gray-800",action:n,isBookmark:!0},{icon:"listPlus",label:r("Add to playlist",x),color:"text-gray-800",action:h},{icon:"info",label:r("View request details",x),color:"text-gray-800",action:g}],v=[{icon:"eyeOff",label:r("Not interested",x),color:"text-gray-800",action:u},{icon:"flag",label:r("Report video",x),color:"text-red-500",action:s}],b=e=>{e&&e(),a()};return t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-end justify-center px-4 pb-16",style:{backgroundColor:"rgba(0,0,0,0.6)"},onClick:a,children:[t.jsxs("div",{className:"more-actions-dialog bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-slide-up",onClick:e=>e.stopPropagation(),children:[t.jsx("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r("Video Options",x)})}),t.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[y.map((e,r)=>t.jsxs("button",{className:"flex items-center w-full px-4 py-3 hover:bg-gray-50 transition duration-150",onClick:()=>b(e.action),children:[e.isBookmark&&"bookmark"===e.icon&&l?t.jsx(Ze,{name:"bookmark",size:20,className:"mr-4 text-gray-500"}):t.jsx(Ze,{name:e.icon,size:20,className:`mr-4 ${e.color}`}),t.jsx("span",{className:`text-base font-normal ${e.color}`,children:e.label})]},r)),t.jsx("div",{className:"h-px bg-gray-200 my-1 mx-4"}),v.map((e,r)=>t.jsxs("button",{className:"flex items-center w-full px-4 py-3 hover:bg-gray-50 transition duration-150",onClick:()=>b(e.action),children:[t.jsx(Ze,{name:e.icon,size:20,className:`mr-4 ${e.color}`}),t.jsx("span",{className:`text-base font-normal ${e.color}`,children:e.label})]},r))]})]}),t.jsx("style",{children:"\n                @keyframes slide-up {\n                    from {\n                        opacity: 0;\n                        transform: translateY(100%);\n                    }\n                    to {\n                        opacity: 1;\n                        transform: translateY(0);\n                    }\n                }\n                .animate-slide-up {\n                    animation: slide-up 0.3s ease-out;\n                }\n            "})]})},et=({onClose:e,link:a,onCopySuccess:s,selectedLanguage:o="English"})=>{const[n,l]=f.useState(!1),i=a||window.location.href,c=(t,r)=>{try{navigator.vibrate&&navigator.vibrate(10)}catch(o){}let a=!1;const s=()=>{a=!0};document.addEventListener("visibilitychange",s);try{window.location.href=t}catch(o){}setTimeout(()=>{if(document.removeEventListener("visibilitychange",s),!a)try{window.open(r,"_blank")}catch(o){window.location.href=r}e()},700)},d=({svg:e,label:r,onClick:a})=>{const[s,o]=f.useState(!1),n=e=>{e.preventDefault(),o(!0);try{navigator.vibrate&&navigator.vibrate(10)}catch(t){}a&&a(),setTimeout(()=>o(!1),350)};return t.jsxs("button",{onClick:n,onKeyDown:e=>{"Enter"===e.key&&n(e)},className:"flex flex-col items-center justify-center w-24 h-24 bg-transparent border border-transparent rounded-lg transition-transform duration-150 "+(s?"transform scale-95 bg-gray-100 shadow-sm":"hover:bg-gray-50"),"aria-label":`Share to ${r}`,children:[t.jsx("div",{className:"w-10 h-10 mb-2",dangerouslySetInnerHTML:{__html:e}}),t.jsx("div",{className:"text-xs text-gray-700",children:r})]})};return t.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.6)"},onClick:e,children:t.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md p-6",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-xl font-semibold",children:r("Share",o)}),t.jsx("button",{onClick:e,className:"p-2 text-gray-500",children:t.jsx(Ze,{name:"x",size:20})})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 justify-items-center mb-4",children:[t.jsx(d,{svg:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Instagram</title><path d="M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"/></svg>',label:r("Instagram",o),onClick:()=>c(`instagram://share?text=${encodeURIComponent(i)}`,"https://instagram.com/")}),t.jsx(d,{svg:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>WhatsApp</title><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>',label:r("WhatsApp",o),onClick:()=>c(`whatsapp://send?text=${encodeURIComponent(i)}`,`https://wa.me/?text=${encodeURIComponent(i)}`)}),t.jsx(d,{svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4.98 3.5A2.5 2.5 0 1 0 4.98 8.5 2.5 2.5 0 0 0 4.98 3.5zM3 9h4v12H3zM10 9h3.75v1.7h.05c.52-.99 1.8-2.03 3.7-2.03C21.3 8.67 22 10.6 22 13.8V21H18v-6.5c0-1.6-.03-3.7-2.25-3.7-2.25 0-2.6 1.76-2.6 3.6V21H10z"/></svg>',label:r("LinkedIn",o),onClick:()=>c(`linkedin://shareArticle?mini=true&url=${encodeURIComponent(i)}`,`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(i)}`)}),t.jsx(d,{svg:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Facebook</title><path d="M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"/></svg>',label:r("Facebook",o),onClick:()=>c(`fb://facewebmodal/f?href=${encodeURIComponent(i)}`,`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(i)}`)}),t.jsx(d,{svg:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>X</title><path d="M14.234 10.162 22.977 0h-2.072l-7.591 8.824L7.251 0H.258l9.168 13.343L.258 24H2.33l8.016-9.318L16.749 24h6.993zm-2.837 3.299-.929-1.329L3.076 1.56h3.182l5.965 8.532.929 1.329 7.754 11.09h-3.182z"/></svg>',label:"X.com",onClick:()=>c(`twitter://post?message=${encodeURIComponent(i)}`,`https://twitter.com/intent/tweet?url=${encodeURIComponent(i)}`)}),t.jsx(d,{svg:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Messenger</title><path d="M12 0C5.24 0 0 4.952 0 11.64c0 3.499 1.434 6.521 3.769 8.61a.96.96 0 0 1 .323.683l.065 2.135a.96.96 0 0 0 1.347.85l2.381-1.053a.96.96 0 0 1 .641-.046A13 13 0 0 0 12 23.28c6.76 0 12-4.952 12-11.64S18.76 0 12 0m6.806 7.44c.522-.03.971.567.63 1.094l-4.178 6.457a.707.707 0 0 1-.977.208l-3.87-2.504a.44.44 0 0 0-.49.007l-4.363 3.01c-.637.438-1.415-.317-.995-.966l4.179-6.457a.706.706 0 0 1 .977-.21l3.87 2.505c.15.097.344.094.491-.007l4.362-3.008a.7.7 0 0 1 .364-.13"/></svg>',label:r("Messenger",o),onClick:()=>c(`fb-messenger://share?link=${encodeURIComponent(i)}`,"https://www.messenger.com/")})]}),t.jsx("button",{onClick:async()=>{const e=()=>{l(!0),s&&s(),setTimeout(()=>l(!1),2e3)};try{if(!navigator.clipboard||!navigator.clipboard.writeText)throw new Error("Clipboard API unavailable");await navigator.clipboard.writeText(i),e()}catch(t){console.warn("Clipboard API failed, trying fallback",t);try{const t=document.createElement("textarea");t.value=i,t.style.position="fixed",t.style.left="-9999px",t.style.top="0",document.body.appendChild(t),t.focus(),t.select();const r=document.execCommand("copy");document.body.removeChild(t),r?e():console.error("Fallback copy failed")}catch(r){console.error("All copy methods failed",r)}}},className:"w-full py-3 rounded-lg border font-semibold transition-all duration-200 "+(n?"bg-green-50 border-green-200 text-green-700":"bg-gray-100 border-gray-200 text-gray-800"),children:r(n?"Link Copied":"Copy Link",o)})]})})},tt=({onClose:e,selectedLanguage:a,onSelectLanguage:s})=>{const o=e=>`https://twemoji.maxcdn.com/v/latest/72x72/${e.toUpperCase().split("").map(e=>127397+e.charCodeAt(0)).map(e=>e.toString(16)).join("-")}.png`,n=[{code:"English",flagUrl:o("US"),displayName:"English"},{code:"Chinese Traditional",flagUrl:o("TW"),displayName:"ç¹é«”ä¸­æ–‡"},{code:"Vietnamese",flagUrl:o("VN"),displayName:"Tiáº¿ng Viá»‡t"},{code:"Filipino",flagUrl:o("PH"),displayName:"Filipino"},{code:"EspaÃ±ol",flagUrl:o("MX"),displayName:"EspaÃ±ol"},{code:"Estonian",flagUrl:o("EE"),displayName:"Eesti"}];return y.createPortal(t.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.6)"},onClick:e,children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",onClick:e=>e.stopPropagation(),children:[t.jsx("div",{className:"flex items-center justify-between mb-2",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ze,{name:"language",size:22,className:"mr-3",style:{color:"var(--color-gold)"}}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:r("Choose Your Language",a)}),t.jsx("div",{className:"text-sm text-gray-600",children:r("Select your preferred language for the app",a)})]})]})}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-3 pr-2",children:n.map(e=>{const o=a===e.code;return t.jsxs("button",{onClick:()=>s(e.code),className:"w-full flex items-center justify-between p-4 rounded-lg transition-colors "+(o?"text-white":"bg-white hover:bg-gray-50"),style:o?{backgroundColor:"var(--color-gold)"}:{border:"1px solid #F3F4F6"},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-4 flex-shrink-0",children:t.jsx("img",{src:e.flagUrl,alt:e.displayName,className:"w-8 h-8 object-contain"})}),t.jsx("div",{className:"text-base font-medium text-left",children:r(e.code,a)})]}),o&&t.jsx(Ze,{name:"check",size:20,className:"text-white"})]},e.code)})}),t.jsx("div",{className:"mt-6",children:t.jsx("button",{onClick:e,className:"w-full py-3 rounded-lg bg-gray-100 text-gray-700 font-semibold",children:r("Close",a)})})]})]})}),document.body)},rt=({onClose:e,selectedLanguage:s="English"})=>{const[o,n]=f.useState(1),[l,i]=f.useState(()=>({})),[c,d]=f.useState(""),[m,u]=f.useState(""),[g,h]=f.useState(null),[x,p]=f.useState(null),[y,v]=f.useState(!1),[b,w]=f.useState(!1),j=f.useRef(null),[N,k]=f.useState(""),[C,S]=f.useState(""),[I,E]=f.useState(!1),[L,T]=f.useState(!1),[U,_]=f.useState(!1),[D,A]=f.useState(!1),z=f.useRef(null),M=f.useRef(null),O=f.useRef(null),B=f.useRef(null);f.useRef(null);const q=f.useRef(null),[F,W]=f.useState(null),[V,H]=f.useState(null),[J,Y]=f.useState(!1),[G,X]=f.useState(!1),K=a(),Z=window&&window.__BACKEND_URL__||"https://regaarder-pwin.onrender.com",Q=[{id:"paid",icon:"dollar-sign",title:r("Get Paid Every 15 Days",s),desc:r("Bi-weekly payouts. Withdraw anytime. No minimum threshold.",s)},{id:"demand",icon:"users",title:r("Create What People Want",s),desc:r("Get paid to create videos your audience is actively requesting. No guessing.",s)},{id:"support",icon:"shield",title:r("Full Support System",s),desc:r("Get help with editing, scripting, thumbnails, and everything in between.",s)},{id:"growth",icon:"trendingUp",title:r("Grow Your Revenue",s),desc:r("Earn 1% more per creator you invite. Stack up to 80% revenue share!",s)}],ee=[{id:"quality",title:r("Quality Over Quantity",s),desc:r("We value high-quality, well-researched content. Take your time to create something amazing.",s),icon:"sparkles"},{id:"deliver",title:r("Deliver More Than Expected",s),desc:r("User satisfaction is our aim. Exceed expectations and build lasting connections.",s),icon:"heart"},{id:"respect",title:r("Respect Short Attention Spans",s),desc:r("Deliver value quickly. Hook viewers in the first 10 seconds. Make every second count.",s),icon:"zap"},{id:"tailored",title:r("Tailored Experiences",s),desc:r("Every video is personalized to the requester. Make them feel special.",s),icon:"video"},{id:"regaardien",title:r("You're a Regaardien",s),desc:r("Not just a creator. You're an ambassador of a movement. The demand-driven future.",s),icon:"crown"}],te=async e=>{try{const t=K?.user||JSON.parse(localStorage.getItem("regaarder_user")||"{}"),r={userId:t?.id,userName:t?.name||c,userEmail:t?.email,creatorName:c,bio:m,introVideoUrl:e||N,socialMediaHandle:socialHandle,socialFollowers:socialFollowers,completedAt:(new Date).toISOString(),agreedTOS:U,agreedPrivacy:D},a=localStorage.getItem("regaarder_token"),s=await fetch(`${Z}/staff/onboarding-info`,{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}},body:JSON.stringify(r)});s.ok?console.log("âœ“ Onboarding info sent to staff successfully"):console.error("Failed to send onboarding info:",s.status,s.statusText)}catch(t){console.error("Failed to send onboarding info to staff",t)}};return f.useEffect(()=>()=>{if(q.current)try{URL.revokeObjectURL(q.current)}catch(e){}},[]),f.useEffect(()=>{const e=e=>{if(!e||!e.current)return!1;const t=e.current,r=t.value;if(!r||""===String(r).trim()){t.classList.add("needs-input");try{t.focus()}catch(a){}return!0}return!1};[z,M,O,B].forEach(e=>{try{e.current&&e.current.classList.remove("needs-input")}catch(t){}});document.querySelectorAll('[data-guidance="underline"]').forEach(e=>{e.classList.remove("active"),e.offsetWidth,e.classList.add("active")});document.querySelectorAll('[data-guidance="emphasis"]').forEach(e=>{e.classList.add("temporary-emphasis"),setTimeout(()=>e.classList.add("fade"),1400),setTimeout(()=>e.classList.remove("temporary-emphasis","fade"),2800)}),1===o?e(z):2===o?e(M):5===o&&(e(O)||e(B))},[o]),t.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},onClick:t=>{t.stopPropagation(),t.preventDefault(),e&&e()},children:t.jsxs("div",{className:"rounded-2xl w-full max-w-md overflow-hidden relative flex flex-col",onClick:e=>e.stopPropagation(),style:{background:"linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.95))",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 20px 60px rgba(0,0,0,0.08)",height:.58*window.innerHeight+"px"},children:[b&&t.jsx("div",{className:"fixed left-1/2 transform -translate-x-1/2 z-50 pointer-events-auto animate-in slide-in-from-top-4 duration-300 min-w-[360px] sm:min-w-[480px] max-w-[92%]",style:{top:"calc(12px + env(safe-area-inset-top, 0px))"},children:t.jsxs("div",{className:"flex items-center bg-white rounded-lg shadow-2xl px-6 py-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-red-600 text-white flex items-center justify-center mr-3",children:t.jsx(Ze,{name:"x",size:14,className:"text-white"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-black",children:r("Agreement required",s)}),t.jsx("div",{className:"text-xs text-gray-500",children:r("Please accept our Terms of Service and Privacy Policy",s)})]})]})}),y&&t.jsx("div",{className:"fixed left-1/2 transform -translate-x-1/2 z-50 pointer-events-auto animate-in slide-in-from-top-4 duration-300 min-w-[360px] sm:min-w-[480px] max-w-[92%]",style:{top:"calc(12px + env(safe-area-inset-top, 0px))"},children:t.jsxs("div",{className:"flex items-center bg-white rounded-lg shadow-2xl px-6 py-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-red-600 text-white flex items-center justify-center mr-3",children:t.jsx(Ze,{name:"x",size:14,className:"text-white"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-black",children:r("Name required",s)}),t.jsx("div",{className:"text-xs text-gray-500",children:r("Please enter your creator name",s)})]})]})}),J&&t.jsx("div",{className:"fixed left-1/2 transform -translate-x-1/2 z-50 pointer-events-auto animate-in slide-in-from-top-4 duration-300 min-w-[360px] sm:min-w-[480px] max-w-[92%]",style:{top:"calc(12px + env(safe-area-inset-top, 0px))"},children:t.jsxs("div",{className:"flex items-center bg-white rounded-lg shadow-2xl px-6 py-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-red-600 text-white flex items-center justify-center mr-3",children:t.jsx(Ze,{name:"x",size:14,className:"text-white"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-black",children:r("Intro required",s)}),t.jsx("div",{className:"text-xs text-gray-500",children:r("Please paste a video URL or upload a short intro",s)})]})]})}),t.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 bg-white/40 backdrop-blur-sm",children:[t.jsx("div",{className:"flex items-center justify-start mb-4",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.04))"},children:t.jsx(Ze,{name:"crown",size:20,style:{color:"var(--color-gold)"}})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-base font-semibold text-gray-900",children:r("Become a Regaardien",s)}),t.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[r("Step",s)," ",o," ",r("of",s)," ",7]})]})]})}),t.jsx("div",{className:"h-1.5 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-[var(--color-gold)] transition-all",style:{width:o/7*100+"%"}})})]}),t.jsxs("div",{className:"px-6 py-8 overflow-y-auto creator-onboard-scroll flex-1 space-y-8",style:{maxHeight:`calc(${.58*window.innerHeight}px - 160px)`},children:[1===o&&t.jsxs("div",{className:"flex flex-col items-center text-center space-y-8",children:[t.jsx("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 8px 24px rgba(0,0,0,0.06)"},children:t.jsx(Ze,{name:"star",size:36,style:{color:"var(--color-gold)"}})}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r("Let's Get Started!",s)}),t.jsx("p",{className:"text-base text-gray-600",children:r("Set up your creator profile to join the Regaardiens",s)})]}),t.jsxs("div",{className:"w-full space-y-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"relative w-32 h-32 rounded-full mx-auto mb-4",children:[t.jsx("img",{src:g||`https://placehold.co/160x160/efefef/aaaaaa?text=${r("Photo",s)}`,alt:"avatar",className:"w-full h-full object-cover rounded-full border-4",style:{borderColor:"var(--color-gold)"}}),t.jsx("button",{onClick:()=>{j.current&&j.current.click()},className:"absolute -right-1 -bottom-1 bg-white rounded-full p-3 shadow-lg hover:shadow-xl transition-shadow",children:t.jsx(Ze,{name:"camera",size:20,style:{color:"var(--color-gold)"}})}),t.jsx("input",{ref:j,type:"file",accept:"image/*",className:"hidden",onChange:e=>{const t=e.target.files&&e.target.files[0];if(t){const e=URL.createObjectURL(t);h(e),p(t)}}})]}),t.jsx("div",{className:"text-sm text-gray-600",children:r("Click the camera icon to change your profile picture",s)})]}),t.jsxs("div",{className:"pt-4 space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"text-sm font-semibold text-gray-700 block mb-3",children:[r("Creator Name",s)," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{ref:z,value:c,onChange:e=>d(e.target.value),placeholder:r("Enter your creator name",s),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:outline-none focus:border-[var(--color-gold)] text-base transition-colors"}),t.jsx("div",{className:"text-xs text-gray-500 mt-2",children:r("This is how your audience will know you",s)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-3",children:r("Write a short bio",s)}),t.jsx("textarea",{ref:M,value:m,onChange:e=>u(e.target.value),placeholder:r("Tell your audience who you are and what you create...",s),maxLength:200,className:"w-full p-3 rounded-xl border border-gray-200 bg-gray-50 text-base text-gray-700 h-28 resize-none focus:outline-none focus:border-[var(--color-gold)] focus:bg-white transition-colors"}),t.jsxs("div",{className:"text-xs text-gray-500 text-right mt-2",children:[m.length,"/200"]})]})]})]}),t.jsx("div",{className:"pt-2 text-xs text-gray-500",children:r("You can complete more steps after getting started.",s)})]}),2===o&&t.jsxs("div",{className:"flex flex-col items-center text-center",children:[t.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-4",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 8px 24px rgba(0,0,0,0.06)",color:"var(--color-gold)"},children:t.jsx(Ze,{name:"star",size:28,style:{color:"var(--color-gold)"}})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:r("Why Join Regaarder?",s)}),t.jsx("p",{className:"text-sm text-gray-600 mb-6",children:r("The world's first demand-driven creator platform",s)}),t.jsx("div",{className:"w-full space-y-4 pb-6",children:Q.map(e=>t.jsxs("div",{className:"relative bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[t.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-3 bg-[var(--color-gold)] rounded-l-xl"}),t.jsxs("div",{className:"p-4 pl-6 flex items-start space-x-4",children:[t.jsxs("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:"linear-gradient(135deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 6px 18px rgba(0,0,0,0.06)",color:"var(--color-gold)"},children:["dollar-sign"===e.icon&&t.jsx(R,{size:20,strokeWidth:1.8}),"users"===e.icon&&t.jsx(Ze,{name:"users",size:20}),"shield"===e.icon&&t.jsx(Ze,{name:"shield",size:20}),"trendingUp"===e.icon&&t.jsx(Ze,{name:"trendingUp",size:20})]}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"text-lg font-semibold leading-6 text-gray-900",children:e.title}),t.jsx("div",{className:"text-sm text-gray-600 mt-1 leading-5",children:e.desc})]})]})]},e.id))})]}),3===o&&t.jsxs("div",{className:"flex flex-col items-center text-center",children:[t.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-4",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 8px 24px rgba(0,0,0,0.06)"},children:t.jsx(Ze,{name:"heart",size:28,style:{color:"var(--color-gold)"}})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:r("Our Values",s)}),t.jsx("p",{className:"text-sm text-gray-600 mb-6",children:r("What makes Regaardiens special",s)}),t.jsx("div",{className:"w-full space-y-4 pb-6",children:ee.map(e=>t.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:t.jsxs("div",{className:"flex items-start",children:[t.jsxs("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mr-4 flex-shrink-0",style:{background:"linear-gradient(135deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 6px 18px rgba(0,0,0,0.06)",color:"var(--color-gold)"},children:["sparkles"===e.icon&&t.jsx($,{size:20}),"heart"===e.icon&&t.jsx(Ze,{name:"heartFilled",size:20}),"zap"===e.icon&&t.jsx(Ze,{name:"zap",size:20}),"video"===e.icon&&t.jsx(Ze,{name:"video",size:20}),"crown"===e.icon&&t.jsx(Ze,{name:"crown",size:20})]}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"text-lg font-semibold leading-6 text-gray-900",children:e.title}),t.jsx("div",{className:"text-sm text-gray-600 mt-1 leading-5",children:e.desc})]})]})},e.id))}),t.jsx("div",{className:"w-full mt-2",children:t.jsxs("div",{className:"rounded-xl p-6 flex flex-col items-center",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.08), rgba(var(--color-gold-rgb,203,138,0),0.02))"},children:[t.jsx("div",{className:"text-4xl mb-3",children:"ðŸ‘‘"}),t.jsx("div",{className:"font-semibold text-[var(--color-gold)]",children:r("Meet your fellow Regaardiens!",s)}),t.jsx("div",{className:"text-sm text-gray-600 mt-1",children:r("A community of creators building the future together",s)})]})})]}),4===o&&t.jsxs("div",{className:"flex flex-col items-center text-center",children:[t.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-4",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 8px 24px rgba(0,0,0,0.06)"},children:t.jsx(Ze,{name:"chart",size:28,style:{color:"var(--color-gold)"}})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:r("Grow With Your Network",s)}),t.jsx("p",{className:"text-sm text-gray-600 mb-6",children:r("The more you invite, the more you earn",s)}),t.jsxs("div",{className:"w-full px-2",children:[t.jsx("div",{className:"rounded-xl border-2 border-[var(--color-gold)] p-6 mb-6 bg-white",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:"mb-3",style:{color:"var(--color-gold)"},children:t.jsx(Ze,{name:"chart",size:56,style:{color:"var(--color-gold)"}})}),t.jsx("div",{className:"font-semibold text-lg text-gray-900 mb-2",children:r("Referral Revenue Boost",s)}),t.jsx("div",{className:"text-sm text-gray-600 mb-4",children:r("For each active creator you invite:",s)}),t.jsxs("div",{className:"rounded-full px-6 py-3 inline-flex items-center shadow-sm mb-4",style:{background:"linear-gradient(90deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",color:"var(--color-gold)"},children:[t.jsx(Ze,{name:"trendingUp",size:16,className:"mr-2"}),t.jsx("div",{className:"font-semibold",children:r("+1% Revenue Share",s)})]}),t.jsxs("div",{className:"text-sm text-gray-600",children:[r("Stack up to",s)," ",t.jsx("span",{className:"font-semibold text-[var(--color-gold)]",children:r("80% revenue share",s)})," ",r("by building your network!",s)]})]})}),t.jsx("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[{n:10,share:"60%"},{n:20,share:"70%"},{n:30,share:"80%"}].map(e=>t.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-[var(--color-gold)]",children:e.n}),t.jsx("div",{className:"text-sm text-gray-600",children:r("Creators",s)}),t.jsxs("div",{className:"text-sm font-semibold text-gray-800 mt-2",children:[e.share," ",r("Share",s)]})]},e.n))}),t.jsxs("div",{className:"rounded-xl border border-[var(--color-gold-light-bg)] bg-[rgba(245,245,245,0.4)] p-4 text-left text-sm text-gray-700",children:[t.jsx("div",{className:"font-semibold text-gray-900 mb-2",children:r("How it works:",s)}),t.jsx("div",{children:r("When creators you invite become active (publish their first video), your revenue share increases by 1%. The more successful creators you bring, the more you earn!",s)})]})]})]}),5===o&&t.jsxs("div",{className:"flex flex-col items-center text-center",children:[t.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-4",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 8px 24px rgba(0,0,0,0.06)"},children:t.jsx(Ze,{name:"video",size:28,style:{color:"var(--color-gold)"}})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:r("Almost There!",s)}),t.jsx("p",{className:"text-sm text-gray-600 mb-6",children:r("Let's verify you're ready to create",s)}),t.jsxs("div",{className:"w-full",children:[t.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[r("Intro Video URL",s)," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"mt-2 flex items-start space-x-3",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("input",{ref:O,value:N,onChange:e=>k(e.target.value),placeholder:"https://youtube.com/watch?v=...",className:"w-full p-3 rounded-xl bg-gray-100 text-base text-gray-700"}),F&&t.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[r("Selected file:",s)," ",F.name]}),t.jsx("div",{className:"mt-3",children:V?t.jsx("video",{controls:!0,className:"w-full rounded-lg bg-black",src:V,style:{maxHeight:160}}):(()=>{if(N&&/(?:youtube\.com|youtu\.be)/.test(N))try{const e=N.match(/(?:v=|youtu\.be\/)([A-Za-z0-9_-]{6,})/),r=e?e[1]:null;if(r)return t.jsxs("div",{className:"w-full rounded-lg overflow-hidden bg-black",style:{height:160,position:"relative"},children:[t.jsx("img",{src:`https://img.youtube.com/vi/${r}/hqdefault.jpg`,alt:"Video preview",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover"},onError:e=>{e.target.src=`https://img.youtube.com/vi/${r}/mqdefault.jpg`}}),t.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.12)"}}),t.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",width:44,height:44,borderRadius:"50%",background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"white",children:t.jsx("polygon",{points:"6,3 20,12 6,21"})})}),t.jsx("div",{style:{position:"absolute",bottom:6,left:6,background:"rgba(0,0,0,0.65)",color:"#fff",fontSize:10,fontWeight:600,padding:"2px 7px",borderRadius:4},children:"YouTube"})]})}catch(e){}return null})()})]})}),t.jsxs("div",{className:"mt-4 rounded-xl border border-[var(--color-gold-light-bg)] p-4 text-sm text-gray-700 text-left",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.06), rgba(255,255,255,0.0))"},children:[t.jsx("div",{className:"font-semibold mb-2",children:r("What to upload:",s)}),t.jsxs("ul",{className:"list-disc ml-5 space-y-2 leading-relaxed text-sm",children:[t.jsx("li",{children:r("Link to your previous content (YouTube, TikTok, Instagram, etc.), or",s)}),t.jsx("li",{children:r("Create a short intro explaining why you want to join Regaarder.",s)}),t.jsx("li",{children:r("Showing your face is a plus but not required.",s)}),t.jsx("li",{children:r("Keep it authentic and personalized!",s)})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:r("Social Media Verification",s)}),t.jsx("input",{ref:B,value:C,onChange:e=>S(e.target.value),placeholder:"https://instagram.com/yourhandle or https...",className:"w-full p-3 rounded-xl bg-gray-100 text-base text-gray-700"}),t.jsxs("div",{className:"mt-3 bg-gray-50 rounded-xl p-4 flex items-center",children:[t.jsx("input",{type:"checkbox",checked:I,onChange:()=>E(!I),className:"mr-3 w-4 h-4",style:{accentColor:"#1e3a8a"}}),t.jsx("div",{className:"text-sm text-gray-700",children:r("I have 1,000+ followers on at least one social platform",s)})]}),t.jsxs("div",{className:"flex items-center my-4",children:[t.jsx("div",{className:"flex-1 h-px bg-gray-200"}),t.jsx("div",{className:"mx-3 text-sm text-gray-400",children:r("OR",s)}),t.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),t.jsx("div",{className:"rounded-xl border border-[var(--color-gold-light-bg)] bg-white p-4",children:t.jsxs("label",{className:"flex items-start",children:[t.jsx("input",{type:"checkbox",checked:L,onChange:()=>T(!L),className:"mt-1 mr-3 w-4 h-4",style:{accentColor:"#1e3a8a"}}),t.jsxs("div",{className:"text-left",children:[t.jsxs("div",{className:"font-semibold text-gray-900",children:[r("Become an Ambassador",s),": ",t.jsx("span",{className:"font-normal text-gray-700",children:r("I commit to inviting and onboarding at least 3 quality creators to join the Regaardien movement within my first 30 days",s)})]}),t.jsxs("div",{className:"mt-3 flex items-center",children:[t.jsxs("button",{className:"rounded-lg px-3 py-1 text-xs mr-3 flex items-center space-x-2",style:{background:"linear-gradient(90deg, rgba(var(--color-gold-rgb,203,138,0),0.14), rgba(var(--color-gold-rgb,203,138,0),0.04))",color:"var(--color-gold)",boxShadow:"0 6px 18px rgba(203,138,0,0.08)",border:"1px solid rgba(var(--color-gold-rgb,203,138,0),0.12)",borderRadius:12},onClick:()=>{const e=document.querySelector(".creator-onboard-scroll");e&&e.scrollTo({top:0,behavior:"smooth"})},children:[t.jsx(Ze,{name:"star",size:12,className:"text-[var(--color-gold)]"}),t.jsx("span",{children:r("Ambassador Perks",s)})]}),t.jsx("div",{className:"text-sm text-gray-600",children:r("Early access to new features + Priority support",s)})]})]})]})})]})]})]}),6===o&&t.jsxs("div",{className:"flex flex-col items-center text-center",children:[t.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-4",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 8px 24px rgba(0,0,0,0.06)"},children:t.jsx("div",{className:"w-14 h-14 rounded-full bg-white flex items-center justify-center",style:{border:"1px solid #EDE7D7"},children:t.jsx(Ze,{name:"check",size:18,style:{color:"var(--color-gold)"}})})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:r("One Last Step!",s)}),t.jsx("p",{className:"text-sm text-gray-600 mb-6",children:r("Review and accept our policies",s)}),t.jsxs("div",{className:"w-full px-2",children:[t.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 mb-4",children:[t.jsxs("label",{className:"flex items-start mb-3",children:[t.jsx("input",{type:"checkbox",checked:U,onChange:()=>_(!U),className:"mr-3 mt-1 w-4 h-4",style:{accentColor:"#1e3a8a"}}),t.jsxs("div",{className:"text-left text-sm",children:[r("I have read and agree to the",s)," ",t.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),window.open("https://example.com/terms","_blank")},className:"text-[var(--color-gold)] underline",children:r("Terms of Service",s)})]})]}),t.jsxs("label",{className:"flex items-start",children:[t.jsx("input",{type:"checkbox",checked:D,onChange:()=>A(!D),className:"mr-3 mt-1 w-4 h-4",style:{accentColor:"#1e3a8a"}}),t.jsxs("div",{className:"text-left text-sm",children:[r("I have read and agree to the",s)," ",t.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),window.open("https://example.com/privacy","_blank")},className:"text-[var(--color-gold)] underline",children:r("Privacy Policy",s)})]})]})]}),t.jsxs("div",{className:"rounded-xl border-2 border-[var(--color-gold)] p-4 mb-4 bg-white",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4",style:{borderColor:"var(--color-gold)"},children:t.jsx("img",{src:g||"https://placehold.co/120x120/efefef/aaaaaa?text=Photo",alt:"avatar",className:"w-full h-full object-cover"})}),t.jsxs("div",{className:"text-left ml-4",children:[t.jsx("div",{className:"text-lg font-semibold text-gray-900",children:c||r("Your Name",s)}),t.jsx("div",{className:"mt-1 inline-block text-xs rounded-full px-3 py-1",style:{background:"linear-gradient(90deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",color:"var(--color-gold)"},children:r("Regaardien",s)})]})]}),t.jsxs("div",{className:"mt-4 space-y-3 text-left text-sm text-gray-700",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ze,{name:"check",size:18,className:"text-[var(--color-gold)] mr-3"})," ",r("Intro video added",s)]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ze,{name:"check",size:18,className:"text-[var(--color-gold)] mr-3"})," ",r("1,000+ followers verified",s)]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ze,{name:"check",size:18,className:"text-[var(--color-gold)] mr-3"})," ",r("Ambassador commitment",s)]})]})]}),t.jsxs("div",{className:"rounded-xl p-6 text-center",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.08), rgba(var(--color-gold-rgb,203,138,0),0.02))"},children:[t.jsx("div",{className:"text-4xl mb-3",children:"ðŸŽ‰"}),t.jsx("div",{className:"font-semibold text-gray-900",children:r("Ready to Start Creating?",s)}),t.jsx("div",{className:"text-sm text-gray-600 mt-1",children:r('Click "Next" to learn how to get your first requests!',s)})]})]})]}),7===o&&t.jsxs("div",{className:"w-full text-left px-1",children:[t.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-3",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 8px 24px rgba(0,0,0,0.06)"},children:t.jsx(Ze,{name:"sparkles",size:32,style:{color:"var(--color-gold)"}})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:r("Get Your First Requests!",s)}),t.jsx("p",{className:"text-sm text-gray-600",children:r("Learn how to market yourself and start earning",s)})]}),t.jsx("div",{className:"rounded-xl border-2 border-[var(--color-gold)] p-4 mb-6 bg-white",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center mr-4",style:{color:"var(--color-gold)",background:"linear-gradient(135deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))"},children:t.jsx(Ze,{name:"users",size:20,style:{color:"var(--color-gold)"}})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-semibold text-gray-900",children:r("You're the Marketer!",s)}),t.jsx("div",{className:"text-sm text-gray-600 mt-1",children:r("Creators drive their own success on Regaarder",s)}),t.jsxs("div",{className:"text-sm text-gray-600 mt-3",children:[r("Unlike traditional platforms,",s)," ",t.jsx("strong",{children:r("you",s)})," ",r("have full control over your marketing. Share your profile, engage your audience, and watch the requests roll in!",s)]})]})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-4 font-semibold",style:{background:"linear-gradient(90deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",color:"var(--color-gold)"},children:"1"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("div",{className:"font-semibold text-lg text-gray-900",children:r("Go to Your Profile",s)})}),t.jsx("div",{className:"text-sm text-gray-600 mt-1",children:r("Once you're in the dashboard, click on your profile settings",s)})]})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-4 font-semibold",style:{background:"linear-gradient(90deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",color:"var(--color-gold)"},children:"2"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"font-semibold text-lg text-gray-900 flex items-center",children:[t.jsx(Ze,{name:"pencil",size:18,className:"mr-2",style:{color:"var(--color-gold)"}}),r("Customize Your CTA",s)]}),t.jsx("div",{className:"text-sm text-gray-600 mt-2 mb-3",children:r("Create a compelling call-to-action that invites requests. Examples:",s)}),t.jsx("div",{className:"space-y-3",children:[{title:r("Science Creator",s),text:r('"Which experiment do you want me to try next? Request it now!"',s)},{title:r("Documentary Maker",s),text:r('"Which topic should I cover next? Tell me your story idea!"',s)},{title:r("Cooking Creator",s),text:r('"What recipe should I make for you? Send your request!"',s)}].map((e,r)=>t.jsxs("div",{className:"rounded-lg bg-gray-100 p-3",children:[t.jsx("div",{className:"text-[var(--color-gold)] font-semibold mb-1",children:e.title}),t.jsx("div",{className:"text-sm text-gray-600",children:e.text})]},r))})]})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-4 font-semibold",style:{background:"linear-gradient(90deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",color:"var(--color-gold)"},children:"3"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"font-semibold text-lg text-gray-900 flex items-center",children:[t.jsx(P,{size:20,strokeWidth:1.8,className:"mr-2",style:{color:"var(--color-gold)"}}),r("Share Your Profile Link",s)]}),t.jsx("div",{className:"text-sm text-gray-600 mt-2 mb-2",children:r("Copy your unique profile link and share it everywhere:",s)}),t.jsxs("ul",{className:"list-disc ml-6 text-sm text-gray-600 space-y-1",children:[t.jsx("li",{children:r("Instagram stories & bio",s)}),t.jsx("li",{children:r("YouTube video descriptions & community posts",s)}),t.jsx("li",{children:r("TikTok bio & comments",s)}),t.jsx("li",{children:r("Twitter/X posts & profile",s)}),t.jsx("li",{children:r("Discord servers & communities",s)})]})]})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-4 font-semibold",style:{background:"linear-gradient(90deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",color:"var(--color-gold)"},children:"4"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"font-semibold text-lg text-gray-900 flex items-center",children:[t.jsx(Ze,{name:"pencil",size:18,className:"mr-2",style:{color:"var(--color-gold)"}}),r("Make It Personal",s)]}),t.jsx("div",{className:"text-sm text-gray-600 mt-2",children:r("Use friendly language, show personality, and thank requesters, small touches increase conversions.",s)}),t.jsxs("div",{className:"rounded-xl border border-[var(--color-gold-light-bg)] p-4 mt-4 text-sm text-gray-700",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.04), rgba(255,255,255,0.0))"},children:[t.jsx("div",{className:"font-semibold mb-2",style:{color:"var(--color-gold)"},children:r("Pro Tips",s)}),t.jsxs("ul",{className:"ml-3 space-y-2",children:[t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"text-[var(--color-gold)] mr-3",children:"âžœ"}),r("Post your link with a clear CTA in all your social media bios",s)]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"text-[var(--color-gold)] mr-3",children:"âžœ"}),r('End your videos/posts with "What should I create next? Link in bio!"',s)]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"text-[var(--color-gold)] mr-3",children:"âžœ"}),r("Create polls and direct people to request winners on Regaarder",s)]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"text-[var(--color-gold)] mr-3",children:"âžœ"}),r("Engage authentically â€” respond to requests and thank your supporters",s)]})]})]})]})]})]})]})]}),t.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 bg-white/50 backdrop-blur-sm flex items-center justify-between",children:[t.jsx("button",{onClick:()=>{o>1?n(o-1):e()},className:"text-gray-600 hover:text-gray-900 transition-colors font-medium text-sm",children:r("Back",s)}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"flex items-center space-x-2",children:Array.from({length:7}).map((e,r)=>t.jsx("div",{className:"w-2 h-2 rounded-full transition-colors "+(r+1===o?"bg-[var(--color-gold)]":"bg-gray-200")},r))}),t.jsx("button",{onClick:()=>{if(1===o){if(""===c.trim())return v(!0),void setTimeout(()=>v(!1),2200);i(e=>({...e,1:!0})),n(2);const e=document.querySelector(".creator-onboard-scroll");return void(e&&(e.scrollTop=0))}if(5===o){if(!(N&&""!==String(N).trim()||F))return Y(!0),void setTimeout(()=>Y(!1),2800);i(e=>({...e,5:!0}))}if(6===o){if(!U||!D)return w(!0),void setTimeout(()=>w(!1),3e3);i(e=>({...e,6:!0}))}if(o<7)n(o+1);else{(async()=>{let t=null;if(F){X(!0);try{const e=new FormData;e.append("video",F);const a=localStorage.getItem("regaarder_token"),s=await fetch(`${Z}/creator/intro-video`,{method:"POST",headers:a?{Authorization:`Bearer ${a}`}:{},body:e}),o=await s.json();if(s.ok&&o&&o.url){t=o.url;try{const e={...(K&&K.user?K.user:JSON.parse(localStorage.getItem("regaarder_user")||"{}"))||{},introVideo:o.url};try{localStorage.setItem("regaarder_user",JSON.stringify(e))}catch(r){}if(K&&K.login){const t=localStorage.getItem("regaarder_token");K.login({...e,token:t})}k(o.url)}catch(r){}}}catch(r){console.error("Upload failed",r)}finally{X(!1),te(t),e()}}else te(),e()})()}},disabled:G,className:"py-2.5 px-5 font-semibold rounded-lg transition-all rounded-lg "+(G?"opacity-60 cursor-not-allowed":""),style:7===o?{backgroundColor:"var(--color-final, #7C3AED)",color:"var(--color-final-text, #fff)"}:{backgroundColor:"var(--color-accent-safe, var(--color-gold))",color:"var(--color-accent-text, black)"},children:r(G?"Uploading...":o<7?"Next":"Complete Setup",s)})]})]})]})})},at=({iconName:e,label:r,rightText:a=null,isGold:s=!1,isPurpleDot:o=!1,onClick:n,className:l="",collapsed:i=!1,isActive:c=!1})=>{const d=e=>{if("function"==typeof n)try{n(e)}catch(t){console.warn("DrawerItem onClick failed",t)}},m="New"===a||a?.includes("invites")||"Coming Soon"===a,u=m?{backgroundColor:"var(--color-gold-light-bg)",color:"var(--color-gold)",padding:"4px 8px",borderRadius:"6px",fontWeight:600,fontSize:"12px",boxShadow:"0 0 5px rgba(203, 138, 0, 0.06)",display:"inline-block"}:{};if(i)return t.jsx("button",{title:r,className:`flex items-center justify-center w-full py-3 text-gray-800 transition duration-150 cursor-pointer hover:bg-gray-50 active:bg-gray-100 active:scale-95 ${c?"bg-[var(--color-gold-cream)]":""} ${l}`,onClick:d,"aria-label":r,children:t.jsx(Ze,{name:e,size:20,className:"",style:{color:c||s?"var(--color-gold)":"#71717A"}})});const g=`flex items-center justify-between w-full px-4 py-3 transition duration-150 ${l}`,h=c?"bg-[var(--color-gold-cream)] text-[var(--color-gold)] border-l-4 border-[var(--color-gold)]":"hover:bg-gray-50";return t.jsxs("button",{className:`${g} ${h} active:bg-gray-100 active:scale-95 cursor-pointer outline-none relative`,onClick:d,type:"button","aria-label":r,children:[t.jsxs("div",{className:"flex items-center flex-grow min-w-0 pointer-events-none",children:[t.jsx(Ze,{name:e,size:20,className:"mr-4 flex-shrink-0",style:{color:c||s?"var(--color-gold)":"#71717A"}}),t.jsx("span",{className:"text-base font-medium whitespace-nowrap overflow-hidden text-ellipsis",children:r})]}),t.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 ml-4 pointer-events-none",children:[a&&t.jsx("span",{className:"text-sm "+(m?"":"text-gray-600 font-semibold"),style:u,children:a}),o&&t.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"var(--color-purple)"}}),t.jsx(Ze,{name:"moreHorizontal",size:16,className:"text-gray-400 rotate-90 ml-1 flex-shrink-0"})]})]})},st=({title:e,isExpanded:r,onToggle:a,collapsed:s})=>t.jsxs("button",{className:"w-full flex items-center justify-between px-6 pt-3 pb-2 text-xs font-semibold text-gray-400 uppercase tracking-wider hover:text-gray-600 transition-colors",onClick:a,style:{paddingBottom:"0.5rem"},children:[!s&&t.jsx("span",{children:e}),t.jsx(Ze,{name:"chevronDown",size:14,className:"transition-transform duration-200",style:{transform:r?"rotate(0deg)":"rotate(-90deg)",color:"var(--color-accent, #CA8A04)"}})]}),ot=({isDrawerOpen:e,onClose:s,onOpenTheme:o,onOpenLanguage:n,currentLanguageFlag:l,onOpenCreator:i,navigateTo:c,selectedLanguage:d="English"})=>{const m=a(),u=v(),[g,h]=f.useState(()=>{try{return"1"===localStorage.getItem("sidebarCollapsed")}catch(e){return!1}}),[x,p]=f.useState(!1),[y,b]=f.useState(()=>{try{const e=localStorage.getItem("sidebarExpandedSections");return e?JSON.parse(e):{account:!1,library:!1,create:!1,general:!0}}catch(e){return{account:!1,library:!1,create:!1,general:!0}}}),w=e=>{const t={...y,[e]:!y[e]};b(t);try{localStorage.setItem("sidebarExpandedSections",JSON.stringify(t))}catch(r){console.warn("Failed to save section state",r)}},j=e=>{try{if(!m?.user)return m.openAuthModal();c(e)}catch(t){console.warn("requireAuthNavigate failed",t)}};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed z-[70] transition-opacity duration-300 "+(e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),style:{backgroundColor:"rgba(0, 0, 0, 0.4)",top:0,left:0,right:0,bottom:0},onClick:e=>{e.target===e.currentTarget&&s()},role:"button",tabIndex:-1,onKeyDown:e=>{"Escape"===e.key&&s()},children:t.jsxs("div",{className:`fixed top-0 left-0 ${g?"w-24":"w-80"} bg-white shadow-2xl transform transition-all duration-300 ease-out flex flex-col`,style:{transform:e?"translateX(0)":"translateX(-100%)",top:"0px",bottom:"0px",height:"100vh",maxWidth:"100vw",paddingTop:"env(safe-area-inset-top, 0px)",paddingBottom:"env(safe-area-inset-bottom, 0px)",zIndex:71,overflowX:"hidden"},onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between px-4 border-b border-gray-100 flex-shrink-0 bg-white",style:{paddingTop:"calc(12px + env(safe-area-inset-top, 0px))",paddingBottom:"12px",minHeight:"48px"},children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[t.jsx("div",{className:"flex-shrink-0 w-7 h-7 flex items-center justify-center",children:t.jsx("img",{src:"https://i.postimg.cc/vThDvtvK/regaarder-logos-14-removebg-preview-removebg-preview.png",alt:"Regaarder",className:"w-full h-full object-contain"})}),t.jsx("h2",{className:"text-sm font-bold whitespace-nowrap",style:{color:"#868784"},children:"REGAARDER"})]}),t.jsx("div",{className:"flex-shrink-0",children:t.jsx("button",{className:"min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center rounded-lg p-1 hover:bg-gray-100 transition-colors",onClick:()=>{try{const e=!g;localStorage.setItem("sidebarCollapsed",e?"1":"0"),h(e)}catch(e){h(e=>!e)}},"aria-label":g?"Expand sidebar":"Collapse sidebar",children:t.jsx(Ze,{name:g?"chevronRight":"chevronLeft",size:18,className:"text-gray-600 pointer-events-none"})})})]}),t.jsxs("div",{className:"relative overflow-y-auto flex-grow pt-0",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-6 pointer-events-none bg-gradient-to-b from-white/80 to-transparent"}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-6 pointer-events-none bg-gradient-to-t from-white/80 to-transparent"}),t.jsx(st,{title:r("Account",d),isExpanded:y.account,onToggle:()=>w("account"),collapsed:g}),y.account&&t.jsxs(t.Fragment,{children:[t.jsx(at,{iconName:"profile",label:r("Your Profile",d),onClick:()=>{try{j("/yourprofile")}catch(e){console.warn("Navigation to yourprofile failed",e)}},collapsed:g}),t.jsx(at,{iconName:"requests",label:r("Your Requests",d),onClick:()=>{try{j("/yourrequests")}catch(e){console.warn("Navigation to yourrequests failed",e)}},collapsed:g}),t.jsx(at,{iconName:"subscriptions",label:r("Subscriptions",d),onClick:()=>{try{j("/subscriptions")}catch(e){console.warn("Navigation to subscriptions failed",e)}},collapsed:g}),t.jsx(at,{iconName:"referral",label:r("Referral Rewards",d),rightText:`3 ${r("invites",d)} ${r("left",d)}`,isGold:!0,onClick:()=>{try{j("/referralrewards")}catch(e){console.warn("Navigation to referralrewards failed",e)}},collapsed:g})]}),t.jsx(st,{title:r("Library",d),isExpanded:y.library,onToggle:()=>w("library"),collapsed:g}),y.library&&t.jsxs(t.Fragment,{children:[t.jsx(at,{iconName:"bookmarks",label:r("Bookmarks",d),onClick:()=>{try{j("/bookmarks")}catch(e){console.warn("Navigation to bookmarks failed",e)}},collapsed:g}),t.jsx(at,{iconName:"history",label:r("Watch History",d),onClick:()=>{try{j("/watchhistory")}catch(e){console.warn("Navigation to watchhistory failed",e)}},collapsed:g}),t.jsx(at,{iconName:"heart",label:r("Liked Videos",d),onClick:()=>{try{j("/likedvideos")}catch(e){console.warn("Navigation to likedvideos failed",e)}},className:"mt-2",collapsed:g}),t.jsx(at,{iconName:"listPlus",label:r("Playlist",d),onClick:()=>{try{j("/playlist")}catch(e){console.warn("Navigation to playlist failed",e)}},collapsed:g}),t.jsx(at,{iconName:"users",label:r("Watch Together",d),isPurpleDot:!0,onClick:()=>{try{j("/watchtogether")}catch(e){console.warn("Navigation to watchtogether failed",e)}},collapsed:g})]}),t.jsx(st,{title:r("Create",d),isExpanded:y.create,onToggle:()=>w("create"),collapsed:g}),y.create&&t.jsxs(t.Fragment,{children:[m&&m.user&&m.user.isCreator?t.jsxs("button",{className:"w-full flex items-center p-2 rounded-xl transition-shadow duration-300",style:{backgroundColor:"var(--color-gold-cream)",boxShadow:"0 2px 6px var(--color-gold-light), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},onClick:()=>{try{j("/creatordashboard")}catch(e){console.warn("Navigation to creatordashboard failed",e)}},children:[t.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:"var(--color-gold)"},children:t.jsx(Ze,{name:"monitor",size:18,className:"text-black"})}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("p",{className:"font-bold text-sm text-gray-800",children:r("Creator Dashboard",d)}),t.jsx("p",{className:"text-xs text-gray-600",children:r("Manage your creator settings",d)})]}),t.jsx(Ze,{name:"sparkles",size:18,className:"ml-2",style:{color:"var(--color-gold)"}})]}):t.jsxs("button",{className:"w-full flex items-center p-2 rounded-xl transition-shadow duration-300",style:{backgroundColor:"var(--color-gold-cream)",boxShadow:"0 2px 6px var(--color-gold-light), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},onClick:()=>{if(!m?.user)return m.openAuthModal();i&&i()},children:[t.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:"var(--color-gold)"},children:t.jsx(Ze,{name:"video",size:18,className:"text-black"})}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("p",{className:"font-bold text-sm text-gray-800",children:r("Become a Creator",d)}),t.jsx("p",{className:"text-xs text-gray-600",children:r("Start earning from videos",d)})]}),t.jsx(Ze,{name:"sparkles",size:18,className:"ml-2",style:{color:"var(--color-gold)"}})]}),t.jsxs("button",{className:"w-full flex items-center p-2 rounded-xl transition-shadow duration-300 mt-3",style:{backgroundColor:"var(--color-gold-cream)",boxShadow:"0 2px 6px var(--color-gold-light), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},onClick:()=>{try{j("/sponsorship")}catch(e){console.warn("Navigation to sponsorship failed",e)}},children:[t.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:"var(--color-gold)"},children:t.jsx(Ze,{name:"crown",size:18,className:"text-black"})}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("p",{className:"font-bold text-sm text-gray-800",children:r("Upgrade to Premium",d)}),t.jsx("p",{className:"text-xs text-gray-600",children:r("Unlock all features",d)})]}),t.jsx(Ze,{name:"sparkles",size:18,className:"ml-2",style:{color:"var(--color-gold)"}})]})]}),t.jsx(st,{title:r("General",d),isExpanded:y.general,onToggle:()=>w("general"),collapsed:g}),y.general&&t.jsxs("div",{className:"pt-2 w-full",children:[t.jsx(at,{iconName:"language",label:r("Language",d),rightText:l||"ðŸ‡ºðŸ‡¸",isGold:!0,onClick:()=>n&&n(),collapsed:g}),t.jsx(at,{iconName:"theme",label:r("Theme",d),rightText:r("Light",d),isGold:!0,onClick:o,collapsed:g}),t.jsx(at,{iconName:"sparkles",label:r("Advertise with Us",d),isGold:!0,onClick:()=>{try{c("/advertisewithus")}catch(e){console.warn("Navigation to advertisewithus failed",e)}},collapsed:g}),t.jsx(at,{iconName:"policies",label:r("Policies",d),isGold:!0,onClick:()=>{try{c("/policies")}catch(e){console.warn("Navigation to policies failed",e)}},collapsed:g}),t.jsx(at,{iconName:"shield",label:r("Staff",d),isGold:!0,onClick:()=>p(!0),collapsed:g})]})]})]})}),t.jsx(C,{isOpen:x,onClose:()=>p(!1),onLoginSuccess:e=>{p(!1),u("/staff")}})]})},nt=({video:e,videoTitle:a,onClose:s,selectedLanguage:o="English"})=>{const[n,l]=f.useState(""),[i,c]=f.useState([]),[d,m]=f.useState(!1),u=w.useRef(null);return t.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center px-4 backdrop-blur-sm",style:{backgroundColor:"rgba(0,0,0,0.7)"},onClick:s,children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:r("Report Video",o)}),t.jsx("button",{onClick:s,className:"p-1 text-gray-500 hover:text-gray-700",children:t.jsx(Ze,{name:"x",size:24})})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:r("Why are you reporting this?",o)}),t.jsx("textarea",{value:n,onChange:e=>l(e.target.value),placeholder:r("Tell us why this content is inappropriate...",o),className:"w-full h-32 px-4 py-3 bg-gray-100 rounded-lg text-gray-800 placeholder-gray-500 resize-none focus:outline-none focus:ring-2 focus:ring-gray-300 mb-4"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("Add evidence (optional)",o)}),t.jsx("input",{ref:u,type:"file",multiple:!0,accept:"image/*,.pdf",onChange:e=>{const t=Array.from(e.target.files||[]);if(t.length>0){m(!0);const e=t.map(e=>({file:e,name:e.name,size:e.size,type:e.type,id:Math.random().toString(36).substr(2,9)}));c([...i,...e]),m(!1)}u.current&&(u.current.value="")},className:"hidden"}),t.jsx("button",{onClick:()=>u.current?.click(),disabled:d,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 transition-colors",children:d?"ðŸ“¤ Uploading...":"ðŸ“Ž Add files"})]}),i.length>0&&t.jsx("div",{className:"mb-4 max-h-32 overflow-y-auto",children:i.map(e=>t.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded mb-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium text-gray-700 truncate",children:e.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:[(e.size/1024).toFixed(1)," KB"]})]}),t.jsx("button",{onClick:()=>{return t=e.id,void c(i.filter(e=>e.id!==t));var t},className:"ml-2 text-gray-400 hover:text-red-500 transition-colors",children:"âœ•"})]},e.id))}),t.jsx("button",{onClick:async()=>{const t=window&&window.__BACKEND_URL__||"https://regaarder-pwin.onrender.com",r=localStorage.getItem("regaarder_token");let o=null;try{o=JSON.parse(localStorage.getItem("regaarder_user")||"{}")}catch(c){}const l=new FormData;l.append("videoId",e&&(e.id||e.videoId)||""),l.append("title",e&&e.title||a||""),l.append("reason",String(n||"").trim()),l.append("reporterId",o&&(o.id||o.email)||""),l.append("reporterEmail",o&&o.email||""),l.append("time",(new Date).toISOString()),i.forEach(e=>{l.append("evidenceFiles",e.file)});try{await fetch(`${t}/reports`,{method:"POST",headers:r?{Authorization:`Bearer ${r}`}:{},body:l}).catch(()=>{});const e={to:"regaarder@gmail.com",subject:`New report: ${payload.title||payload.videoId||"Video"}`,text:`A new report was submitted.\n\nVideo: ${payload.title||""} (ID: ${payload.videoId||"n/a"})\nReason: ${payload.reason||"n/a"}\nReporter: ${payload.reporterEmail||payload.reporterId||"anonymous"}\nTime: ${payload.time}`};try{await fetch(`${t}/email/send`,{method:"POST",headers:{"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{}},body:JSON.stringify(e)})}catch(c){try{const t=encodeURIComponent(e.subject),r=encodeURIComponent(e.text);window.open(`mailto:regaarder@gmail.com?subject=${t}&body=${r}`,"_blank")}catch(d){}}}finally{s()}},disabled:!n.trim(),className:"w-full py-3 rounded-lg text-white font-semibold transition-colors hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"#E57373"},children:r("Submit",o)})]})})},lt=({name:e,username:s,isCreator:o=!1,onClose:n,profileData:l=null,creatorId:i=null,selectedLanguage:c="English"})=>{const d=(new Date).getFullYear(),m=v();a();const[u,g]=f.useState(!1),[h,x]=f.useState(!1),[p,y]=f.useState(!1),[b,w]=f.useState(null),[j,N]=f.useState(null),k=window&&window.__BACKEND_URL__||"https://regaarder-pwin.onrender.com",C=e=>{if(!e)return null;let t=String(e);if(t.startsWith("uploaded:")){const e=t.split(":")[1]||t.slice(9);return`${k}/uploads/${e}`}return t.startsWith("http://")&&t.includes("onrender.com")&&(t=t.replace("http://","https://")),t};f.useEffect(()=>{if(l&&l.avatar)return void w({...l,avatar:C(l.avatar)});(async()=>{try{const r=i||s||e;if(!r)return;const a=await fetch(`${k}/users/${encodeURIComponent(r)}`);if(!a.ok)return void w(l);const o=await a.json(),n=o.user||o;if(n&&!n.isPlaceholder){N(n.id||n.email);const e=n.image||n.avatar||n.photoURL||n.profilePicture||null;w({...l,avatar:C(e),bio:n.bio||n.description||l&&l.bio||null,stats:{videos:n.videosCount||(n.videos&&Array.isArray(n.videos)?n.videos.length:0)||l&&l.stats&&l.stats.videos||0,requests:n.requestsCompleted||n.fulfilled||l&&l.stats&&l.stats.requests||0,followers:n.followers||n.followers_count||0,following:n.followingCount||(Array.isArray(n.following)?n.following.length:0)||0},joinedDate:n.joinedDate||n.createdAt||n.created_at||l&&l.joinedDate||(new Date).getFullYear()})}else{const a=[s,e,i].filter(e=>e&&e!==r);for(const e of a)try{const t=await fetch(`${k}/users/${encodeURIComponent(e)}`);if(t.ok){const e=await t.json(),r=e.user||e;if(r&&!r.isPlaceholder){N(r.id||r.email);const e=r.image||r.avatar||r.photoURL||null;return void w({...l,avatar:C(e),bio:r.bio||l&&l.bio||null,stats:{videos:r.videosCount||0,requests:r.requestsCompleted||0,followers:r.followers||r.followers_count||0,following:r.followingCount||(Array.isArray(r.following)?r.following.length:0)||0},joinedDate:r.joinedDate||r.createdAt||r.created_at||(new Date).getFullYear()})}}}catch(t){}w(l)}}catch(r){console.error("Error fetching user profile:",r),w(l)}})()},[i,s,e,l,k]);const S=b||l||{avatar:null,bio:r(o?"Creating engaging content for you":"Enjoying great content",c),stats:{videos:o?24:0,requests:12,followers:1245,following:180},verified:!1,joinedDate:d},[I,E]=f.useState(S.stats.followers);f.useEffect(()=>{(async()=>{if(!i&&!s&&!e)return;const t=i||s||e,r=localStorage.getItem("regaarder_token");try{let n=null;const l=[t,s,e,i].filter(Boolean);for(const e of[...new Set(l)])try{const t=await fetch(`${k}/users/${encodeURIComponent(e)}`);if(t.ok){const e=await t.json(),r=e.user||e;if(r&&!r.isPlaceholder){n=r;break}}}catch(a){}if(n&&n.id){N(n.id);const e=n.followers||n.followers_count||0;e>0&&E(e);try{const e=await fetch(`${k}/following/${encodeURIComponent(n.id)}`,{headers:{Authorization:r?`Bearer ${r}`:""}});if(e.ok){const{isFollowing:t}=await e.json();g(!!t)}else{const e=`regaarder_following_${n.id}`;"1"===localStorage.getItem(e)&&g(!0)}}catch(a){console.warn("Error checking follow status:",a);try{const e=`regaarder_following_${n.id}`;"1"===localStorage.getItem(e)&&g(!0)}catch(o){}}}else try{const e=`regaarder_following_${t}`;"1"===localStorage.getItem(e)&&g(!0)}catch(o){}}catch(n){console.error("Error checking follow status:",n)}})()},[i,s,e,k]);const L={...S,stats:{...S.stats,followers:I}},T={...L,bio:L.bio&&"string"==typeof L.bio?L.bio:L.bio&&"object"!=typeof L.bio?String(L.bio):null,joinedDate:"string"==typeof L.joinedDate||"number"==typeof L.joinedDate?L.joinedDate:"",stats:{videos:Number(L.stats?.videos)||0,requests:Number(L.stats?.requests)||0,followers:Number(L.stats?.followers)||0,following:Number(L.stats?.following)||0}};return t.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.6)"},onClick:n,children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl",onClick:e=>e.stopPropagation(),children:[t.jsx("div",{className:"relative h-24",style:{background:"linear-gradient(135deg, rgba(203,138,0,0.1) 0%, rgba(203,138,0,0.05) 100%)"}}),t.jsxs("div",{className:"px-6 pb-6 -mt-12",children:[t.jsxs("div",{className:"relative inline-block",children:[t.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-white shadow-lg flex items-center justify-center overflow-hidden",style:{background:T.avatar?"transparent":"linear-gradient(135deg, #e5e7eb 0%, #f3f4f6 100%)"},children:T.avatar?t.jsx("img",{src:T.avatar,alt:e,className:"w-full h-full object-cover"}):t.jsx(Ze,{name:"profile",size:48,className:"text-gray-400"})}),o&&T.verified&&t.jsx("div",{className:"absolute bottom-0 right-0 w-7 h-7 rounded-full border-2 border-white flex items-center justify-center shadow-md",style:{backgroundColor:"var(--color-gold)"},children:t.jsx(Ze,{name:"check",size:14,className:"text-white"})})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:e}),o&&t.jsx("div",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white",style:{backgroundColor:"var(--color-gold)"},children:r("Creator",c)})]}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["@",s||e.replace(/\s+/g,"").toLowerCase()]})]}),T.bio&&t.jsx("p",{className:"text-sm text-gray-600 mt-3 leading-relaxed",children:T.bio}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6 py-4 border-y border-gray-100",children:[o&&t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xl font-bold text-gray-900",children:T.stats.videos}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:r("Videos",c)})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xl font-bold text-gray-900",children:T.stats.requests}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:r(o?"Fulfilled":"Requested",c)})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xl font-bold text-gray-900",children:T.stats.followers>=1e3?`${(T.stats.followers/1e3).toFixed(1)}k`:T.stats.followers}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:r("Followers",c)})]})]}),t.jsxs("div",{className:"mt-6 space-y-3 flex flex-col",children:[u?t.jsx("button",{onClick:async t=>{t.stopPropagation(),x(!0);try{const t=localStorage.getItem("regaarder_token"),a=j||i||s||e,o=await fetch(`${k}/unfollow`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""},body:JSON.stringify({creatorId:a})});if(o.ok)setTimeout(()=>{g(!1),E(e=>Math.max(0,e-1)),x(!1);try{localStorage.removeItem(`regaarder_following_${a}`)}catch(e){}},150);else{const e=await o.json().catch(()=>({}));console.error("Unfollow failed:",o.status,e),g(!1),E(e=>Math.max(0,e-1)),x(!1);try{localStorage.removeItem(`regaarder_following_${a}`)}catch(r){}}}catch(a){console.error("Unfollow error:",a),g(!1),E(e=>Math.max(0,e-1)),x(!1);try{const t=j||i||s||e;localStorage.removeItem(`regaarder_following_${t}`)}catch(r){}}},className:"w-full py-3 rounded-xl font-semibold border-2 transition-all duration-150 hover:bg-gray-50",style:{borderColor:"var(--color-gold)",color:"var(--color-gold)",transform:h?"scale(0.95)":"scale(1)",opacity:h?.9:1},children:r("Following",c)}):t.jsx("button",{onClick:async t=>{t.stopPropagation(),x(!0);try{const t=localStorage.getItem("regaarder_token"),a=j||i||s||e;console.log("Following:",{targetId:a,resolvedCreatorId:j,creatorId:i,username:s,name:e});const o=await fetch(`${k}/follow`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""},body:JSON.stringify({creatorId:a})});if(o.ok)setTimeout(()=>{g(!0),E(e=>e+1),x(!1);try{const e=`regaarder_following_${a}`;localStorage.setItem(e,"1")}catch(e){}},150);else{const e=await o.json().catch(()=>({}));console.error("Follow failed:",o.status,e),g(!0),E(e=>e+1),x(!1);try{const e=`regaarder_following_${a}`;localStorage.setItem(e,"1")}catch(r){}}}catch(a){console.error("Follow error:",a),x(!1)}},className:"w-full py-3 rounded-xl font-semibold text-white transition-all duration-150 hover:opacity-90 shadow-md",style:{backgroundColor:"var(--color-gold)",boxShadow:"0 4px 12px rgba(203, 138, 0, 0.3)",transform:h?"scale(0.95)":"scale(1)",opacity:h?.9:1},children:r("Follow",c)}),o&&t.jsx("div",{className:"px-3",children:t.jsx("button",{onClick:t=>{t.stopPropagation(),y(!0),setTimeout(()=>{const t={id:j||i||s||e,name:e,handle:s,displayName:e,photoURL:b?.avatar||null,image:b?.avatar||null};try{localStorage.setItem("ideas_selectedCreator_v1",JSON.stringify(t))}catch(r){console.error("Error saving creator to localStorage:",r)}n(),m("/ideas")},150)},className:"w-full py-3 rounded-xl border-2 font-semibold transition-all duration-150 hover:bg-gray-50",style:{borderColor:"var(--color-gold)",color:"var(--color-gold)",transform:p?"scale(0.95)":"scale(1)",opacity:p?.9:1},children:r("Request Video",c)})})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsxs("p",{className:"text-xs text-gray-400",children:[r("Member since",c)," ",T.joinedDate]})}),o&&t.jsx("div",{className:"mt-4 text-center",children:t.jsx("button",{onClick:t=>{t.stopPropagation();const r=s||e;m(`/creatorprofile?id=${encodeURIComponent(j||i||s||e)}&handle=${encodeURIComponent(r)}&shared=true`)},className:"text-sm font-medium hover:underline transition-colors",style:{color:"var(--color-gold)"},children:r("View Full Profile",c)})})]})]})})},it=({onClose:e,onPin:r})=>t.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.6)"},onClick:e,children:t.jsxs("div",{className:"bg-white rounded-xl w-full max-w-sm p-6",onClick:e=>e.stopPropagation(),children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pin to Top"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select duration to pin this video:"}),t.jsx("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[1,7,30].map(a=>t.jsxs("button",{className:"flex flex-col items-center justify-center p-3 border border-gray-200 rounded-xl hover:border-yellow-500 hover:bg-yellow-50 transition-colors",onClick:()=>{r(a),e()},children:[t.jsx("span",{className:"text-xl font-bold text-gray-800",children:a}),t.jsx("span",{className:"text-xs text-gray-500",children:"Days"})]},a))}),t.jsx("button",{onClick:e,className:"w-full py-3 rounded-lg bg-gray-100 text-gray-600 font-semibold",children:"Cancel"})]})}),ct=({video:e,onClose:a,onAdded:s,selectedLanguage:o="English"})=>{const[n,l]=f.useState([]),[i,c]=f.useState(""),[m,u]=f.useState("");f.useEffect(()=>{(async()=>{try{const e=await d(()=>import("./playlists-Dv1KJn3G.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]));l(e.getPlaylists())}catch(e){}})()},[]);return t.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.6)"},onClick:a,children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r("Add to Playlist",o)}),t.jsx("button",{className:"p-1 text-gray-500 hover:text-gray-700",onClick:a,children:"âœ•"})]}),n.length>0?t.jsx("div",{className:"grid grid-cols-3 gap-2 mb-3",children:n.map(n=>{const i=n.items&&n.items[0]&&(n.items[0].thumbnail||n.items[0].imageUrl)||"https://placehold.co/160x90/efefef/777?text=Playlist";return t.jsxs("button",{className:"w-full text-left bg-white rounded-lg border border-gray-200 overflow-hidden hover:border-gray-300",onClick:()=>(async t=>{try{const r=await d(()=>import("./playlists-Dv1KJn3G.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]));r.addToPlaylist(t,e),l(r.getPlaylists()),s&&s(),a()}catch(r){a()}})(n.id),children:[t.jsx("div",{className:"w-full pb-[50%] relative",children:t.jsx("img",{src:i,alt:n.name,className:"absolute inset-0 w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://placehold.co/160x90/efefef/777?text=Playlist"}})}),t.jsxs("div",{className:"px-2 py-1",children:[t.jsx("div",{className:"text-[11px] font-semibold text-gray-900 truncate",children:n.name}),t.jsxs("div",{className:"text-[10px] text-gray-500 flex items-center gap-1 mt-0.5",children:[t.jsx("span",{children:r("Private",o)}),t.jsx("span",{children:"â€¢"}),t.jsx("span",{children:(n.items||[]).length}),t.jsx(Ze,{name:"bookmark",size:12,className:"ml-auto text-gray-400"})]})]})]},n.id)})}):t.jsx("div",{className:"text-sm text-gray-600 mb-2",children:r("No playlists yet. Create one below.",o)}),t.jsx("label",{className:"text-sm text-gray-700",children:r("New playlist name",o)}),t.jsx("input",{value:i,onChange:e=>{c(e.target.value),u("")},placeholder:r("My Playlist",o),className:"mt-1 w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md outline-none"}),m&&t.jsx("div",{className:"text-xs text-red-600 mt-1",children:m}),t.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[t.jsx("button",{className:"px-3 py-2 text-sm text-gray-700",onClick:a,children:r("Cancel",o)}),t.jsx("button",{className:"px-3 py-2 text-sm text-white rounded-md",style:{backgroundColor:"var(--color-gold)"},onClick:async()=>{const t=String(i||"").trim();if(t)try{const r=await d(()=>import("./playlists-Dv1KJn3G.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])),o=r.ensurePlaylist(t);r.addToPlaylist(o.id,e),l(r.getPlaylists()),s&&s(),a()}catch(n){a()}else u(r("Please enter a name",o))},children:r("Create",o)})]})]})})},dt=({show:e,type:r="info",title:a,message:s,onClose:o})=>{const[n,l]=f.useState(0),[i,d]=f.useState(!1),m=f.useRef(0),u=f.useRef(null);if(f.useEffect(()=>{if(e){const e=setTimeout(()=>{g()},4e3);return()=>clearTimeout(e)}},[e]),!e)return null;const g=()=>{d(!0),setTimeout(()=>{o()},300)},h=()=>{Math.abs(n)>80?g():l(0),m.current=0,u.current&&(u.current.style.cursor="grab")},x={success:{border:"bg-green-500",iconBg:"bg-green-500",icon:c},error:{border:"bg-red-500",iconBg:"bg-red-500",icon:E},info:{border:"bg-blue-500",iconBg:"bg-blue-500",icon:_},warning:{border:"bg-yellow-400",iconBg:"bg-yellow-400",icon:U},warn:{border:"bg-yellow-400",iconBg:"bg-yellow-400",icon:U},ban:{border:"bg-red-500",iconBg:"bg-red-500",icon:E},shadowban:{border:"bg-yellow-400",iconBg:"bg-yellow-400",icon:U},delete:{border:"bg-red-600",iconBg:"bg-red-600",icon:U}},p=x[r]||x.info,y=p.icon;return t.jsx("div",{className:"fixed left-1/2 transform -translate-x-1/2 z-[200] w-full max-w-md mx-auto px-4",style:{top:"calc(12px + env(safe-area-inset-top, 0px))"},children:t.jsxs("div",{ref:u,className:"flex items-center bg-white rounded-lg shadow-lg overflow-hidden transition-all duration-300 cursor-grab select-none "+(i?"opacity-0 scale-95 -translate-y-4":"opacity-100 scale-100"),style:{transform:`translateX(${n}px)`,animation:i?"none":"toastSlideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},onTouchStart:e=>{m.current=e.touches[0].clientX},onTouchMove:e=>{const t=e.touches[0].clientX-m.current;l(t)},onTouchEnd:()=>{Math.abs(n)>80?g():l(0)},onMouseDown:e=>{m.current=e.clientX,u.current&&(u.current.style.cursor="grabbing")},onMouseMove:e=>{if(0===m.current)return;const t=e.clientX-m.current;l(t)},onMouseUp:h,onMouseLeave:h,children:[t.jsx("style",{children:"\n                    @keyframes toastSlideDown {\n                        from {\n                            opacity: 0;\n                            transform: translateY(-20px) scale(0.95);\n                        }\n                        to {\n                            opacity: 1;\n                            transform: translateY(0) scale(1);\n                        }\n                    }\n                "}),t.jsx("div",{className:`w-1 ${p.border}`}),t.jsxs("div",{className:"flex items-center p-3 w-full",children:[t.jsx("div",{className:`flex-shrink-0 flex items-center justify-center w-8 h-8 rounded-full ${p.iconBg} text-white`,children:t.jsx(y,{size:18,strokeWidth:3})}),t.jsxs("div",{className:"ml-3 flex-1",children:[t.jsx("div",{className:"text-sm font-bold text-gray-800",children:a}),t.jsx("div",{className:"text-xs text-gray-600",children:s})]})]})]})})},mt=({overrideMiniPlayerData:e=null})=>{const d=v(),m=b(),u=a(),{videoRef:g}=w.useContext(s)||{},[h,x]=f.useState(""),[p,y]=f.useState(!1),[N,k]=f.useState(!1),[C,S]=f.useState(!1),[I,E]=f.useState(80),[R,$]=f.useState(0),[P,U]=f.useState(0),_=f.useRef(null),D=f.useRef(null),A=f.useRef(null),z=()=>{S(!1),_.current&&(clearInterval(_.current),_.current=null),D.current&&(clearTimeout(D.current),D.current=null)};f.useEffect(()=>{u&&u.setDrawerCloseCallback&&u.setDrawerCloseCallback(()=>k(!1))},[u]);const[M,O]=f.useState(!1);f.useEffect(()=>{try{new URLSearchParams(m.search).get("creatorOnboard")&&(k(!1),O(!0),d(m.pathname,{replace:!0}))}catch(e){}},[m.search]),f.useEffect(()=>{try{m.state?.openSignup&&!u?.user&&(u.openAuthModal(),d(m.pathname,{replace:!0,state:{}}))}catch(e){}},[m.state]);const[B,q]=f.useState(!1),[F,W]=f.useState(null),[V,H]=f.useState(!1),[J,Y]=f.useState(null),[G,X]=f.useState(null),[K,Z]=f.useState(!1),[Q,ee]=f.useState(!1),[te,re]=f.useState(null),[ae,se]=f.useState(null),[oe,ne]=f.useState(!1),[le,ie]=f.useState(null);f.useRef(null);const ce=f.useRef(null),[de,me]=f.useState(!0),[ue,ge]=f.useState({right:16,bottom:100});f.useRef({isDragging:!1,hasMoved:!1,startX:0,startY:0,startRight:16,startBottom:100});const he=f.useRef(0),xe=f.useRef(!1),pe=f.useRef(!1);f.useEffect(()=>{try{const e=sessionStorage.getItem("miniPlayerClosed");if(e){const t=parseInt(e,10);!isNaN(t)&&Date.now()-t<1e4?(xe.current=!0,he.current=t):sessionStorage.removeItem("miniPlayerClosed")}}catch(e){}},[]);const[fe,ye]=f.useState(null),[ve,be]=f.useState(!1),[we,je]=f.useState(!1),[Ne,ke]=f.useState(!1);f.useEffect(()=>{try{localStorage.getItem("regaarder_seen_welcome_v2")||be(!0)}catch(e){console.warn("Failed to check welcome modal status",e),be(!0)}},[]),f.useEffect(()=>{try{if("1"===sessionStorage.getItem("beta_wait_modal_seen"))return}catch(s){}const e="undefined"!=typeof window&&window.__BACKEND_URL__||"https://regaarder-pwin.onrender.com",t=8e4;let r=!1;D.current=setTimeout(()=>{r||(()=>{try{sessionStorage.setItem("beta_wait_modal_seen","1")}catch(s){}A.current=Date.now(),E(80),$(0),U(0),S(!0),_.current&&clearInterval(_.current),_.current=setInterval(()=>{const e=Date.now()-(A.current||Date.now()),r=Math.max(0,Math.ceil((t-e)/1e3)),a=Math.min(100,Math.round(e/t*100));E(r),$(a),U(a<20?0:a<40?1:a<55?2:a<75?3:a<90?4:5),e>=t&&(clearInterval(_.current),_.current=null,S(!1))},250)})()},1800);const a="undefined"!=typeof AbortController?new AbortController:null;return fetch(`${e}/healthz`,{method:"GET",cache:"no-store",signal:a?a.signal:void 0}).catch(()=>{}).finally(()=>{r=!0,D.current&&(clearTimeout(D.current),D.current=null),_.current&&(clearInterval(_.current),_.current=null),S(!1)}),()=>{a&&a.abort(),D.current&&(clearTimeout(D.current),D.current=null),_.current&&(clearInterval(_.current),_.current=null)}},[]);const Ee=e=>{qe(e)},Le=f.useCallback(e=>{if(!e)return;const t=e.replace(/\.jsx$/,"");if(!("/"===t||"/home"===t)){ne(!1),ie(null);try{localStorage.removeItem("miniPlayerData")}catch(r){}}try{o("clearOverride")}catch(r){}d(t)},[d]);f.useEffect(()=>{if(!("/"===m.pathname||"/home"===m.pathname)){ne(!1),ie(null);try{localStorage.removeItem("miniPlayerData")}catch(e){}}},[m.pathname]);const[Te,Re]=f.useState(!1),[Pe,Ue]=f.useState(null),[_e,De]=f.useState(!1),Ae=f.useRef(!1);f.useEffect(()=>{Ae.current=Te},[Te]),f.useEffect(()=>{if(oe&&Te){const e=setTimeout(()=>{Ae.current&&(console.warn("[MiniPlayer safety] Force-closing lingering fullscreen overlay"),Re(!1),Ue(null),De(!1))},800);return()=>clearTimeout(e)}},[oe,Te]),f.useEffect(()=>{if(!Te){try{const e=document.getElementById("regaarder-immersive-style");e&&e.remove()}catch(e){}try{document.documentElement.style.overflow="",document.body.style.overflow=""}catch(e){}}},[Te]);const[ze,Me]=f.useState({show:!1,type:"info",title:"",message:""});f.useEffect(()=>{let e=-1;const t=async()=>{const t=localStorage.getItem("regaarder_token");if(t)try{const a=window&&window.__BACKEND_URL__||"https://regaarder-pwin.onrender.com",s=await fetch(`${a}/notifications`,{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const t=await s.json(),r=(Array.isArray(t.notifications)?t.notifications:[]).filter(e=>e&&(e.title||e.text||e.message)),a=r.filter(e=>!e.read),o=a.length,n=a.find(e=>"staff_action"===e.type&&e.requiresAcknowledgment&&!e.read);if(n&&!fe&&ye(n),-1!==e&&o>e){const e=a[0]||r[0];e&&("staff_action"===e.type&&e.requiresAcknowledgment&&!e.read?ye(e):(Me({show:!0,type:"info",title:"New Notification",message:e.text||e.message||e.title||"You have a new update"}),setTimeout(()=>Me(e=>({...e,show:!1})),4e3)))}e=o,localStorage.setItem("notifications_count",String(o)),localStorage.setItem("notifications",JSON.stringify(r)),window.dispatchEvent(new Event("storage"))}else try{localStorage.setItem("notifications_count","0"),localStorage.setItem("notifications","[]"),window.dispatchEvent(new Event("storage"))}catch(r){}}catch(r){}else try{localStorage.setItem("notifications_count","0"),localStorage.setItem("notifications","[]"),window.dispatchEvent(new Event("storage"))}catch(r){}};t();const r=setInterval(t,8e3);return()=>clearInterval(r)},[]);const Oe=n(),{selectedLanguage:Be,changeLanguage:qe}=l(),[Fe,We]=f.useState(!1);f.useEffect(()=>{const t=i("miniPlayerRequest",t=>{("/"===m.pathname||"/home"===m.pathname||!!e)&&t&&t.video&&(xe.current=!1,ie(t),me(!t.paused),ne(!0))}),r=i("switchToHome",e=>{if(pe.current)return void(pe.current=!1);if(xe.current)return;Date.now()-he.current<5e3||e&&e.video&&(ie(e),me(!e.paused),ne(!0))});return()=>{t();try{r()}catch(e){}}},[m.pathname,e]),f.useEffect(()=>{if(!("/"===m.pathname||"/home"===m.pathname||!!e))return;if(xe.current)return;if(!(Date.now()-he.current<5e3)){try{const e=sessionStorage.getItem("miniPlayerClosed");if(e&&Date.now()-Number(e)<1e4)return void(xe.current=!0)}catch(t){}try{if(e&&e.video)return console.log("home: using overrideMiniPlayerData prop ->",e),ie(e),me(!e.paused),void ne(!0)}catch(t){}try{if(m&&m.state&&m.state.miniPlayerData){const e=m.state.miniPlayerData;if(console.log("home: got miniPlayerData from location.state ->",e),e&&e.video){ie(e),me(!e.paused),ne(!0);try{localStorage.removeItem("miniPlayerData")}catch(t){}return}}try{const e=new URLSearchParams(window.location.search);if("1"===e.get("mini")){const r=e.get("id"),a=e.get("t"),s={video:{id:r||"custom",title:e.get("title")||"Video"},time:a?parseInt(a,10):0};console.log("home: got miniPlayerData from URL ->",s),ie(s),me(!s.paused),ne(!0);try{localStorage.removeItem("miniPlayerData")}catch(t){}return}}catch(t){}const e=localStorage.getItem("miniPlayerData");if(console.log("home: found stored miniPlayerData?",!!e),e){const t=JSON.parse(e);console.log("home: parsed miniPlayerData ->",t),t&&t.video&&(ie(t),me(!t.paused),ne(!0),localStorage.removeItem("miniPlayerData"))}}catch(r){console.error("Failed to retrieve mini player data",r)}}},[m,e]),f.useEffect(()=>{const e=ce.current;if(!e)return;let t=null,r=null;try{const s=le&&le.video&&(le.video.src||le.video.videoUrl||le.video.url)||"",o=T(s)||s;if(o&&e.src!==o){try{e.src=o}catch(a){}try{e.load()}catch{}}const n=()=>{try{if(le&&"number"==typeof le.time&&!Number.isNaN(le.time))try{e.currentTime=Math.max(0,Math.floor(le.time))}catch(a){}try{e.muted=!0,e.playsInline=!0,e.autoplay=!0;const t=e.play();t&&t.then&&t.catch(()=>{})}catch(a){}}catch(t){console.warn("miniPlayer applyState failed",t)}};e.readyState>=2?n():(t=()=>n(),e.addEventListener("loadedmetadata",t)),r=()=>{try{if(xe.current)return;const t=Math.floor(e.currentTime||0);ie(e=>{if(!e)return e;const r={...e,time:t};try{xe.current||localStorage.setItem("miniPlayerData",JSON.stringify(r))}catch(a){}return r})}catch(a){}},e.addEventListener("timeupdate",r)}catch(a){console.warn("Failed to sync mini player video",a)}return()=>{try{t&&e.removeEventListener&&e.removeEventListener("loadedmetadata",t),r&&e.removeEventListener&&e.removeEventListener("timeupdate",r)}catch(a){}}},[oe,le]);const Ve=e=>{ft(t=>t.filter(t=>t.id!==e)),Me({show:!0,type:"success",title:"Success",message:"This video will be shown less to you"}),setTimeout(()=>Me(e=>({...e,show:!1})),3e3)},[Ge,Xe]=f.useState(!1),[Ke,Ze]=f.useState(null),Qe=e=>{Ze(e),Xe(!0)},at=(e,t=!1,r=null,a=null)=>{W(e),H(t),Y(r),X(a),q(!0)},st=e=>{if(se(e),Z(!0),e&&e.id)try{const t=window&&window.__BACKEND_URL__||"https://pwin-copy-production.up.railway.app";fetch(`${t}/videos/${encodeURIComponent(e.id)}/share`,{method:"POST"}).catch(()=>{})}catch(t){}},it=async e=>{ft(t=>t.map(t=>t.id===e?{...t,bookmarked:!t.bookmarked}:t));try{const t=(pt||[]).find(t=>t.id===e);if(!t)return;if(!!t.bookmarked)return;const r=window&&window.__BACKEND_URL__||"https://regaarder-pwin.onrender.com",a=localStorage.getItem("regaarder_token");await fetch(`${r}/bookmarks/videos`,{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}},body:JSON.stringify({videoUrl:t.videoUrl||t.url||t.src||null,title:t.title||""})}).catch(()=>{})}catch{}},mt=async e=>{ft(t=>t.map(t=>t.id===e?{...t,pinned:!1,pinnedDays:null}:t));try{const t=window&&window.__BACKEND_URL__||"https://regaarder-pwin.onrender.com",r=localStorage.getItem("regaarder_token");await fetch(`${t}/videos/${encodeURIComponent(e)}`,{method:"PATCH",headers:{"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{}},body:JSON.stringify({pinned:!1,pinnedDays:null})}).catch(()=>{})}catch(t){}},[pt,ft]=f.useState([]),[yt,vt]=f.useState("Recommended");f.useEffect(()=>{ft([]);(async()=>{try{const t=window&&window.__BACKEND_URL__||"https://regaarder-pwin.onrender.com";console.log("Fetching videos from:",`${t}/videos`);const r=localStorage.getItem("regaarder_token");let a=new Set;try{const e=await fetch(`${t}/bookmarks`,{headers:r?{Authorization:`Bearer ${r}`}:{}}),s=await e.json();s&&s.success&&Array.isArray(s.videos)&&s.videos.forEach(e=>{e.videoUrl&&a.add(String(e.videoUrl))})}catch(e){console.warn("Failed to fetch bookmarks:",e)}const s=new URLSearchParams;"Recommended"===yt?s.set("feed","recommended"):"Trending Now"===yt?s.set("feed","trending"):("New"===yt||s.set("category",yt),s.set("feed","fresh"));const o=await fetch(`${t}/videos?${s.toString()}`);if(console.log("Fetch response:",o.status,o.ok),o.ok){const r=await o.json();if(console.log("Fetched videos data:",r),r.success&&r.videos&&r.videos.length>0){console.log("Adding",r.videos.length,"videos from backend");let s=null;try{s=new URL(t)}catch(e){s=null}const o=s?s.host:window&&window.location?window.location.host:"",n=s?s.protocol:window&&window.location?window.location.protocol:"https:",l=r.videos.filter(e=>{if(e.hidden||e.deleted||e.shadowDeleted)return!1;const t=!e.appearance||"public"===e.appearance,r=e.imageUrl&&!e.imageUrl.startsWith("blob:"),a=e.videoUrl&&!e.videoUrl.startsWith("blob:");return t&&(r||a)}).map((r,s)=>{let l="Just now";if(r.timestamp){const e=Date.now()-r.timestamp,t=Math.floor(e/1e3),a=Math.floor(t/60),s=Math.floor(a/60),o=Math.floor(s/24),n=Math.floor(o/7),i=Math.floor(o/30);l=t<60?"Just now":a<60?`${a} minute${a>1?"s":""} ago`:s<24?`${s} hour${s>1?"s":""} ago`:o<7?`${o} day${o>1?"s":""} ago`:n<4?`${n} week${n>1?"s":""} ago`:`${i} month${i>1?"s":""} ago`}const i=null!=r.id&&void 0!==r.id?String(r.id):r.timestamp?`ts-${r.timestamp}`:r.videoUrl?`url-${r.videoUrl}`:`idx-${s}`,c=r=>{if(!r||r.startsWith("blob:"))return null;try{const e=new URL(r,t),a=(e.hostname||"").toLowerCase(),s="localhost"===a||"127.0.0.1"===a||"0.0.0.0"===a;if(n&&(e.protocol=n),o){const[t,r]=o.split(":");!s&&e.host&&"capacitor:"!==e.protocol||(e.hostname=t,r&&(e.port=r))}return e.toString()}catch(e){return r}},d=(r.videoUrl||r.url||r.src)&&!String(r.videoUrl||r.url||r.src).startsWith("blob:")?r.videoUrl||r.url||r.src:null,m=c(d);return{...r,id:i,date:l,imageUrl:(()=>{const e=r.thumbnailUrl||r.thumbUrl||r.thumb||r.poster||r.cover||r.thumbnail||r.image,t=r.imageUrl&&!r.imageUrl.startsWith("blob:")?r.imageUrl:e||"https://placehold.co/600x400/333333/ffffff?text=Video+Image+Unavailable";return c(t)||t})(),authorAvatar:r.authorAvatar?c(r.authorAvatar)||r.authorAvatar:null,requesterAvatar:r.requesterAvatar?c(r.requesterAvatar)||r.requesterAvatar:null,videoUrl:m,time:r.time||"0:00",duration:(()=>{const e=(r.time||"0:00").split(":");if(2===e.length){return 60*(parseInt(e[0])||0)+(parseInt(e[1])||0)}return 0})(),requester:r.requester||r.author||"Unknown",bookmarked:!!m&&a.has(String(m))}});l.length>0&&ft(e=>{const t=new Set(e.map(e=>e.id));return[...l.filter(e=>!t.has(e.id)),...e]})}else console.log("No videos from backend")}else console.error("Failed to fetch videos:",o.status)}catch(t){console.error("Error fetching videos:",t)}})();const e=setInterval(async()=>{try{const e=window&&window.__BACKEND_URL__||"https://pwin-copy-production.up.railway.app",t=new URLSearchParams;"Recommended"===yt?t.set("feed","recommended"):"Trending Now"===yt?t.set("feed","trending"):("New"===yt||t.set("category",yt),t.set("feed","fresh"));const r=await fetch(`${e}/videos?${t.toString()}`);if(r.ok){const e=await r.json();e.success&&Array.isArray(e.videos)&&ft(t=>t.map(t=>{const r=e.videos.find(e=>String(e.id)===String(t.id));return r?{...t,views:r.views??t.views,likes:r.likes??t.likes,dislikes:r.dislikes??t.dislikes,comments:r.comments??t.comments,bookmarks:r.bookmarks??t.bookmarks,shares:r.shares??t.shares,retentionRate:r.retentionRate??t.retentionRate,retentionPercentage:r.retentionPercentage??t.retentionPercentage}:t}))}}catch(e){}},6e4);return()=>clearInterval(e)},[yt]);const Nt=pt.filter(e=>{const t=h.toLowerCase();return e.title&&e.title.toLowerCase().includes(t)||e.author&&e.author.toLowerCase().includes(t)||e.requester&&e.requester.toLowerCase().includes(t)}),kt=e=>e.timestamp&&"number"==typeof e.timestamp?e.timestamp:(e=>{if(!e)return 0;const t=Date.now(),r=String(e).toLowerCase().trim();if(r.includes("just")||r.includes("now"))return t;const a=r.match(/(\d+)\s*(day|week|month|year)s?\s*ago/);if(a){const e=parseInt(a[1],10),r=a[2],s=864e5;if("day"===r)return t-e*s;if("week"===r)return t-7*e*s;if("month"===r)return t-30*e*s;if("year"===r)return t-365*e*s}const s=Date.parse(e);return isNaN(s)?0:s})(e.date);let Ct=Nt.slice();"New"===yt&&Ct.sort((e,t)=>kt(t)-kt(e));const St=async(e,t)=>{ft(r=>{const a=r.map(r=>r.id===e?{...r,pinned:!0,pinnedDays:t}:r),s=a.findIndex(t=>t.id===e);if(s>0){const[e]=a.splice(s,1);a.unshift(e)}return a});try{const r=window&&window.__BACKEND_URL__||"https://regaarder-pwin.onrender.com",a=localStorage.getItem("regaarder_token");await fetch(`${r}/videos/${encodeURIComponent(e)}`,{method:"PATCH",headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}},body:JSON.stringify({pinned:!0,pinnedDays:t})}).catch(()=>{})}catch(r){}},It={English:"ðŸ‡ºðŸ‡¸","EspaÃ±ol":"ðŸ‡ªðŸ‡¸",Spanish:"ðŸ‡ªðŸ‡¸","FranÃ§ais":"ðŸ‡«ðŸ‡·",French:"ðŸ‡«ðŸ‡·",Deutsch:"ðŸ‡©ðŸ‡ª",German:"ðŸ‡©ðŸ‡ª",Italiano:"ðŸ‡®ðŸ‡¹",Italian:"ðŸ‡®ðŸ‡¹","PortuguÃªs":"ðŸ‡µðŸ‡¹",Portuguese:"ðŸ‡µðŸ‡¹","Ð ÑƒÑÑÐºÐ¸Ð¹":"ðŸ‡·ðŸ‡º",Russian:"ðŸ‡·ðŸ‡º","Chinese Traditional":"ðŸ‡¹ðŸ‡¼"}[Be]||"ðŸŒ";return t.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-gray-50 pb-40 font-sans shadow-2xl relative",children:[t.jsx(Ce,{isOpen:ve,onSelectRole:e=>{if("user"===e||"creator"===e)try{localStorage.setItem("regaarder_seen_welcome","1"),localStorage.setItem("regaarder_seen_welcome_v2","1")}catch(t){}"user"===e?(be(!1),je(!0)):"creator"===e?(be(!1),ke(!0)):be(!1)},selectedLanguage:Be,onLanguageSelect:Ee}),t.jsx(Se,{isOpen:we,onClose:()=>je(!1),selectedLanguage:Be}),t.jsx(Ie,{isOpen:Ne,onClose:()=>ke(!1),selectedLanguage:Be}),fe&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{backgroundColor:"rgba(0,0,0,0.64)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",transition:"backdrop-filter 200ms ease, -webkit-backdrop-filter 200ms ease, background 200ms ease",cursor:"pointer"},onClick:async()=>{const e=fe.ctaUrl||fe.meta&&fe.meta.ctaUrl;try{const e=localStorage.getItem("regaarder_token");if(e&&fe.id){const t=window&&window.__BACKEND_URL__||"https://regaarder-pwin.onrender.com";await fetch(`${t}/notifications/${fe.id}/read`,{method:"POST",headers:{Authorization:`Bearer ${e}`}})}}catch(t){console.warn("Failed to mark notification as read",t)}if(e&&"promotion"===fe.action){const t=e.startsWith("http")?e:`https://${e}`;window.open(t,"_blank","noopener,noreferrer")}ye(null)},role:"dialog","aria-modal":"true",children:t.jsx("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-4 shadow-lg",style:{cursor:"pointer"},onClick:e=>{},children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 16px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"36px",backgroundColor:"warn"===fe.action?"#fef3c7":"ban"===fe.action?"#fecaca":"shadowban"===fe.action?"#d1d5db":"delete"===fe.action?"#ddd6fe":"promotion"===fe.action?"#eef2ff":"#f0fdf4"},children:["warn"===fe.action&&"âš ï¸","ban"===fe.action&&"ðŸš«","shadowban"===fe.action&&"ðŸ‘ï¸","delete"===fe.action&&"ðŸ—‘ï¸","promotion"===fe.action&&(()=>{const e=fe.ctaIcon||fe.meta&&fe.meta.ctaIcon||"gift";return"gift"===e?"ðŸŽ":"star"===e?"â­":"megaphone"===e?"ðŸ“¢":"heart"===e?"â¤ï¸":"fire"===e?"ðŸ”¥":"check"===e?"âœ…":"arrow"===e?"â†’":"ðŸŽ"})()]}),t.jsx("h3",{style:{margin:"0 0 12px",fontSize:"18px",fontWeight:"700",color:"#1f2937"},children:fe.title}),t.jsx("p",{style:{margin:"0 0 24px",fontSize:"14px",color:"#666",lineHeight:"1.5",whiteSpace:"pre-wrap"},children:fe.message}),t.jsx("div",{style:{width:"100%",padding:"12px 16px",backgroundColor:"promotion"===fe.action?fe.ctaColor||fe.meta?.ctaColor||"#f59e0b":"warn"===fe.action?"#f59e0b":"ban"===fe.action?"#ef4444":"shadowban"===fe.action?"#6b7280":"delete"===fe.action?"#8b5cf6":"#f59e0b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600",transition:"background-color 0.2s",textAlign:"center"},children:fe.ctaText||fe.meta&&fe.meta.ctaText||("shadowban"===fe.action?"Learn More":"Acknowledge")}),"promotion"===fe.action&&(fe.ctaUrl||fe.meta&&fe.meta.ctaUrl)&&t.jsx("p",{style:{margin:"12px 0 0",fontSize:"11px",color:"#9ca3af",textAlign:"center"},children:"Tap anywhere to dismiss"})]})})}),!Te&&t.jsx(gt,{setIsDrawerOpen:k,navigate:d,selectedLanguage:Be,onLanguageSelect:Ee}),t.jsxs("div",{className:"overflow-y-auto",style:{height:"calc(100vh - 160px)"},children:[t.jsx(ht,{searchTerm:h,setSearchTerm:x,onFocusChange:y,selectedLanguage:Be,videos:pt,navigate:d}),t.jsx(xt,{activeTab:yt,setActiveTab:vt,selectedLanguage:Be}),Ct.length>0?Ct.map(e=>t.jsx(ut,{video:e,allVideos:pt,onReportVideo:Qe,onPinVideo:St,onOpenProfile:at,onToggleBookmark:it,onUnpinVideo:mt,onOpenShare:st,onNotInterested:Ve,selectedLanguage:Be,onAddToPlaylistStart:e=>{re(e),ee(!0)},onVideoClick:async()=>{He();try{const e=pt.map(e=>({...e,url:e.url||e.videoUrl,videoUrl:e.videoUrl||e.url,creator:e.creator||e.author,thumbnail:e.thumbnail||e.imageUrl}));localStorage.setItem("discoverAllVideos",JSON.stringify(e))}catch(s){}let t=e;try{const r=window&&window.__BACKEND_URL__||"https://pwin-copy-production.up.railway.app";fetch(`${r}/videos/${encodeURIComponent(e.id)}/view`,{method:"POST"}).catch(()=>{});const a=await fetch(`${r}/videos/${encodeURIComponent(e.id)}`);if(a.ok){const e=await a.json();e&&e.id&&(t=e,console.log("Refreshed video data for ads:",t.id))}}catch(s){console.warn("Could not refresh video data:",s)}const r=t.overlays||[],a={id:t.id||"",title:t.title||"",author:t.author||"",requester:t.requester||"",videoUrl:t.videoUrl||t.url||t.src||"",url:t.url||t.videoUrl||t.src||"",imageUrl:t.imageUrl||"",views:t.views||0,likes:t.likes||0,comments:t.comments||0,duration:t.duration||0,time:t.time||"",overlays:r,ads:t.ads||{}};try{if(!(!0===window?.Capacitor?.isNativePlatform?.())){try{localStorage.setItem("videoplayer_quick_load",JSON.stringify({url:a.videoUrl||a.url,title:a.title||"",creator:a.author||"",time:a.time||""}))}catch{}const e=new URLSearchParams;return(a.videoUrl||a.url)&&e.set("src",a.videoUrl||a.url),a.title&&e.set("title",a.title),a.author&&e.set("channel",a.author),void d(`/videoplayer?${e.toString()}`,{state:{video:a}})}}catch{}Ue({video:a,initialVideo:a,discoverItems:pt}),Re(!0),De(!1);try{if($e&&$e.isNativePlatform&&$e.isNativePlatform()){Je&&Je.setImmersive({enabled:!0});const e=$e.getPlatform?$e.getPlatform():null;"android"===e&&Ye&&(Ye.hide?.({bar:"StatusBar"}),Ye.hide?.({bar:"NavigationBar"})),"ios"===e&&Ye&&(Ye.hide?.({bar:"StatusBar",animation:"FADE"}),Ye.hide?.({bar:"NavigationBar"}))}}catch(s){console.warn("Immersive mode error:",s)}}},e.id)):h.length>0&&t.jsxs("div",{className:"flex flex-col items-center justify-center text-center px-8 pt-0",style:{marginTop:"-18px"},children:[t.jsx("p",{className:"text-8xl font-light mb-4",style:{background:"var(--gradient-404)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",opacity:.9},children:"404"}),t.jsx("div",{className:"mb-4 flex items-center justify-center",children:t.jsx("div",{"aria-hidden":"true",className:"w-36 h-28 flex items-center justify-center",children:t.jsxs("svg",{viewBox:"0 0 160 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"g1",x1:"0",x2:"1",children:[t.jsx("stop",{offset:"0",stopColor:"rgba(34,197,94,0.12)"}),t.jsx("stop",{offset:"1",stopColor:"rgba(124,58,237,0.08)"})]})}),t.jsx("rect",{x:"0",y:"10",width:"160",height:"80",rx:"20",fill:"url(#g1)"}),t.jsxs("g",{transform:"translate(18,26)",fill:"#ffffff",opacity:"0.98",children:[t.jsx("circle",{cx:"28",cy:"24",r:"10",fill:"#d1fae5"}),t.jsx("circle",{cx:"68",cy:"24",r:"10",fill:"#ecfccb"}),t.jsx("circle",{cx:"108",cy:"24",r:"10",fill:"#eef2ff"}),t.jsx("path",{d:"M18 60c8-10 22-16 40-16s32 6 40 16",fill:"#ffffff",opacity:"0.07"})]}),t.jsxs("g",{transform:"translate(18,26)",fill:"#0f172a",opacity:"0.9",children:[t.jsx("circle",{cx:"28",cy:"24",r:"4"}),t.jsx("circle",{cx:"68",cy:"24",r:"4"}),t.jsx("circle",{cx:"108",cy:"24",r:"4"})]})]})})}),t.jsx("h2",{className:"text-xl font-medium text-gray-800 mb-2",children:"Not in the collection... yet"}),t.jsx("p",{className:"text-sm text-gray-600 mb-12 max-w-xs leading-relaxed",children:"You're early. You discovered something missing and you can help complete the set."}),t.jsx("div",{className:"w-full flex justify-center",children:t.jsx("button",{className:"w-full max-w-[260px] py-2 rounded-full text-base font-semibold text-black transition-shadow duration-300",style:{background:"linear-gradient(180deg, #fafbf9 0%, #f3f6f1 100%)",border:"1px solid rgba(0,0,0,0.06)",boxShadow:"0 10px 24px rgba(34,197,94,0.06), 0 2px 6px rgba(0,0,0,0.06)",backgroundImage:"linear-gradient(90deg, rgba(34,197,94,0.06), rgba(124,58,237,0.04))"},onMouseDown:e=>{try{e&&e.preventDefault&&e.preventDefault()}catch(t){}try{const e="/ideas"+(h?`?q=${encodeURIComponent(h)}`:"");d(e)}catch(r){console.warn("Redirect failed",r)}},onTouchStart:e=>{try{e&&e.preventDefault&&e.preventDefault()}catch(t){}try{const e="/ideas"+(h?`?q=${encodeURIComponent(h)}`:"");d(e)}catch(r){console.warn("Redirect failed",r)}},onClick:e=>{e&&e.preventDefault&&e.preventDefault()},children:"Request This Video"})}),t.jsx("div",{className:"mt-12 w-1/2 h-0.5 bg-gray-300 opacity-50 shadow-inner"})]})]}),!(p||h&&h.length>0)&&t.jsx(bt,{searchTerm:h,navigate:d,selectedLanguage:Be,onOpenSupportTicket:()=>{k(!1),d("/support")},showWelcomeModals:ve||we||Ne,isDrawerOpen:N}),t.jsx(ot,{isDrawerOpen:N,onClose:()=>k(!1),onOpenTheme:()=>Oe.openThemeModal(),onOpenLanguage:()=>{console.log("handleOpenLanguage called, closing drawer and opening modal"),k(!1),setTimeout(()=>{console.log("Opening language dialog"),We(!0)},300)},currentLanguageFlag:It,onOpenCreator:()=>{k(!1),O(!0)},navigateTo:Le,selectedLanguage:Be}),t.jsx(wt,{selectedLanguage:Be}),C&&t.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:z}),t.jsxs("div",{className:"relative w-[92%] max-w-md bg-white rounded-2xl shadow-2xl p-6",children:[t.jsx("div",{className:"flex items-start justify-between gap-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-widest px-2 py-1 rounded-full font-semibold",style:{backgroundColor:"rgba(124,58,237,0.12)",color:"var(--color-final, #7C3AED)"},children:"Beta"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Thanks for being early"})]})}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Weâ€™re warming up our beta servers so your first experience feels smooth and reliable. Your patience helps us improve for everyone."}),t.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-t-transparent animate-spin",style:{borderColor:"var(--color-final, #7C3AED)",borderTopColor:"transparent"},"aria-hidden":"true"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-xs text-gray-500",children:"Estimated wait"}),t.jsx("div",{className:"text-2xl font-semibold "+(I<=20?"text-emerald-600":"text-red-500"),children:(e=>{const t=Math.max(0,Math.floor(Number(e)||0));return`${Math.floor(t/60)}:${String(t%60).padStart(2,"0")}`})(I)})]})]}),t.jsx("div",{className:"mt-4 h-2 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full transition-all duration-300",style:{width:`${R}%`,backgroundColor:"var(--color-final, #7C3AED)"}})}),t.jsxs("div",{className:"mt-4 space-y-2 text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center text-xs "+(P>=1?"bg-emerald-100 text-emerald-700":0===P?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-500"),children:P>=1?t.jsx(c,{size:12}):"1"}),t.jsx("span",{children:0===P?"Waking serversâ€¦":"Waking servers for a steady experience"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center text-xs "+(P>=3?"bg-emerald-100 text-emerald-700":2===P?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-500"),children:P>=3?t.jsx(c,{size:12}):"2"}),t.jsx("span",{children:2===P?"Syncing contentâ€¦":"Syncing content so everything loads cleanly"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center text-xs "+(P>=5?"bg-emerald-100 text-emerald-700":4===P?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-500"),children:P>=5?t.jsx(c,{size:12}):"3"}),t.jsx("span",{children:4===P?"Final polishâ€¦":"Final polish before you jump in"})]})]}),t.jsxs("div",{className:"mt-5 flex items-center justify-between",children:[t.jsx("button",{onClick:z,className:"text-xs text-gray-500 underline",children:"Enter anyway"}),t.jsx("div",{className:"text-xs text-gray-500",children:"Thank you for shaping the beta"})]})]})]}),oe&&le&&t.jsx(jt,{data:le,onClose:()=>{xe.current=!0,pe.current=!0,he.current=Date.now();try{sessionStorage.setItem("miniPlayerClosed",String(Date.now()))}catch(e){}try{localStorage.removeItem("miniPlayerData")}catch(e){}ne(!1),ie(null),setTimeout(()=>{try{localStorage.removeItem("miniPlayerData")}catch(e){}},50),setTimeout(()=>{try{localStorage.removeItem("miniPlayerData")}catch(e){}},200);try{const e=document.getElementById("vp-launch-mask");e&&e.remove()}catch(e){}try{o("clearOverride")}catch(e){}},onExpand:e=>{if(ne(!1),le&&le.video){const t="number"==typeof e&&e>0?e:le.time||0;Ue({video:le.video,initialVideo:{...le.video,seekTo:t,duration:le.duration||0},discoverItems:pt}),Re(!0)}},onUpdateData:ie,navigate:d,onMiniPlayerReady:()=>{Ae.current&&(Re(!1),Ue(null),De(!1))}}),Te&&Pe&&t.jsxs("div",{className:"fixed inset-0 z-[120] bg-black",children:[t.jsx("style",{children:"\n                        @keyframes fadeInOverlay {\n                            from { opacity: 0; }\n                            to { opacity: 1; }\n                        }\n                        @keyframes fadeOutOverlay {\n                            from { opacity: 1; }\n                            to { opacity: 0; }\n                        }\n                        .fullscreen-videoplayer-overlay {\n                            animation: fadeInOverlay 0.3s ease-in-out forwards;\n                        }\n                        .fullscreen-videoplayer-overlay.closing {\n                            animation: fadeOutOverlay 0.3s ease-in-out forwards;\n                        }\n                    "}),t.jsx(j,{onChevronDown:e=>{xe.current=!1,De(!0);try{const e=g&&g.current;e&&e.parentNode&&(e.style.position="fixed",e.style.top="-9999px",e.style.left="-9999px",e.style.width="1px",e.style.height="1px",e.style.opacity="0",document.body.appendChild(e))}catch(t){console.warn("Failed to preserve video element",t)}if(e&&e.video){const r={...e,paused:!1};try{localStorage.setItem("miniPlayerData",JSON.stringify(r))}catch(t){}const a=e.video?.imageUrl||e.video?.thumbnail||"";if(a){const e=new Image;e.onload=()=>{ie(r),ne(!0)},e.onerror=()=>{ie(r),ne(!0)},e.src=a,setTimeout(()=>{oe||(ie(r),ne(!0))},300)}else ie(r),ne(!0)}else if(Pe&&Pe.video){let e=0;try{const t=g&&g.current;t&&(e=t.currentTime||0)}catch(t){}const r={video:Pe.video,time:e,paused:!1};try{localStorage.setItem("miniPlayerData",JSON.stringify(r))}catch(t){}const a=Pe.video?.imageUrl||Pe.video?.thumbnail||"";if(a){const e=new Image;e.onload=()=>{ie(r),ne(!0)},e.onerror=()=>{ie(r),ne(!0)},e.src=a,setTimeout(()=>{oe||(ie(r),ne(!0))},300)}else ie(r),ne(!0)}try{if($e&&$e.isNativePlatform&&$e.isNativePlatform()){Je.setImmersive({enabled:!1});const e=$e.getPlatform?$e.getPlatform():null;"ios"===e&&(Ye?.show?.({bar:"StatusBar",animation:"FADE"}),Ye?.show?.({bar:"NavigationBar"})),"android"===e&&(Ye?.show?.({bar:"StatusBar"}),Ye?.show?.({bar:"NavigationBar"}))}}catch(t){}Re(!1),Ue(null),De(!1);try{const e=document.getElementById("regaarder-immersive-style");e&&e.remove()}catch(t){}try{document.documentElement.style.overflow="",document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height=""}catch(t){}},data:Pe,initialVideo:Pe?.initialVideo,discoverItems:Pe?.discoverItems||[]})]}),Ge&&Ke&&t.jsx(nt,{video:Ke,onClose:()=>{Xe(!1),Ze(null)},selectedLanguage:Be}),B&&F&&t.jsx(lt,{name:F,username:F,isCreator:V,onClose:()=>{q(!1),W(null),H(!1),Y(null),X(null)},profileData:J,creatorId:G,selectedLanguage:Be}),K&&t.jsx(et,{onClose:()=>{Z(!1),se(null)},link:ae?ae.id||ae.videoId?`${L}/share/video/${encodeURIComponent(ae.id||ae.videoId)}`:`${L}/videoplayer?src=${encodeURIComponent(ae.url||ae.videoUrl||ae.src||"")}`:`${L}/home`,onCopySuccess:()=>{Me({show:!0,type:"success",title:"Success",message:"Link has been copied"}),setTimeout(()=>Me(e=>({...e,show:!1})),3e3)},selectedLanguage:Be}),Q&&te&&t.jsx(ct,{video:te,onClose:()=>{ee(!1),re(null)},onAdded:()=>{Me({show:!0,type:"success",title:"Success",message:"Added to playlist"}),setTimeout(()=>Me(e=>({...e,show:!1})),2e3)},selectedLanguage:Be}),Fe&&t.jsx(tt,{onClose:()=>{console.log("Closing language dialog"),We(!1)},selectedLanguage:Be,onSelectLanguage:e=>{console.log("Language selected:",e),qe(e),We(!1),Me({show:!0,type:"success",title:r("Language Updated",e),message:`${r(e,e)} ${r("selected",e)}`}),setTimeout(()=>Me(e=>({...e,show:!1})),2500)}}),M&&t.jsx(rt,{onClose:()=>O(!1),selectedLanguage:Be}),t.jsx(dt,{show:ze.show,type:ze.type,title:ze.title,message:ze.message,onClose:()=>Me(e=>({...e,show:!1}))})]})},ut=({video:e,onReportVideo:a,onPinVideo:s,onOpenProfile:o,onToggleBookmark:n,onUnpinVideo:l,onOpenShare:i,onNotInterested:c,onVideoClick:d,onAddToPlaylistStart:m,allVideos:u=[],selectedLanguage:g="English"})=>{const h=e=>{if(!e)return"";if("string"!=typeof e)return e;const t=e.trim();if(t.match(/just\s*now/i))return r("Just now",g);const a=t.match(/(\d+)\s*(day|week|month|year|hour|minute)s?\s*ago/i);if(a){const e=a[1],t=a[2].toLowerCase();return r(`{n} ${t}s ago`,g).replace("{n}",e)}return e},x=1===e.id,[p,y]=f.useState("details"),[b,w]=f.useState(x),[j,N]=f.useState(!1),[k,C]=f.useState(null),[S,I]=f.useState(!1),E=f.useRef(0),L=f.useRef(0),T=f.useRef([]),R=f.useRef(null),[$,P]=f.useState(()=>{try{return!localStorage.getItem("requested_badge_seen")}catch(e){return!0}}),[U,_]=f.useState(()=>{try{return!localStorage.getItem("swipe_stats_seen")}catch(e){return!0}});f.useEffect(()=>{if(!$)return;const e=setTimeout(()=>{try{localStorage.setItem("requested_badge_seen","1")}catch(e){}P(!1)},8e3);return()=>clearTimeout(e)},[$]);const[D,A]=f.useState(()=>{const t=e.time||"0:00";if("0:00"!==t)return t;const r=e.videoUrl||e.url||e.src||"";if((a=r)&&(a.includes("youtube.com")||a.includes("youtu.be"))){const e=(e=>{if(!e)return"";if(e.includes("youtu.be/"))return e.split("youtu.be/")[1].split(/[?&#]/)[0];if(e.includes("youtube.com"))try{return new URL(e).searchParams.get("v")||""}catch{return""}return""})(r);if(e)try{const t=localStorage.getItem(`yt_dur_${e}`);if(t){const e=parseInt(t)||0;if(e>0){const t=Math.floor(e/60);return`${t}:${String(e%60).padStart(2,"0")}`}}}catch{}}var a;return t}),z={likes:e.stats&&e.stats.likes||e.likes||e.likeCount||"0",dislikes:e.stats&&e.stats.dislikes||e.dislikes||e.dislikeCount||"0",views:e.stats&&e.stats.views||e.views||e.viewCount||"0",comments:e.stats&&e.stats.comments||e.comments||e.commentCount||"0",shares:e.stats&&e.stats.shares||e.shares||e.shareCount||"0",retentionRate:e.stats&&e.stats.retentionRate||e.retentionRate||"0",retentionPercentage:e.stats&&e.stats.retentionPercentage||e.retentionPercentage||"0%"};f.useEffect(()=>{if(!x||!b)return;return T.current.forEach(clearTimeout),T.current=[],["likes"].forEach((e,t)=>{const r=setTimeout(()=>{y(e),w(!1)},3e3*(t+1));T.current.push(r)}),()=>{T.current.forEach(clearTimeout),T.current=[]}},[x,b]),f.useEffect(()=>{const e=e=>{const t=e.target&&e.target.closest&&e.target.closest(".more-actions-dialog");j&&R.current&&!R.current.contains(e.target)&&!t&&N(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[j]);const M=()=>{b&&(T.current.forEach(clearTimeout),T.current=[],w(!1))},O=()=>{a(e)},B=v(),q=()=>{try{localStorage.setItem("focus_request_hint",JSON.stringify({title:e.title||"",requester:e.requester||""}))}catch(a){}const t=e.requestId||e.originalRequestId||null,r=t?`/requests?reqId=${encodeURIComponent(t)}`:`/requests?q=${encodeURIComponent(e.title||"")}`;B(r)},F=()=>{I(!0)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{ref:R,className:"mx-5 mb-5 bg-white rounded-xl shadow-lg transition-shadow duration-300 overflow-visible cursor-pointer",onClick:t=>{if(t.target===t.currentTarget||t.target.closest(".card-content")){try{const t=Array.isArray(u)&&u.length?u.map(e=>({id:e.id,title:e.title,url:e.videoUrl||e.url||e.src,creator:e.author||e.creator||"",thumbnail:e.imageUrl||e.thumbnail})):[],a=t.findIndex(t=>String(t.id)===String(e.id)||String(t.url)===String(e.videoUrl||e.url));try{localStorage.setItem("videoplayer_source",JSON.stringify(t))}catch(r){}try{localStorage.setItem("videoplayer_index",String(Math.max(0,a)))}catch(r){}}catch(r){}d&&d()}},onTouchStart:e=>{x&&M(),j||(E.current=e.touches[0].clientX,L.current=e.touches[0].clientX)},onTouchMove:e=>{j||(L.current=e.touches[0].clientX)},onTouchEnd:()=>{if(j)return;const e=E.current-L.current;if(!(Math.abs(e)<50))if(e>50)if("details"===p){if(y("likes"),U)try{localStorage.setItem("swipe_stats_seen","1"),_(!1)}catch(t){}}else"likes"===p?y("views"):"views"===p&&y("engagement");else e<-50&&("likes"===p?y("details"):"views"===p?y("likes"):"engagement"===p&&y("views"))},children:[t.jsxs("div",{className:"relative w-full pb-[75%] card-content",children:[t.jsx("img",{src:e.imageUrl,alt:e.title,className:"absolute top-0 left-0 w-full h-full object-cover rounded-t-xl card-content",onError:e=>{e.target.onerror=null,e.target.src="https://placehold.co/600x400/333333/ffffff?text=Video+Image+Unavailable"}}),e.pinned&&e.pinnedDays&&t.jsxs("div",{className:"absolute top-3 left-3 flex items-center rounded-lg px-2 py-1 shadow-md",style:{backgroundColor:"rgba(0, 0, 0, 0.7)"},children:[t.jsx(Ze,{name:"pin",size:14,className:"text-red-500 mr-1"}),t.jsxs("span",{className:"text-sm font-bold text-white",children:[e.pinnedDays,"d"]})]}),t.jsx("div",{className:"relative",children:$&&t.jsx("div",{className:"absolute top-3 left-3",children:t.jsxs("div",{className:"relative flex items-center rounded-lg px-2 py-1 text-xs font-medium text-current",style:{backgroundColor:"var(--color-final, #7C3AED)",color:"var(--color-final-text, #7C3AED)",opacity:.12},children:[t.jsx(Ze,{name:"pencil",size:14,className:"text-current mr-1"}),"Requested"]})})}),t.jsx("div",{className:"absolute bottom-3 right-3 bg-black bg-opacity-70 rounded-lg px-2 py-1",children:t.jsx("span",{className:"text-sm font-bold text-white",children:D})})]}),(()=>{switch(p){case"likes":return t.jsx(ft,{stats:z,selectedLanguage:g});case"views":return t.jsx(yt,{stats:z,selectedLanguage:g});case"engagement":return t.jsx(vt,{stats:z,selectedLanguage:g});default:return t.jsxs("div",{className:"p-4 relative",children:[t.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3 leading-6",style:Ve,children:e.title}),t.jsxs("p",{className:"text-sm text-gray-700 mb-2 leading-5",children:[r("by",g)," ",t.jsx("button",{className:"font-semibold underline hover:text-gray-900",style:{color:"var(--color-gold)",background:"transparent",padding:0},onClick:t=>{if(t.stopPropagation(),o){const t=u.filter(t=>t.author===e.author||t.authorId===e.authorId),r=t.length,a=0,s={avatar:e.authorAvatar||null,bio:"Creating engaging content for you",stats:{videos:t.length,requests:r,followers:a},verified:!1,joinedDate:(new Date).getFullYear()};o(e.author,!0,s,e.authorId)}},children:e.author})]}),t.jsxs("div",{className:"flex justify-between items-center mt-3",children:[t.jsxs("div",{className:"text-xs text-gray-500",children:[h(e.date)," Â· ",r("Requested by",g),t.jsx("button",{className:"text-gray-600 font-medium underline hover:text-gray-800 cursor-pointer ml-1 bg-transparent p-0",onClick:t=>{if(t.stopPropagation(),o){const t=u.filter(t=>t.requester===e.requester).length,r=0,a={avatar:e.requesterAvatar||null,bio:"Enjoying great content",stats:{videos:0,requests:t,followers:r},verified:!1,joinedDate:(new Date).getFullYear()};o(e.requester,!1,a,e.requester)}},children:e.requester})]}),t.jsx("div",{className:"flex items-end space-x-2",children:t.jsxs("div",{className:"relative flex flex-col items-center",children:[t.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 relative z-40",onClick:e=>{e.stopPropagation();try{const t=e.currentTarget.getBoundingClientRect();C(t),N(!0)}catch(t){C(null),N(!0)}},children:t.jsx(Ze,{name:"moreVertical",size:20})}),j&&t.jsx(Qe,{position:k,onClose:()=>N(!1),onReportClick:O,onPinClick:F,onBookmarkClick:()=>n&&n(e.id),isBookmarked:e.bookmarked,isPinned:e.pinned,pinnedDays:e.pinnedDays,onUnpinClick:()=>l&&l(e.id),onShareClick:()=>{i&&i(e)},onNotInterestedClick:()=>{c&&c(e.id)},onViewRequestClick:q,onAddToPlaylistClick:()=>{m&&m({id:e.id,url:e.videoUrl||e.url||e.src,title:e.title,imageUrl:e.imageUrl,author:e.author,requester:e.requester}),N(!1)},selectedLanguage:g}),"details"===p&&U&&t.jsxs("p",{className:"absolute bottom-[-16px] right-0 text-xs text-gray-400 whitespace-nowrap",children:["â† ",r("Swipe for stats",g)]})]})})]}),t.jsx("div",{className:"h-3"})]})}})(),t.jsx("div",{className:"flex justify-center p-2 pt-0",children:["details","likes","views","engagement"].map((e,r)=>{const a=e===p;return t.jsx("span",{className:`block w-2 h-2 mx-1 rounded-full transition-all duration-300 ${a?"w-3":"w-2"} ${a?"bg-gray-800":"bg-gray-300"}`,style:a?{backgroundColor:"var(--color-gold)"}:{},onClick:()=>{if(M(),U&&"details"!==e)try{localStorage.setItem("swipe_stats_seen","1"),_(!1)}catch(t){}y(e)}},r)})})]}),S&&t.jsx(it,{onClose:()=>I(!1),onPin:t=>{s(e.id,t)}})]})},gt=({setIsDrawerOpen:e,navigate:r,selectedLanguage:a,onLanguageSelect:s})=>{const[o,n]=f.useState(0);f.useEffect(()=>{const e=()=>{try{if(!window.localStorage.getItem("regaarder_token"))return void n(0);const t=window.localStorage.getItem("notifications_count");if(null!=t){const e=parseInt(t,10);if(!isNaN(e))return void n(e)}const r=window.localStorage.getItem("notifications");if(r)try{const e=JSON.parse(r);if(Array.isArray(e)){const t=e.filter(e=>e&&!e.read&&(e.title||e.text||e.message));return void n(t.length)}}catch(e){}}catch(e){}n(0)};e();const t=t=>{!t.key||"notifications_count"!==t.key&&"notifications"!==t.key||e()};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]);return t.jsxs("div",{className:"sticky top-0 z-[60] flex items-center justify-between px-5 py-3 bg-white border-b border-gray-100 transition-all",style:{paddingTop:"calc(12px + env(safe-area-inset-top, 0px))",paddingBottom:"12px",minHeight:"48px",height:"auto",marginBottom:"4px"},children:[t.jsx("div",{className:"flex items-center space-x-3",children:t.jsx("button",{type:"button",className:"min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center rounded-full p-2 hover:bg-gray-50 transition-all cursor-pointer active:scale-95",onClick:()=>e(!0),children:t.jsx(Ze,{name:"menu",size:20,className:"text-gray-700 pointer-events-none"})})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("button",{type:"button",className:"relative min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center rounded-full p-2 transition-all duration-150 cursor-pointer hover:bg-gray-50 active:bg-gray-100 active:scale-95",onClick:()=>{try{localStorage.setItem("requested_badge_seen","1")}catch(e){}r("/notifications?from=home")},children:[t.jsx(Ze,{name:"bell",size:20,className:"text-gray-700 pointer-events-none"}),o>0&&t.jsx("div",{className:"absolute -top-0.5 -right-0.5 rounded-full w-4 h-4 flex items-center justify-center text-[9px] font-medium text-black shadow-sm pointer-events-none",style:{backgroundColor:"var(--color-gold)"},children:o>9?"9+":String(o)})]}),t.jsx("button",{type:"button",className:"min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center rounded-full p-2 transition-all duration-150 cursor-pointer hover:bg-gray-50 active:bg-gray-100 active:scale-95",onClick:()=>{r("/settings")},children:t.jsx(Ze,{name:"settings",size:20,className:"text-gray-700 pointer-events-none"})})]})]})},ht=({searchTerm:e,setSearchTerm:a,navigate:s,onFocusChange:o,selectedLanguage:n="English",videos:l=[]})=>{const[i,c]=f.useState(!1),[d,m]=f.useState([]),[u,g]=f.useState(!1),[h,x]=f.useState(!1),[p,y]=f.useState(-1),[v,b]=f.useState({}),w=f.useRef(null),j=f.useRef(null),N=()=>window&&window.__BACKEND_URL__||"https://regaarder-pwin.onrender.com",k=e=>{if(!e||!l||!l.length)return[];const t=e.toLowerCase(),r=new Map;return l.forEach(e=>{const a=e.author||e.creator||e.channel||"";if(!a)return;const s=a.toLowerCase();s.includes(t)&&!r.has(s)&&r.set(s,{id:e.authorId||e.creatorId||e.userId||`local-${s}`,name:a,handle:e.authorHandle||e.creatorHandle||s.replace(/\s+/g,""),image:e.authorImage||e.creatorImage||e.authorAvatar||null,avatar:e.authorImage||e.creatorImage||e.authorAvatar||null,isCreator:!0,_localFallback:!0});const o=e.requester||"";if(o){const a=o.toLowerCase();a.includes(t)&&!r.has(a)&&r.set(a,{id:e.requesterId||`local-${a}`,name:o,handle:a.replace(/\s+/g,""),isCreator:!1,_localFallback:!0})}}),Array.from(r.values())},C=e=>{if(!e)return null;try{const t=N();let r=String(e||"");if(r.startsWith("uploaded:")){return`${t}/uploads/${r.split(":")[1]||r.slice(9)}`}return r.startsWith("http://")&&r.includes("onrender.com")&&(r=r.replace("http://","https://")),r}catch(t){return e}},S=()=>{if(w.current){const e=w.current.getBoundingClientRect();b({position:"fixed",top:e.bottom+8,left:e.left,width:e.width,zIndex:9999})}};f.useEffect(()=>{const e=e=>{if(w.current&&!w.current.contains(e.target)){const t=document.getElementById("creator-search-dropdown");if(t&&t.contains(e.target))return;x(!1),y(-1)}};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const I=e=>{a(e),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>(async e=>{if(!e||0===e.trim().length)return m([]),void x(!1);g(!0),x(!0),S();try{const s=N();let o=[];try{const t=new AbortController,r=setTimeout(()=>t.abort(),1e4),a=`${s}/creators?q=${encodeURIComponent(e)}`,n=await fetch(a,{signal:t.signal});if(clearTimeout(r),n.ok){const e=await n.json();o=e.creators||e.users||[]}}catch(t){"AbortError"===t.name?console.warn("[search] /creators timed out"):console.warn("[search] /creators failed:",t.message)}if(0===o.length)try{const t=new AbortController,r=setTimeout(()=>t.abort(),1e4),a=`${s}/users?q=${encodeURIComponent(e)}&creatorsOnly=1`,n=await fetch(a,{signal:t.signal});if(clearTimeout(r),n.ok){const e=await n.json();o=e&&e.users||(Array.isArray(e)?e:[])}}catch(r){console.warn("[search] /users also failed:",r.message)}if(0===o.length)try{const t=new AbortController,r=setTimeout(()=>t.abort(),1e4),a=`${s}/users?q=${encodeURIComponent(e)}`,n=await fetch(a,{signal:t.signal});if(clearTimeout(r),n.ok){const e=await n.json();o=e&&e.users||(Array.isArray(e)?e:[])}}catch(a){console.warn("[search] /users fallback also failed:",a.message)}let n=o.map(e=>{const t=C(e.image||e.avatar||e.photoURL||e.profilePicture||e.profileImage);return{...e,isCreator:!0===e.isCreator||!0===e.is_creator,image:t||e.image||e.avatar||e.photoURL||null,avatar:t||e.avatar||e.image||null,photoURL:t||e.photoURL||e.image||null,price:e.price||e.pricePerRequest||null,followers:e.followers||e.followers_count||e.followersCount||null}});if(0===n.length){const t=k(e);t.length>0&&(n=await Promise.all(t.map(async e=>{try{const t=e.id||e.name,r=await fetch(`${s}/users/${encodeURIComponent(t)}`);if(r.ok){const t=await r.json(),a=t.user||t;if(a&&!a.isPlaceholder)return{...e,...a,isCreator:!0,image:C(a.image||a.avatar||a.profileImage||e.image),avatar:C(a.avatar||a.image||a.profileImage||e.avatar),photoURL:C(a.photoURL||a.image||a.profileImage||e.image),followers:a.followers||a.followers_count||0,price:a.price||a.pricePerRequest||e.price||null}}}catch(t){}return e})))}const l=new Set;n=n.filter(e=>{const t=e.id||e.email||e.name;return!l.has(t)&&(l.add(t),!0)}),m(n),x(!0),y(-1),S()}catch(s){console.warn("creator search error",s);const t=k(e);m(t),x(!0)}finally{g(!1)}})(e),250)},E=e=>{try{const r=e.followersCount||e.followers||e.stats?.followers||e.followers_count||null,a=C(e.image||e.avatar||e.profileImage||e.photoURL||null),s={id:e.id||e.handle||e.username||String(e.name||"").replace(/^@+/,"").toLowerCase(),name:e.handle?`@${e.handle}`:e.username?`@${e.username}`:e.name||"",displayName:e.name||e.handle||e.username||"",handle:e.handle||e.username,username:e.username||e.handle,email:e.email||null,image:a,photoURL:a,profileImage:a,followers:r,price:e.price||e.pricePerRequest||0};try{window.localStorage.setItem("ideas_selectedCreator_v1",JSON.stringify(s)),window.dispatchEvent(new Event("ideas:creator_selected"))}catch(t){}}catch(t){console.warn("persist creator failed",t)}if(o)try{o(!1)}catch(t){}try{window.setFooterTab&&window.setFooterTab("ideas")}catch(t){}try{s?s("/ideas"):window.location.href="/ideas"}catch(t){window.location.href="/ideas"}},L=`\n        mx-5 my-4 p-3 flex items-center bg-white rounded-xl transition-all duration-300 border border-gray-200 shadow-sm relative\n        ${i?"ring-2 ring-offset-2 ring-offset-gray-50 ring-gray-400 border-gray-400 shadow-xl":""}\n    `;return t.jsxs("div",{className:L,ref:w,children:[t.jsx(Ze,{name:"search",size:20,className:"text-gray-400 mr-2"}),t.jsx("input",{type:"text",placeholder:r("Search creators or videos...",n),className:"flex-1 text-base placeholder-gray-400 text-gray-700 focus:outline-none bg-transparent",value:e,onChange:e=>e.target.value.length<80?I(e.target.value):null,onFocus:()=>{if(c(!0),o)try{o(!0)}catch(e){}d&&d.length&&(x(!0),S())},onBlur:()=>{c(!1)},onKeyDown:t=>{if("Enter"===t.key&&!h){t.preventDefault();const r=e.trim();if(r.startsWith("@")){const e=r.substring(1);if(e.length>0)return void(window.location.href=`/@${e}?request=true`)}}h&&("ArrowDown"===t.key?(t.preventDefault(),y(e=>Math.min(e+1,d.length-1))):"ArrowUp"===t.key?(t.preventDefault(),y(e=>Math.max(e-1,0))):"Enter"===t.key?(t.preventDefault(),p>=0&&d[p]&&E(d[p])):"Escape"===t.key&&(x(!1),y(-1)))},"aria-autocomplete":"list"}),e&&t.jsx("button",{onClick:()=>{if(a(""),m([]),x(!1),o)try{o(!1)}catch(e){}},className:"p-1 ml-2 transition duration-150",onMouseDown:e=>e.preventDefault(),"aria-label":"Clear search",children:t.jsx(Ze,{name:"x",size:20,className:"text-gray-400 hover:text-gray-700"})}),h&&t.jsx("div",{id:"creator-search-dropdown",style:v,children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-gray-100",style:{maxHeight:"50vh",overflowY:"auto",overscrollBehavior:"contain",WebkitOverflowScrolling:"touch",width:"100%"},children:[u&&t.jsx("div",{className:"p-3 text-sm text-gray-500",children:"Searching creators..."}),!u&&0===d.length&&t.jsx("div",{className:"p-3 text-sm text-gray-500",children:"No creators found"}),!u&&d.map((e,r)=>{const a=e.username||e.handle||"",s=e.followersCount||e.followers||e.stats?.followers||e.followers_count||null,o=a?`@${a}${s?` â€¢ ${s} followers`:""}${e.price?` â€¢ $${e.price}`:""}`:s?`${s} followers${e.price?` â€¢ $${e.price}`:""}`:e.price?`$${e.price}`:e.tagline||e.category||(e.isCreator?"Creator":"User"),n=e.image||e.avatar||e.profileImage||e.photoURL||null;return t.jsxs("button",{onMouseDown:e=>{e.preventDefault()},onClick:()=>E(e),className:"w-full text-left px-4 py-3 hover:bg-gray-50 flex items-center justify-between "+(p===r?"bg-gray-50":""),children:[t.jsxs("div",{className:"flex items-center",style:{flex:1,minWidth:0},children:[n?t.jsx("img",{src:n,alt:e.name,className:"w-10 h-10 rounded-full object-cover mr-3",style:{flexShrink:0},onError:e=>{e.target.onerror=null,e.target.src="",e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="flex")}}):null,t.jsx("div",{style:{width:40,height:40,borderRadius:"50%",backgroundColor:["#f87171","#34d399","#a78bfa","#60a5fa","#fbbf24","#ec4899","#fb923c","#4ade80"][(e.name||"U").charCodeAt(0)%8],display:n?"none":"flex",alignItems:"center",justifyContent:"center",flexShrink:0,marginRight:12,color:"#fff",fontSize:18,fontWeight:700,textTransform:"uppercase"},children:(e.name||"U").charAt(0)}),t.jsxs("div",{className:"flex flex-col text-sm",style:{minWidth:0},children:[t.jsx("span",{className:"font-semibold text-gray-900",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.name||e.handle||"Unknown"}),t.jsx("span",{className:"text-xs text-gray-500",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o})]})]}),e.price?t.jsxs("div",{style:{fontSize:15,fontWeight:700,color:"#16a34a",marginLeft:8,whiteSpace:"nowrap",padding:"4px 10px",backgroundColor:"#f0fdf4",borderRadius:8,border:"1px solid #bbf7d0"},children:["$",e.price]}):null]},e.id||e.email||r)})]})})]})},xt=({activeTab:e,setActiveTab:a,selectedLanguage:s="English"})=>{const o=e||"Recommended",n=a||(()=>{}),l=[{name:"Recommended",icon:"star"},{name:"Trending Now",icon:"chart"},{name:"New",icon:"clock"}],[i,c]=f.useState([...l,{name:"Travel",icon:"globe"},{name:"Education",icon:"book"},{name:"Entertainment",icon:"film"},{name:"Music",icon:"music"},{name:"Sports",icon:"dumbbell"}]);return f.useEffect(()=>{(async()=>{try{const e=window&&window.__BACKEND_URL__||"https://regaarder-pwin.onrender.com",t=await fetch(`${e}/categories`);if(t.ok){const e=(await t.json()).map(e=>{const t={travel:"globe",education:"book",entertainment:"film",music:"music",sports:"dumbbell",gaming:"zap",tech:"monitor",technology:"monitor",science:"sparkles",finance:"dollar-sign",business:"dollar-sign",money:"dollar-sign",health:"heart",fitness:"dumbbell",wellness:"heart",food:"camera",cooking:"camera",fashion:"sparkles",art:"palette",design:"palette",beauty:"sparkles",comedy:"sparkles",humor:"sparkles",funny:"sparkles",news:"globe",politics:"flag",history:"clock",love:"heart",romance:"heart",relationships:"heart",lifestyle:"sun",motivation:"zap",inspiration:"zap",golf:"flag",nature:"globe",animals:"eye",cars:"zap",auto:"zap",markets:"chart",crypto:"dollar-sign",stocks:"chart",investing:"chart",photography:"camera",film:"film",movies:"film",diy:"sparkles",crafts:"sparkles",other:"star"}[e.toLowerCase()]||"tag";return{name:e,icon:t}});c([...l,...e])}}catch(e){console.error("Failed to load categories",e)}})()},[]),t.jsx("div",{className:"flex px-5 pb-4 overflow-x-auto whitespace-nowrap",children:i.map(e=>{const a=e.name===o;let l="flex items-center text-sm px-4 py-2.5 mr-3 transition duration-150 ease-in-out",i={borderRadius:"8px"};return a?(l+=" text-black font-bold",i.backgroundColor="var(--color-gold)",i.boxShadow="\n                        0 4px 10px rgba(0, 0, 0, 0.3), \n                        0 0 10px var(--color-gold-light), \n                        inset 0 1px 0 rgba(255, 255, 255, 0.6) \n                    "):(l+=" bg-white text-gray-600 font-medium shadow-sm shadow-gray-200 hover:bg-gray-50",i.boxShadow="\n                        0 1px 3px rgba(0, 0, 0, 0.05), \n                        inset 0 1px 0 #ffffff \n                    "),t.jsxs("button",{className:l,style:i,onClick:()=>n(e.name),children:[e.icon&&t.jsx(Ze,{name:e.icon,size:16,className:"mr-2",style:{color:a?"black":"#71717A"}}),r(e.name,s)]},e.name)})})},pt=({iconName:e,value:r,label:a,iconColor:s,valueColor:o="text-gray-800"})=>t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx(Ze,{name:e,size:20,className:"mr-4",style:{color:s}}),t.jsx("span",{className:`text-base font-semibold w-auto ${o}`,children:r}),t.jsx("span",{className:"text-base text-gray-500 ml-2",children:a})]}),ft=({stats:e,selectedLanguage:a="English"})=>t.jsxs("div",{className:"p-4 pt-6 pb-2",children:[t.jsx(pt,{iconName:"heart",value:e.likes,label:r("Likes",a),iconColor:"var(--color-gold)"}),t.jsx(pt,{iconName:"heartOff",value:e.dislikes,label:r("Dislikes",a),iconColor:"var(--color-danger)"}),t.jsx("p",{className:"text-xs text-gray-400 mt-4 text-center",children:r("Swipe for stats",a)}),t.jsx("div",{className:"h-6"})]}),yt=({stats:e,selectedLanguage:a="English"})=>t.jsxs("div",{className:"p-4 pt-6 pb-2",children:[t.jsx(pt,{iconName:"eye",value:e.views,label:r("Views",a),iconColor:"var(--color-gold)"}),t.jsx(pt,{iconName:"message",value:e.comments,label:r("Comments",a),iconColor:"#57606C"}),t.jsx("p",{className:"text-xs text-gray-400 mt-4 text-center",children:r("Swipe left for engagement stats",a)}),t.jsx("div",{className:"h-6"})]}),vt=({stats:e,selectedLanguage:a="English"})=>t.jsxs("div",{className:"p-4 pt-6 pb-2",children:[t.jsx(pt,{iconName:"share",value:e.shares,label:r("Shares",a),iconColor:"#10B981"}),t.jsx(pt,{iconName:"trendingUp",value:`${e.retentionRate} ${r("retention rate",a)}`,label:`(${e.retentionPercentage})`,iconColor:"#A78BFA",valueColor:"text-gray-800"}),t.jsx("p",{className:"text-xs text-gray-400 mt-4 text-center",children:r("Swipe right to return",a)}),t.jsx("div",{className:"h-6"})]}),bt=({searchTerm:e="",navigate:r,selectedLanguage:a="English",onOpenSupportTicket:s,showWelcomeModals:o=!1,isDrawerOpen:n=!1})=>{const l=f.useRef(!1),[i,c]=f.useState(!1),[d,m]=f.useState(()=>{try{return"1"===window.localStorage.getItem("fab_dismissed")}catch(e){return!1}}),u=f.useRef(0),g=f.useRef(0),h=f.useRef(0),x=f.useRef(0),[p,y]=f.useState(0),[v,b]=f.useState(0),[w,j]=f.useState(!1),[N,k]=f.useState(()=>{try{const e=window.localStorage.getItem("fab_position");return e?JSON.parse(e):{right:24,bottom:130}}catch(e){return{right:24,bottom:130}}}),C=()=>{try{"function"==typeof s&&s()}catch(e){console.warn("Support ticket modal open failed",e)}};f.useEffect(()=>{try{window.localStorage.setItem("fab_position",JSON.stringify(N))}catch(e){}},[N]),f.useEffect(()=>{const e=e=>{if("fab_dismissed"===e.key)try{m("1"===window.localStorage.getItem("fab_dismissed"))}catch(t){}if("fab_position"===e.key)try{const e=window.localStorage.getItem("fab_position");e&&k(JSON.parse(e))}catch(t){}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);if(d)return null;if(window.showLaunchScreen)return null;if(o)return null;if(n)return null;const S=Math.max(20,Math.min(window.innerHeight-56-20,N.bottom)),I=Math.max(20,Math.min(window.innerWidth-56-20,N.right));return t.jsx("button",{className:`fixed w-14 h-14 rounded-full flex items-center justify-center transition-all duration-300 cursor-grab ${w?"cursor-grabbing":""} ${i?"scale-95 shadow-lg":""}`,style:{bottom:`${S}px`,right:`${I}px`,transform:w?`translateX(${p}px) translateY(${v}px)`:"none",transition:w?"none":"transform 0.2s ease-out, bottom 0.2s ease-out, right 0.2s ease-out",backgroundColor:"var(--color-gold)",boxShadow:i?"0 8px 20px rgba(0, 0, 0, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.15)",border:"none",zIndex:50,touchAction:"none"},onMouseDown:e=>{try{e&&e.preventDefault&&e.preventDefault()}catch(t){}c(!0),l.current=!1},onTouchStart:e=>{e.touches&&0!==e.touches.length&&(e.preventDefault(),e.stopPropagation(),l.current=!1,u.current=e.touches[0].clientX,g.current=e.touches[0].clientY,h.current=0,x.current=0,y(0),b(0),j(!0))},onTouchMove:e=>{if(!w||!e.touches||0===e.touches.length)return;e.preventDefault(),e.stopPropagation();const t=e.touches[0].clientX-u.current,r=e.touches[0].clientY-g.current;h.current=t,x.current=r,y(t),b(r)},onTouchEnd:e=>{e.preventDefault(),e.stopPropagation(),j(!1);const t=h.current||0,r=x.current||0;if(Math.abs(t)>60)(()=>{try{window.localStorage.setItem("fab_dismissed","1")}catch(e){}m(!0)})();else if(Math.abs(t)>2||Math.abs(r)>2){const e={right:N.right-t,bottom:N.bottom-r};k(e);try{window.localStorage.setItem("fab_position",JSON.stringify(e))}catch(a){}h.current=0,x.current=0,y(0),b(0)}else C(),h.current=0,x.current=0,y(0),b(0)},onMouseUp:()=>c(!1),onMouseLeave:()=>c(!1),onClick:e=>{e.preventDefault(),e.stopPropagation(),C()},title:"Contact Support - Drag to move",children:t.jsx(je,{size:26,className:"text-black",strokeWidth:1.5})})},wt=({selectedLanguage:e="English"})=>t.jsx(S,{selectedLanguage:e,activeTabOverride:"Home"}),jt=w.memo(({data:e,onClose:r,onExpand:a,onUpdateData:s,navigate:o,onMiniPlayerReady:n})=>{const l=f.useRef(null),i=f.useRef(null),[c,d]=f.useState({right:16,bottom:100}),m=f.useRef({isDragging:!1,hasMoved:!1,startX:0,startY:0,startRight:0,startBottom:0}),[u,g]=f.useState(!(e&&e.paused)),[h,x]=f.useState(!1),[p,y]=f.useState(!0),v=f.useRef(null),b=f.useRef(!1),w=f.useRef(e?.time||0),j=f.useRef(e?.paused),N=f.useRef(Math.floor(e?.time||0)),k=e?.video?.src||e?.video?.videoUrl||e?.video?.url||"",C=(S=k)&&(S.includes("youtube.com")||S.includes("youtu.be"));var S;const I=C?(e=>{if(!e)return"";if(e.includes("youtu.be/"))return e.split("youtu.be/")[1].split(/[?&#]/)[0];if(e.includes("youtube.com"))try{return new URL(e).searchParams.get("v")||""}catch{return""}return""})(k):"",E=C?k:T(k)||k,L=e?.video?.imageUrl||e?.video?.thumbnail||e?.imageUrl||(I?`https://img.youtube.com/vi/${I}/mqdefault.jpg`:"");f.useEffect(()=>{h&&!b.current&&n&&(b.current=!0,n())},[h,n]),f.useEffect(()=>{if(C){y(!0);const e=setTimeout(()=>{x(!0),v.current=setTimeout(()=>y(!1),400)},800);return()=>{clearTimeout(e),clearTimeout(v.current)}}const e=l.current;if(!e||!E)return;x(!1),E&&e.src!==E&&(e.src=E,e.load());const t=()=>{try{N.current>0&&(e.currentTime=N.current)}catch(t){}!1!==j.current&&null!=j.current||(e.muted=!0,e.volume=0,e.playsInline=!0,e.autoplay=!0,e.play().then(()=>{g(!0),setTimeout(()=>{try{e.muted=!1}catch{}try{e.volume=1}catch{}},600),setTimeout(()=>{try{e.muted&&(e.muted=!1)}catch{}try{e.volume<1&&(e.volume=1)}catch{}},1500)}).catch(()=>{}))},r=()=>{try{x(!0)}catch(e){}};e.addEventListener("loadedmetadata",t),e.addEventListener("loadeddata",r);const a=()=>{x(!0)},s=()=>{x(!1)};return e.addEventListener("playing",a),e.addEventListener("timeupdate",a),e.addEventListener("canplay",a),e.addEventListener("canplaythrough",a),e.addEventListener("error",s),e.readyState>=1&&t(),e.readyState>=3&&x(!0),()=>{e.removeEventListener("loadedmetadata",t),e.removeEventListener("loadeddata",r),e.removeEventListener("playing",a),e.removeEventListener("timeupdate",a),e.removeEventListener("canplay",a),e.removeEventListener("canplaythrough",a),e.removeEventListener("error",s)}},[E]),f.useEffect(()=>{if(!C||!I)return;const e=()=>{try{i.current&&i.current.contentWindow&&i.current.contentWindow.postMessage(JSON.stringify({event:"listening",id:I}),"*")}catch{}},t=e=>{try{let t=e.data;if("string"==typeof t&&(t=JSON.parse(t)),!t||!t.info)return;const r=t.info;"number"==typeof r.currentTime&&(w.current=r.currentTime),"number"==typeof r.duration&&r.duration>0&&s&&s(e=>e.duration===r.duration?e:{...e,duration:r.duration}),"number"==typeof r.playerState&&g(1===r.playerState)}catch{}};window.addEventListener("message",t);const r=()=>{try{i.current&&i.current.contentWindow&&i.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*")}catch{}},a=()=>{try{i.current&&i.current.contentWindow&&(i.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"unMute"}),"*"),i.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"setVolume",args:[100]}),"*"))}catch{}},o=setTimeout(e,200),n=setTimeout(e,500),l=setTimeout(e,1e3),c=setTimeout(e,2e3),d=setInterval(e,500),m=setTimeout(()=>{r(),a()},800),u=setTimeout(()=>{r(),a()},2e3);return()=>{window.removeEventListener("message",t),clearTimeout(o),clearTimeout(n),clearTimeout(l),clearTimeout(c),clearTimeout(m),clearTimeout(u),clearInterval(d)}},[C,I]);const[R,$]=f.useState(!1),[P,U]=f.useState({width:220,height:172}),_=e=>{const t=e.touches?e.touches[0].clientX:e.clientX,r=e.touches?e.touches[0].clientY:e.clientY,a=m.current;a.isDragging=!1,a.hasMoved=!1,a.startX=t,a.startY=r,a.startRight=c.right,a.startBottom=c.bottom,a.startWidth=P.width,a.startHeight=P.height;const s=e.target||e.touches&&e.touches[0]&&e.touches[0].target;s&&s.dataset&&"true"===s.dataset.resize?($(!0),a.isResizing=!0):($(!1),a.isResizing=!1)},D=e=>{const t=e.touches?e.touches[0].clientX:e.clientX,r=e.touches?e.touches[0].clientY:e.clientY,a=m.current,s=t-a.startX,o=r-a.startY;if(!a.isDragging&&!a.isResizing&&Math.sqrt(s*s+o*o)>5&&(a.isResizing||(a.isDragging=!0,a.hasMoved=!0)),a.isResizing){const e=Math.max(180,Math.min(400,a.startWidth-s)),t=Math.max(140,Math.min(300,a.startHeight-o));U({width:e,height:t})}else if(a.isDragging){const e=Math.max(8,Math.min(window.innerWidth-P.width,a.startRight-s)),t=Math.max(8,Math.min(window.innerHeight-P.height,a.startBottom-o));d({right:e,bottom:t})}},A=e=>{const t=m.current;t.isDragging=!1,t.isResizing=!1,$(!1)},z=e=>{if(C&&i.current){try{const t=w.current||0,r=Math.max(0,t+e);i.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[r,!0]}),"*"),w.current=r,s&&s(e=>({...e,time:r})),setTimeout(()=>{try{i.current&&i.current.contentWindow&&i.current.contentWindow.postMessage(JSON.stringify({event:"listening",id:I}),"*")}catch{}},300)}catch{}return}const t=l.current;t&&(t.currentTime=Math.max(0,Math.min(t.duration,t.currentTime+e)))},[M,O]=f.useState(!1),B=f.useRef(null),q=()=>{try{clearTimeout(B.current)}catch(e){}O(!0)};return f.useEffect(()=>{R&&q()},[R]),t.jsxs("div",{onTouchStart:e=>{_(e),q()},onTouchMove:e=>{D(e),q()},onTouchEnd:e=>{A()},onMouseDown:e=>{_(e),q()},onMouseMove:e=>{D(e),q()},onMouseUp:e=>{A()},onClick:t=>{if(!m.current.hasMoved&&!m.current.isResizing){if(a){const e=C?w.current||0:l.current?l.current.currentTime:0;return void a(e)}{He();const t=e.video||{},a=new URLSearchParams,n=t.id||t.videoId||t.src||t.url||"",i=t.src||t.videoUrl||t.url||"";n&&a.set("id",n),i&&a.set("src",i),t.title&&a.set("title",t.title);const c=e.creatorName||t.creator||t.author||t.channel||"";c&&a.set("channel",c);const d=C?w.current:l.current?l.current.currentTime:0;d>0&&a.set("t",String(Math.floor(d)));try{const r={id:n,url:i,videoUrl:i,src:i,title:t.title||"Video",creator:c,creatorName:c,imageUrl:t.imageUrl||e.imageUrl||null,timestamp:Date.now()};localStorage.setItem("videoplayer_quick_load",JSON.stringify(r))}catch(s){console.error("Failed to store video data:",s)}r&&r();try{o(`/videoplayer?${a.toString()}`,{state:{miniPlayerData:e}})}catch(s){console.warn("navigate failed, using location.href:",s),window.location.href=`/videoplayer?${a.toString()}`}}}},style:{position:"fixed",right:c.right,bottom:c.bottom,width:P.width,height:P.height,zIndex:55,borderRadius:16,overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.4)",background:"#fff",cursor:"grab",touchAction:"none",display:"flex",flexDirection:"column",opacity:1,transform:"scale(1)",pointerEvents:"auto",transition:"opacity 0.3s ease-out"},children:[t.jsx("div",{"data-resize":"true",style:{position:"absolute",top:0,left:0,width:44,height:44,zIndex:20,cursor:"nwse-resize",display:"flex",alignItems:"center",justifyContent:"center",opacity:(M||R)&&h?1:0,transition:"opacity 0.2s",pointerEvents:"auto",touchAction:"none"},children:t.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",style:{filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.5))",pointerEvents:"none"},children:t.jsx("path",{d:"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"})})}),t.jsxs("div",{style:{width:"100%",height:P.height-48,position:"relative",overflow:"hidden",background:"#000",backgroundImage:L?`url(${L})`:"none",backgroundSize:"cover",backgroundPosition:"center"},children:[!h&&t.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#000",backgroundImage:L?`url(${L})`:"none",backgroundSize:"cover",backgroundPosition:"center",zIndex:5}}),C&&I?t.jsxs(t.Fragment,{children:[t.jsx("iframe",{ref:i,src:`https://www.youtube-nocookie.com/embed/${I}?autoplay=1&mute=1&controls=0&modestbranding=1&showinfo=0&rel=0&iv_load_policy=3&fs=0&disablekb=1&playsinline=1&enablejsapi=1&start=${N.current}`,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!1,style:{position:"absolute",inset:0,width:"100%",height:"100%",background:"#000",border:"none",pointerEvents:"none",opacity:h?1:0,transform:"scale(1.3)",transformOrigin:"center center"},title:"MiniPlayer YouTube"}),t.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"15%",background:"linear-gradient(to top, #000 20%, transparent 100%)",zIndex:2,pointerEvents:"none"}}),t.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"10%",background:"linear-gradient(to bottom, #000 5%, transparent 100%)",zIndex:2,pointerEvents:"none"}}),t.jsx("div",{style:{position:"absolute",inset:0,zIndex:4,background:"#000",backgroundImage:L?`url(${L})`:"none",backgroundSize:"cover",backgroundPosition:"center",opacity:p?1:0,transition:"opacity 0.5s ease-out",pointerEvents:"none"}}),t.jsx("div",{style:{position:"absolute",inset:0,zIndex:5}})]}):t.jsx("video",{ref:l,playsInline:!0,poster:L||void 0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#000",objectFit:"cover",visibility:h?"visible":"hidden"}}),t.jsx("button",{onClick:e=>{e.stopPropagation(),r&&r()},style:{position:"absolute",top:6,right:6,width:24,height:24,borderRadius:"50%",background:"rgba(0,0,0,0.6)",color:"#fff",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10,opacity:M?1:0,transition:"opacity 0.2s",pointerEvents:M?"auto":"none"},children:"âœ•"})]}),t.jsxs("div",{style:{width:"100%",height:48,background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-evenly",borderTop:"1px solid rgba(0,0,0,0.05)",pointerEvents:"auto",flexShrink:0},onClick:e=>e.stopPropagation(),children:[t.jsx("button",{onClick:e=>{e.stopPropagation(),z(-10)},className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 active:scale-95 transition-transform",children:t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#333",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),t.jsx("path",{d:"M3 3v5h5"}),t.jsx("text",{x:"12",y:"17",fontSize:"8",fill:"#333",textAnchor:"middle",stroke:"none",fontWeight:"bold",children:"10"})]})}),t.jsx("button",{onClick:e=>{if(e.stopPropagation(),C&&i.current){try{u?(i.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*"),g(!1),s&&s(e=>({...e,paused:!0,time:w.current}))):(y(!0),clearTimeout(v.current),i.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*"),g(!0),s&&s(e=>({...e,paused:!1})),v.current=setTimeout(()=>y(!1),600))}catch{}return}const t=l.current;if(t)if(t.paused){try{t.muted=!1}catch{}try{t.volume=1}catch{}t.play().catch(()=>{}),g(!0),s&&s(e=>({...e,paused:!1}))}else t.pause(),g(!1),s&&s(e=>({...e,paused:!0}))},className:"w-12 h-12 flex items-center justify-center rounded-full hover:bg-gray-100 active:scale-95 transition-transform",children:u?t.jsxs("svg",{width:"18",height:"22",viewBox:"0 0 24 24",fill:"#111",children:[t.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),t.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}):t.jsx("svg",{width:"20",height:"22",viewBox:"0 0 24 24",fill:"#111",children:t.jsx("path",{d:"M5 3l14 9-14 9V3z"})})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),z(10)},className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 active:scale-95 transition-transform",children:t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#333",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M21 12a9 9 0 1 1-9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),t.jsx("path",{d:"M21 3v5h-5"}),t.jsx("text",{x:"12",y:"17",fontSize:"8",fill:"#333",textAnchor:"middle",stroke:"none",fontWeight:"bold",children:"10"})]})})]})]})});export{mt as default};
