import{j as e,g as s}from"./index-BquHsqrT.js";import{b as t}from"./vendor-Cml8jNaD.js";import{W as r}from"./config-DzyQUiLS.js";import{S as a}from"./SharedBottomBar-DxwbZ5xd.js";import{C as l}from"./chevron-left-BrX7WC8Y.js";import{U as n}from"./users-c4dz1qD3.js";import{C as o}from"./check-circle-2-C59Pf51j.js";import{C as i}from"./copy-BEW1qiRB.js";import{S as c}from"./share-2-BNJ0ZBNA.js";import"./home-Boow_oaN.js";import"./pencil-ff90-lub.js";const d=(e,s)=>{try{const t=getComputedStyle(document.documentElement).getPropertyValue(e);return t?t.trim():s}catch(t){return s}},x=d("--color-accent","#CA8A04"),m=d("--color-accent-soft","rgba(202, 138, 4, 0.12)");d("--color-gold-light-bg","rgba(202, 138, 4, 0.1)");const u=()=>{const[d,u]=t.useState(()=>("undefined"!=typeof window?localStorage.getItem("regaarder_language"):"English")||"English"),[f,j]=t.useState(!0),[b,y]=t.useState(null),[p,v]=t.useState(0),[w,N]=t.useState(!1),[C,k]=t.useState(!1),[S,E]=t.useState(null),[F,L]=t.useState(!0);t.useEffect(()=>{const e=()=>{u(localStorage.getItem("regaarder_language")||"English")};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);const R=e=>s(e,d);t.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("regaarder_token");if(!e)return void L(!1);const s=window&&window.__BACKEND_URL__||"https://pwin.onrender.com",t=await fetch(`${s}/users/me`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();E(e.user),v(e.user.referralCount||0)}}catch(e){console.error("Error fetching user info:",e)}finally{L(!1)}})()},[]);const U=()=>S?`${r}/join?code=${S.referralCode||S.id}`:"",_=()=>S?.referralCode||"",A=()=>{const e=U();navigator.clipboard.writeText(e),k(!0),setTimeout(()=>k(!1),2e3)};return F?e.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-500",children:R("Loading...")}):e.jsxs("div",{className:"min-h-screen text-gray-900",style:{background:"linear-gradient(135deg, rgba(var(--color-gold-rgb), 0.03) 0%, white 50%)"},children:[e.jsxs("div",{className:"max-w-md mx-auto px-4 pt-6 pb-28 relative",children:[e.jsx("button",{onClick:()=>window.setFooterTab("Home"),className:"absolute top-6 left-4 p-2 hover:bg-gray-100 rounded-full transition",children:e.jsx(l,{className:"w-6 h-6",style:{color:x}})}),e.jsx("div",{className:"mb-8 pt-2 w-full",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 rounded-full mb-3",style:{backgroundColor:m},children:e.jsx(n,{className:"w-6 h-6",style:{color:x}})}),e.jsx("h1",{className:"text-2xl font-bold mb-1",children:R("Get Rewarded for Sharing")}),e.jsx("p",{className:"text-gray-500 text-sm max-w-xs",children:R("Invite friends and unlock exclusive benefits")})]})}),e.jsxs("div",{className:"rounded-2xl border-2 p-6 mb-8",style:{borderColor:x,backgroundColor:"#FAFAF8"},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:R("Friends invited")}),e.jsx("p",{className:"text-4xl font-bold",style:{color:x},children:p})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2 font-semibold",children:R("Your Referral Code")}),e.jsxs("div",{className:"p-4 bg-white rounded-lg border-2 flex items-center space-x-3",style:{borderColor:x},children:[e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-lg font-bold tracking-widest",style:{color:x},children:_()||"â€”"})}),e.jsx("button",{onClick:()=>{const e=_();navigator.clipboard.writeText(e),N(!0),setTimeout(()=>N(!1),2e3)},className:"p-2 hover:bg-gray-100 rounded transition flex-shrink-0",title:R("Copy code"),disabled:!_(),children:w?e.jsx(o,{className:"w-5 h-5",style:{color:x}}):e.jsx(i,{className:"w-5 h-5 text-gray-600"})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2 font-semibold",children:R("Or share your link")}),e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-gray-200 flex items-center space-x-2 text-sm",children:[e.jsx("span",{className:"text-gray-600 flex-1 truncate text-xs",children:U()}),e.jsx("button",{onClick:A,className:"p-2 hover:bg-gray-100 rounded transition flex-shrink-0",title:R("Copy link"),children:C?e.jsx(o,{className:"w-5 h-5",style:{color:x}}):e.jsx(i,{className:"w-5 h-5 text-gray-600"})})]})]}),e.jsxs("button",{onClick:()=>{navigator.share?navigator.share({title:R("Get Rewarded for Sharing"),text:`Join with my referral code: ${_()}`,url:U()}):A()},className:"w-full py-3 rounded-lg font-semibold text-white transition-all active:scale-95 flex items-center justify-center space-x-2",style:{backgroundColor:x},children:[e.jsx(c,{className:"w-5 h-5"}),e.jsx("span",{children:R("Share Referral Link")})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-6 text-center",children:R("How it works")}),e.jsx("div",{className:"space-y-4",children:[{num:1,title:R("Share your link"),desc:R("Copy and send to friends via any platform")},{num:2,title:R("They sign up"),desc:R("Your friend creates an account using your link")},{num:3,title:R("Earn rewards"),desc:R("Unlock benefits as you reach each tier")},{num:4,title:R("Rewards activate instantly"),desc:R("Use your new benefits right away")}].map((s,t)=>e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 font-bold text-white",style:{backgroundColor:x},children:s.num}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:s.desc})]})]},t))})]})]}),f&&e.jsx(h,{onUserClick:()=>{j(!1),y("user")},onCreatorClick:()=>{j(!1),y("creator")},onClose:()=>j(!1),selectedLanguage:d}),b&&e.jsx(g,{type:b,onClose:()=>y(null),selectedLanguage:d}),e.jsx(a,{selectedLanguage:d})]})},h=({onUserClick:t,onCreatorClick:r,onClose:a,selectedLanguage:l})=>{const n=e=>s(e,l);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl p-8 mx-4 relative",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold",children:n("Earn Rewards")}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:n("Invite friends and unlock exclusive benefits")})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:t,className:"w-full py-4 px-4 rounded-2xl font-semibold text-white transition-all active:scale-95 text-lg",style:{backgroundColor:x},children:n("Refer Users")}),e.jsx("button",{onClick:r,className:"w-full py-4 px-4 rounded-2xl font-semibold transition-all active:scale-95 text-lg",style:{backgroundColor:"#F3F4F6",color:x,border:`2px solid ${x}`},children:n("Refer Creators")})]})]})})},g=({type:t,onClose:r,selectedLanguage:a})=>{const l=e=>s(e,a),n=l("user"===t?"For Users":"For Creators"),o="user"===t?e.jsxs("p",{className:"text-gray-600 mb-8 text-center text-sm mt-2",children:["ğŸ Invite a ",e.jsx("strong",{children:"friend"})," and ",e.jsx("strong",{children:"both of you receive 5 free requests"}),". ğŸ"]}):e.jsxs("p",{className:"text-gray-600 mb-8 text-center text-sm mt-2",children:["ğŸ Give a ",e.jsx("strong",{children:"creator"})," you know a limited opportunity to ",e.jsx("strong",{children:"earn up to 15% more on Regaarder for 30 days"}),". ğŸ"]});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl p-8 mx-4 max-h-[80vh] overflow-y-auto relative",children:[e.jsx("h2",{className:"text-2xl font-bold text-center",children:n}),o,e.jsx("button",{onClick:r,className:"w-full py-3 rounded-lg font-semibold text-white transition-all active:scale-95",style:{backgroundColor:x},children:l("Got it")})]})})};export{u as default};
