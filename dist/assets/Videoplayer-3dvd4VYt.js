const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/home-CN_asF5T.js","assets/index-BZKzq6T1.js","assets/vendor-Cml8jNaD.js","assets/index-CLKSAEKd.css","assets/StaffLoginModal-2u2PJCtX.js","assets/alert-circle-XIDTAo2-.js","assets/SharedBottomBar-CuTRwZs0.js","assets/home-BdZ4crgw.js","assets/pencil-FVDXLLel.js","assets/video-DHc9PJQl.js","assets/x-CNEZNgOK.js","assets/config-BQFUInJh.js","assets/media-CRtsjh58.js","assets/dollar-sign-WJONBzPh.js","assets/sparkles-DJSLlPPE.js","assets/share-2-DuzGEXXh.js","assets/alert-triangle-D_OVm6SY.js","assets/thumbs-down-Dyg_98jE.js","assets/book-open-fDNjylxU.js","assets/globe-Ch7Y6r3u.js","assets/clock-B8ViBMWY.js","assets/chevron-right-CipC7yZU.js","assets/chevron-left-Dz_sUr7q.js","assets/chevron-down-D7CB51tn.js","assets/pin-C3JVgVBD.js","assets/bookmark-BQu8GbS9.js","assets/crown-BXkTo-GU.js","assets/camera-CEi2UF3I.js","assets/zap-BWXS9krD.js","assets/list-plus-eZpmYSQl.js","assets/folder-DiD3GKar.js","assets/users-CnNA_gSz.js","assets/shield-C_uYoqua.js","assets/history-D5FGtDAM.js","assets/gift-BW2PXVse.js","assets/credit-card-B567Rw8y.js","assets/user-p_UwOk18.js","assets/trending-up-BB1W_Y8Z.js","assets/message-square-zpnKbcRh.js","assets/heart-off-KRYgAKVP.js","assets/heart-_Z6-0po3.js","assets/more-vertical-DjOXjg4O.js","assets/lightbulb-DysG5pEb.js","assets/trophy-C0-g7CFO.js","assets/star-D0-l_m3I.js","assets/search-h-W-deeu.js","assets/settings-5bv2hiSQ.js","assets/bell-CrF7zwH-.js","assets/watchhistory-BvywJItQ.js","assets/check-circle-BzRLZPYI.js","assets/likedvideos-C_kNHGzG.js","assets/navigation-CVpX3VBE.js"])))=>i.map(i=>d[i]);
import{c as e,u as t,a as r,_ as n,g as o,j as a,i,e as s,P as l}from"./index-BZKzq6T1.js";import{g as c,u as d,b as u,e as h,d as p}from"./vendor-Cml8jNaD.js";import{r as m}from"./media-CRtsjh58.js";import{S as x}from"./star-D0-l_m3I.js";import{T as f}from"./trending-up-BB1W_Y8Z.js";import{C as g}from"./clock-B8ViBMWY.js";import{G as y}from"./globe-Ch7Y6r3u.js";import{B as b}from"./book-open-fDNjylxU.js";import{V as v}from"./video-DHc9PJQl.js";const w=e("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]),k=e("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),j=e("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),S=({cta:e})=>{const[t,r]=u.useState(!1);return u.useEffect(()=>{const t=1e3*(e.overlayCtaDelay||0),n=1e3*(e.overlayCtaDuration||3),o=setTimeout(()=>{r(!0)},t),a=setTimeout(()=>{r(!1)},t+n);return()=>{clearTimeout(o),clearTimeout(a)}},[e.overlayCtaDelay,e.overlayCtaDuration]),t?a.jsxs("div",{style:{width:"100%",padding:"12px 16px",background:"rgba(0,0,0,0.8)",display:"flex",flexDirection:"column",alignItems:"center",gap:8,animation:"fadeIn 0.3s ease-in"},children:[a.jsx("style",{children:"\n\t\t\t\t@keyframes fadeIn {\n\t\t\t\t\tfrom { opacity: 0; }\n\t\t\t\t\tto { opacity: 1; }\n\t\t\t\t}\n\t\t\t\t@keyframes pulse-chevron {\n\t\t\t\t\t0%, 100% { transform: translateY(0px); opacity: 0.6; }\n\t\t\t\t\t50% { transform: translateY(8px); opacity: 1; }\n\t\t\t\t}\n\t\t\t\t.pulse-chevron {\n\t\t\t\t\tanimation: pulse-chevron 1.5s ease-in-out infinite;\n\t\t\t\t}\n\t\t\t"}),a.jsx("div",{className:"pulse-chevron",style:{fontSize:24,color:e.overlayCtaColor||"#4B9EFF"},children:"v"}),"text"===e.overlayCtaType?a.jsx("button",{onClick:t=>{t.stopPropagation(),e.link&&window.open(e.link,"_blank")},style:{width:"100%",padding:"12px 16px",background:e.overlayCtaColor||"#4B9EFF",color:"#fff",border:"none",borderRadius:8,fontSize:14,fontWeight:700,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(75, 158, 255, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:e.overlayCtaText}):"image"===e.overlayCtaType?a.jsx("img",{src:e.overlayCtaMedia,alt:"CTA",onClick:()=>{e.link&&window.open(e.link,"_blank")},style:{width:"100%",maxHeight:"120px",objectFit:"contain",borderRadius:8,cursor:"pointer"}}):"gif"===e.overlayCtaType?a.jsx("img",{src:e.overlayCtaMedia,alt:"CTA GIF",onClick:()=>{e.link&&window.open(e.link,"_blank")},style:{width:"100%",maxHeight:"120px",objectFit:"contain",borderRadius:8,cursor:"pointer"}}):"video"===e.overlayCtaType?a.jsx("video",{src:e.overlayCtaMedia,autoPlay:!0,loop:!0,onClick:()=>{e.link&&window.open(e.link,"_blank")},style:{width:"100%",maxHeight:"120px",objectFit:"contain",borderRadius:8,cursor:"pointer",background:"#000"}}):null]}):null},N=({ad:e,forceLandscapeCss:t,onDismiss:r})=>{const[n,o]=u.useState(!1),[i,s]=u.useState(!1),[l,c]=u.useState(!1),[d,h]=u.useState(!0),p=u.useRef(0),m=u.useRef(null),x=e.overlayExitTransition||"fade",f=["fade","dissolve","blinds","wilt"],g="random"===x?f[Math.floor(Math.random()*f.length)]:x;u.useEffect(()=>{o(!1),s(!1),c(!1),h(!0)},[e.overlayVideoUrl]);if(!d)return null;const y=t=>{if("none"===e.overlayBadgeType)return null;if(t&&!e.overlayBadgePosition?.includes("-player"))return null;if(!t&&e.overlayBadgePosition?.includes("-player"))return null;const r=e.overlayBadgePosition||(t?"top-left-player":"top-left-video");let n={position:"absolute",zIndex:601,pointerEvents:"none"};return r.includes("top")&&(n.top=12),r.includes("bottom")&&(n.bottom=12),r.includes("left")&&(n.left=12),r.includes("right")&&(n.right=12),a.jsx("div",{style:n,children:"sponsoredBy"===e.overlayBadgeType&&e.overlayBadgeLogo?a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,background:e.overlayBadgeColor||"#000",padding:"6px 12px",borderRadius:6,color:"#fff",fontSize:12,fontWeight:600,opacity:.95},children:[a.jsx("span",{children:"Sponsored by"}),a.jsx("img",{src:e.overlayBadgeLogo,alt:"sponsor",style:{height:20,maxWidth:80,objectFit:"contain"}})]}):a.jsx("div",{style:{background:e.overlayBadgeColor||"#ff0000",padding:"6px 12px",borderRadius:6,color:"#fff",fontSize:12,fontWeight:700,letterSpacing:"0.5px",opacity:.95,minWidth:45,textAlign:"center"},children:"AD"})})};return a.jsx("div",{style:{position:"fixed",inset:t?"auto":0,top:t?"50%":0,left:t?"50%":0,transform:t?"translate(-50%, -50%) rotate(90deg)":"none",width:t?"100vh":"100vw",height:t?"100vw":"100vh",zIndex:600,background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",pointerEvents:"auto",opacity:l?0:1,transition:"opacity 0.5s cubic-bezier(0.4, 0, 1, 1)"},onClick:()=>{e.link&&window.open(e.link,"_blank")},children:a.jsxs("div",{style:{opacity:n?1:0,visibility:n?"visible":"hidden",transition:"opacity 0.4s ease-out, visibility 0s linear "+(n?"0s":"0.4s"),width:"100%",height:"100%",display:"flex",flexDirection:"column",position:"relative",pointerEvents:n?"auto":"none",...(()=>{const e={transition:"all 0.5s cubic-bezier(0.4, 0, 1, 1)",transformOrigin:"center center"};if(!l)return{...e,opacity:1,transform:"scale(1)"};switch(g){case"fade":default:return{...e,opacity:0};case"dissolve":return{...e,opacity:0,transform:"scale(0.95)"};case"blinds":return{...e,opacity:0,transform:"scaleY(0)",transformOrigin:"top center"};case"wilt":return{...e,opacity:0,transform:"rotateX(90deg) scaleY(0)",transformOrigin:"center center"}}})()},children:[y(!0),a.jsx("div",{style:{flex:1,width:"100%",overflow:"hidden",position:"relative"},children:a.jsxs("div",{style:{position:"absolute",inset:0,width:"100%",height:"100%"},children:[y(!1),e.overlayVideoUrl&&!i?(()=>{const t=(e=>{let t="";if(e.includes("youtu.be/"))t=e.split("youtu.be/")[1].split("?")[0];else if(e.includes("youtube.com"))try{t=new URL(e).searchParams.get("v")||""}catch{}return t})(e.overlayVideoUrl);return(r=e.overlayVideoUrl)&&(r.includes("youtube.com")||r.includes("youtu.be"))&&t?a.jsxs("div",{style:{position:"relative",width:"100%",height:"100%"},children:[a.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube-nocookie.com/embed/${t}?autoplay=1&mute=1&controls=0&modestbranding=1&showinfo=0&rel=0&iv_load_policy=3&fs=0&disablekb=1&playsinline=1`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",style:{background:"#000",width:"100%",height:"100%",border:"none",display:"block",pointerEvents:"none",transform:"scale(1.3)",transformOrigin:"center center"},onLoad:()=>{setTimeout(()=>o(!0),2500)}}),a.jsx("div",{style:{position:"absolute",inset:0,zIndex:3}})]}):a.jsx("video",{ref:m,src:e.overlayVideoUrl,autoPlay:!0,muted:!1,playsInline:!0,crossOrigin:"anonymous",onCanPlay:()=>o(!0),onLoadedData:()=>o(!0),onError:t=>{console.error("Ad video failed to load (attempt "+(p.current+1)+")",t),p.current<2?(p.current+=1,setTimeout(()=>{try{const t=m.current;t&&(t.src=e.overlayVideoUrl+(e.overlayVideoUrl.includes("?")?"&":"?")+"_r="+p.current,t.load())}catch(t){console.warn("Ad video retry failed",t)}},1500*p.current)):(s(!0),o(!0))},style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"contain",background:"#000",display:"block",pointerEvents:"none"}});var r})():a.jsxs("div",{ref:e=>{e&&!n&&o(!0)},style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",background:e.overlayAdBgColor||"#1a1a1a",padding:20},children:[e.overlayAdEmoji&&a.jsx("div",{style:{fontSize:56,marginBottom:16},children:e.overlayAdEmoji}),e.overlayAdCompanyName&&a.jsx("div",{style:{fontSize:20,fontWeight:700,color:e.overlayAdTextColor||"#fff",marginBottom:12,textAlign:"center"},children:e.overlayAdCompanyName}),a.jsx("div",{style:{fontSize:16,lineHeight:1.6,fontWeight:600,color:e.overlayAdTextColor||"#fff",textAlign:"center"},children:a.jsx("div",{style:{marginBottom:8},children:e.overlayAdText||"Advertisement"})}),e.overlayBtnText&&a.jsx("button",{style:{marginTop:16,padding:"10px 28px",background:"rgba(255,255,255,0.2)",color:e.overlayAdTextColor||"#fff",border:"1px solid rgba(255,255,255,0.3)",borderRadius:8,fontSize:14,fontWeight:600,cursor:"pointer"},onClick:()=>{e.link&&window.open(e.link,"_blank")},children:e.overlayBtnText})]})]})}),(e.overlayCtaText||e.overlayCtaMedia)&&a.jsx(S,{cta:e})]})})},C=({size:e=20})=>a.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})}),T=({size:e=20})=>a.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M6 9l6 6 6-6"})}),E=({active:e=!1,size:t=24,inCircle:r=!1,color:n})=>{const o=n??(r||e?"#60a5fa":"#fff"),i=t>32?2.6:2;return a.jsxs("svg",{width:t,height:t,fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",style:{display:"block"},children:[a.jsx("rect",{x:"5",y:"11",width:"14",height:"8",rx:"2",stroke:o,strokeWidth:i}),a.jsx("path",{d:"M7 11V8a5 5 0 0110 0v3",stroke:o,strokeWidth:i})]})},L=({size:e=24,color:t="#fff"})=>{const r=e>32?2.6:2;return a.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:r,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",style:{display:"block"},children:[a.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]})},I=()=>a.jsxs("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",style:{color:"currentColor"},children:[a.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),a.jsx("path",{d:"M7 15h2M11 15h2M15 15h2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("path",{d:"M7 11h10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),M=()=>a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},children:[a.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),a.jsx("rect",{x:"12",y:"11",width:"8",height:"6",rx:"1",fill:"black",stroke:"currentColor",strokeWidth:"2"})]}),A=()=>a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},children:[a.jsx("circle",{cx:"5",cy:"12",r:"2",fill:"currentColor"}),a.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"}),a.jsx("circle",{cx:"19",cy:"12",r:"2",fill:"currentColor"})]}),R=({size:e=18})=>a.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("circle",{cx:"8.5",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M20 8v6M23 11h-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),z=()=>a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M5 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16l-7-3.5L5 21V5z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),B=()=>a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M5 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16l-7-3.5L5 21V5z",fill:"currentColor"})}),W=()=>a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),P=({filled:e=!1})=>a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",style:{color:"currentColor"},fill:"none",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z",stroke:e?"none":"currentColor",fill:e?"currentColor":"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),$=({size:e=24,color:t="currentColor"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-heart-off-icon lucide-heart-off","aria-hidden":"true",style:{display:"block"},children:[a.jsx("path",{d:"M10.5 4.893a5.5 5.5 0 0 1 1.091.931.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 1.872-1.002 3.356-2.187 4.655"}),a.jsx("path",{d:"m16.967 16.967-3.459 3.346a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5a5.5 5.5 0 0 1 2.747-4.761"}),a.jsx("path",{d:"m2 2 20 20"})]}),D=()=>a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),_=({width:e=56,height:t=56})=>a.jsx("svg",{width:e,height:t,viewBox:"0 0 24 24",fill:"#000",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M5 3.868v16.264c0 .878.966 1.41 1.71.948l13.011-8.132a1.12 1.12 0 0 0 0-1.896L6.71 2.92C5.966 2.458 5 2.99 5 3.868z"})}),O=({width:e=56,height:t=56})=>a.jsxs("svg",{width:e,height:t,viewBox:"0 0 24 24",fill:"#000",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1"})]}),U=()=>a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"mr-2",children:[a.jsx("path",{d:"M11.5 12L20 18V6L11.5 12Z",transform:"scale(-1 1) translate(-31 0)",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),a.jsx("path",{d:"M6 6v12",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]}),F=()=>a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"ml-2",children:[a.jsx("path",{d:"M11.5 12L20 18V6L11.5 12Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),a.jsx("path",{d:"M6 6v12",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]}),Y=()=>a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),a.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),V=()=>a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}),a.jsx("path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}),a.jsx("path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}),a.jsx("path",{d:"M2 2l20 20"})]}),H=()=>a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"m17 2 4 4-4 4"}),a.jsx("path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}),a.jsx("path",{d:"m7 22-4-4 4-4"}),a.jsx("path",{d:"M21 13v1a4 4 0 0 1-4 4H3"})]}),X=()=>a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M13 21h8"}),a.jsx("path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"})]}),J=()=>a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M8 7h10v10H8z"}),a.jsx("path",{d:"M16 7v-2a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8"})]}),q=()=>a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"}),a.jsx("path",{d:"M16 6l-4-4-4 4"}),a.jsx("path",{d:"M12 2v11"})]}),Q=()=>a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"6",height:"6"}),a.jsx("rect",{x:"15",y:"3",width:"6",height:"6"}),a.jsx("rect",{x:"3",y:"15",width:"6",height:"6"}),a.jsx("path",{d:"M15 15h2v2h-2zM19 19h2v2h-2zM15 19h2v2h-2z"})]}),K=()=>a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("path",{d:"M7 10l5 5 5-5"}),a.jsx("path",{d:"M12 15V3"})]}),G=({bg:e,children:t,label:r,onClick:n})=>a.jsxs("button",{"aria-label":r,onClick:n,className:"flex flex-col items-center text-xs",type:"button",children:[a.jsx("div",{style:{background:e},className:"w-12 h-12 rounded-full flex items-center justify-center mb-2",children:t}),a.jsx("div",{className:"text-gray-300 text-xs",children:r})]}),Z=()=>a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"}),a.jsx("path",{d:"M12 2v14"}),a.jsx("path",{d:"M8 6l4-4 4 4"})]}),ee=e=>{if(!e)return 0;const t=String(e).split(":").map(e=>parseInt(e)||0);return 3===t.length?3600*t[0]+60*t[1]+t[2]:2===t.length?60*t[0]+t[1]:1===t.length?t[0]:0},te=({item:e,idx:t,filtered:r,onVideoClick:n,setToastMessage:o,toastTimerRef:i,sharePopoverFor:s,setSharePopoverFor:l,accentColor:c,accentText:d,makeShareLink:h,copyToClipboard:p,setShowShareModal:x,videoRef:f})=>{const[g,y]=u.useState(0),[b,v]=u.useState(e.thumbnail||e.imageUrl);return u.useEffect(()=>{let t=!1;const r=e.url||e.videoUrl;if(r){if((n=r)&&(n.includes("youtube.com")||n.includes("youtu.be"))){const n=ee(e.time),o=("number"==typeof e.duration&&e.duration>0?e.duration:0)||n;o>0&&y(o);const a=(e=>{if(!e)return"";if(e.includes("youtu.be/"))return e.split("youtu.be/")[1].split(/[?&#]/)[0];if(e.includes("youtube.com"))try{return new URL(e).searchParams.get("v")||""}catch{return""}return""})(r);return a&&!b&&v(`https://img.youtube.com/vi/${a}/mqdefault.jpg`),void(o<=0&&a&&fetch(`https://noembed.com/embed?url=https://www.youtube.com/watch?v=${a}`).then(e=>e.json()).then(e=>{if(!t&&e&&e.duration){const t=ee(String(e.duration));t>0&&y(t)}}).catch(()=>{}))}var n;try{const e=document.createElement("video");e.preload="metadata",e.crossOrigin="anonymous";const n=()=>{t||!e.duration||isNaN(e.duration)||y(Math.round(e.duration))};e.addEventListener("loadedmetadata",n,{once:!0}),e.src=m(r),e.load();const o=setTimeout(()=>{t||(e.pause(),e.src="")},5e3);return()=>{t=!0,clearTimeout(o),e.pause(),e.src=""}}catch(o){}}},[e.url,e.videoUrl]),a.jsxs("div",{onClick:n,role:"button",tabIndex:0,style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",transition:"all 200ms ease"},onMouseEnter:e=>e.currentTarget.style.background="#f9f9f9",onMouseLeave:e=>e.currentTarget.style.background="#fff",children:[a.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden flex-shrink-0",style:{background:b?`url(${encodeURI(b)}) center/cover no-repeat`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundColor:"#667eea"},children:a.jsx("div",{className:"absolute right-2 bottom-1 bg-black/70 text-white text-xs px-2 py-0.5 rounded",children:(()=>{const t=e.duration||g||0,r="number"==typeof t&&t>0?t:ee(e.time);return`${Math.floor(r/60)}:${String(Math.floor(r%60)).padStart(2,"0")}`})()})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:700,lineHeight:"1.3"},children:e.title}),a.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:[e.creator," ",e.tags&&e.tags[0]?a.jsx("span",{style:{background:"#e6f2ff",color:"#2563eb",padding:"2px 6px",borderRadius:8,marginLeft:8,fontSize:11},children:e.tags[0]}):null]})]})]},e.id)};function re({profileName:e,profileAvatar:t,textItems:r,textInterval:n,textAnimation:o,cardAnimation:i,cardEffect:s,link:l,borderColor:c,cardExitAnimation:d,duration:h}){const[p,m]=u.useState(0),[x,f]=u.useState(!0);u.useEffect(()=>{console.log("BottomAdPreviewBar received:",{profileName:e,textItems:r,textItemsLength:r?.length,textAnimation:o,cardAnimation:i,cardEffect:s,borderColor:c,cardExitAnimation:d,duration:h})},[e,r,o,i,s,c,d,h]),u.useEffect(()=>{if(!r||0===r.length)return;if(1===r.length)return;const e=setInterval(()=>{m(e=>(e+1)%r.length)},n||5e3);return()=>clearInterval(e)},[r,n]);const g=(()=>{const e={fade:"fadeInText 0.5s ease-in-out",slideLeft:"slideLeftText 0.5s ease-in-out",slideRight:"slideRightText 0.5s ease-in-out",bounce:"bounceText 0.5s ease-in-out",scale:"scaleText 0.5s ease-in-out"};return e[o]||e.fade})(),y=(()=>{const e={fade:"fadeInCard 0.5s ease-in-out",lineFirst:"linefirstCard 0.6s ease-in-out",slideDown:"slideDownCard 0.5s ease-in-out",bounceIn:"bounceInCard 0.6s ease-in-out",scaleUp:"scaleUpCard 0.5s ease-in-out"};let t=e[i]||e.fade;if(s&&"none"!==s){t=`${t}, ${s} ${{pulse:"2s",shake:"2s",glow:"2s",float:"2s",rotate:"2s"}[s]||"2s"} ease-in-out 0.5s infinite`}if(d&&"none"!==d){t=`${t}, ${{fadeOut:"fadeOut",slideOut:"slideOut",scaleDown:"scaleDown",bounceOut:"bounceOut",rotateOut:"rotateOut"}[d]||"fadeOut"} 0.5s ease-in-out ${h||30}s forwards`}return t})();let b="";if(r&&r.length>0){const e=r[p];"string"==typeof e?b=e:e&&"object"==typeof e&&(b=e.text||e.content||"")}return a.jsxs("div",{style:{animation:y,display:"flex",alignItems:"center",gap:"12px",backgroundColor:"rgba(255, 255, 255, 0.12)",borderRadius:"8px",padding:"12px 14px",minWidth:"280px",flex:"0 0 auto",borderTop:`2px solid ${c||"rgba(255, 255, 255, 0.2)"}`,border:"1.5px solid rgba(255, 255, 255, 0.25)",cursor:l?"pointer":"default",transition:"all 200ms ease",opacity:1,position:"relative"},onClick:()=>{l&&window.open(l,"_blank")},children:[a.jsx("div",{style:{width:"52px",height:"52px",borderRadius:"6px",backgroundColor:"#333",flexShrink:0,border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:t?a.jsx("img",{src:t,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},onError:e=>{e.target.style.display="none"}}):a.jsx("span",{style:{fontSize:"20px",opacity:.5},children:"ðŸ“·"})}),a.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"6px"},children:[a.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#ffffff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e||"Sponsored"}),a.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.75)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:"1.2",animation:g,minHeight:"16px"},children:b||"Check out our offer"},p)]}),a.jsx("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"18px",flexShrink:0,display:"flex",alignItems:"center"},children:"â†’"})]})}function ne({discoverItems:e=null,initialVideo:l=null,onChevronDown:p=null}={}){const S="undefined"!=typeof window&&localStorage.getItem("regaarder_language")||"English",ee=t(),{accentColor:ne}=r(),[oe]=c(),ae=d(),ie=l||ae&&ae.state&&ae.state.video||null,se=u.useRef(null),[le,de]=u.useState(!1),[ue,he]=u.useState(!1),[pe,me]=u.useState(!1),[xe,fe]=u.useState(!1),[ge,ye]=u.useState(!1),[be,ve]=u.useState(!1),[we,ke]=u.useState(!1),je=u.useRef(null),[Se,Ne]=u.useState(ie||null),[Ce,Te]=u.useState(()=>{if(ie){const e=ie.videoUrl||ie.url||ie.src||"";return e?e.includes("youtube.com")||e.includes("youtu.be")?e:m(e):""}return""}),Ee=e=>e&&(e.includes("youtube.com")||e.includes("youtu.be")),Le=e=>{if(!e)return"";if(e.includes("youtu.be/"))return e.split("youtu.be/")[1].split(/[?&#]/)[0];if(e.includes("youtube.com"))try{return new URL(e).searchParams.get("v")||""}catch{return""}return""},[Ie,Me]=u.useState(()=>{if(ie){const e=ie.videoUrl||ie.url||ie.src||"";return Ee(e)}return!1}),[Ae,Re]=u.useState(()=>{if(ie){const e=ie.videoUrl||ie.url||ie.src||"";return Le(e)}return""}),ze=u.useRef(null),[Be,We]=u.useState(!1),[Pe,$e]=u.useState(()=>ie&&ie.title||""),[De,_e]=u.useState(()=>ie&&ie.author||""),[Oe,Ue]=u.useState([]),[Fe,Ye]=u.useState(""),[Ve,He]=u.useState(!0);u.useEffect(()=>{try{const e=localStorage.getItem("videoplayer_quick_load");if(e){const t=JSON.parse(e);if(t.url&&(Ee(t.url)?(Me(!0),Re(Le(t.url)),Te(t.url)):(Me(!1),Re(""),Te(m(t.url))),t.title&&$e(t.title),t.creator&&_e(t.creator),t.creatorName&&_e(t.creatorName),t.time)){const e=(t.time||"").split(":");if(2===e.length){const t=60*(parseInt(e[0])||0)+(parseInt(e[1])||0);t>0&&Nt(t)}}localStorage.removeItem("videoplayer_quick_load")}}catch(e){console.error("Failed to load quick video data:",e)}},[]);const Xe=e=>`vx:pref:${e}`,Je=(e,t)=>{const r=e,[n,o]=u.useState(()=>((e,t)=>{try{const r=localStorage.getItem(Xe(e));return null===r?t:JSON.parse(r)}catch(r){return t}})(r,t));return u.useEffect(()=>{((e,t)=>{try{localStorage.setItem(Xe(e),JSON.stringify(t))}catch(r){}})(r,n)},[r,n]),[n,o]},[qe,Qe]=u.useState(!1),Ke=u.useRef(null),Ge=u.useRef(null),[Ze,et]=u.useState(!1),[tt,rt]=u.useState(!1),nt=u.useRef(null),[ot,at]=u.useState([]);u.useEffect(()=>{if(!Se)return;const e=Se.id||Se.src||Se.url||Pe||null;if(!e)return;(async()=>{try{try{const t=localStorage.getItem("likedVideos");if(t){JSON.parse(t).some(t=>String(t.videoId)===String(e))&&et(!0)}}catch{}const t=localStorage.getItem("regaarder_token");if(!t)return;const r=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,n=await fetch(`${r}/likes/status?videoId=${encodeURIComponent(e)}`,{headers:{Authorization:`Bearer ${t}`}});if(n.ok){const e=await n.json();"boolean"==typeof e.liked&&et(e.liked),"boolean"==typeof e.disliked&&rt(e.disliked)}}catch(t){}})()},[Se,Pe]);const it=e=>{try{e?.stopPropagation?.()}catch{}pe?(me(!1),Qe(!1),Ke.current&&(clearTimeout(Ke.current),Ke.current=null),Ge.current&&(clearTimeout(Ge.current),Ge.current=null),ve(!1),fe(!1),ye(!1),lt(!0)):(me(!0),lt(!0))},[st,lt]=u.useState(!0),[ct,dt]=u.useState(!0),ut=u.useRef(null),ht=e=>{if(Ie&&ze.current&&St>0){try{const t=pt*St,r=Math.max(0,Math.min(St,t+e));ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[r,!0]}),"*"),mt(r/St),Tt.current=r,Et.current=Date.now()}catch{}return}const t=bt.current;if(t&&"number"==typeof t.currentTime&&t.duration){const r=Math.max(0,Math.min(t.duration,(t.currentTime||0)+e));try{t.currentTime=r}catch{}}},[pt,mt]=u.useState(.05),xt=u.useRef(null),ft=u.useRef(!1),[gt,yt]=u.useState(!1),bt=u.useRef(null),[vt,wt]=u.useState(0),[kt,jt]=u.useState(!1),[St,Nt]=u.useState(0),Ct=u.useRef(null);u.useEffect(()=>{if(Ie&&0===St)if(ie&&ie.duration&&ie.duration>0)Nt(ie.duration);else if(ie&&ie.time){const e=(ie.time||"").split(":");if(2===e.length){const t=60*(parseInt(e[0])||0)+(parseInt(e[1])||0);t>0&&Nt(t)}}},[Ie,ie]),u.useEffect(()=>{if(!Ie||!Ae)return;We(!1);const e=setTimeout(()=>{jt(!0),We(!0)},2e3),t=e=>{try{if("string"!=typeof e.data)return;const t=JSON.parse(e.data);if("infoDelivery"===t.event&&t.info){const e=t.info;if(e.duration&&e.duration>0&&Nt(t=>{if(t!==e.duration){try{Ae&&localStorage.setItem(`yt_dur_${Ae}`,String(Math.floor(e.duration)))}catch{}return e.duration}return t}),"number"==typeof e.currentTime&&e.currentTime>=0){const t=e.duration||St;Tt.current=e.currentTime,Et.current=Date.now(),t>0&&!ft.current&&mt(e.currentTime/t)}if("number"==typeof e.playerState)if(1===e.playerState)jt(!0),We(!0);else if(2===e.playerState)jt(!1);else if(0===e.playerState){jt(!1);try{ze.current&&ze.current.contentWindow&&(ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[0,!0]}),"*"),ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*"))}catch{}"function"==typeof Ct.current&&Ct.current()}}if("onStateChange"===t.event&&"number"==typeof t.info)if(1===t.info)jt(!0),We(!0);else if(2===t.info)jt(!1);else if(0===t.info){jt(!1);try{ze.current&&ze.current.contentWindow&&(ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[0,!0]}),"*"),ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*"))}catch{}"function"==typeof Ct.current&&Ct.current()}}catch{}};window.addEventListener("message",t);const r=()=>{try{ze.current&&ze.current.contentWindow&&ze.current.contentWindow.postMessage(JSON.stringify({event:"listening"}),"*")}catch{}},n=()=>{try{ze.current&&ze.current.contentWindow&&(ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"unMute"}),"*"),ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"setVolume",args:[100]}),"*"))}catch{}},o=()=>{try{ze.current&&ze.current.contentWindow&&ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*")}catch{}},a=setTimeout(r,500),i=setTimeout(r,1500),s=setTimeout(r,3e3),l=setInterval(r,1e3),c=setTimeout(()=>{o(),n()},800),d=setTimeout(()=>{o(),n()},2e3),u=setTimeout(()=>{o(),n()},3500),h=[];if(Fn>0){const e=()=>{try{ze.current&&ze.current.contentWindow&&(ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[Fn,!0]}),"*"),Tt.current=Fn,Et.current=Date.now(),mt(St>0?Fn/St:0))}catch{}};h.push(setTimeout(e,1200)),h.push(setTimeout(e,2500)),h.push(setTimeout(e,4e3))}return()=>{clearTimeout(e),clearTimeout(a),clearTimeout(i),clearTimeout(s),clearInterval(l),clearTimeout(c),clearTimeout(d),clearTimeout(u),h.forEach(e=>clearTimeout(e)),window.removeEventListener("message",t)}},[Ie,Ae]);const Tt=u.useRef(0),Et=u.useRef(Date.now()),Lt=u.useRef(!1);u.useEffect(()=>{Lt.current=kt},[kt]),u.useEffect(()=>{if(!Ie||!Ae)return;const e=setInterval(()=>{if(!Lt.current||ft.current||St<=0)return;const e=(Date.now()-Et.current)/1e3,t=Tt.current+e;t>=0&&t<=St&&mt(t/St)},250);return()=>clearInterval(e)},[Ie,Ae,St]),u.useEffect(()=>{if(Ce&&Ee(Ce)&&!Ie){Me(!0);const e=Le(Ce);e&&Re(e)}},[Ce,Ie]),u.useEffect(()=>{if(!Ce||Ie)return;const e=bt.current;if(!e)return;const t=setTimeout(()=>{try{0===e.readyState&&Ce&&e.load()}catch{}},50);return()=>clearTimeout(t)},[Ce,Ie]);const[It,Mt]=u.useState([]),[At,Rt]=u.useState([]);u.useLayoutEffect(()=>{try{bt.current&&wt(e=>e+1)}catch{}},[]),u.useEffect(()=>{try{bt.current&&wt(e=>e+1)}catch{}},[Ce]);const[zt,Bt]=u.useState([]),[Wt,Pt]=u.useState([]),$t=u.useRef(new Set),Dt=u.useRef(new Set),_t=u.useCallback(e=>{$t.current.add(e),Pt(t=>t.filter(t=>t.id!==e))},[]),[Ot,Ut]=u.useState("landscape"),[Ft,Yt]=u.useState(16/9),[Vt,Ht]=u.useState(!1),[Xt,Jt]=u.useState(!1),[qt,Qt]=Je("discover:query",""),[Kt,Gt]=Je("discover:selectedChip","All Videos"),[Zt,er]=u.useState(null);u.useEffect(()=>{if(e)return;let t=!1;try{const e=localStorage.getItem("discoverAllVideos");if(e&&e.trim()){const r=JSON.parse(e);if(Array.isArray(r)&&r.length>0)return void(t||er(r))}}catch(r){}return n(()=>import("./home-CN_asF5T.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47])).then(e=>{if(t)return;const r=e.default||e.homeVideos||e.VIDEOS||e.discoverItems||null;Array.isArray(r)&&er(r)}).catch(()=>{}),()=>{t=!0}},[e]);const tr=u.useRef([]),[rr,nr]=u.useState(-1),or=tr,ar=u.useRef(-1),ir=u.useRef(0);u.useEffect(()=>{try{const t=localStorage.getItem("videoplayer_source"),r=localStorage.getItem("videoplayer_index");if(t){const n=JSON.parse(t);if(Array.isArray(n)&&n.length)if(or.current=n,null==r||void 0===r||isNaN(parseInt(r,10)))try{const e=ie&&(ie.id||ie.url||ie.videoUrl)||oe.get("id")||null;if(e){const t=n.findIndex(t=>String(t)===String(e));-1!==t&&(ar.current=t,nr(t))}}catch(e){}else ar.current=parseInt(r,10),nr(ar.current)}}catch(e){}},[ie,oe]),u.useEffect(()=>{const t=t=>{try{const o=Date.now();if(o-ir.current<650)return;const a=t.deltaY<0?1:-1,i=or.current||[];try{console.debug&&console.debug("wheel nav: list length",i&&i.length||0)}catch{}if(!i||!i.length)return;let s=ar.current;"number"!=typeof s&&(s=-1);const l=s+a;if(l<0||l>=i.length)return;ir.current=o;const c=i[l];let d=null;try{const t=e&&e.length?e:Zt||[];Array.isArray(t)&&(d=t.find(e=>e.id&&String(e.id)===String(c)||e.url&&String(e.url)===String(c)||e.videoUrl&&String(e.videoUrl)===String(c))),d||n(()=>import("./home-CN_asF5T.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47])).then(e=>{const t=e.default||e.VIDEOS||e.homeVideos||e.discoverItems||null;if(Array.isArray(t)){const e=t.find(e=>e.id&&String(e.id)===String(c)||e.url&&String(e.url)===String(c)||e.videoUrl&&String(e.videoUrl)===String(c));e&&(d=e)}}).catch(()=>{})}catch(r){}if(d){ar.current=l,nr(l);try{$e(d.title||"Video")}catch{}try{_e(d.creator||d.channel||"")}catch{}try{const e=d.url||d.videoUrl||d.src||"";if(Ee(e)?(Me(!0),Re(Le(e)),Te(e)):(Me(!1),Re(""),Te(m(e))),d.time){const e=(d.time||"").split(":");if(2===e.length){const t=60*(parseInt(e[0])||0)+(parseInt(e[1])||0);t>0&&Nt(t)}}}catch{}try{lt(!0),mi(1600)}catch{}try{vn("Next video")}catch{}}else if("string"==typeof c&&/^(https?:)?\/\//.test(c)){ar.current=l,nr(l);try{Ee(c)?(Me(!0),Re(Le(c)),Te(c)):(Me(!1),Re(""),Te(m(c))),$e("Video"),_e("")}catch{}}}catch(r){}};return window.addEventListener("wheel",t,{passive:!0}),()=>window.removeEventListener("wheel",t)},[Zt,e]),u.useEffect(()=>{const e=e=>{try{const t=e&&e.detail?e.detail:null;"string"==typeof t&&t!==Kt&&Gt(t)}catch{}},t=e=>{try{const t=e&&e.detail?e.detail:null;"string"==typeof t&&t!==qt&&Qt(t)}catch{}};return window.addEventListener("discover:chip",e),window.addEventListener("discover:query",t),()=>{window.removeEventListener("discover:chip",e),window.removeEventListener("discover:query",t)}},[Kt,qt,Gt,Qt]),u.useEffect(()=>{try{window.dispatchEvent(new CustomEvent("discover:chip",{detail:Kt}))}catch{}},[Kt]),u.useEffect(()=>{try{window.dispatchEvent(new CustomEvent("discover:query",{detail:qt}))}catch{}},[qt]),Boolean(e&&e.length||Zt&&Zt.length);const sr=u.useRef(null),lr=u.useRef(null),[cr,dr]=u.useState("#000000"),ur=u.useRef(!1),[hr,pr]=u.useState(!1),[mr,xr]=u.useState(0),[fr,gr]=u.useState(0),[yr,br]=u.useState({w:160,h:90}),vr=u.useRef(null),wr=e=>{const t=xt.current;if(!t)return;const r=t.getBoundingClientRect(),n=Math.max(0,Math.min(1,(e-r.left)/r.width));mt(n);const o=yr.w,a=yr.h,i=r.left+n*r.width,s=r.top-a-10;xr(Math.max(8,i-o/2)),gr(Math.max(8,s));const l=vr.current;if(l&&St>0)try{ur.current=!0,l.currentTime=n*St}catch{}};u.useEffect(()=>{const e=vr.current;if(!e)return;const t=()=>{hr&&ur.current&&((()=>{const e=vr.current,t=sr.current;if(!e||!t)return;const r=t.getContext("2d"),{w:n,h:o}=yr;t.width=n,t.height=o;const a=e.videoWidth||n,i=e.videoHeight||o,s=Math.min(n/a,o/i),l=a*s,c=i*s,d=(n-l)/2,u=(o-c)/2;r.fillStyle="#000",r.fillRect(0,0,n,o);try{r.drawImage(e,0,0,a,i,d,u,l,c)}catch{}})(),ur.current=!1)};return e.addEventListener("seeked",t),()=>e.removeEventListener("seeked",t)},[hr,yr]),u.useEffect(()=>{try{const e=vr.current;if(!e)return;if(hr&&void 0!==Ce&&Ce){if(e.src!==Ce){e.src=Ce;try{e.load()}catch{}}}else{try{e.pause()}catch{}try{e.removeAttribute&&e.removeAttribute("src"),e.load&&e.load()}catch{}}}catch(e){}},[hr,Ce]);const kr=u.useCallback(()=>{try{const t=bt.current;if(!t||t.readyState<2)return;lr.current||(lr.current=document.createElement("canvas"));const r=lr.current,n=32,o=32;r.width=n,r.height=o;const a=r.getContext("2d",{willReadFrequently:!0});try{a.drawImage(t,0,0,n,o)}catch(e){return}const i=a.getImageData(0,0,n,o).data,s=new Map;let l=0,c=null;for(let e=0;e<i.length;e+=4){const t=i[e],r=i[e+1],n=i[e+2];if(i[e+3]<40)continue;const o=t>>3<<10|r>>3<<5|n>>3,a=(s.get(o)||0)+1;s.set(o,a),a>l&&(l=a,c=o)}if(null==c)return;const d=c>>10&31,u=c>>5&31,h=31&c,p=u<<3|u>>2,m=h<<3|h>>2,x=e=>e.toString(16).padStart(2,"0"),f=`#${x(d<<3|d>>2)}${x(p)}${x(m)}`;dr(f)}catch(t){}},[bt]);u.useEffect(()=>{let e=null;return kt&&(kr(),e=setInterval(kr,1200)),()=>{e&&clearInterval(e)}},[kt,kr]),u.useEffect(()=>{const e=e=>{if(!ft.current)return;const t=e.clientX||e.touches&&e.touches[0]?.clientX;t&&wr(t)},t=()=>{if(ft.current)if(ft.current=!1,yt(!1),setTimeout(()=>pr(!1),200),Ie&&ze.current&&St>0)try{const e=pt*St;ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[e,!0]}),"*")}catch{}else{const e=bt.current;if(e&&St>0)try{e.currentTime=pt*St}catch{}}};return window.addEventListener("pointermove",e),window.addEventListener("pointerup",t),()=>{window.removeEventListener("pointermove",e),window.removeEventListener("pointerup",t)}},[St,yr,pt]);const[jr,Sr]=u.useState(!1),[Nr,Cr]=u.useState(!1),[Tr,Er]=u.useState(""),[Lr,Ir]=u.useState(""),[Mr,Ar]=u.useState(.62*window.innerHeight),Rr=u.useRef(.32*window.innerHeight),zr=u.useRef(.95*window.innerHeight),Br=u.useRef({dragging:!1,startY:0,startHeight:0}),[Wr,Pr]=u.useState(.62*window.innerHeight),$r=u.useRef(.32*window.innerHeight),Dr=u.useRef(.95*window.innerHeight),_r=u.useRef({dragging:!1,startY:0,startHeight:0}),[Or,Ur]=u.useState(.7*window.innerHeight),Fr=u.useRef(.3*window.innerHeight),Yr=u.useRef(.95*window.innerHeight),Vr=u.useRef({dragging:!1,startY:0,startHeight:0}),[Hr,Xr]=Je("tipHeight",.58*window.innerHeight),Jr=u.useRef(.28*window.innerHeight),qr=u.useRef(.95*window.innerHeight),Qr=u.useRef({dragging:!1,startY:0,startHeight:0}),Kr=e=>{e.preventDefault();const t=e.clientY??(e.touches&&e.touches[0]?.clientY);Br.current.dragging=!0,Br.current.startY=t,Br.current.startHeight=Mr,window.addEventListener("pointermove",Gr),window.addEventListener("pointerup",Zr)},Gr=e=>{if(!Br.current.dragging)return;const t=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof t)return;const r=Br.current.startY-t;let n=Br.current.startHeight+r;n=Math.max(Rr.current,Math.min(zr.current,n)),Ar(n)},Zr=e=>{Br.current.dragging&&(Br.current.dragging=!1,window.removeEventListener("pointermove",Gr),window.removeEventListener("pointerup",Zr))},en=e=>{e.preventDefault();const t=e.clientY??(e.touches&&e.touches[0]?.clientY);_r.current.dragging=!0,_r.current.startY=t,_r.current.startHeight=Wr,window.addEventListener("pointermove",tn),window.addEventListener("pointerup",rn)},tn=e=>{if(!_r.current.dragging)return;const t=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof t)return;const r=_r.current.startY-t;let n=_r.current.startHeight+r;n=Math.max($r.current,Math.min(Dr.current,n)),Pr(n)},rn=e=>{_r.current.dragging&&(_r.current.dragging=!1,window.removeEventListener("pointermove",tn),window.removeEventListener("pointerup",rn))},nn=e=>{e.preventDefault();const t=e.clientY??(e.touches&&e.touches[0]?.clientY);Vr.current.dragging=!0,Vr.current.startY=t,Vr.current.startHeight=Or,window.addEventListener("pointermove",on),window.addEventListener("pointerup",an)},on=e=>{if(!Vr.current.dragging)return;const t=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof t)return;const r=Vr.current.startY-t;let n=Vr.current.startHeight+r;n=Math.max(Fr.current,Math.min(Yr.current,n)),Ur(n)},an=e=>{Vr.current.dragging&&(Vr.current.dragging=!1,window.removeEventListener("pointermove",on),window.removeEventListener("pointerup",an))},sn=e=>{e.preventDefault();const t=e.clientY??(e.touches&&e.touches[0]?.clientY);Qr.current.dragging=!0,Qr.current.startY=t,Qr.current.startHeight=Hr,window.addEventListener("pointermove",ln),window.addEventListener("pointerup",cn)},ln=e=>{if(!Qr.current.dragging)return;const t=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof t)return;const r=Qr.current.startY-t;let n=Qr.current.startHeight+r;n=Math.max(Jr.current,Math.min(qr.current,n)),Xr(n)},cn=e=>{Qr.current.dragging&&(Qr.current.dragging=!1,window.removeEventListener("pointermove",ln),window.removeEventListener("pointerup",cn))};u.useEffect(()=>()=>{window.removeEventListener("pointermove",Gr),window.removeEventListener("pointerup",Zr),window.removeEventListener("pointermove",tn),window.removeEventListener("pointerup",rn),window.removeEventListener("pointermove",on),window.removeEventListener("pointerup",an),window.removeEventListener("pointermove",ln),window.removeEventListener("pointerup",cn)},[]),u.useEffect(()=>{const e=e=>{try{const t=e.target&&e.target.closest&&e.target.closest("button");if(!t)return;if(!t.closest(".modal-dialog"))return;t.setAttribute("data-pressed","true")}catch{}},t=()=>{try{document.querySelectorAll(".modal-dialog button[data-pressed]").forEach(e=>e.removeAttribute("data-pressed"))}catch{}};return window.addEventListener("pointerdown",e,{passive:!0}),window.addEventListener("pointerup",t),window.addEventListener("pointercancel",t),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("pointerup",t),window.removeEventListener("pointercancel",t)}},[]),u.useEffect(()=>{if(ie)try{const e=ie.videoUrl||ie.url||ie.src||"";e&&(Ee(e)?(Te(e),Me(!0),Re(Le(e))):(Te(m(e)),Me(!1),Re(""))),ie.title&&$e(ie.title),ie.author&&_e(ie.author);try{null!=ie.seekTo&&(Un.current=ie.seekTo)}catch{}}catch(e){}},[ie]),u.useEffect(()=>{const e=oe.get("src"),t=oe.get("title"),r=oe.get("channel");ie&&Ce||(e&&!Ce&&(Ee(e)?(Te(e),Me(!0),Re(Le(e))):(Te(m(e)),Me(!1),Re(""))),t&&!Pe&&$e(t),r&&!De&&_e(r))},[oe,ie,Ce]),u.useEffect(()=>{Se&&Se.overlays&&Array.isArray(Se.overlays)?Mt(Se.overlays):Mt([])},[Se]),u.useEffect(()=>{if(!bt.current||0===It.length)return void Rt([]);const e=bt.current.currentTime,t=It.filter(t=>{const r=t.timeSec,n=t.timeSec+(t.durationSec||3);return e>=r&&e<n});Rt(t)},[It]),u.useEffect(()=>{const e=bt.current;if(!e)return;const t=()=>{const t=e.currentTime,r=It.filter(e=>{const r=e.timeSec,n=e.timeSec+(e.durationSec||3);return t>=r&&t<n});Rt(r)};return e.addEventListener("timeupdate",t),()=>e.removeEventListener("timeupdate",t)},[It]),u.useEffect(()=>{let e=[];console.log("[ADS] videoInfo:",Se?{id:Se.id,title:Se.title,hasAds:!!Se.ads,adsType:typeof Se.ads,adsKeys:Se.ads?Object.keys(Se.ads):"N/A"}:"null");const t=e=>e&&"default2"===e.type?{...e,default2Title:e.default2Title||e.title||"",default2Description:e.default2Description||e.description||"",default2Logo:e.default2Logo||e.logo||e.image||"",default2Image:e.default2Image||e.image||e.logo||"",default2Link:e.default2Link||e.link||"",default2BgColor:e.default2BgColor||e.bgColor||"#ffffff",default2TextColor:e.default2TextColor||e.textColor||"#111827",default2LineColor:e.default2LineColor||e.lineColor||"#d946ef"}:e;if(Se&&Se.ads&&(Array.isArray(Se.ads.bottom)&&(e=[...e,...Se.ads.bottom.map(t)]),Array.isArray(Se.ads.overlays))){const t=Se.ads.overlays.map(e=>({...e,type:e.type||"overlay"}));e=[...e,...t]}Se&&Array.isArray(Se.ads)&&Se.ads.length>0&&!Se.ads[0].type&&(e=[...e,...Se.ads.map(t)]),console.log("Loaded ads:",e.length,e),Bt(e);const r=e.filter(e=>0===(e.startTime||0));r.length>0&&(console.log("Immediate ad display for:",r),Pt(r))},[Se]),u.useEffect(()=>{if(!bt.current)return;const e=bt.current.currentTime,t=$t.current,r=zt.filter(r=>{if(t.has(r.id))return!1;const n=r.startTime||0,o=n+(r.duration||3);return e>=n&&e<o});r.length>0&&Pt(r)},[zt]),u.useEffect(()=>{const e=bt.current;if(!e)return;const t=()=>{const t=e.currentTime,r=$t.current,n=zt.filter(e=>{if(r.has(e.id))return!1;const n=e.startTime||0,o=n+(e.duration||3);return t>=n&&t<o});Pt(n)};return e.addEventListener("timeupdate",t),()=>e.removeEventListener("timeupdate",t)},[zt]),u.useEffect(()=>{Wt.filter(e=>"default2"===e.type&&e.id&&!Dt.current.has(e.id)).forEach(e=>{Dt.current.add(e.id);const t=1e3*(e.duration||10);setTimeout(()=>{$t.current.has(e.id)||_t(e.id)},t)})},[Wt,_t]);const[dn,un]=u.useState(!1),[hn,pn]=u.useState(0),[mn,xn]=u.useState(!1),[fn,gn]=u.useState(""),yn=u.useRef(null),bn=u.useRef(!1),vn=u.useCallback(e=>{const t="vx:swipe-toast-seen";try{localStorage.getItem(t)&&(bn.current=!0)}catch{}if(!bn.current){bn.current=!0;try{localStorage.setItem(t,"1")}catch{}gn(e),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1600)}},[]),wn=u.useRef(null),kn=u.useRef(null),jn=async e=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(e);else{const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}xn(!0),setTimeout(()=>xn(!1),1500),gn("Link copied"),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1600)}catch{}},Sn=(e,t)=>{try{localStorage.setItem((e=>`notes:${e}`)(e),JSON.stringify(t))}catch{}},Nn=e=>`bookmarks:${e}`,Cn=e=>{try{const t=localStorage.getItem(Nn(e));return t?JSON.parse(t):[]}catch{return[]}},Tn=(e,t)=>{try{localStorage.setItem(Nn(e),JSON.stringify(t))}catch{}},[En,Ln]=u.useState(!1),[In,Mn]=u.useState(""),[An,Rn]=u.useState(0),[zn,Bn]=u.useState(0),[Wn,Pn]=u.useState(0),[$n,Dn]=u.useState(!1),[_n,On]=u.useState([]),Un=u.useRef(null),[Fn,Yn]=u.useState(()=>{try{const e=new URLSearchParams(window.location.search||"").get("t");if(null!=e){const t=parseInt(e,10);if(!isNaN(t)&&t>0)return t}}catch{}try{if(ie&&ie.seekTo>0)return Math.floor(ie.seekTo)}catch{}return 0}),[Vn,Hn]=u.useState(null);u.useEffect(()=>{function e(e){try{const t=Vn;if(!t)return;const r=e.target;if(r&&r.closest&&r.closest(`[data-share-anchor="${t}"]`))return;if(r&&r.closest&&r.closest(`[data-share-key="${t}"]`))return;Hn(null)}catch{}}return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[Vn]);const Xn=(e,t)=>{try{return`${window.location?`${window.location.origin}${window.location.pathname}`:""}?video=${encodeURIComponent(e)}&t=${Math.max(0,Math.floor(t||0))}`}catch{return e}},[Jn,qn]=u.useState(!1),[Qn,Kn]=u.useState({show:!1,x:0,y:0}),[Gn,Zn]=u.useState(!1),eo=u.useRef(null),to=u.useRef(null),ro=()=>{try{const e=bt.current,t=e?Math.floor(e.currentTime||0):Math.floor(pt*St||0);Rn(t),Bn(Math.max(0,t-5)),Pn(Math.min(St,t+15)),Mn(""),Dn(!1),Ln(!0)}catch{}};u.useEffect(()=>{try{const e=new URLSearchParams(window.location.search||""),t=e.get("video"),r=e.get("t");if(t){try{Te(m(decodeURIComponent(t)))}catch{Te(m(t))}if(null!=r){const e=parseInt(r,10);Number.isNaN(e)||(Un.current=e)}}}catch{}},[]),u.useEffect(()=>{try{if(!Ce)return void On([]);const e=Cn(Ce)||[];if(On(e),null!=Un.current){const e=Un.current;Un.current=null,setTimeout(()=>{try{if(Ie&&ze.current&&ze.current.contentWindow)return ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[e,!0]}),"*"),Yn(e),Tt.current=e,Et.current=Date.now(),void(St>0&&mt(e/St));const t=bt.current;if(t){try{t.src=m(Ce)}catch{}try{t.currentTime=Math.max(0,e)}catch{}try{lt(!0),mi(2e3)}catch{}}}catch{}},180)}}catch{}},[Ce]);const no=(e=1800)=>{Li.current&&(clearTimeout(Li.current),Li.current=null),Li.current=setTimeout(()=>{Ci(!1),Li.current=null},e)},oo=e=>{const t=Math.max(0,Math.floor(e||0));return`${Math.floor(t/60)}:${String(t%60).padStart(2,"0")}`},ao=e=>{try{e?.stopPropagation?.()}catch{}try{navigator.vibrate&&navigator.vibrate(12)}catch{}setTimeout(()=>{try{window.location.href="./watchtogether.jsx"}catch{}},50)},[io,so]=u.useState(!1),[lo,co]=u.useState(""),[uo,ho]=u.useState(!1),po="undefined"!=typeof window?window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`:"http://localhost:4000";u.useEffect(()=>{try{if(!Ce)return void ho(!1);const e=localStorage.getItem("regaarder_token");fetch(`${po}/bookmarks`,{headers:e?{Authorization:`Bearer ${e}`}:{}}).then(e=>e.json()).then(e=>{if(e&&e.success){const t=Array.isArray(e.videos)&&e.videos.some(e=>String(e.videoUrl)===String(Ce));ho(!!t)}}).catch(()=>{})}catch{}},[Ce]);const[mo,xo]=u.useState(!1),[fo,go]=Je("captionsEnabled",!1),[yo,bo]=Je("captionLanguage","English"),[vo,wo]=Je("captionFontSize",16),[ko,jo]=Je("captionPosition","Bottom"),[So,No]=Je("captionTextColor","#FFFFFF"),[Co,To]=Je("captionBgOpacity","100% Black"),[Eo,Lo]=u.useState(o("Example subtitle text","undefined"!=typeof window&&localStorage.getItem("regaarder_language")||"English")),[Io,Mo]=u.useState(!1),[Ao,Ro]=u.useState(!1),[zo,Bo]=u.useState(!1),[Wo,Po]=u.useState(!1),[$o,Do]=u.useState(!1),[_o,Oo]=u.useState(!1),[Uo,Fo]=u.useState(!1),[Yo,Vo]=u.useState(!1),[Ho,Xo]=u.useState("Iâ€™d like a video about â€¦"),[Jo,qo]=u.useState(!1),[Qo,Ko]=u.useState(!1);Qo||(Ho||"").length,Math.min((Ho||"").length/120,1);const[Go,Zo]=u.useState(!1),[ea,ta]=u.useState(!1),ra=u.useRef({startX:0,startY:0}),[na,oa]=u.useState(0),aa=u.useRef(!1);u.useEffect(()=>{try{localStorage.getItem("vx:hint:gesture")||(ta(!0),oa(0))}catch{}},[]),u.useEffect(()=>{if(le)try{const e="handleHintShownOptions";localStorage.getItem(e)||(Mo(!0),setTimeout(()=>Mo(!1),3400),localStorage.setItem(e,"1"))}catch{}},[le]),u.useEffect(()=>{if(mo)try{const e="handleHintShownCaptions";localStorage.getItem(e)||(Ro(!0),setTimeout(()=>Ro(!1),3400),localStorage.setItem(e,"1"))}catch{}},[mo]),u.useEffect(()=>{if(jr)try{const e="handleHintShownShare";localStorage.getItem(e)||(Bo(!0),setTimeout(()=>Bo(!1),3400),localStorage.setItem(e,"1"))}catch{}},[jr]),u.useEffect(()=>{if(dn)try{const e="handleHintShownTip";localStorage.getItem(e)||(Po(!0),setTimeout(()=>Po(!1),3400),localStorage.setItem(e,"1"))}catch{}},[dn]),u.useEffect(()=>{if(Nr)try{const e="handleHintShownReport";localStorage.getItem(e)||(Do(!0),setTimeout(()=>Do(!1),3400),localStorage.setItem(e,"1"))}catch{}},[Nr]);const[ia,sa]=u.useState(!1),[la,ca]=u.useState(!1);u.useEffect(()=>{if(la)try{const e="handleHintShownNotes";localStorage.getItem(e)||(Oo(!0),setTimeout(()=>Oo(!1),3400),localStorage.setItem(e,"1"))}catch{}},[la]),u.useEffect(()=>{try{const e="handleHintShownQuickOptions";if(localStorage.getItem(e))return;let t=null;try{t=aa.current}catch{}!0!==t||ea||Fo(!0);try{aa.current=ea}catch{}}catch{}},[ea]);const[da,ua]=Je("progressColor",ne||"#9333ea"),[ha,pa]=Je("loopVideo",!1),[ma,xa]=Je("autoPlayEnabled",!0);u.useEffect(()=>{const e=bt.current;if(!e||!Ce||!ma)return;if(Ie)return;let t=!1;const r=async()=>{if(t)return;const e=bt.current;if(e)try{if(e.muted=!0,e.playsInline=!0,e.autoplay=!0,e.preload="auto",0===e.readyState){const t=m(Ce);if(t){if(e.src!==t)try{e.src=t}catch{}try{e.load()}catch{}}}const r=e.play();r&&"function"==typeof r.then&&(await r,t||jt(!0))}catch{}},n=()=>{r()},o=()=>{"visible"===document.visibilityState&&r()};try{e.addEventListener("canplay",n)}catch{}try{e.addEventListener("loadeddata",n)}catch{}try{document.addEventListener("visibilitychange",o)}catch{}return e.readyState>=2?r():(setTimeout(()=>{r()},150),setTimeout(()=>{r()},600),setTimeout(()=>{r()},1500)),()=>{t=!0;try{e.removeEventListener("canplay",n)}catch{}try{e.removeEventListener("loadeddata",n)}catch{}try{document.removeEventListener("visibilitychange",o)}catch{}}},[Ce,ma,vt,Ie]),u.useEffect(()=>{const e=setTimeout(async()=>{try{const e=localStorage.getItem("regaarder_token");if(!e)return;const t=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;await fetch(`${t}/users/preferences`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({preferences:{progressColor:da}})})}catch(e){}},2e3);return()=>clearTimeout(e)},[da]);const fa=(e,t=1)=>{let r=e.replace("#","").trim();3===r.length&&(r=r.split("").map(e=>e+e).join(""));return`rgba(${parseInt(r.substr(0,2),16)}, ${parseInt(r.substr(2,2),16)}, ${parseInt(r.substr(4,2),16)}, ${t})`},ga=da,ya="#9333ea",ba=fa(da,.06),va=(e=>{let t=e.replace("#","").trim();3===t.length&&(t=t.split("").map(e=>e+e).join(""));return.2126*(parseInt(t.substr(0,2),16)/255)+.7152*(parseInt(t.substr(2,2),16)/255)+.0722*(parseInt(t.substr(4,2),16)/255)>.6?"#000":"#fff"})(da),[wa,ka]=Je("darkMode",!0),[ja,Sa]=Je("selectedQuality","480p"),[Na,Ca]=u.useState("Auto"===ja),Ta=u.useRef({}),Ea=u.useRef("480p"),La=()=>{try{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(!e)return"480p";const t=e.effectiveType,r=e.downlink;return"4g"===t&&r>=10?"1440p":"4g"===t&&r>=5?"1080p":"4g"===t&&r>=2.5||"3g"===t&&r>=2.5?"720p":"3g"===t||r>=1.5?"480p":"2g"===t||r>=.5?"360p":"240p"}catch(e){return"480p"}};u.useEffect(()=>{if("Auto"!==ja)return void Ca(!1);Ca(!0);const e=bt.current;if(!e)return;const t=La();Ea.current=t;const r=navigator.connection||navigator.mozConnection||navigator.webkitConnection,n=()=>{const t=La();if(t!==Ea.current&&(Ea.current=t,!e.paused))try{const r=Ia(t);if(r&&(e.currentSrc||e.src||"").split("?")[0]!==r.split("?")[0]){const t=e.currentTime||0;e.pause(),e.src=m(r),e.load(),e.currentTime=Math.max(0,Math.min(t,e.duration||1/0)),e.play().catch(()=>{})}}catch(r){}};return r?(r.addEventListener("change",n),()=>r.removeEventListener("change",n)):void 0},[ja]);const Ia=e=>{const t="Auto"===e?Ea.current:e;if(Ta.current&&Ta.current[t])return Ta.current[t];const r=Ce&&Ce.trim()?Ce.trim():"";try{if(/\b\d{3,4}p\b/.test(r))return r.replace(/\b\d{3,4}p\b/,t);const e=new URL(r,window.location.origin);return e.searchParams.set("quality",t),e.toString()}catch(n){return r}};u.useEffect(()=>{try{if(Ie&&ze.current&&ze.current.contentWindow){const e="Auto"===ja?"default":{"144p":"tiny","240p":"small","360p":"medium","480p":"large","720p":"hd720","1080p":"hd1080","1440p":"hd1440","2160p":"hd2160"}[ja]||"default";try{ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"setPlaybackQuality",args:[e]}),"*")}catch{}return}const e=bt.current;if(!e)return;if("Auto"===ja)return;const t=Ia(ja);if(!t)return;if((e.currentSrc||e.src||"").split("?")[0]===t.split("?")[0])return;const r=!e.paused&&!e.ended,n=e.currentTime||0;if(e.pause(),e.src=m(t),e.load(),e.currentTime=Math.max(0,Math.min(n,e.duration||1/0)),r){const t=e.play();t&&t.catch&&t.catch(()=>{})}}catch(e){}},[ja,Ie]);const[Ma,Aa]=Je("playbackSpeed",1),[Ra,za]=Je("incognitoMode",!1),[Ba,Wa]=u.useState(!1),Pa=(e,t={})=>{try{window.dispatchEvent(new CustomEvent(e,{detail:t}))}catch(r){}};u.useCallback(()=>{const e={videoUrl:Ce,videoTitle:Pe,creatorName:De,time:Date.now(),incognito:Ra};Pa("player:watch",e)},[Ce,Pe,De,Ra]),u.useEffect(()=>{try{bt.current&&(bt.current.playbackRate=Ma)}catch{}},[Ma]),u.useEffect(()=>{try{bt.current&&(bt.current.loop=ha)}catch{}},[ha]),u.useEffect(()=>{const e=bt.current;if(!e)return;const t=async()=>{if(ha)try{e.currentTime=0,await e.play(),jt(!0)}catch(t){}};return e.addEventListener("ended",t),()=>e.removeEventListener("ended",t)},[ha]),u.useEffect(()=>{const e=bt.current;if(!e)return;if(Ra)return;let t=!0;const r={current:null};n(()=>import("./watchhistory-BvywJItQ.js"),__vite__mapDeps([48,1,2,3,11,6,7,8,22,45,33,42,49])).then(e=>{t&&(r.current=e.recordWatchProgress)}).catch(()=>{});const o=(t=!1)=>{try{const n=r.current;if("function"!=typeof n)return;n({videoId:Se?.id||Ce||Pe||null,userId:null,lastWatchedTime:Math.floor(e.currentTime||0),duration:Math.floor(e.duration||0),timestamp:(new Date).toISOString(),isComplete:Boolean(t)})}catch(n){}},a=()=>o(!1),i=()=>o(!0);e.addEventListener("pause",a),e.addEventListener("ended",i);const s=setInterval(()=>{try{e.paused||e.ended||o(!1)}catch{}},15e3),l=()=>o(e.ended||!1);window.addEventListener("pagehide",l);const c=()=>{"hidden"===document.visibilityState&&l()};return document.addEventListener("visibilitychange",c),()=>{t=!1;try{e.removeEventListener("pause",a),e.removeEventListener("ended",i)}catch{}try{window.removeEventListener("pagehide",l),document.removeEventListener("visibilitychange",c)}catch{}clearInterval(s)}},[Ce,Pe,Ra]);const[$a,Da]=Je("doubleTap",!0),[_a,Oa]=u.useState(!1),[Ua,Fa]=u.useState(!1),[Ya,Va]=u.useState(!1),[Ha,Xa]=u.useState(!1),[Ja,qa]=u.useState(!1),[Qa,Ka]=u.useState("left"),[Ga,Za]=u.useState({x:20,y:220}),ei=u.useRef({dragging:!1,startX:0,startY:0,origX:0,origY:0,nextX:0,nextY:0}),ti=u.useRef(!1),ri=u.useRef(null),ni=u.useRef(null);u.useEffect(()=>{},[]),u.useEffect(()=>{if(!_a||Ya)return;const e=setTimeout(()=>{Fa(!0);const e=setTimeout(()=>{Oa(!1),Fa(!1),Va(!1),Xa(!1)},260);return()=>clearTimeout(e)},7e3);return()=>clearTimeout(e)},[_a]);const oi=e=>{const t=ei.current;if(t.dragging){if(t.dragging=!1,e.target.releasePointerCapture)try{e.target.releasePointerCapture(e.pointerId)}catch{}Za({x:t.nextX,y:t.nextY});try{ri.current&&(ri.current.style.transition="transform 220ms ease, left 220ms ease, top 220ms ease")}catch{}ni.current&&(cancelAnimationFrame(ni.current),ni.current=null)}};h.useEffect(()=>{let e=null,t=null;return pe?(fe(!0),ye(!0),ve(!0),Ge.current&&(clearTimeout(Ge.current),Ge.current=null),Ge.current=setTimeout(()=>{ve(!1),Ge.current=null},1400),e=setTimeout(()=>fe(!1),1200),t=setTimeout(()=>ye(!1),1350)):(fe(!1),ye(!1),ve(!1)),()=>{e&&clearTimeout(e),t&&clearTimeout(t)}},[pe]),u.useEffect(()=>()=>{Ke.current&&(clearTimeout(Ke.current),Ke.current=null),Ge.current&&(clearTimeout(Ge.current),Ge.current=null),ut.current&&(clearTimeout(ut.current),ut.current=null),ki.current&&(clearTimeout(ki.current),ki.current=null),Li.current&&(clearTimeout(Li.current),Li.current=null),je.current&&(clearTimeout(je.current),je.current=null)},[]);const ai=async()=>{if(Wt&&Wt.some(e=>"overlay"===e.type))return;if(Ie&&ze.current){try{ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"unMute"}),"*"),ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"setVolume",args:[100]}),"*"),kt?(ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*"),jt(!1)):(ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*"),jt(!0));try{mi()}catch{}}catch{}return}const e=bt.current;if(e)try{if(e.paused||e.ended){await e.play(),jt(!0);try{mi()}catch{}}else{e.pause(),jt(!1);try{mi()}catch{}}}catch{}},[ii,si]=u.useState(!1),li=u.useRef(null),ci=async()=>{try{await navigator.clipboard.writeText(Ce||""),si(!0);try{navigator.vibrate&&navigator.vibrate(10)}catch{}li.current&&clearTimeout(li.current),li.current=setTimeout(()=>si(!1),1600)}catch(e){try{const e=document.createElement("textarea");e.value=Ce||"",e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),si(!0),li.current&&clearTimeout(li.current),li.current=setTimeout(()=>si(!1),1600)}catch{}}},[di,ui]=u.useState(!1),hi=async()=>{const e=bt.current;if(!e&&!Ie)return;try{if(document.fullscreenElement||document.webkitFullscreenElement){await(async()=>document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():void 0)(),Ht(!1);try{await(screen.orientation?.unlock?.())}catch{}return}const t=document.documentElement||e;await(async e=>{if(e)return e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.webkitEnterFullscreen?e.webkitEnterFullscreen():void 0})(t);const r=async()=>{try{try{await(screen.orientation?.lock?.("landscape-primary"))}catch{await(screen.orientation?.lock?.("landscape"))}}catch{Ht(!0)}};await new Promise(e=>setTimeout(e,100)),await r(),setTimeout(()=>{"undefined"!=typeof window&&window.innerHeight>window.innerWidth&&Ht(!0)},300);const n=async()=>{if(document.fullscreenElement||document.webkitFullscreenElement){"undefined"!=typeof window&&window.innerHeight>window.innerWidth&&Ht(!0)}document.removeEventListener("fullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n)};document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n)}catch{}};u.useEffect(()=>{const e=()=>{if(document.fullscreenElement||document.webkitFullscreenElement){Jt(!0),Ut("landscape");const e="undefined"!=typeof window&&window.innerHeight>window.innerWidth;Ht(e)}else{Jt(!1),Ut(Ft<1?"portrait":"landscape"),Ht(!1);try{screen.orientation?.unlock?.()}catch{}}};document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e);const t=bt.current,r=()=>{Ut("landscape"),Ht(!1)},n=()=>{Ut(Ft<1?"portrait":"landscape"),Ht(!1)};if(t&&t.addEventListener){try{t.addEventListener("webkitbeginfullscreen",r)}catch{}try{t.addEventListener("webkitendfullscreen",n)}catch{}}const o=()=>{(screen.orientation?.type||"").startsWith("landscape")&&Ht(!1)};return window.addEventListener("orientationchange",o),()=>{if(document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),window.removeEventListener("orientationchange",o),t&&t.removeEventListener){try{t.removeEventListener("webkitbeginfullscreen",r)}catch{}try{t.removeEventListener("webkitendfullscreen",n)}catch{}}}},[Ft]);const pi=e=>{try{mi()}catch{}ft.current=!0,yt(!0);const t=e.clientX||e.touches&&e.touches[0]?.clientX;pr(!0),br("portrait"===Ot?{w:112,h:200}:{w:180,h:100}),t&&wr(t)},mi=(e=2500)=>{lt(!0),dt(!0),ut.current&&(clearTimeout(ut.current),ut.current=null),ut.current=setTimeout(()=>{dt(!1),ut.current=null},e)};u.useEffect(()=>{try{mi(1200)}catch{}},[kt]),u.useEffect(()=>{lt(!0)},[]);const xi=u.useRef(null);u.useEffect(()=>{if(Xt||Vt)return kt?(xi.current&&clearTimeout(xi.current),xi.current=setTimeout(()=>{lt(!1),dt(!1),xi.current=null},2e3),()=>{xi.current&&(clearTimeout(xi.current),xi.current=null)}):(lt(!0),void(xi.current&&(clearTimeout(xi.current),xi.current=null)))},[Xt,Vt,kt,st]),u.useLayoutEffect(()=>{if("undefined"!=typeof window)try{const t=window.Capacitor||("undefined"!=typeof Capacitor?Capacitor:null);if(t&&t.Plugins){if(t.Plugins.ImmersiveMode)try{t.Plugins.ImmersiveMode.setImmersive({enabled:!0})}catch(e){}if(t.Plugins.StatusBar){try{t.Plugins.StatusBar.hide()}catch(e){}try{t.Plugins.StatusBar.setOverlaysWebView({overlay:!0})}catch(e){}}if(t.Plugins.NavigationBar)try{t.Plugins.NavigationBar.hide()}catch(e){}if(t.Plugins.SystemBars){try{t.Plugins.SystemBars.hide?.({bar:"StatusBar"})}catch(e){}try{t.Plugins.SystemBars.hide?.({bar:"NavigationBar"})}catch(e){}}}let r=document.querySelector('meta[name="viewport"]');r||(r=document.createElement("meta"),r.name="viewport",document.head.appendChild(r)),r.setAttribute("content","width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no, maximum-scale=1"),document.documentElement.requestFullscreen;const n=document.createElement("style");n.textContent="\n\t\t\t\thtml, body {\n\t\t\t\t\twidth: 100vw;\n\t\t\t\t\theight: 100vh;\n\t\t\t\t\tmax-width: 100vw;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tpadding: 0;\n\t\t\t\t\tborder: 0;\n\t\t\t\t\tbackground: #000;\n\t\t\t\t}\n\t\t\t";const o="regaarder-immersive-style";let a=document.getElementById(o);return a&&a.remove(),n.id=o,document.head.appendChild(n),document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",()=>{try{const e=document.getElementById(o);e&&e.remove()}catch(e){}try{const t=window.Capacitor||("undefined"!=typeof Capacitor?Capacitor:null);if(t&&t.Plugins){if(t.Plugins.ImmersiveMode)try{t.Plugins.ImmersiveMode.setImmersive({enabled:!1})}catch(e){}if(t.Plugins.StatusBar)try{t.Plugins.StatusBar.show()}catch(e){}if(t.Plugins.NavigationBar)try{t.Plugins.NavigationBar.show()}catch(e){}if(t.Plugins.SystemBars){try{t.Plugins.SystemBars.show?.({bar:"StatusBar"})}catch(e){}try{t.Plugins.SystemBars.show?.({bar:"NavigationBar"})}catch(e){}}}}catch(e){}try{window.screen&&window.screen.orientation&&window.screen.orientation.unlock&&window.screen.orientation.unlock()}catch(e){}document.documentElement.style.overflow="",document.body.style.overflow=""}}catch(e){}},[]),u.useEffect(()=>{lt(!0)},[pe]),u.useEffect(()=>{(le||mo||jr||ia)&&lt(!0)},[le,mo,jr,ia]);const fi=u.useCallback((e,t)=>{const r=Date.now(),n=[];for(let a=0;a<15;a++){const e=(24*a+(24*Math.random()-12))*Math.PI/180,t=80+120*Math.random(),r=Math.cos(e)*t,o=Math.sin(e)*t,i=16+14*Math.random(),s=600+400*Math.random(),l=80*Math.random();n.push({dx:r,dy:o,size:i,duration:s,delay:l,angle:40*Math.random()-20})}const o={id:r,x:e,y:t,particles:n};at(e=>[...e,o]),setTimeout(()=>{at(e=>e.filter(e=>e.id!==r))},1200)},[]),[gi,yi]=u.useState(!1),bi=u.useRef({x:0,y:0}),vi=u.useRef(!1),wi=u.useRef(!1),ki=u.useRef(null),ji=u.useRef(!1),Si=u.useRef({x:0,y:0}),[Ni,Ci]=u.useState(!1),[Ti,Ei]=u.useState({x:0,y:0}),Li=u.useRef(null),Ii=u.useRef(null);u.useEffect(()=>{const e=e=>{try{if(!Ni)return;if(e.target&&e.target.closest&&e.target.closest(".quick-action-card"))return;Ci(!1),Li.current&&(clearTimeout(Li.current),Li.current=null)}catch{}};return window.addEventListener("pointerdown",e,{passive:!0}),()=>window.removeEventListener("pointerdown",e)},[Ni]);const[Mi,Ai]=u.useState(0),[Ri,zi]=u.useState(!1),Bi=u.useRef(Math.min(480,"undefined"!=typeof window?Math.round(.92*window.innerWidth):360));u.useEffect(()=>{const e=()=>{"undefined"!=typeof window&&(Bi.current=Math.min(480,Math.round(.92*window.innerWidth)))};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const Wi=()=>{yi(!1),Ai(0),vi.current=!1,wi.current=!1},Pi=u.useRef({x:0,y:0}),$i=e=>{if(!gi)return;const t=Bi.current,r=Math.max(100,.25*t);Mi>-t+r?(zi(!1),Ai(0)):(zi(!0),Ai(-t)),yi(!1);try{e.target?.releasePointerCapture?.(e.pointerId)}catch{}};u.useEffect(()=>{try{const e=bt.current;if(!e)return;e.style.pointerEvents=Ri||gi?"none":""}catch(e){}},[Ri,gi]);const Di=()=>{jt(!1);try{const e=bt.current;e&&e.pause()}catch(r){}if(ha)return;if(!ma)return void Vo(!0);const e=tr.current||[];let t="number"==typeof rr?rr+1:0;if(t<e.length&&e[t]){let n=e[t];if("string"==typeof n)if(Zt){const e=Zt.find(e=>String(e.id)===String(n)||String(e.url)===String(n)||String(e.src)===String(n));e?n=e:(n.includes("/")||n.startsWith("http"))&&(n={url:n,title:"Video",creator:""})}else(n.includes("/")||n.startsWith("http"))&&(n={url:n,title:"Video",creator:""});n&&(n.url||n.src||n.videoUrl)?($e(n.title||"Video"),_e(n.creator||""),Te(m(n.url||n.src||n.videoUrl)),Ne(n.id?n:null),Bt([]),Pt([]),Mt([]),Rt([]),$t.current=new Set,Dt.current=new Set,lt(!0),mi(1600),vn("Next video"),nr(t),setTimeout(async()=>{try{const e=bt.current;if(e){const t=n.url||n.src||n.videoUrl;t&&(e.src=m(t)),e.currentTime=0;const r=e.play();r&&r.catch&&r.catch(()=>{}),jt(!0)}}catch(r){}},120)):Vo(!0)}else Vo(!0)};Ct.current=Di;const _i=!!p;return a.jsxs("div",{className:"bg-black w-full overflow-hidden flex flex-col",style:{boxSizing:"border-box",margin:0,padding:0,border:0,position:_i?"absolute":"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",maxWidth:"100vw",paddingLeft:"env(safe-area-inset-left, 0px)",paddingRight:"env(safe-area-inset-right, 0px)",paddingTop:"env(safe-area-inset-top, 0px)",paddingBottom:"env(safe-area-inset-bottom, 0px)"},onClick:e=>{try{if(e.target&&e.target.closest&&e.target.closest("button"))return;e.target&&e.target.closest&&e.target.closest(".video-center")||lt(!1)}catch{}},children:[a.jsx("style",{children:'\n\t\t\t\t\t.modal-dialog button{ transition: transform .12s ease, filter .12s ease, box-shadow .12s ease, opacity .12s; cursor: pointer; }\n\t\t\t\t\t.modal-dialog button:active, .modal-dialog button[data-pressed="true"]{ transform: translateY(1px) scale(0.985); filter: brightness(0.94); opacity: 0.98; }\n\t\t\t\t\t.modal-dialog button{ pointer-events: auto !important; }\n\t\t\t\t\t/* slightly reduce active effect for toggles/switch inner elements */\n\t\t\t\t\t.modal-dialog button .w-5{ transition: transform .12s ease; }\n\t\t\t\t'}),a.jsx("style",{children:"\n\t\t\t\t\t/* single move animation (moves downward). Rotating the wrapper will change visual direction */\n\t\t\t\t\t@keyframes vx-gesture-move { 0% { transform: translateY(-4px) translateX(0) scale(0.98); opacity: .95 } 40% { transform: translateY(40px) translateX(0) scale(1); opacity: .98 } 70% { transform: translateY(40px) translateX(0) scale(1); opacity: .98 } 100% { transform: translateY(40px) translateX(0) scale(1); opacity: .0 } }\n\t\t\t\t\t@keyframes vx-pulse { 0% { transform: scale(1); opacity: 1 } 50% { transform: scale(1.04); opacity: 0.9 } 100% { transform: scale(1); opacity: 1 } }\n\t\t\t\t\t@keyframes vx-toast-in { 0% { transform: translateX(-50%) translateY(-10px); opacity: 0 } 100% { transform: translateX(-50%) translateY(0); opacity: 1 } }\n\t\t\t\t\t@keyframes vx-gesture-fadein { 0% { opacity: 0 } 100% { opacity: 1 } }\n\t\t\t\t\t@keyframes vx-gesture-textfade { 0% { opacity: 0; transform: translateY(8px) } 100% { opacity: 1; transform: translateY(0) } }\n\t\t\t\t\t@keyframes vx-gesture-press { 0% { transform: scale(1); opacity: 0.95 } 30% { transform: scale(0.88); opacity: 1 } 60% { transform: scale(0.88); opacity: 1 } 100% { transform: scale(1); opacity: 0.95 } }\n\t\t\t\t\t@keyframes vx-gesture-doubletap { 0% { transform: scale(1) } 15% { transform: scale(0.92) } 25% { transform: scale(1.02) } 45% { transform: scale(0.92) } 55% { transform: scale(1.06) } 70% { transform: scale(1) } 100% { transform: scale(1) } }\n\t\t\t\t\t@keyframes vx-gesture-ripple { 0% { transform: scale(0.6); opacity: 0.6 } 100% { transform: scale(1.4); opacity: 0 } }\n\t\t\t\t\t/* White pulsing dot for Watch Together floating button */\n\t\t\t\t\t@keyframes wt-pulse { 0% { transform: scale(1); opacity: 0.9 } 50% { transform: scale(1.6); opacity: 0.0 } 100% { transform: scale(1); opacity: 0.0 } }\n\t\t\t\t\t\n\t\t\t\t\t/* Heart Explosion - Radial firework animation for double-tap like */\n\t\t\t\t\t@keyframes heart-explode {\n\t\t\t\t\t\t0% { transform: translate(0, 0) scale(0.3) rotate(var(--heart-rot, 0deg)); opacity: 1; }\n\t\t\t\t\t\t20% { transform: translate(calc(var(--heart-dx) * 0.6), calc(var(--heart-dy) * 0.6)) scale(1.1) rotate(var(--heart-rot, 0deg)); opacity: 1; }\n\t\t\t\t\t\t60% { transform: translate(calc(var(--heart-dx) * 0.9), calc(var(--heart-dy) * 0.9)) scale(0.85) rotate(var(--heart-rot, 0deg)); opacity: 0.7; }\n\t\t\t\t\t\t100% { transform: translate(var(--heart-dx), var(--heart-dy)) scale(0.4) rotate(var(--heart-rot, 0deg)); opacity: 0; }\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t/* Bottom Ad Text Animations */\n\t\t\t\t\t@keyframes fadeInText { 0% { opacity: 0; } 100% { opacity: 1; } }\n\t\t\t\t\t@keyframes slideLeftText { 0% { transform: translateX(20px); opacity: 0; } 100% { transform: translateX(0); opacity: 1; } }\n\t\t\t\t\t@keyframes slideRightText { 0% { transform: translateX(-20px); opacity: 0; } 100% { transform: translateX(0); opacity: 1; } }\n\t\t\t\t\t@keyframes bounceText { 0% { transform: translateY(10px); opacity: 0; } 60% { transform: translateY(-5px); opacity: 1; } 100% { transform: translateY(0); opacity: 1; } }\n\t\t\t\t\t@keyframes scaleText { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }\n\t\t\t\t\t\n\t\t\t\t\t/* Bottom Ad Card Animations */\n\t\t\t\t\t@keyframes fadeInCard { 0% { opacity: 0; } 100% { opacity: 1; } }\n\t\t\t\t\t@keyframes linefirstCard { 0% { background-image: linear-gradient(90deg, transparent 0%, transparent 100%); opacity: 0; } 30% { background-image: linear-gradient(90deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.1) 100%); opacity: 1; } 100% { background-image: linear-gradient(90deg, transparent 0%, transparent 100%); opacity: 1; } }\n\t\t\t\t\t@keyframes slideDownCard { 0% { transform: translateY(-20px); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } }\n\t\t\t\t\t@keyframes bounceInCard { 0% { transform: scale(0.85); opacity: 0; } 50% { transform: scale(1.05); } 100% { transform: scale(1); opacity: 1; } }\n\t\t\t\t\t@keyframes scaleUpCard { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }\n\t\t\t\t\t\n\t\t\t\t\t/* Card Effect Animations */\n\t\t\t\t\t@keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.02); opacity: 0.95; } 100% { transform: scale(1); opacity: 1; } }\n\t\t\t\t\t@keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-2px); } 50% { transform: translateX(2px); } 75% { transform: translateX(-2px); } 100% { transform: translateX(0); } }\n\t\t\t\t\t@keyframes glow { 0% { box-shadow: 0 0 8px rgba(139, 92, 246, 0.3); } 50% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.6); } 100% { box-shadow: 0 0 8px rgba(139, 92, 246, 0.3); } }\n\t\t\t\t\t@keyframes float { 0% { transform: translateY(0); } 50% { transform: translateY(-4px); } 100% { transform: translateY(0); } }\n\t\t\t\t\t@keyframes rotate { 0% { transform: rotate(0deg) scale(1); } 50% { transform: rotate(1deg) scale(1.01); } 100% { transform: rotate(0deg) scale(1); } }\n\t\t\t\t\t\n\t\t\t\t\t/* Bottom Ad Exit Animations */\n\t\t\t\t\t@keyframes fadeOut { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(1); } }\n\t\t\t\t\t@keyframes slideOut { 0% { opacity: 1; transform: translateX(0); } 100% { opacity: 0; transform: translateX(100%); } }\n\t\t\t\t\t@keyframes scaleDown { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(0.7); } }\n\t\t\t\t\t@keyframes bounceOut { 0% { opacity: 1; transform: translateY(0) scale(1); } 50% { opacity: 1; transform: translateY(-10px) scale(1.05); } 100% { opacity: 0; transform: translateY(-30px) scale(0.8); } }\n\t\t\t\t\t@keyframes rotateOut { 0% { opacity: 1; transform: rotate(0deg) scale(1); } 100% { opacity: 0; transform: rotate(15deg) scale(0.8); } }\n\t\t\t\t"}),ea&&a.jsx("div",{"aria-hidden":!0,style:{position:"fixed",inset:0,zIndex:1200,display:"flex",alignItems:"center",justifyContent:"center",background:"radial-gradient(ellipse at center, rgba(0,0,0,0.82) 0%, rgba(0,0,0,0.92) 100%)",pointerEvents:"none",animation:"vx-gesture-fadein 400ms ease-out"},children:a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:20,maxWidth:320,padding:"0 24px"},children:[a.jsx("div",{style:{display:"flex",gap:6,marginBottom:4},children:[0,1,2,3,4].map(e=>a.jsx("div",{style:{width:na===e?20:6,height:6,borderRadius:3,background:na===e?"var(--color-gold, #ca8a04)":"rgba(255,255,255,0.25)",transition:"all 300ms ease"}},e))}),a.jsxs("div",{style:{width:96,height:96,borderRadius:24,background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",animation:"vx-pulse 2000ms ease-in-out infinite"},children:[0===na&&a.jsx("div",{style:{transform:"rotate(180deg)"},children:a.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{animation:"vx-gesture-move 1400ms ease-in-out infinite"},children:[a.jsx("rect",{x:"6.5",y:"11",width:"11",height:"6.5",rx:"3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.5"}),a.jsx("path",{d:"M12 5v6",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round"}),a.jsx("path",{d:"M9.5 7.5v4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.4",strokeLinecap:"round"}),a.jsx("path",{d:"M8 9v3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.3",strokeLinecap:"round"}),a.jsx("path",{d:"M12 17v4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round"}),a.jsx("path",{d:"M10.7 19.3l1.3 1.3l1.3-1.3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"})]})}),1===na&&a.jsx("div",{style:{transform:"rotate(0deg)"},children:a.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{animation:"vx-gesture-move 1400ms ease-in-out infinite"},children:[a.jsx("rect",{x:"6.5",y:"11",width:"11",height:"6.5",rx:"3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.5"}),a.jsx("path",{d:"M12 5v6",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round"}),a.jsx("path",{d:"M9.5 7.5v4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.4",strokeLinecap:"round"}),a.jsx("path",{d:"M8 9v3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.3",strokeLinecap:"round"}),a.jsx("path",{d:"M12 17v4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round"}),a.jsx("path",{d:"M10.7 19.3l1.3 1.3l1.3-1.3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"})]})}),2===na&&a.jsx("div",{style:{transform:"rotate(90deg)"},children:a.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{animation:"vx-gesture-move 1400ms ease-in-out infinite"},children:[a.jsx("rect",{x:"6.5",y:"11",width:"11",height:"6.5",rx:"3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.5"}),a.jsx("path",{d:"M12 5v6",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round"}),a.jsx("path",{d:"M9.5 7.5v4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.4",strokeLinecap:"round"}),a.jsx("path",{d:"M8 9v3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.3",strokeLinecap:"round"}),a.jsx("path",{d:"M12 17v4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round"}),a.jsx("path",{d:"M10.7 19.3l1.3 1.3l1.3-1.3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"})]})}),3===na&&a.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{animation:"vx-gesture-press 1600ms ease-in-out infinite"},children:[a.jsx("rect",{x:"6.5",y:"11",width:"11",height:"6.5",rx:"3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.5"}),a.jsx("path",{d:"M12 5v6",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round"}),a.jsx("path",{d:"M9.5 7.5v4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.4",strokeLinecap:"round"}),a.jsx("path",{d:"M8 9v3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.3",strokeLinecap:"round"}),a.jsx("circle",{cx:"12",cy:"14",r:"8",stroke:"rgba(255,255,255,0.3)",strokeWidth:"1",style:{animation:"vx-gesture-ripple 1600ms ease-out infinite"}}),a.jsx("circle",{cx:"12",cy:"14",r:"6",stroke:"rgba(255,255,255,0.2)",strokeWidth:"1",style:{animation:"vx-gesture-ripple 1600ms 200ms ease-out infinite"}})]}),4===na&&a.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{animation:"vx-gesture-doubletap 1200ms ease-in-out infinite"},children:[a.jsx("rect",{x:"6.5",y:"11",width:"11",height:"6.5",rx:"3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.5"}),a.jsx("path",{d:"M12 5v6",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round"}),a.jsx("path",{d:"M9.5 7.5v4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.4",strokeLinecap:"round"}),a.jsx("path",{d:"M8 9v3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.3",strokeLinecap:"round"}),a.jsx("path",{d:"M12 19s-4-2.5-4-5a2.12 2.12 0 014-1 2.12 2.12 0 014 1c0 2.5-4 5-4 5z",fill:"rgba(255,100,100,0.8)",stroke:"rgba(255,255,255,0.96)",strokeWidth:"0.8"})]})]}),a.jsxs("div",{style:{textAlign:"center"},children:[a.jsxs("div",{style:{color:"#fff",fontSize:20,fontWeight:700,marginBottom:6,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial',animation:"vx-gesture-textfade 400ms ease-out"},children:[0===na&&"Swipe Up",1===na&&"Swipe Down",2===na&&"Swipe Left",3===na&&"Press & Hold",4===na&&"Double Tap"]}),a.jsxs("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:14,fontWeight:500,lineHeight:1.4,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial'},children:[0===na&&"to see the next video",1===na&&"to see the previous video",2===na&&"to discover more",3===na&&"for quick options",4===na&&"to like a video"]})]}),a.jsx("button",{onClick:()=>{try{localStorage.setItem("vx:hint:gesture","1")}catch{}ta(!1),oa(0)},style:{pointerEvents:"auto",marginTop:8,background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.15)",borderRadius:20,padding:"8px 24px",color:"rgba(255,255,255,0.7)",fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 200ms"},children:"Skip Tutorial"})]})}),!Wt.some(e=>"overlay"===e.type&&("fullscreen"===e.overlayAdPosition||"videoPlayer"===e.overlayAdPosition))&&a.jsxs("div",{className:"w-full flex items-center justify-between",style:{position:Vt||Wt.some(e=>"default2"===e.type)?"fixed":"relative",left:Vt?"50%":0,right:Vt?"auto":0,top:Vt?"50%":Wt.some(e=>"default2"===e.type)?0:"auto",width:Vt?"100vh":"100%",transform:Vt?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 50%))":"none",transformOrigin:"center",paddingTop:"calc(env(safe-area-inset-top, 0px) + 14px)",paddingBottom:8,paddingLeft:Vt?20:16,paddingRight:Vt?20:16,marginTop:4,marginLeft:Vt?"0":"auto",marginRight:Vt?"0":"auto",zIndex:500,boxSizing:"border-box",transition:"opacity 220ms ease, backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease",opacity:st||pe||Wt.some(e=>"default2"===e.type)?1:0,pointerEvents:"auto",background:wa?"linear-gradient(180deg, rgba(0,0,0,0.36), rgba(0,0,0,0.28))":"linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.6))",border:wa?"1px solid rgba(255,255,255,0.02)":"1px solid rgba(0,0,0,0.06)",borderBottom:wa?"1px solid rgba(255,255,255,0.06)":"1px solid rgba(0,0,0,0.12)",boxShadow:"none",backdropFilter:"none",WebkitBackdropFilter:"none"},children:[a.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10",style:{color:wa?"#fff":"#111"},onClick:e=>{try{e.stopPropagation()}catch{}try{bt.current&&bt.current.pause()}catch{}try{jt(!1)}catch{}const t=bt.current,r=Ie?Math.floor(pt*(St||0)):t?t.currentTime:0,n=t&&(t.currentSrc||t.src)||Ce||Se?.src||Se?.videoUrl||Se?.url||oe.get("src")||"",o=m(n)||n,a={video:{id:oe.get("id")||"custom",title:Pe||null,src:o,url:o,videoUrl:o,thumbnail:Se?.thumbnail||Se?.imageUrl||"",imageUrl:Se?.imageUrl||Se?.thumbnail||"",author:De||null,creator:De||null,channel:De||null},time:Math.floor(r||0),paused:!1,title:Pe||null,creatorName:De||null,duration:Ie?Math.floor(St||0):t?Math.floor(t.duration||0):0};if(p&&"function"==typeof p){try{p(a)}catch{}try{"undefined"!=typeof window&&"function"==typeof window.setFooterTab&&window.setFooterTab("home")}catch{}}else{try{localStorage.setItem("miniPlayerData",JSON.stringify(a))}catch{}try{void 0!==i&&s&&s("miniPlayerRequest",a)}catch{}try{void 0!==i&&s&&s("switchToHome",a)}catch{}try{"undefined"!=typeof window&&"function"==typeof window.setFooterTab&&window.setFooterTab("home")}catch{}try{window.history&&window.history.length>1?window.history.back():navigate("/home",{state:{miniPlayerData:a},replace:!0})}catch{try{navigate("/home",{state:{miniPlayerData:a},replace:!0})}catch{}}}},children:a.jsx(T,{})}),!Ya&&(_a||Ua)&&!Wt.some(e=>"overlay"===e.type&&("fullscreen"===e.overlayAdPosition||"videoPlayer"===e.overlayAdPosition))&&a.jsxs("button",{className:"flex items-center text-white pl-3 pr-4 py-1.5 rounded-full text-sm font-medium",onClick:e=>ao(e),style:{background:"#6b5bd1",transition:"opacity 260ms ease, transform 260ms ease",opacity:_a?1:0,pointerEvents:_a?"auto":"none",boxShadow:"0 8px 24px rgba(0,0,0,0.28)",marginLeft:12},children:[a.jsx(R,{size:18}),a.jsx("span",{className:"ml-2 whitespace-nowrap",children:"Watch Together"})]}),a.jsxs("div",{className:"flex items-center space-x-4",style:{transition:"opacity 220ms ease",pointerEvents:"auto"},children:[a.jsx("div",{className:"w-9 flex items-center justify-center",style:{pointerEvents:"auto"},children:pe?a.jsx("button",{onClick:it,"aria-pressed":pe,"aria-label":pe?"Unlock controls":"Lock controls",className:"w-9 h-9 p-1.5 flex items-center justify-center rounded-xl transition-shadow focus:outline-none "+(be?"animate-pulse":""),style:{color:we?ga:pe?"#9CA3AF":wa?"#fff":"#111",background:pe?"#1e2736":"transparent",zIndex:400,position:"relative",opacity:we?1:pe?.28:1},children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-lock-icon lucide-lock",children:[a.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}):a.jsx("div",{className:"w-9 h-9"})}),a.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10","aria-haspopup":"dialog","aria-expanded":mo,onClick:()=>xo(!0),style:{opacity:pe?.28:1,pointerEvents:pe?"none":"auto",color:wa?pe?"#9CA3AF":"#fff":pe?"#9CA3AF":"#111"},children:a.jsx(I,{})}),a.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10",onClick:e=>{e.stopPropagation();const t=bt.current,r=t?t.currentTime:0;!t||t.paused;try{const e=null,o=t&&(t.currentSrc||t.src)||Ce||"",a="",l=oe.get("id")||"custom",c={video:{...e||{},id:l,title:Pe||e&&e.title||null,src:o,url:o,videoUrl:o,thumbnail:a,imageUrl:a,author:De||e&&e.author||null,creator:De||e&&e.creator||null,channel:De||e&&e.channel||null},time:Math.floor(r||0),paused:!1,title:Pe||null,creatorName:De||null,duration:t?Math.floor(t.duration||0):0};console.log("Storing miniPlayerData ->",c);try{localStorage.setItem("miniPlayerData",JSON.stringify(c))}catch(n){console.warn("localStorage set failed",n)}try{void 0!==i&&s&&s("miniPlayerRequest",c)}catch(n){}const d=new URLSearchParams;d.set("mini","1"),c.video&&c.video.id&&d.set("id",c.video.id),"number"==typeof c.time&&d.set("t",String(Math.floor(c.time)));const u=`/home?${d.toString()}`;navigate(u,{state:{miniPlayerData:c}})}catch(o){console.error("Failed to store mini player data / navigate",o);try{navigate("/home")}catch(n){}}},style:{opacity:pe?.28:1,pointerEvents:pe?"none":"auto",color:wa?pe?"#9CA3AF":"#fff":pe?"#9CA3AF":"#111"},children:a.jsx(M,{})}),a.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10","aria-haspopup":"dialog","aria-expanded":le,onClick:()=>de(!0),style:{opacity:pe?.28:1,pointerEvents:pe?"none":"auto",color:wa?pe?"#9CA3AF":"#fff":pe?"#9CA3AF":"#111"},children:a.jsx(A,{})})]})]}),a.jsx("button",{style:{position:"absolute",top:"calc(env(safe-area-inset-top, 0px) + 18px)",left:16,width:44,height:44,borderRadius:"50%",background:st||pe||Wt.some(e=>"default2"===e.type)?"transparent":"rgba(0,0,0,0.45)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,pointerEvents:"auto",cursor:"pointer",opacity:st||pe||Wt.some(e=>"default2"===e.type)?0:.85,transition:"opacity 220ms ease, background 220ms ease",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",color:"#fff",padding:0},onClick:e=>{try{e.stopPropagation()}catch{}try{bt.current&&bt.current.pause()}catch{}try{jt(!1)}catch{}const t=bt.current,r=Ie?Math.floor(pt*(St||0)):t?t.currentTime:0,n=t&&(t.currentSrc||t.src)||Ce||"",o=m(n)||n,a={video:{id:oe.get("id")||"custom",title:Pe||null,src:o,url:o,videoUrl:o,thumbnail:"",imageUrl:"",author:De||null,creator:De||null,channel:De||null},time:Math.floor(r||0),paused:!1,title:Pe||null,creatorName:De||null,duration:Ie?Math.floor(St||0):t?Math.floor(t.duration||0):0};if(p&&"function"==typeof p){try{p(a)}catch{}try{"undefined"!=typeof window&&"function"==typeof window.setFooterTab&&window.setFooterTab("home")}catch{}}else{try{localStorage.setItem("miniPlayerData",JSON.stringify(a))}catch{}try{void 0!==i&&s&&s("miniPlayerRequest",a)}catch{}try{void 0!==i&&s&&s("switchToHome",a)}catch{}try{"undefined"!=typeof window&&"function"==typeof window.setFooterTab&&window.setFooterTab("home")}catch{}try{window.history&&window.history.length>1?window.history.back():navigate("/home",{state:{miniPlayerData:a},replace:!0})}catch{try{navigate("/home",{state:{miniPlayerData:a},replace:!0})}catch{}}}},"aria-label":"Go back",children:a.jsx(T,{size:24})}),a.jsxs("div",{className:"w-full mt-0 mb-0 px-4",style:{position:Vt?"fixed":"relative",left:Vt?"50%":"auto",top:Vt?"50%":"auto",width:Vt?"100vh":"100%",transform:Vt?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 120px))":"none",transformOrigin:"center",zIndex:450,marginLeft:Vt?"0":"auto",marginRight:Vt?"0":"auto",visibility:st?"visible":"hidden",opacity:st?1:0,transition:"opacity 220ms ease, backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease",pointerEvents:st?"auto":"none"},children:[!Wt.some(e=>"overlay"===e.type&&("fullscreen"===e.overlayAdPosition||"videoPlayer"===e.overlayAdPosition))&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h1",{className:"text-white text-base font-normal leading-snug tracking-wide",style:{maxWidth:"calc(100% - 36px)"},children:Pe}),a.jsx("button",{className:"text-gray-300 flex-shrink-0",style:{marginTop:1},children:a.jsx(C,{size:18})})]}),a.jsxs("div",{className:"flex items-center mt-0.5 space-x-2",children:[a.jsx("span",{className:"text-gray-400 text-sm underline decoration-gray-500 underline-offset-2",children:De}),a.jsx("span",{className:"bg-[#1e2736] text-xs px-2 py-0.5 rounded-[6px] font-medium tracking-wide",style:{color:ga},children:"Requested"})]})]}),Ya&&!Wt.some(e=>"overlay"===e.type&&("fullscreen"===e.overlayAdPosition||"videoPlayer"===e.overlayAdPosition))&&a.jsxs(a.Fragment,{children:[Ja&&a.jsx("button",{"aria-label":"Show Watch Together",className:"fixed flex items-center justify-center w-12 h-12 rounded-full text-white shadow-lg",style:{left:"left"===Qa?8:"auto",right:"right"===Qa?8:"auto",top:Vt?Math.max(20,Ga.y):Math.max(80,Ga.y),transition:"transform 220ms ease, opacity 220ms",zIndex:ia?30:20,background:"#6b5bd1",boxShadow:"0 10px 26px rgba(0,0,0,0.28)"},onClick:e=>ao(e),children:a.jsx(C,{})}),Ha&&!Ja&&!Vt&&a.jsx("button",{ref:ri,"aria-label":"Watch Together (floating)",className:"fixed flex items-center justify-center rounded-full text-white shadow-xl backdrop-blur-md",style:{width:56,height:56,background:"linear-gradient(135deg, rgba(30, 41, 59, 0.85), rgba(15, 23, 42, 0.95))",border:"1px solid rgba(255,255,255,0.1)",left:Vt?"50%":Ga.x,top:Vt?"50%":Ga.y,transform:Vt?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 120px))":"none",transition:ei.current.dragging?"none":"transform 220ms ease, left 220ms ease, top 220ms ease",zIndex:ia?30:20,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 12px 28px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.15)"},onPointerDown:e=>{e.preventDefault();const t=ei.current;ti.current=!1,t.dragging=!0,ni.current&&(cancelAnimationFrame(ni.current),ni.current=null);const r=e.clientX??(e.touches&&e.touches[0]?.clientX),n=e.clientY??(e.touches&&e.touches[0]?.clientY);t.startX=r,t.startY=n,t.origX=Ga.x,t.origY=Ga.y,t.nextX=Ga.x,t.nextY=Ga.y;try{ri.current&&(ri.current.style.transition="none")}catch{}if(e.target.setPointerCapture)try{e.target.setPointerCapture(e.pointerId)}catch{}},onPointerMove:e=>{const t=ei.current;if(!t.dragging)return;const r=e.clientX??(e.touches&&e.touches[0]?.clientX),n=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof r||"number"!=typeof n)return;(Math.abs(r-t.startX)>3||Math.abs(n-t.startY)>3)&&(ti.current=!0);const o=t.origX+(r-t.startX),a=t.origY+(n-t.startY),i=Math.max(6,Math.min(window.innerWidth-56-6,o)),s=Math.max(6,Math.min(window.innerHeight-56-6,a));t.nextX=i,t.nextY=s,ni.current||(ni.current=requestAnimationFrame(()=>{ri.current&&(ri.current.style.left=`${t.nextX}px`,ri.current.style.top=`${t.nextY}px`),ni.current=null}));const l=r-t.startX,c=n-t.startY;if(Math.abs(l)>=80||Math.abs(c)>=80){t.dragging=!1;try{e.target?.releasePointerCapture?.(e.pointerId)}catch{}Xa(!1),Va(!1),ni.current&&(cancelAnimationFrame(ni.current),ni.current=null)}},onPointerUp:oi,onPointerCancel:oi,onClick:e=>{e.stopPropagation(),ti.current?ti.current=!1:ao(e)},children:a.jsx(R,{size:22,strokeWidth:2,style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"}})})]})]}),a.jsxs("div",{className:"flex-1 flex items-center justify-center relative video-center",style:{minHeight:0,touchAction:"none",width:"100%",overflow:"hidden"},onClick:e=>{if(e.stopPropagation(),Wt&&Wt.some(e=>"overlay"===e.type))return;if(pe){try{ke(!0),je.current&&clearTimeout(je.current),je.current=setTimeout(()=>{ke(!1),je.current=null},1100)}catch{}try{Qe(!0),Ke.current&&clearTimeout(Ke.current),Ke.current=setTimeout(()=>Qe(!1),1600)}catch{}return}try{mi()}catch{}const t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,n=t.width/2,o=.3*t.width;nt.current?(clearTimeout(nt.current),nt.current=null,$a&&(et(!0),fi(e.clientX,e.clientY))):nt.current=setTimeout(()=>{try{Math.abs(r-n)<o?ai():mi()}catch{}nt.current=null},250)},onPointerDown:e=>{try{mi()}catch{}const t=e.clientX??(e.touches&&e.touches[0]?.clientX),r=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof t||"number"!=typeof r)return;const n=window.innerWidth;if(!(t<.3*n||t>.7*n)){bi.current={x:t,y:r},ra.current={startX:t,startY:r},yi(!0),Ai(0);try{ji.current=!1,Si.current={x:t,y:r},ki.current&&(clearTimeout(ki.current),ki.current=null),ki.current=setTimeout(()=>{ji.current=!0,yi(!1),Ai(0);try{try{Fo(!1),localStorage.setItem("handleHintShownQuickOptions","1")}catch{}Ei({x:t,y:r}),Ci(!0);try{navigator.vibrate&&navigator.vibrate(10)}catch{}Li.current&&(clearTimeout(Li.current),Li.current=null),Li.current=setTimeout(()=>{Ci(!1),Li.current=null},3e3)}catch(e){}},550)}catch(o){}try{if(ea&&!localStorage.getItem("vx:hint:gesture"))try{localStorage.setItem("vx:hint:gesture","1")}catch{}}catch{}try{e.target?.setPointerCapture?.(e.pointerId)}catch{}}},onPointerMove:e=>{if(!gi&&!ki.current)return;const t=e.clientX??(e.touches&&e.touches[0]?.clientX),r=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof t||"number"!=typeof r)return;try{if(ki.current){const e=t-(Si.current.x||0),n=r-(Si.current.y||0);Math.hypot(e,n)>12&&(clearTimeout(ki.current),ki.current=null)}}catch(s){}const n=t-bi.current.x,o=r-bi.current.y;try{if(ea){const e=ra.current;if(0===na&&r-e.startY<-80&&Math.abs(t-e.startX)<140){try{const e={id:"next-placeholder-1",url:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",title:"Flowers for your grave",creator:"Richard Castle",duration:10,thumbnail:""};$e(e.title),_e(e.creator),Te(m(e.url)),Ne(null),Bt([]),Pt([]),Mt([]),Rt([]),$t.current=new Set,Dt.current=new Set,lt(!0),mi(1600),vn("Next video"),setTimeout(async()=>{try{const t=bt.current;if(t){t.src=m(e.url),t.currentTime=0;try{t.pause()}catch{}jt(!1)}}catch(s){}},120)}catch(s){}return oa(1),void(ra.current={startX:t,startY:r})}if(1===na&&r-e.startY>80&&Math.abs(t-e.startX)<140){try{const e=tr.current||[],t="number"==typeof rr?rr-1:-1;if(t>=0&&e[t]){const r=e[t];$e(r.title||"Video"),_e(r.creator||""),Te(m(r.url)),lt(!0),mi(1600),vn("Previous video"),nr(t),setTimeout(async()=>{try{const e=bt.current;if(e){r.url&&(e.src=m(r.url)),e.currentTime=0;try{e.pause()}catch{}jt(!1)}}catch(s){}},120)}else gn("No previous video"),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1600)}catch(s){}return oa(2),void(ra.current={startX:t,startY:r})}if(2===na&&t-e.startX<-80&&Math.abs(r-e.startY)<160){try{zi(!0)}catch{}return gn("Discover opened"),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1400),oa(3),void setTimeout(()=>{oa(4),setTimeout(()=>{try{localStorage.setItem("vx:hint:gesture","1")}catch{}ta(!1),oa(0)},2800)},2800)}}}catch(s){}if(o<-80&&Math.abs(n)<140&&!wi.current){wi.current=!0;const e=tr.current||[];let t="number"==typeof rr?rr+1:0;if(t<e.length&&e[t]){let r=e[t];if("string"==typeof r)if(Zt){const e=Zt.find(e=>String(e.id)===String(r)||String(e.url)===String(r)||String(e.src)===String(r));e?r=e:(r.includes("/")||r.startsWith("http"))&&(r={url:r,title:"Video",creator:""})}else(r.includes("/")||r.startsWith("http"))&&(r={url:r,title:"Video",creator:""});if(r&&(r.url||r.src||r.videoUrl)){const e=r.url||r.src||r.videoUrl;if($e(r.title||"Video"),_e(r.creator||""),Ee(e)?(Me(!0),Re(Le(e)),Te(e)):(Me(!1),Re(""),Te(m(e))),Nt(0),mt(0),r.time){const e=(r.time||"").split(":");if(2===e.length){const t=60*(parseInt(e[0])||0)+(parseInt(e[1])||0);t>0&&Nt(t)}}Ne(r.id?r:null),Bt([]),Pt([]),Mt([]),Rt([]),$t.current=new Set,Dt.current=new Set,lt(!0),mi(1600),vn("Next video"),nr(t),Ee(e)?jt(!1):setTimeout(async()=>{try{const t=bt.current;if(t){e&&(t.src=m(e)),t.currentTime=0;try{t.pause()}catch{}jt(!1)}}catch(s){}},120)}else gn("No next video"),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1600)}else gn("No next video"),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1600);return void Wi()}if(o>80&&Math.abs(n)<140&&!vi.current){vi.current=!0;const e=tr.current||[];let t="number"==typeof rr?rr-1:-1;if(t>=0&&e[t]){let r=e[t];if("string"==typeof r)if(Zt){const e=Zt.find(e=>String(e.id)===String(r)||String(e.url)===String(r)||String(e.src)===String(r));e?r=e:(r.includes("/")||r.startsWith("http"))&&(r={url:r,title:"Video",creator:""})}else(r.includes("/")||r.startsWith("http"))&&(r={url:r,title:"Video",creator:""});if(r&&(r.url||r.src||r.videoUrl)){const e=r.url||r.src||r.videoUrl;if($e(r.title||"Video"),_e(r.creator||""),Ee(e)?(Me(!0),Re(Le(e)),Te(e)):(Me(!1),Re(""),Te(m(e))),Nt(0),mt(0),r.time){const e=(r.time||"").split(":");if(2===e.length){const t=60*(parseInt(e[0])||0)+(parseInt(e[1])||0);t>0&&Nt(t)}}Ne(r.id?r:null),Bt([]),Pt([]),Mt([]),Rt([]),$t.current=new Set,Dt.current=new Set,lt(!0),mi(1600),vn("Previous video"),nr(t),Ee(e)?jt(!1):setTimeout(async()=>{try{const t=bt.current;if(t){e&&(t.src=m(e)),t.currentTime=0;try{t.pause()}catch{}jt(!1)}}catch(s){}},120)}else gn("No previous video"),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1600)}else gn("No previous video"),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1600);return void Wi()}if(Math.abs(o)>140&&Math.abs(n)<60)return void Wi();const a=-Bi.current,i=Math.max(a,Math.min(0,n));Ai(i)},onPointerUp:async e=>{if(ki.current&&(clearTimeout(ki.current),ki.current=null),ji.current){ji.current=!1;try{e.target?.releasePointerCapture?.(e.pointerId)}catch{}return yi(!1),void Ai(0)}if(!gi)return;try{const t=e.clientY??(e.changedTouches&&e.changedTouches[0]?.clientY)??(e.touches&&e.touches[0]?.clientY)??0,o=e.clientX??(e.changedTouches&&e.changedTouches[0]?.clientX)??(e.touches&&e.touches[0]?.clientX)??0,a=t-(bi.current.y||0),i=o-(bi.current.x||0);if(a>80&&Math.abs(i)<140){const t=tr.current||[];let o=currentIndexRef.current;if(!Array.isArray(t)||0===t.length||"number"!=typeof o||o<=0){Ai(0),zi(!1),yi(!1);try{e.target?.releasePointerCapture?.(e.pointerId)}catch{}return}const a=t[o-1];try{const e=await n(()=>import("./home-CN_asF5T.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47])),t=e.getVideoById,r=e.VIDEOS||e.default?.VIDEOS||e.homeVideos||e.discoverItems||null;let i=null;if("function"==typeof t&&(i=t(a)),!i&&Array.isArray(r)&&(i=r.find(e=>e.id&&String(e.id)===String(a)||e.url&&String(e.url)===String(a)||e.src&&String(e.src)===String(a))),!i&&"string"==typeof a&&/^(https?:)?\/\//.test(a)&&(i={id:a,title:"Video",src:a}),i){const e=m(i.src||i.url||"");currentIndexRef.current=o-1,$e(i.title||"Video"),_e(i.creator||i.channel||""),Te(m(e)),Ne(i.id?i:null),Bt([]),Pt([]),Mt([]),Rt([]),$t.current=new Set,Dt.current=new Set,lt(!0),mi(1600),vn("Previous video"),setTimeout(async()=>{try{const t=bt.current;if(t&&e){t.src=m(e),t.currentTime=0;try{t.pause()}catch{}jt(!1)}}catch(t){}},120)}}catch(r){}Ai(0),zi(!1),yi(!1);try{e.target?.releasePointerCapture?.(e.pointerId)}catch{}return}}catch(r){}const t=Math.max(100,.25*Bi.current);Mi<=-t?(zi(!0),Ai(-Bi.current)):Ai(0),yi(!1);try{e.target?.releasePointerCapture?.(e.pointerId)}catch{}},children:[a.jsxs("div",{style:{position:Vt?"fixed":"absolute",...Vt?{inset:0}:{top:0,left:0,right:0,bottom:140},width:Vt?"100vw":void 0,height:Vt?"100vh":void 0,zIndex:Vt?30:10,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",background:"#000"},children:[a.jsxs("div",{ref:se,"aria-hidden":!1,style:Vt?{position:"absolute",top:"50%",left:"50%",width:"100vh",height:"100vw",transform:"translate(-50%, -50%) rotate(90deg)",transformOrigin:"center center",overflow:"hidden",background:"#000"}:{position:"relative",width:"100%",height:"100%",maxWidth:"100vw",borderRadius:0,display:"block",overflow:"hidden",background:"#000"},children:[Ie&&Ae?a.jsxs(a.Fragment,{children:[a.jsx("iframe",{ref:ze,src:`https://www.youtube-nocookie.com/embed/${Ae}?autoplay=1&mute=1&controls=0&modestbranding=1&showinfo=0&rel=0&iv_load_policy=3&fs=0&disablekb=1&playsinline=1&enablejsapi=1${Fn>0?`&start=${Fn}`:""}`,className:"w-full h-full border-0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!1,style:{position:"absolute",inset:0,width:"100%",height:"100%",background:"#000",pointerEvents:"none",transform:"scale(1.3)",transformOrigin:"center center"},title:"Video player"}),!Be&&a.jsx("div",{style:{position:"absolute",inset:0,zIndex:2,background:"#000",pointerEvents:"none",transition:"opacity 0.3s ease-out"}}),a.jsx("div",{style:{position:"absolute",inset:0,zIndex:3}}),a.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"12%",background:"linear-gradient(to top, #000 15%, transparent 100%)",zIndex:4,pointerEvents:"none"}}),a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"8%",background:"linear-gradient(to bottom, #000 5%, transparent 100%)",zIndex:4,pointerEvents:"none"}})]}):a.jsx("video",{ref:bt,src:Ce,className:"w-full h-full bg-black",autoPlay:!0,muted:!0,playsInline:!0,"webkit-playsinline":"true","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-orientation":"portrait",preload:"auto",fetchpriority:"high",poster:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:Xt||Vt?"cover":"contain",background:"#000"},onLoadedMetadata:e=>{try{const t=e.target;Nt(t.duration||0),Yt(t.videoWidth&&t.videoHeight?t.videoWidth/t.videoHeight:16/9)}catch(t){}},onTimeUpdate:e=>{try{ft.current||mt(e.target.currentTime/(e.target.duration||1))}catch(t){}},onEnded:Di,onPause:()=>jt(!1),onPlay:()=>jt(!0),onCanPlay:()=>{try{const e=bt.current;e&&e.paused&&ma&&e.play().catch(()=>{})}catch{}},onError:e=>{try{const t=e.target;t&&Ce&&!t._retried&&(t._retried=!0,setTimeout(()=>{try{t.src=m(Ce),t.load()}catch{}},1500))}catch{}}}),a.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",zIndex:25},children:At.map(e=>"link"===e.type?a.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{position:"absolute",left:`${e.positionX??5}%`,top:`${e.positionY??80}%`,padding:"8px 14px",borderRadius:"8px",backgroundColor:`${e.linkColor}33`,border:`2px solid ${e.linkColor}`,color:e.linkColor,textDecoration:"none",fontWeight:"bold",fontSize:"14px",cursor:"pointer",pointerEvents:"auto",transition:"all 200ms ease",transform:"scale(1)",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",display:"inline-block",whiteSpace:"nowrap",maxWidth:"calc(100% - 40px)",overflow:"hidden",textOverflow:"ellipsis"},onMouseEnter:t=>{t.target.style.transform="scale(1.05)",t.target.style.backgroundColor=`${e.linkColor}44`},onMouseLeave:t=>{t.target.style.transform="scale(1)",t.target.style.backgroundColor=`${e.linkColor}33`},children:["ðŸ”— ",e.linkText]},e.id):a.jsx("div",{style:{position:"absolute",left:`${e.positionX??5}%`,top:`${e.positionY??80}%`,borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.4)",border:"2px solid rgba(255,255,255,0.3)",opacity:.95,pointerEvents:"none"},children:a.jsx("img",{src:e.imageData,alt:"Video overlay",style:{width:"160px",maxHeight:"160px",objectFit:"cover",display:"block"}})},e.id))})]}),st&&ct&&!kt&&!(Wt&&Wt.some(e=>"overlay"===e.type))&&a.jsx("button",{className:"transform active:scale-95 transition-transform","aria-label":"Play",onClick:e=>{e.stopPropagation(),ai()},style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",border:"1px solid rgba(255,255,255,0.08)",zIndex:20,outline:"none",filter:"none",width:88,height:88,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:44,background:"rgba(0,0,0,0.32)",boxShadow:"0 6px 14px rgba(0,0,0,0.36)",pointerEvents:ct?"auto":"none",opacity:ct?1:0,transition:"opacity 360ms ease"},children:a.jsx(_,{width:56,height:56})}),st&&ct&&kt&&!(Wt&&Wt.some(e=>"overlay"===e.type))&&a.jsx("button",{className:"transform active:scale-95 transition-transform","aria-label":"Pause",onClick:e=>{e.stopPropagation(),ai()},style:{position:"absolute",left:"50%",top:"50%",transform:Vt?"translate(-50%, -50%) rotate(90deg)":"translate(-50%, -50%)",border:"1px solid rgba(255,255,255,0.08)",zIndex:20,outline:"none",filter:"none",width:88,height:88,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:44,background:"rgba(0,0,0,0.32)",boxShadow:"0 6px 14px rgba(0,0,0,0.36)",pointerEvents:ct?"auto":"none",opacity:ct?1:0,transition:"opacity 360ms ease, transform 200ms ease"},children:a.jsx(O,{width:56,height:56})})]}),xe&&a.jsx("div",{className:"fixed top-16 left-1/2 -translate-x-1/2 z-50 pointer-events-none",role:"status","aria-live":"polite",children:a.jsxs("div",{className:"flex items-start gap-3 bg-white text-black rounded-lg px-4 py-2 shadow-lg min-w-[220px] sm:min-w-[280px]",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-green-600 flex items-center justify-center text-white text-sm",children:"âœ“"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium",children:"Screen locked"}),a.jsx("div",{className:"text-xs text-gray-600",children:"Only play/pause available"})]})]})}),ge&&a.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center pointer-events-none",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-36 h-36 rounded-full flex items-center justify-center shadow-2xl",style:{background:"#bb890aff"},children:a.jsx(E,{inCircle:!1,size:80,color:ga})}),a.jsx("div",{className:"rounded-full px-4 py-2 bg-black/50 text-white border border-white/10 text-sm",style:{minWidth:140,textAlign:"center"},children:"Screen Locked"})]})}),qe&&a.jsx("div",{"aria-hidden":"true",style:{position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:"calc(env(safe-area-inset-bottom, 20px) + 180px)",zIndex:320,pointerEvents:"none"},children:a.jsx("div",{className:"bg-red-700 text-white rounded-md px-4 py-2 shadow-lg text-sm",children:"Screen locked. Tap the lock icon to unlock."})})]}),ot.map(e=>a.jsx("div",{style:{position:"fixed",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:9999},children:e.particles.map((t,r)=>a.jsx("div",{style:{position:"absolute",left:e.x,top:e.y,"--heart-dx":`${t.dx}px`,"--heart-dy":`${t.dy}px`,"--heart-rot":`${t.angle}deg`,animation:`heart-explode ${t.duration}ms cubic-bezier(0.25, 0.46, 0.45, 0.94) ${t.delay}ms forwards`,willChange:"transform, opacity",pointerEvents:"none"},children:a.jsx("svg",{width:t.size,height:t.size,viewBox:"0 0 24 24",fill:"#ff2d55",style:{filter:"drop-shadow(0 2px 6px rgba(255,45,85,0.5))"},children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})},r))},e.id)),!Wt.some(e=>"overlay"===e.type&&("fullscreen"===e.overlayAdPosition||"videoPlayer"===e.overlayAdPosition))&&a.jsxs("div",{className:"w-full flex flex-col pb-2",style:{position:"fixed",zIndex:500,left:Vt?"50%":0,right:Vt?"auto":0,top:Vt?"50%":"auto",bottom:Vt?"auto":"calc(env(safe-area-inset-bottom, 20px) + 38px)",width:Vt?"100vh":void 0,transform:Vt?"translate(-50%, -50%) rotate(90deg) translateY(calc(50vw - 50%))":"none",transformOrigin:"center",boxSizing:"border-box",paddingLeft:20,paddingRight:20,transition:"opacity 220ms ease, bottom 200ms ease",opacity:Vt?st?1:0:pe?.28:st?1:0,pointerEvents:Vt?st?"auto":"none":pe?"none":st?"auto":"none",background:wa?"linear-gradient(180deg, rgba(0,0,0,0.30), rgba(0,0,0,0.22))":"linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.6))",borderTop:wa?"1px solid rgba(255,255,255,0.02)":"1px solid rgba(0,0,0,0.06)",boxShadow:wa?"inset 0 1px 0 rgba(255,255,255,0.01), 0 -6px 16px rgba(0,0,0,0.44)":"inset 0 1px 0 rgba(255,255,255,0.6), 0 -6px 18px rgba(0,0,0,0.06)",backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)"},children:[a.jsx("div",{className:"w-full py-4 flex items-center",children:a.jsxs("div",{ref:xt,role:"slider","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(100*pt),onPointerDown:e=>{pi(e)},onClick:e=>{const t=e.clientX||e.touches&&e.touches[0]?.clientX,r=xt.current;if(t&&r){const e=r.getBoundingClientRect(),n=Math.max(0,Math.min(1,(t-e.left)/e.width));if(mt(n),wr(t),Ie&&ze.current&&St>0)try{ze.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[n*St,!0]}),"*")}catch{}else{const e=bt.current;if(e&&St>0)try{e.currentTime=n*St}catch{}}}},className:"relative w-full select-none touch-none cursor-pointer",style:{height:20,display:"flex",alignItems:"center"},children:[a.jsxs("div",{className:"absolute left-0 right-0 rounded-full",style:{height:8,background:wa?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.06)",boxShadow:wa?"inset 0 1px 1px rgba(255,255,255,0.02), inset 0 -1px 2px rgba(0,0,0,0.35)":"inset 0 1px 1px rgba(255,255,255,0.6), inset 0 -1px 2px rgba(0,0,0,0.08)",top:"50%",transform:"translateY(-50%)",overflow:"hidden",borderRadius:999},children:[a.jsx("div",{style:{height:"100%",width:100*pt+"%",background:da,opacity:1,borderRadius:999,boxShadow:"0 2px 6px rgba(0,0,0,0.08)"}}),(_n||[]).map(e=>{const t=100*(St>0?Math.max(0,Math.min(1,(e.time||0)/St)):0);return a.jsx("div",{style:{position:"absolute",left:`${t}%`,top:0,bottom:0,width:3,transform:"translateX(-50%)",background:ya,opacity:.98,pointerEvents:"none",borderRadius:2}},e.id)})]}),a.jsxs("div",{className:"absolute z-20 flex items-center justify-center",style:{left:100*pt+"%",top:"50%",transform:"translate(-50%, -50%)",width:24,height:24,pointerEvents:"auto",touchAction:"none"},onPointerDown:e=>{e.stopPropagation?.();try{e.target?.setPointerCapture?.(e.pointerId)}catch{}pi(e)},children:[a.jsx("div",{className:"absolute",style:{width:36,height:36,borderRadius:"50%",background:da,opacity:gt?.28:.12,filter:"blur(6px)",top:"50%",left:"50%",transform:`translate(-50%, -50%) scale(${gt?1.18:1})`,transition:"transform 120ms ease, opacity 120ms ease"}}),a.jsx("div",{style:{width:12,height:12,borderRadius:4,background:da,boxShadow:"0 2px 6px rgba(0,0,0,0.35)",position:"relative",zIndex:2,transform:gt?"scale(1.9)":"scale(1)",transition:"transform 120ms cubic-bezier(.2,.9,.3,1)"}})]})]})}),a.jsx("canvas",{ref:sr,style:{position:"fixed",left:mr,top:fr,width:yr.w,height:yr.h,display:hr?"block":"none",borderRadius:10,overflow:"hidden",zIndex:90,boxShadow:"0 8px 24px rgba(0,0,0,0.6)",background:"#000"},"aria-hidden":!hr}),a.jsx("video",{ref:vr,src:"",preload:"metadata",muted:!0,playsInline:!0,style:{position:"absolute",left:-9999,width:1,height:1,opacity:0,pointerEvents:"none"},"aria-hidden":"true"}),a.jsxs("div",{className:"flex items-center justify-between text-white mt-1",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-xs font-medium text-gray-200 tracking-wide",children:(()=>{const e=bt.current,t=Ie||!e?Math.floor(pt*(St||0)):Math.floor(e.currentTime||pt*St||0),r=Math.floor(St||0),n=e=>`${Math.floor(e/60)}:${String(Math.floor(e%60)).padStart(2,"0")}`;return`${n(t)} / ${n(r||0)}`})()}),a.jsxs("button",{onClick:()=>he(!ue),className:"text-[10px] px-1.5 py-0.5 rounded font-bold hover:opacity-80 transition-opacity relative",style:{background:"#1e2736",color:ga,border:`1px solid ${ba}`,cursor:"pointer"},children:[ja,ue&&a.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-[#0f1419] rounded-lg shadow-lg border border-gray-700 py-2 z-50",style:{minWidth:"120px",backgroundColor:"#0f1419",borderColor:"rgba(255,255,255,0.08)"},onClick:e=>e.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Sa("Auto"),he(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-800 transition-colors",style:{color:"Auto"===ja?ga:"rgba(255,255,255,0.8)",backgroundColor:"Auto"===ja?"rgba(255,255,255,0.06)":"transparent",fontWeight:"Auto"===ja?"600":"400"},children:"Auto"}),["144p","240p","360p","480p","720p","1080p","1440p","2160p"].map(e=>{const t=["144p","240p","360p","480p","720p","1080p","1440p","2160p"],r=(()=>{try{if(ee&&ee.user&&ee.user.subscription){const e=ee.user.subscription,t=ee.user.alaCarteAddons?.includes("Video Quality - Up to 2160p (4K)"),r=ee.user.alaCarteAddons?.includes("Video Quality - Up to 1440p");if("pro"===e.tier||"Pro"===e.tier||"Pro Creator"===e.tier)return t?"2160p":r?"1440p":"1080p"}const e=ee?.user?.alaCarteAddons?.includes("Video Quality - Up to 1440p"),t=ee?.user?.alaCarteAddons?.includes("Video Quality - Up to 2160p (4K)");return t?"2160p":e?"1440p":"360p"}catch(e){return"360p"}})(),n=t.indexOf(r),o=!(t.indexOf(e)<=n);return a.jsx("button",{disabled:o,onClick:()=>{o||(Sa(e),he(!1))},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-800 transition-colors relative group",style:{color:o?"rgba(255,255,255,0.4)":ja===e?ga:"rgba(255,255,255,0.8)",backgroundColor:ja===e?"rgba(255,255,255,0.06)":"transparent",fontWeight:ja===e?"600":"400",cursor:o?"not-allowed":"pointer",opacity:o?.6:1},title:o?`Upgrade to unlock ${e}`:"",children:a.jsxs("span",{className:"flex items-center justify-between w-full",children:[a.jsx("span",{children:e}),o&&a.jsx("span",{className:"text-xs",children:"ðŸ”’"})]})},e)})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-6",style:{alignItems:"center"},children:[a.jsx("button",{onClick:()=>{if(he(!1),!ee.user)return ee.openAuthModal();sa(!0)},className:"p-1.5 hover:opacity-80 transition-opacity",children:a.jsx(W,{})}),a.jsx("button",{onClick:()=>{pe||ca(!0)},className:"p-1.5 hover:opacity-80 transition-opacity",style:{pointerEvents:pe?"none":"auto",color:wa?"#fff":"#111"},"aria-label":"Notes",children:a.jsx(X,{})}),a.jsx("button",{onClick:()=>hi(),className:"p-1.5 hover:opacity-80 transition-opacity",children:a.jsx(D,{})})]})]})]}),Wt&&Wt.length>0&&a.jsxs(a.Fragment,{children:[Wt.filter(e=>"video"===e.type).map(e=>a.jsx("div",{onClick:()=>{e.videoAdLink&&window.open(e.videoAdLink,"_blank")},style:{position:"fixed",inset:Vt?"auto":0,top:Vt?"50%":0,left:Vt?"50%":0,width:Vt?"100vh":"100vw",height:Vt?"100vw":"100vh",transform:Vt?"translate(-50%, -50%) rotate(90deg)":"none",background:"rgba(0, 0, 0, 0.95)",zIndex:50,display:"flex",alignItems:"center",justifyContent:"center",padding:20,cursor:"pointer"},children:a.jsxs("div",{style:{width:"100%",maxWidth:400,background:"#000",borderRadius:12,position:"relative",display:"flex",flexDirection:"column",aspectRatio:9/16,overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.8)"},onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{style:{flex:1,background:"linear-gradient(135deg, #111827 0%, #1f2937 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280",fontSize:14,position:"relative",overflow:"hidden"},children:[e.videoAdSrc||e.videoAdUrl||e.overlayVideoUrl?a.jsx("video",{src:e.videoAdSrc||e.videoAdUrl||e.overlayVideoUrl,autoPlay:!0,muted:!0,playsInline:!0,loop:!0,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",background:"#000"},onError:e=>{e.target.style.display="none"}}):null,a.jsxs("div",{style:{position:"absolute",inset:"40px 20px",background:`linear-gradient(135deg, ${e.videoAdCtaColor||"#3b82f6"}${e.videoAdSrc||e.videoAdUrl||e.overlayVideoUrl?"cc":""} 0%, ${e.videoAdCtaColor?`${e.videoAdCtaColor}dd`:"#1e40af"} 100%)`,borderRadius:12,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",zIndex:10,border:"2px solid rgba(255, 255, 255, 0.1)"},children:[a.jsx("div",{style:{width:"100%",height:"120px",background:"rgba(0, 0, 0, 0.3)",borderRadius:8,marginBottom:16,display:"flex",alignItems:"center",justifyContent:"center",color:"#90caf9",fontWeight:600,fontSize:14},children:"ðŸŽ¬ Ad Video"}),a.jsx("div",{style:{color:"white",fontSize:16,fontWeight:700,marginBottom:12,textAlign:"center"},children:e.videoAdTitle||"Your Ad Title"}),a.jsx("button",{style:{padding:"12px 24px",background:e.videoAdCtaColor||"#0b74de",color:"white",border:"none",borderRadius:8,fontSize:14,fontWeight:700,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},onClick:()=>{e.videoAdLink&&window.open(e.videoAdLink,"_blank")},children:e.videoAdCtaText||"Learn More"})]})]}),a.jsx("button",{onClick:t=>{t.stopPropagation(),_t(e.id)},style:{position:"absolute",top:16,right:16,width:36,height:36,borderRadius:"50%",background:"rgba(0,0,0,0.6)",color:"#fff",border:"none",fontSize:20,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:20},children:"âœ•"})]})},e.id||`video-ad-${Math.random()}`)),Wt.filter(e=>"default2"===e.type).map(e=>a.jsxs("div",{onClick:()=>{e.default2Link&&window.open(e.default2Link,"_blank")},style:{position:"fixed",inset:Vt?"auto":0,top:Vt?"50%":0,left:Vt?"50%":0,width:Vt?"100vh":"100vw",height:Vt?"100vw":"100vh",transform:Vt?"translate(-50%, -50%) rotate(90deg)":"none",background:"rgba(0, 0, 0, 0.95)",zIndex:50,display:"flex",alignItems:"center",justifyContent:"center",padding:20,cursor:"pointer"},children:[a.jsx("button",{onClick:t=>{t.stopPropagation(),_t(e.id)},style:{position:"absolute",top:16,right:16,width:36,height:36,borderRadius:"50%",background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.3)",color:"#fff",fontSize:20,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:60,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",transition:"all 0.2s ease"},"aria-label":"Close ad",children:"âœ•"}),a.jsxs("div",{style:{width:"100%",maxWidth:400,maxHeight:"90vh",overflowY:"auto",background:"#000",borderRadius:12,position:"relative",display:"flex",flexDirection:"column",aspectRatio:9/16,boxShadow:"0 20px 60px rgba(0, 0, 0, 0.8)"},onClick:e=>e.stopPropagation(),children:[a.jsx("div",{style:{flex:1,background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280",fontSize:14,position:"relative"},children:e.default2Image||e.default2Logo||e.imageUrl||e.thumbnail?a.jsx("img",{src:e.default2Image||e.default2Logo||e.imageUrl||e.thumbnail,alt:e.default2Title||"Ad",style:{width:"100%",height:"100%",objectFit:"cover"}}):a.jsx("div",{children:"Video Content Area"})}),a.jsx("div",{style:{background:"#000",padding:"16px",borderTop:`3px solid ${e.default2LineColor||"#d946ef"}`},children:[1,2].map(t=>a.jsxs("div",{style:{marginBottom:1===t?12:0,padding:"12px 14px",background:e.default2BgColor||"#ffffff",border:`2px solid ${e.default2LineColor||"#d946ef"}`,borderLeft:`3px solid ${e.default2LineColor||"#d946ef"}`,borderRadius:8,display:"flex",alignItems:"center",gap:10,cursor:"pointer",transition:"all 0.2s ease",minHeight:"70px"},onMouseEnter:t=>{t.currentTarget.style.background=e.default2BgColor||"#f5f5f5"},onMouseLeave:t=>{t.currentTarget.style.background=e.default2BgColor||"#ffffff"},onClick:()=>{e.default2Link&&window.open(e.default2Link,"_blank")},children:[e.default2Logo&&a.jsx("img",{src:e.default2Logo,alt:"logo",style:{width:50,height:50,borderRadius:8,objectFit:"cover",flexShrink:0},onError:e=>e.target.style.display="none"}),a.jsxs("div",{style:{flex:1,minWidth:0},children:[a.jsx("div",{style:{fontSize:13,fontWeight:700,color:e.default2TextColor||"#111827",marginBottom:4},children:e.default2Title||"Card Title"}),a.jsx("div",{style:{fontSize:12,color:e.default2TextColor||"#6b7280"},children:e.default2Description||"Card description"})]}),a.jsx("div",{style:{fontSize:20,color:e.default2LineColor||"#d946ef",flexShrink:0},children:"â†’"})]},t))})]})]},e.id||`default2-ad-${Math.random()}`)),Wt.filter(e=>"overlay"===e.type).map(e=>{const t=e.overlayAdPosition||"bottom",r="bottom"===t,n="top"===t,o="videoOverlay"===t,i="videoPlayer"===t;return"fullscreen"===t?a.jsxs("div",{style:{position:"fixed",inset:Vt?"auto":0,top:Vt?"50%":0,left:Vt?"50%":0,width:Vt?"100vh":"100vw",height:Vt?"100vw":"100vh",transform:Vt?"translate(-50%, -50%) rotate(90deg)":"none",background:e.overlayAdBgColor||"#E41E24",zIndex:50,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:"calc(env(safe-area-inset-top, 20px) + 40px)",paddingBottom:"calc(env(safe-area-inset-bottom, 20px) + 40px)",paddingLeft:40,paddingRight:40,cursor:"pointer",opacity:e.overlayAdOpacity||1,textAlign:"center"},onClick:()=>{e.link&&window.open(e.link,"_blank")},children:[a.jsx("div",{style:{width:120,height:120,borderRadius:"12px",background:"rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:24,border:"2px solid rgba(255,255,255,0.3)",overflow:"hidden"},children:e.overlayProfileUrl?a.jsx("img",{src:e.overlayProfileUrl,alt:"Company",style:{width:"100%",height:"100%",objectFit:"cover"}}):a.jsx("span",{style:{fontSize:40,opacity:.6},children:"ðŸ“·"})}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16,alignItems:"center",justifyContent:"center",color:e.overlayAdTextColor||"#fff",textAlign:"center",maxWidth:"85%"},children:e.overlayAdTextItems&&e.overlayAdTextItems.length>0?e.overlayAdTextItems.map((e,t)=>a.jsx("div",{style:{fontSize:28,fontWeight:700,lineHeight:1.3},children:e.text},t)):a.jsx("div",{style:{fontSize:28,fontWeight:700,lineHeight:1.3},children:e.overlayAdText||"Important Announcement"})}),a.jsx("button",{style:{padding:"14px 40px",background:"#fff",color:e.overlayAdBgColor||"#E41E24",border:"none",borderRadius:8,fontSize:16,fontWeight:700,cursor:"pointer",marginTop:16,transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 16px rgba(0,0,0,0.2)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)"},onClick:t=>{t.stopPropagation(),e.link&&window.open(e.link,"_blank")},children:e.overlayBtnText||"Learn More"})]},e.id||`overlay-ad-${Math.random()}`):i?a.jsx(N,{ad:e,forceLandscapeCss:Vt,onDismiss:_t},e.id||`video-player-ad-${Math.random()}`):a.jsxs("div",{style:{position:"fixed",...n&&(Vt?{top:"50%",left:"50%",right:"auto",width:"100vh",transform:"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 50%))"}:{top:"env(safe-area-inset-top, 20px)",left:0,right:0}),...r&&(Vt?{top:"50%",left:"50%",right:"auto",width:"100vh",transform:"translate(-50%, -50%) rotate(90deg) translateY(calc(50vw - 50% - 100px))"}:{bottom:"calc(env(safe-area-inset-bottom, 20px) + 100px)",left:0,right:0}),...o&&(Vt?{top:"50%",left:"50%",bottom:"auto",right:"auto",transform:"translate(-50%, -50%) rotate(90deg)",maxWidth:"90vh"}:{bottom:"50%",left:"50%",transform:"translateX(-50%)",maxWidth:"90%"}),zIndex:40,background:e.overlayAdBgColor||"#E41E24",color:e.overlayAdTextColor||"#fff",padding:"12px 16px",display:"flex",alignItems:"center",gap:12,overflow:"hidden",opacity:e.overlayAdOpacity||1,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",borderRadius:o?8:0,cursor:"pointer"},onClick:()=>{e.link&&window.open(e.link,"_blank")},children:[a.jsx("div",{style:{background:e.overlayBrandBgColor||e.overlayAdBgColor||"#E41E24",color:e.overlayBrandTextColor||e.overlayAdTextColor||"#fff",padding:"6px 10px",borderRadius:6,fontWeight:700,fontSize:16,whiteSpace:"nowrap",flexShrink:0,opacity:e.overlayTagOpacity||1},children:e.overlayAdEmoji||"âš¡"}),a.jsxs("div",{style:{flex:1,overflow:"hidden",whiteSpace:"nowrap"},children:["marquee"!==e.overlayTextAnimation&&e.overlayTextAnimation?null:a.jsx("style",{children:`\n\t\t\t\t\t\t\t\t\t\t\t@keyframes marquee-${e.id} {\n\t\t\t\t\t\t\t\t\t\t\t\t0% { transform: translateX(100%); }\n\t\t\t\t\t\t\t\t\t\t\t\t100% { transform: translateX(-100%); }\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t`}),a.jsxs("div",{style:{display:"flex",gap:40,animation:"marquee"!==e.overlayTextAnimation&&e.overlayTextAnimation?"none":`marquee-${e.id} 20s linear infinite`,opacity:"fade"===e.overlayTextAnimation?"var(--fade-opacity, 1)":1,fontSize:14,fontWeight:600},children:[e.overlayAdTextItems&&e.overlayAdTextItems.length>0?e.overlayAdTextItems.map((e,t)=>a.jsx("span",{style:{whiteSpace:"nowrap"},children:e.text},t)):a.jsx("span",{children:e.overlayAdText||"Important Update"}),e.overlayAdTextItems&&e.overlayAdTextItems.length>0?e.overlayAdTextItems.map((e,t)=>a.jsx("span",{style:{whiteSpace:"nowrap"},children:e.text},`repeat-${t}`)):a.jsx("span",{children:e.overlayAdText||"Important Update"})]})]})]},e.id||`overlay-ticker-${Math.random()}`)}),Wt.filter(e=>!e.type||"bottom"===e.type).length>0&&a.jsx("div",{style:{position:"fixed",bottom:"calc(env(safe-area-inset-bottom, 20px) + 150px)",left:0,right:0,zIndex:38,backgroundColor:"rgba(0, 0, 0, 0.95)",borderTop:`2px solid ${Wt.filter(e=>!e.type||"bottom"===e.type)[0]?.borderColor||"rgba(255, 255, 255, 0.2)"}`,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",padding:"12px 16px",display:"flex",alignItems:"center",gap:"12px",maxHeight:"180px",overflowX:"auto",overflowY:"auto",scrollBehavior:"smooth",boxShadow:"0 -4px 12px rgba(0, 0, 0, 0.5)"},children:Wt.filter(e=>!e.type||"bottom"===e.type).slice(0,2).map((e,t)=>a.jsx(re,{profileName:e.profileName||e.name,profileAvatar:e.profileAvatar||e.avatar,textItems:e.textItems||(e.text?[{text:e.text}]:[]),textInterval:e.textInterval||5e3,textAnimation:e.textAnimation||"fade",cardAnimation:e.cardAnimation||"fade",cardEffect:e.cardEffect||"none",cardExitAnimation:e.cardExitAnimation||"fadeOut",borderColor:e.borderColor||"rgba(255, 255, 255, 0.2)",duration:e.duration||30,link:e.link},e.id||`ad-${t}`))})]}),Wt.filter(e=>"default2"===e.type&&e.default2Link).map(e=>a.jsx("button",{style:{position:"fixed",bottom:"calc(env(safe-area-inset-bottom, 20px) + 80px)",left:0,margin:0,marginLeft:0,padding:"10px 18px",background:e.default2BgColor||"#ffffff",color:e.default2TextColor||"#111827",border:`2px solid ${e.default2LineColor||"#d946ef"}`,borderLeft:"none",borderRadius:"0 8px 8px 0",fontSize:14,fontWeight:700,cursor:"pointer",boxShadow:`0 4px 16px ${e.default2LineColor||"#d946ef"}55`,whiteSpace:"nowrap",zIndex:9999,pointerEvents:"auto",transition:"all 0.2s ease",letterSpacing:"0.3px",transform:"translateX(0)"},onClick:t=>{t.stopPropagation(),e.default2Link&&window.open(e.default2Link,"_blank")},children:"Visit Link"},`visit-link-${e.id||"default2"}`)),le&&a.jsx("div",{className:"fixed inset-0 z-[1200] bg-black/60 flex items-end sm:items-center justify-center",onClick:()=>de(!1),style:{backdropFilter:"none",WebkitBackdropFilter:"none",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"modal-dialog w-full max-w-md bg-[#0b0b0b] rounded-t-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Options",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:Mr,maxHeight:zr.current,overflow:"hidden",display:"flex",flexDirection:"column",marginBottom:12,borderRadius:24},children:[a.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:Kr,onTouchStart:Kr,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:a.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:Kr,onTouchStart:Kr,style:{cursor:"ns-resize"}})}),Io&&a.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:o("Drag to resize",S)}),a.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 px-2 text-center",children:o("More Options",S)}),a.jsxs("div",{className:"space-y-2 overflow-auto",style:{maxHeight:`calc(${Mr}px - 64px)`,paddingRight:6,paddingBottom:64},children:[a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none",onClick:async()=>{if(ee.user)try{const e=localStorage.getItem("regaarder_token");uo?(await fetch(`${po}/bookmarks/videos`,{method:"DELETE",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({videoUrl:Ce})}),ho(!1),gn(o("Removed bookmark",S))):(await fetch(`${po}/bookmarks/videos`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({videoUrl:Ce,title:Pe})}),ho(!0),gn(o("Bookmarked",S))),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1400)}catch{}else ee.openAuthModal()},"aria-pressed":!1,style:{background:"transparent",outline:"none",boxShadow:"none",border:"none",WebkitTapHighlightColor:"transparent"},onPointerDown:e=>{try{e.currentTarget.style.outline="none"}catch{}},children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:a.jsx(z,{})}),a.jsx("span",{className:"text-gray-900",children:o("Bookmark",S)})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{de(!1),ro()},style:{background:"transparent",outline:"none",boxShadow:"none",border:"none",WebkitTapHighlightColor:"transparent"},children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",style:{color:ya},children:a.jsx(z,{})}),a.jsx("span",{className:"text-gray-900",children:o("Bookmark Moment",S)})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{de(!1),Sr(!0)},children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:a.jsx(Z,{})}),a.jsx("span",{className:"text-gray-900",children:o("Share",S)})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{de(!1),un(!0)},children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-black/10 text-gray-900",children:a.jsx(Y,{})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"text-gray-900 font-medium leading-tight",children:o("Tip Creator",S)}),a.jsx("div",{className:"text-xs text-gray-500",children:o("Support",S)+" @"+De})]})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{if(!Ra){za(!0);try{localStorage.setItem("watchIncognito","1")}catch{}return Pa("player:incognitoChanged",{incognito:!0}),gn(o("Incognito ON â€” actions won't be saved",S)),yn.current&&clearTimeout(yn.current),void(yn.current=setTimeout(()=>gn(""),1600))}Wa(!0)},"aria-pressed":Ra,children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:a.jsx(V,{})}),a.jsx("span",{className:"text-gray-900",children:o("Watch Incognito",S)}),a.jsx("span",{style:{marginLeft:"auto"},children:a.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:Ra?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:o(Ra?"On":"Off",S)})})]}),Ba&&a.jsxs("div",{style:{padding:12,background:"#fff",borderRadius:12,marginTop:8,border:"1px solid #e5e7eb",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[a.jsx("div",{style:{fontWeight:700,color:"#111",marginBottom:6},children:o("Turn off Incognito?",S)}),a.jsx("div",{style:{fontSize:13,color:"#6b7280",marginBottom:10},children:o("Your watch history and likes will be saved.",S)}),a.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[a.jsx("button",{className:"px-3 py-2 rounded-lg bg-transparent text-gray-900 border border-gray-300",onClick:()=>Wa(!1),children:o("Cancel",S)}),a.jsx("button",{className:"px-3 py-2 rounded-lg text-white",style:{background:"#111"},onClick:()=>{za(!1);try{localStorage.setItem("watchIncognito","0")}catch{}Pa("player:incognitoChanged",{incognito:!1}),gn(o("Incognito OFF",S)),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1400),Wa(!1)},children:o("Turn Off",S)})]})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors "+(ha?"bg-black/5":"hover:bg-gray-100"),onClick:()=>{pa(e=>{const t=!e;try{bt.current&&(bt.current.loop=t)}catch{}return gn(o(t?"Loop enabled":"Loop disabled",S)),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1400),t})},children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:a.jsx(H,{})}),a.jsx("span",{className:"text-gray-900",children:o("Loop Video",S)}),a.jsx("span",{style:{marginLeft:"auto"},children:a.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:ha?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:o(ha?"On":"Off",S)})})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors "+(ma?"bg-black/5":"hover:bg-gray-100"),onClick:()=>{xa(e=>{const t=!e;return gn(o(t?"Auto-play enabled":"Auto-play disabled",S)),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1400),t})},children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M8 5v14l11-7Z"})})}),a.jsx("span",{className:"text-gray-900",children:o("Auto-play",S)}),a.jsx("span",{style:{marginLeft:"auto"},children:a.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:ma?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:o(ma?"On":"Off",S)})})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors justify-between",onClick:()=>{de(!1),ca(!0)},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:a.jsx(X,{})}),a.jsx("span",{className:"text-gray-900",children:o("Notes",S)})]}),a.jsx("span",{className:"text-xs bg-gray-200 px-2 py-0.5 rounded-full text-gray-700",children:o("Premium",S)})]}),a.jsx("div",{className:"border-t border-gray-200 my-3"}),a.jsxs("div",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",stroke:"#111",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900 leading-tight",children:o("Dark Mode",S)}),a.jsx("div",{className:"text-gray-500 text-xs",children:o("Improve visibility",S)})]})]}),a.jsx("button",{"aria-pressed":wa,onClick:()=>ka(e=>!e),className:"bg-transparent border-0",style:{marginLeft:"auto"},children:a.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:wa?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:o(wa?"On":"Off",S)})})]}),a.jsx("div",{className:"border-t border-gray-200 mt-1"}),a.jsxs("div",{className:"px-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-gray-500 text-sm",children:o("Playback Speed",S)}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:!0,readOnly:!0,className:"hidden"}),a.jsx("div",{className:"w-10 h-5 bg-gray-200 rounded-full p-0.5 flex items-center",children:a.jsx("div",{className:"w-4 h-4 bg-white shadow-sm rounded-full translate-x-3"})})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"flex gap-2 mb-3",style:{overflowX:"auto",paddingBottom:4},children:[.5,.75,1,1.25,1.5,1.75,2].map(e=>{const t=Math.abs(Ma-e)<1e-4;return a.jsxs("button",{onClick:()=>Aa(e),"aria-pressed":t,className:"py-2 px-3 rounded-full text-sm font-medium "+(t?"bg-[#111] text-white":"bg-gray-100 text-gray-700"),children:[e,"x"]},e)})}),a.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[a.jsx("input",{name:"playbackSpeedRange",type:"range",min:.25,max:2,step:.01,value:Ma,onChange:e=>Aa(Math.max(.25,Math.min(2,Number(e.target.value)))),style:{flex:1},"aria-label":"Playback speed"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[a.jsx("input",{name:"playbackSpeedNumber",type:"number",value:Ma,min:.25,max:2,step:.01,onChange:e=>{const t=Number(e.target.value);Number.isFinite(t)&&Aa(t)},onBlur:e=>{let t=Number(e.target.value);Number.isFinite(t)||(t=1),t=Math.max(.25,Math.min(2,Math.round(100*t)/100)),Aa(t)},style:{width:72,padding:"6px 8px",borderRadius:8,background:"#fff",color:"#111",border:"1px solid #e5e7eb"},"aria-label":"Custom playback speed"}),a.jsx("div",{className:"text-gray-500",children:"x"})]})]})]})]}),a.jsx("div",{className:"border-t border-gray-200 my-3"}),a.jsx("div",{className:"px-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:o("Double Tap to Seek",S)}),a.jsx("div",{className:"text-gray-500 text-xs",children:o("Tap sides Â±10s, center to like",S)})]}),a.jsx("button",{"aria-pressed":$a,onClick:()=>Da(e=>!e),className:"bg-transparent border-0",style:{marginLeft:"auto"},children:a.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:$a?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:o($a?"On":"Off",S)})})]})}),a.jsxs("div",{className:"px-2 pt-2",children:[a.jsxs("div",{className:"flex gap-2 mb-3",children:[a.jsx("button",{onClick:()=>ht(-10),className:"flex-1 flex items-center justify-center gap-2 bg-gray-100 rounded-xl py-3 text-gray-900 text-sm",children:a.jsxs("div",{className:"inline-flex items-center",children:[a.jsx(U,{}),a.jsx("span",{className:"font-medium",children:"-10s"})]})}),a.jsx("button",{onClick:()=>ht(10),className:"flex-1 flex items-center justify-center gap-2 bg-gray-100 rounded-xl py-3 text-gray-900 text-sm",children:a.jsxs("div",{className:"inline-flex items-center",children:[a.jsx("span",{className:"font-medium",children:"+10s"}),a.jsx(F,{})]})})]}),a.jsx("div",{className:"border-t border-gray-200 mb-3"}),a.jsx("div",{className:"text-gray-500 text-sm mb-2",children:o("Progress Bar Color",S)}),a.jsx("input",{name:"progressColor",value:da,onChange:e=>ua(e.target.value),className:"w-full bg-white text-gray-900 border border-gray-200 rounded-xl px-3 py-2 placeholder-gray-400",placeholder:da}),a.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[o("Current",S),": ",da]}),a.jsx("div",{className:"text-gray-500 text-sm mt-3 mb-2",children:o("Quick Presets",S)}),a.jsx("div",{className:"grid grid-cols-6 gap-2",children:["#ca8a04","#a95bf3","#dc2626","#db2777","#9333ea","#c084fc","#0891b2","#059669","#65a30d","#84cc16","#eab308","#f59e0b"].map(e=>a.jsx("button",{onClick:()=>ua(e),className:"w-full h-9 rounded-lg",style:{background:e,boxShadow:da.toLowerCase()===e.toLowerCase()?"0 0 0 3px #fff inset, 0 0 0 2px #e5e7eb":void 0,border:da.toLowerCase()===e.toLowerCase()?"2px solid #e5e7eb":void 0},"aria-label":`Set color ${e}`},e))}),a.jsx("div",{className:"border-t border-[#232323] my-3"}),a.jsx("div",{className:"text-gray-300 text-sm mb-1",children:o("Adaptive Streaming (ABR)",S)}),a.jsxs("div",{className:"text-sm mb-3",style:{color:ga},children:["âœ“ ",o("Auto quality adjustment enabled",S)]}),a.jsx("div",{className:"text-gray-400 text-sm mb-3",children:o("Supported: MP4, MKV, AVI, WebM, MOV",S)}),a.jsx("button",{onClick:e=>{e.stopPropagation(),de(!1),Cr(!0)},className:"text-left text-white text-sm opacity-90 underline",children:o("Report an issue",S)})]}),a.jsx("div",{style:{height:28}}),a.jsx("div",{"aria-hidden":"true",style:{position:"absolute",left:0,right:0,bottom:0,height:64,pointerEvents:"none",background:"linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,0.92))"}})]})]})}),mo&&a.jsx("div",{className:"fixed inset-0 z-[1200] flex items-end sm:items-center justify-center",onClick:()=>xo(!1),style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":o("Subtitle Settings",S),style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:Wr,maxHeight:Dr.current,overflow:"hidden",marginBottom:12},children:[a.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:en,onTouchStart:en,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:a.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:en,onTouchStart:en,style:{cursor:"ns-resize"}})}),Ao&&a.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:o("Drag to resize",S)}),a.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 px-2 text-center",children:o("Subtitle Settings",S)}),a.jsxs("div",{className:"overflow-auto",style:{maxHeight:`calc(${Wr}px - 72px)`,paddingRight:6},children:[a.jsxs("div",{className:"flex items-center justify-between px-2 py-3 bg-gray-100 rounded-xl mb-3",children:[a.jsx("div",{children:a.jsx("div",{className:"text-gray-900",children:o("Enable Subtitles",S)})}),a.jsx("button",{onClick:()=>go(e=>!e),"aria-pressed":fo,className:"w-12 h-6 rounded-full p-0.5 "+(fo?"bg-[#3b82f6]":"bg-gray-300"),children:a.jsx("div",{className:"w-5 h-5 bg-white rounded-full transform transition "+(fo?"translate-x-6":"translate-x-0")})})]}),a.jsxs("div",{className:"px-2 mb-3",children:[a.jsx("div",{className:"text-gray-700 text-sm mb-2",children:o("Language",S)}),a.jsxs("select",{value:yo,onChange:e=>bo(e.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[a.jsx("option",{value:"English",children:o("English",S)}),a.jsx("option",{value:"Spanish",children:o("Spanish",S)}),a.jsx("option",{value:"French",children:o("French",S)}),a.jsx("option",{value:"German",children:o("German",S)}),a.jsx("option",{value:"Portuguese",children:o("Portuguese",S)})]})]}),a.jsxs("div",{className:"px-2 mb-3",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{className:"text-gray-700 text-sm",children:[o("Font Size",S),": ",vo,"px"]})}),a.jsx("input",{name:"captionFontSizeRange",type:"range",min:"12",max:"28",value:vo,onChange:e=>wo(Number(e.target.value)),className:"w-full"})]}),a.jsxs("div",{className:"px-2 mb-3",children:[a.jsx("div",{className:"text-gray-700 text-sm mb-2",children:o("Position",S)}),a.jsxs("select",{value:ko,onChange:e=>jo(e.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[a.jsx("option",{value:"Bottom",children:o("Bottom",S)}),a.jsx("option",{value:"Center",children:o("Center",S)}),a.jsx("option",{value:"Top",children:o("Top",S)})]})]}),a.jsxs("div",{className:"px-2 mb-3",children:[a.jsx("div",{className:"text-gray-700 text-sm mb-2",children:o("Text Color",S)}),a.jsx("div",{className:"flex items-center gap-3",children:["#FFFFFF","#FDE047","#34D399","#06B6D4","#F472B6"].map(e=>a.jsx("button",{onClick:()=>No(e),className:"w-8 h-8 rounded-full border "+(So===e?"ring-2 ring-gray-900":"ring-0"),style:{background:e},"aria-label":`Set caption color ${e}`},e))})]}),a.jsxs("div",{className:"px-2 mb-4",children:[a.jsx("div",{className:"text-gray-700 text-sm mb-2",children:o("Background Opacity",S)}),a.jsxs("select",{value:Co,onChange:e=>To(e.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[a.jsx("option",{value:"100% Black",children:o("100% Black",S)}),a.jsx("option",{value:"80% Black",children:o("80% Black",S)}),a.jsx("option",{value:"60% Black",children:o("60% Black",S)}),a.jsx("option",{value:"40% Black",children:o("40% Black",S)}),a.jsx("option",{value:"0% (No Background)",children:o("0% (No Background)",S)})]})]}),a.jsxs("div",{className:"px-2 mb-4",children:[a.jsx("div",{className:"text-gray-500 text-xs mb-2",children:o("Preview",S)}),a.jsx("div",{className:"w-full rounded-md px-3 py-2",style:{background:Co.includes("100")?"rgba(0,0,0,1)":Co.includes("80")?"rgba(0,0,0,0.8)":Co.includes("60")?"rgba(0,0,0,0.6)":Co.includes("40")?"rgba(0,0,0,0.4)":"transparent"},children:a.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,onInput:e=>Lo(e.currentTarget.textContent||""),className:"w-full outline-none",style:{color:So,fontSize:vo,textAlign:"center",minHeight:28,display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"pre-wrap",wordBreak:"break-word",cursor:"text"},"aria-label":"Caption preview - editable",children:Eo})})]}),a.jsx("div",{className:"px-2",children:a.jsx("button",{onClick:()=>xo(!1),className:"w-full bg-[#111] text-white py-2 rounded-xl",children:o("Done",S)})}),a.jsx("div",{style:{height:20}})]})]})}),jr&&a.jsx("div",{className:"fixed inset-0 z-[1200] flex items-end sm:items-center justify-center",onClick:()=>Sr(!1),style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"none",WebkitBackdropFilter:"none",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Share Video",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:Or,maxHeight:Yr.current,overflow:"hidden",marginBottom:12},children:[a.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:nn,onTouchStart:nn,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:a.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:nn,onTouchStart:nn,style:{cursor:"ns-resize"}})}),zo&&a.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:o("Drag to resize",S)}),a.jsx("div",{className:"mb-2",children:a.jsx("h3",{className:"text-gray-900 text-lg font-semibold text-center",children:o("Share Video",S)})}),a.jsx("p",{className:"text-gray-500 text-sm mb-4",children:o("Share this video with your friends and followers",S)}),a.jsxs("div",{ref:wn,className:"overflow-auto flex-1 pr-1",style:{paddingRight:6},children:[a.jsx("div",{className:"text-gray-700 text-sm mb-3",children:o("Quick Actions",S)}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>{ci()},"aria-pressed":ii,children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white text-gray-900 shadow-sm",children:a.jsx(J,{})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"text-gray-900 font-medium",children:o(ii?"Copied":"Copy Link",S)}),a.jsx("div",{className:"text-gray-500 text-xs",children:o("Copy video URL to clipboard",S)})]}),a.jsx("div",{className:"ml-auto text-xs text-green-600",children:ii?o("Copied",S):""})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>(async e=>{if(e){try{navigator.share?(await navigator.share({title:"Watch video",url:e}),gn(o("Shared",S))):(await jn(e),gn(o("Link copied",S)))}catch(t){try{await jn(e)}catch{}gn(o("Link copied",S))}yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1600)}})(Ce),children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-gray-900",children:a.jsx(q,{})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"text-gray-900 font-medium",children:o("Share via...",S)}),a.jsx("div",{className:"text-gray-500 text-xs",children:o("Open system share menu",S)})]})]}),io&&a.jsxs("div",{ref:kn,className:"flex flex-col items-center mb-4 mt-2",children:[a.jsx("img",{src:lo,alt:"QR code",className:"w-40 h-40 bg-white p-1 rounded-md"}),a.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[a.jsx("button",{onClick:()=>{try{navigator.clipboard?.writeText(lo),gn(o("QR URL copied",S)),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1600)}catch{}},className:"px-3 py-1 bg-gray-100 rounded-md text-sm text-gray-900",children:o("Copy QR URL",S)}),a.jsx("button",{onClick:()=>{if(!lo)return;const e=document.createElement("a");e.href=lo,e.download="video-qr.png",document.body.appendChild(e),e.click(),e.remove()},className:"px-3 py-1 bg-gray-100 rounded-md text-sm text-gray-900",children:o("Download QR",S)}),a.jsx("button",{onClick:()=>so(!1),className:"px-3 py-1 bg-gray-200 rounded-md text-sm text-gray-900",children:o("Close",S)})]})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>{(async e=>{if(e)try{if("undefined"!=typeof window&&window.QRCode&&"function"==typeof window.QRCode.toDataURL){const t=await window.QRCode.toDataURL(e,{width:360});co(t)}else if("undefined"!=typeof window&&"function"==typeof window.kjua){const t=window.kjua({text:e,fill:"#000",back:"#fff",size:360});if(t&&"CANVAS"===t.tagName)co(t.toDataURL("image/png"));else{if(!t)throw new Error("kjua returned no element");{const e=(new XMLSerializer).serializeToString(t),r=btoa(unescape(encodeURIComponent(e)));co("data:image/svg+xml;base64,"+r)}}}else{const t=`https://api.qrserver.com/v1/create-qr-code/?size=360x360&data=${encodeURIComponent(e)}`;co(t)}so(!0),setTimeout(()=>{try{kn.current?kn.current.scrollIntoView({behavior:"smooth",block:"center"}):wn.current&&(wn.current.scrollTop=wn.current.scrollHeight)}catch{}},90)}catch(t){const r=`https://api.qrserver.com/v1/create-qr-code/?size=360x360&data=${encodeURIComponent(e)}`;co(r),so(!0),setTimeout(()=>{try{kn.current&&kn.current.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},90)}})(Ce)},children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-gray-900",children:a.jsx(Q,{})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"text-gray-900 font-medium",children:o("QR Code",S)}),a.jsx("div",{className:"text-gray-500 text-xs",children:o("Generate QR code for sharing",S)})]})]}),a.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl",onClick:e=>{di||(async e=>{try{if(e?.stopPropagation?.(),!Ce)return;ui(!0);try{const e=document.createElement("a");return e.href=Ce,e.download="",document.body.appendChild(e),e.click(),e.remove(),void setTimeout(()=>ui(!1),600)}catch(t){}try{const e=await fetch(Ce),t=await e.blob(),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download="video.mp4",document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(r)}catch(t){}finally{ui(!1)}}finally{}})(e)},disabled:di,style:{background:"#f3f4f6"},"aria-busy":di,children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white text-gray-900 shadow-sm",children:a.jsx(K,{})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"text-gray-900 font-medium",children:di?"Downloading...":"Download"}),a.jsx("div",{className:"text-gray-500 text-xs",children:di?"Preparing file...":"Includes Regaarder watermark"})]})]})]}),a.jsx("div",{className:"text-gray-700 text-sm mb-3",children:"Share to Social Media"}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(G,{bg:"#e6f0ff",label:"Facebook",onClick:()=>{return e=Ce,window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}`,"_blank","noopener");var e},children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:a.jsx("path",{d:"M22 12a10 10 0 1 0-11.5 9.86v-6.99H8.9v-2.87h1.6V9.41c0-1.57.93-2.45 2.36-2.45.68 0 1.39.12 1.39.12v1.53h-.78c-.77 0-1.01.48-1.01.98v1.17h1.72l-.28 2.87h-1.44v6.99A10 10 0 0 0 22 12z",fill:"#1877F2"})})}),a.jsx(G,{bg:"#e6f9ff",label:"Twitter",onClick:()=>((e,t="Watch this video")=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}&url=${encodeURIComponent(e)}`,"_blank","noopener"))(Ce),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:a.jsx("path",{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53A4.48 4.48 0 0 0 22.43 1s-2 1-3 1a4.48 4.48 0 0 0-7.86 3v1A12.94 12.94 0 0 1 3 2s-4 9 5 13a13 13 0 0 1-7 2c9 5 20 0 20-11.5A4.5 4.5 0 0 0 23 3z",fill:"#1DA1F2"})})}),a.jsx(G,{bg:"#ffe6f0",label:"Instagram",onClick:()=>(jn(Ce),void alert("Link copied â€” open Instagram and paste it into a new post or story.")),children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:[a.jsxs("linearGradient",{id:"igGrad",x1:"0",x2:"1",y1:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#f58529"}),a.jsx("stop",{offset:"50%",stopColor:"#dd2a7b"}),a.jsx("stop",{offset:"100%",stopColor:"#8134af"})]}),a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"5",fill:"url(#igGrad)"}),a.jsx("path",{d:"M12 7.5a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9z",fill:"#fff",opacity:"0.95"}),a.jsx("circle",{cx:"17.5",cy:"6.5",r:"1",fill:"#fff",opacity:"0.95"})]})}),a.jsx(G,{bg:"#f3f4f6",label:"Email",onClick:()=>{return e=Ce,void(window.location.href=`mailto:?subject=${encodeURIComponent("Watch video")}&body=${encodeURIComponent(e)}`);var e},children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:[a.jsx("path",{d:"M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5z",fill:"#e5e7eb"}),a.jsx("path",{d:"M4 7l8 6 8-6",stroke:"#9ca3af",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]}),a.jsx("div",{className:"text-gray-700 text-sm mb-2",children:"Video URL"}),a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("input",{name:"videoUrl",value:Ce,onChange:e=>Te(e.target.value),className:"flex-1 bg-gray-100 text-gray-900 rounded-xl px-3 py-2 text-sm border-0 outline-none","aria-label":"Video URL"}),a.jsx("button",{onClick:()=>ci(),className:"px-3 py-2 rounded-xl text-sm",style:{background:ii?ga:"#1b1b1b",color:ii?va:"#fff"},children:ii?"Copied":"Copy"})]}),a.jsx("div",{style:{height:20}}),fn&&a.jsxs("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",bottom:20,zIndex:520},onTouchStart:e=>{e.currentTarget.dataset.dragStartX=e.touches[0].clientX},onTouchMove:e=>{const t=parseFloat(e.currentTarget.dataset.dragStartX||"0"),r=e.touches[0].clientX-t;e.currentTarget.style.transform=`translateX(calc(-50% + ${r}px))`},onTouchEnd:e=>{const t=parseFloat(e.currentTarget.dataset.dragStartX||"0"),r=e.changedTouches[0].clientX-t;Math.abs(r)>80?gn(""):e.currentTarget.style.transform="translateX(-50%)",e.currentTarget.dataset.dragStartX="0"},children:[a.jsx("div",{className:"bg-black/80 text-white text-sm px-4 py-2 rounded-md cursor-grab select-none",style:{animation:"toastSlideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},children:fn}),a.jsx("style",{children:"\n\t\t\t\t\t\t\t\t\t\t@keyframes toastSlideDown {\n\t\t\t\t\t\t\t\t\t\t\tfrom {\n\t\t\t\t\t\t\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\t\t\t\t\t\t\ttransform: translateY(-20px) scale(0.95);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tto {\n\t\t\t\t\t\t\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\t\t\t\t\t\t\ttransform: translateY(0) scale(1);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t"})]})]})]})}),dn&&a.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>un(!1),style:{zIndex:710,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-t-2xl p-4 shadow-xl flex flex-col mx-0 sm:mx-4",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Tip the Creator",style:{background:"linear-gradient(180deg, rgba(6,6,6,0.9), rgba(0,0,0,0.95))",border:"1px solid rgba(255,255,255,0.03)",position:"relative",height:Hr,maxHeight:qr.current,overflow:"hidden"},children:[a.jsxs("div",{className:"w-full h-8 flex items-center justify-center",onPointerDown:sn,onTouchStart:sn,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:[a.jsx("div",{className:"w-12 h-1 bg-gray-600 rounded-full touch-none",onPointerDown:sn,onTouchStart:sn,style:{cursor:"ns-resize"}}),a.jsx("button",{onClick:()=>un(!1),className:"absolute right-4 top-3 text-gray-300 p-1 rounded-full hover:bg-white/5",children:"âœ•"})]}),Wo&&a.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:o("Drag to resize",S)}),a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:ga,color:va},children:a.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold",style:{color:va},children:"$"})}),a.jsx("div",{children:a.jsxs("div",{className:"text-gray-300 text-sm",children:[o("Show your appreciation for",S)," @",De,"'s ",o("amazing content",S)]})})]}),a.jsx("div",{style:{display:"flex",gap:10,marginBottom:12},children:[1,5,10,25].map(e=>a.jsxs("button",{onClick:()=>pn(e),className:"px-4 py-2 rounded-full border",style:{background:"#0b0b0b",border:"1px solid rgba(255,255,255,0.04)",minWidth:64,textAlign:"center",color:"#fff"},children:["$ ",e]},e))}),a.jsxs("div",{style:{marginBottom:12},children:[a.jsx("div",{className:"text-white font-semibold mb-2",children:o("Custom Amount",S)}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("span",{style:{padding:"10px 12px",background:"#0b0b0b",border:"1px solid rgba(255,255,255,0.04)",borderRadius:8,color:"#fff"},children:"$"}),a.jsx("input",{name:"tipAmount",type:"number",min:"0",step:"0.01",value:hn,onChange:e=>pn(parseFloat(e.target.value||0)),style:{flex:1,padding:"10px 12px",borderRadius:8,border:"1px solid rgba(255,255,255,0.04)",background:"#0b0b0b",color:"#fff"}})]})]}),a.jsxs("div",{style:{background:fa(ga,.12),padding:12,borderRadius:8,marginBottom:12},children:[a.jsx("div",{className:"text-white text-sm font-medium mb-2",children:o("Your tip helps:",S)}),a.jsxs("ul",{className:"list-inside list-disc text-gray-200 text-sm",style:{marginLeft:16},children:[a.jsx("li",{children:o("Support the creator directly",S)}),a.jsx("li",{children:o("Encourage more great content",S)}),a.jsx("li",{children:o("Show your appreciation",S)})]})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[a.jsx("button",{className:"px-4 py-3 rounded-lg",style:{background:ga,color:va,fontWeight:700},onClick:()=>{gn(`${o("Tip sent",S)}: $${Number(hn||0).toFixed(2)}`),un(!1),pn(0),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1800)},children:`$ ${o("Send",S)} ${Number(hn||0).toFixed(2)}`}),a.jsx("button",{className:"px-4 py-3 rounded-lg bg-transparent text-white border border-white/10",onClick:()=>un(!1),children:o("Cancel",S)})]})]})}),En&&a.jsx("div",{className:"fixed inset-0 flex items-start sm:items-center justify-center pt-24 sm:pt-0",onClick:()=>Ln(!1),style:{zIndex:720,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"w-full max-w-md rounded-2xl shadow-2xl flex flex-col mx-4 overflow-hidden",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Bookmark This Moment",style:{background:"linear-gradient(135deg, #fbfbfd 0%, #f9f9fc 100%)",border:"1px solid rgba(147,51,234,0.08)",position:"relative",maxHeight:"85vh",animation:"modalSlideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1)"},children:[a.jsxs("div",{className:"px-5 py-5 border-b border-gray-100 flex items-start gap-4 bg-white/50 backdrop-blur-sm sticky top-0 z-10",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",style:{background:`${ya}12`,border:`1.5px solid ${ya}20`},children:a.jsx("div",{className:"w-6 h-6 flex items-center justify-center",style:{color:ya,fontWeight:700},children:a.jsx(z,{})})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{className:"text-gray-900 text-xl font-bold tracking-tight",children:o("Bookmark This Moment",S)}),a.jsxs("div",{className:"text-gray-600 text-sm mt-0.5",children:[o("Save this timestamp at",S)," ",a.jsx("span",{style:{color:ya,fontWeight:600},children:oo(An)})]})]})]}),a.jsxs("div",{className:"px-5 py-6 space-y-6 overflow-y-auto custom-scrollbar",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-gray-900 font-semibold text-sm mb-2 block",children:o("Label (optional)",S)}),a.jsx("input",{name:"bookmarkLabel",value:In,onChange:e=>Mn(e.target.value),placeholder:o("Best scene, Important moment...",S),className:"w-full px-4 py-3 rounded-xl text-sm transition-all focus:outline-none focus:ring-2 bg-white border border-gray-200 text-gray-900 placeholder-gray-400",style:{outlineColor:ya},onFocus:e=>e.target.style.borderColor=ya,onBlur:e=>e.target.style.borderColor="#e5e7eb"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-gray-900 font-semibold text-sm mb-3 flex items-center justify-between",children:[a.jsx("span",{children:o("Segment (optional)",S)}),a.jsx("span",{className:"text-xs text-gray-500 font-normal bg-gray-100 px-2 py-1 rounded-md",children:"Previewing video frame"})]}),a.jsxs("div",{className:"mb-4 p-4 rounded-xl bg-gray-50/80 border border-gray-100",children:[a.jsxs("div",{className:"relative h-14 bg-white rounded-lg overflow-hidden border cursor-pointer shadow-sm group",style:{borderColor:`${ya}40`},onClick:e=>{const t=e.currentTarget.getBoundingClientRect(),r=(e.clientX-t.left)/t.width,n=Math.max(0,Math.min(St,r*St));bt.current&&(bt.current.currentTime=n);Math.abs(n-zn)<Math.abs(n-Wn)?Bn(Math.min(n,Wn)):Pn(Math.max(n,zn))},children:[a.jsxs("div",{className:"absolute inset-0 flex",children:[a.jsx("div",{style:{width:zn/St*100+"%",background:"#f3f4f6"}}),a.jsx("div",{style:{width:(Wn-zn)/St*100+"%",background:`${ya}15`}}),a.jsx("div",{style:{flex:1,background:"#f3f4f6"}})]}),a.jsx("div",{className:"absolute top-0 h-full w-1 hover:w-1.5 transition-all z-10",style:{left:zn/St*100+"%",background:ya}}),a.jsx("div",{className:"absolute top-0 h-full w-1 hover:w-1.5 transition-all z-10",style:{left:Wn/St*100+"%",background:ya}}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-3 text-[10px] font-bold pointer-events-none select-none",style:{color:ya},children:[a.jsx("span",{className:"bg-white/80 px-1 rounded",children:oo(zn)}),a.jsx("span",{className:"bg-white/80 px-1 rounded",children:oo(Wn)})]})]}),a.jsx("div",{className:"text-center mt-2 text-[10px] text-gray-400",children:"Click timeline to adjust & preview frame"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1.5 block uppercase tracking-wide",children:"Start Time"}),a.jsx("div",{className:"relative",children:a.jsx("input",{type:"number",min:"0",max:St,step:"0.1",value:zn.toFixed(1),onChange:e=>{const t=Math.max(0,Math.min(St,parseFloat(e.target.value)||0));Bn(t),bt.current&&(bt.current.currentTime=t)},className:"w-full px-3 py-2.5 rounded-lg text-sm bg-white border border-gray-200 text-center font-mono",style:{color:"#111"}})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1.5 block uppercase tracking-wide",children:"End Time"}),a.jsx("div",{className:"relative",children:a.jsx("input",{type:"number",min:"0",max:St,step:"0.1",value:Wn.toFixed(1),onChange:e=>{const t=Math.max(0,Math.min(St,parseFloat(e.target.value)||0));Pn(t),bt.current&&(bt.current.currentTime=t)},className:"w-full px-3 py-2.5 rounded-lg text-sm bg-white border border-gray-200 text-center font-mono",style:{color:"#111"}})})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"px-3 py-1.5 bg-gray-100 rounded-md text-xs font-medium text-gray-600",children:["Duration: ",oo(Wn-zn)]}),a.jsxs("label",{className:"flex-1 flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all border hover:border-purple-200",style:{background:$n?`${ya}08`:"#fff",border:"1px solid "+($n?`${ya}40`:"#e5e7eb")},children:[a.jsx("input",{type:"checkbox",checked:$n,onChange:e=>Dn(e.target.checked),className:"w-4 h-4 rounded cursor-pointer",style:{accentColor:ya}}),a.jsx("div",{children:a.jsx("div",{className:"text-xs font-bold text-gray-800 uppercase tracking-wide",children:"Loop Segment"})})]})]})]})]}),a.jsxs("div",{className:"px-5 py-5 border-t border-gray-200/50 bg-gray-50/50 flex flex-col gap-3 sm:flex-row sm:gap-3 sticky bottom-0 z-10 backdrop-blur-md",children:[a.jsxs("button",{className:"flex-1 px-4 py-3.5 rounded-xl w-full flex items-center justify-center font-bold text-sm transition-all hover:shadow-lg active:scale-95 shadow-md",style:{background:ya,color:"#fff"},onClick:()=>{try{const e={id:Date.now(),time:An,label:(In||"").trim(),startTime:zn,endTime:Wn,shareSegment:$n},t=[e,...Cn(Ce)];Tn(Ce,t);try{On(t)}catch{}Ln(!1),Mn(""),gn("Bookmark saved"),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1400)}catch{}},children:[a.jsx("span",{style:{display:"inline-flex",alignItems:"center",marginRight:8},children:a.jsx(z,{size:18,strokeWidth:2.5})}),o("Save Bookmark",S)]}),a.jsx("button",{className:"flex-1 px-4 py-3.5 rounded-xl w-full font-bold text-sm transition-all hover:bg-gray-200 active:scale-95",style:{background:"#fff",color:"#4b5563",border:"1px solid #e5e7eb"},onClick:()=>Ln(!1),children:o("Cancel",S)})]})]})}),Ni&&a.jsxs("div",{ref:Ii,className:"pointer-events-auto quick-action-card",onPointerDown:e=>e.stopPropagation(),style:{position:"fixed",left:Ti.x,top:Ti.y,transform:"translate(-50%, -120%)",zIndex:950,minWidth:280,padding:10,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,boxShadow:"0 10px 30px rgba(0,0,0,0.5)",backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)",background:wa?"rgba(8,10,12,0.72)":"rgba(255,255,255,0.92)"},children:[a.jsx("button",{onClick:t=>{t?.stopPropagation?.(),ee.user?(et(t=>{const r=!t;if(r){rt(!1);try{const e=localStorage.getItem("regaarder_token");if(e){const t=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${t}/dislikes`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({videoId:Ce||Pe||null})}).catch(()=>{})}}catch(o){}}try{const e=localStorage.getItem("regaarder_token");if(e){const t=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${t}/likes`,{method:r?"POST":"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({videoId:Ce||Pe||null})}).catch(()=>{})}}catch(o){}try{Ra||n(()=>import("./likedvideos-C_kNHGzG.js"),__vite__mapDeps([50,1,2,3,51,11,6,7,8,22,42])).then(t=>{t&&"function"==typeof t.recordLike&&t.recordLike({videoId:Ce||Pe||null,url:Ce||null,title:Pe||null,creatorName:De,imageUrl:(()=>{try{const t=e&&Array.isArray(e)?e:Zt||[];if(Array.isArray(t)&&t.length){const e=t.find(e=>e.url&&String(e.url)===String(Ce)||e.videoUrl&&String(e.videoUrl)===String(Ce)||e.title&&String(e.title)===String(Pe));if(e)return e.thumbnail||e.imageUrl||null}}catch{}return null})(),liked:r,timestamp:(new Date).toISOString()})})}catch{}return r}),yn.current&&clearTimeout(yn.current),gn(o("Liked",S)),yn.current=setTimeout(()=>gn(""),1200),no(1800)):ee.openAuthModal()},"aria-label":"Like",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:Ze?ga:wa?"#fff":"#111"},children:a.jsx(P,{filled:Ze})}),a.jsx("button",{onClick:e=>{e?.stopPropagation?.(),ee.user?(rt(e=>{const t=!e;t&&et(!1);try{const e=localStorage.getItem("regaarder_token");if(e){const r=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${r}/dislikes`,{method:t?"POST":"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({videoId:Ce||Pe||null})}).catch(()=>{})}}catch(r){}try{!Ra&&t&&n(()=>import("./likedvideos-C_kNHGzG.js"),__vite__mapDeps([50,1,2,3,51,11,6,7,8,22,42])).then(e=>{e&&"function"==typeof e.recordLike&&e.recordLike({videoId:Ce||Pe||null,url:Ce||null,title:Pe||null,creatorName:De,liked:!1,timestamp:(new Date).toISOString()})})}catch{}return t}),yn.current&&clearTimeout(yn.current),gn(o("Video Disliked",S)),yn.current=setTimeout(()=>gn(""),1200),no(1800)):ee.openAuthModal()},"aria-label":"Dislike",className:"p-1 rounded-lg",style:{background:"transparent",border:tt?"1px solid #ef4444":"none",borderRadius:8,padding:6,color:tt?"#ef4444":wa?"#fff":"#111"},children:a.jsx($,{})}),a.jsx("button",{onClick:()=>{Ci(!1),Li.current&&clearTimeout(Li.current),ro()},"aria-label":"Bookmark Moment",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:ya},children:a.jsx(z,{})}),a.jsx("button",{onClick:e=>{e.stopPropagation(),pe||(yn.current&&clearTimeout(yn.current),gn("Your screen is locked"),yn.current=setTimeout(()=>gn(""),1600));try{it()}catch{}Ci(!1),Li.current&&(clearTimeout(Li.current),Li.current=null)},"aria-label":pe?"Unlock controls":"Lock controls",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:pe?ga:wa?"#fff":"#111"},children:pe?a.jsx(E,{}):a.jsx(L,{})})]}),Jn&&a.jsx("div",{className:"fixed inset-0 flex items-center justify-center",onClick:()=>qn(!1),style:{zIndex:2200,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-2xl w-[90%] max-w-sm",onClick:e=>e.stopPropagation(),style:{color:"#111"},children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx("div",{className:"w-11 h-11 rounded-xl flex items-center justify-center border",style:{background:"#fbfbfd",borderColor:"rgba(0,0,0,0.04)"},children:a.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center",style:{color:ya,fontWeight:700},children:a.jsx(z,{})})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{className:"text-black text-lg font-semibold",children:"Bookmark This Moment"}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Save this timestamp at ",a.jsx("strong",{children:oo(An)})]})]})]}),a.jsx("div",{className:"mb-3",children:a.jsx("input",{name:"bookmarkLabel_quick",value:In,onChange:e=>Mn(e.target.value),placeholder:"Label (optional)",className:"w-full px-3 py-2 rounded-md border"})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{className:"flex-1 px-4 py-2 rounded-md",style:{background:ya,color:"#fff",fontWeight:700},onClick:()=>{try{const e={id:Date.now(),time:An,label:(In||"").trim()},t=[e,...Cn(Ce)];Tn(Ce,t);try{On(t)}catch{}qn(!1),Mn(""),gn("Moment Bookmarked"),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1400);try{localStorage.setItem("vx:pref:segmentBookmarksEnabled",JSON.stringify(!0))}catch{}try{const e=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,t=localStorage.getItem("regaarder_token");fetch(`${e}/bookmarks/segments`,{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({videoUrl:Ce,label:(In||"").trim(),startTime:Math.floor(An||0),endTime:Math.floor(An||0)})}).catch(()=>{})}catch{}try{Kn({show:!0,x:Ti.x,y:Ti.y}),to.current&&clearTimeout(to.current),to.current=setTimeout(()=>Zn(!0),30),eo.current&&clearTimeout(eo.current),eo.current=setTimeout(()=>{Kn({show:!1,x:0,y:0}),Zn(!1),eo.current=null},900)}catch{}}catch{}},children:"Save"}),a.jsx("button",{className:"flex-1 px-4 py-2 rounded-md",style:{background:"#f3f4f6"},onClick:()=>qn(!1),children:"Cancel"})]})]})}),Qn.show&&a.jsx("div",{style:{position:"fixed",left:Qn.x,top:Qn.y,transform:"translate(-50%, -120%)",zIndex:2250},"aria-hidden":!0,children:a.jsx("div",{style:{transition:"transform 900ms ease, opacity 900ms ease",transform:Gn?"translate(-50%, -120%) scale(1.6)":"translate(-50%, -120%) scale(1)",opacity:Gn?0:1},children:a.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-transparent",children:a.jsx(B,{})})})}),fn&&a.jsxs("div",{role:"status","aria-live":"polite",style:{position:"fixed",left:"50%",transform:"translateX(-50%)",top:"18%",zIndex:4e3,pointerEvents:"auto",willChange:"transform, opacity",animation:"toastSlideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},onTouchStart:e=>{e.currentTarget.dataset.dragStartX=e.touches[0].clientX},onTouchMove:e=>{const t=parseFloat(e.currentTarget.dataset.dragStartX||"0"),r=e.touches[0].clientX-t;e.currentTarget.style.transform=`translateX(calc(-50% + ${r}px))`},onTouchEnd:e=>{const t=parseFloat(e.currentTarget.dataset.dragStartX||"0"),r=e.changedTouches[0].clientX-t;Math.abs(r)>80?gn(""):e.currentTarget.style.transform="translateX(-50%)",e.currentTarget.dataset.dragStartX="0"},children:[a.jsx("div",{className:"bg-black/80 text-white text-sm px-4 py-2 rounded-md cursor-grab select-none",style:{boxShadow:"0 8px 24px rgba(0,0,0,0.36)"},children:fn}),a.jsx("style",{children:"\n\t\t\t\t\t\t\t@keyframes toastSlideDown {\n\t\t\t\t\t\t\t\tfrom {\n\t\t\t\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\t\t\t\ttransform: translateY(-20px) scale(0.95);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tto {\n\t\t\t\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\t\t\t\ttransform: translateY(0) scale(1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t"})]}),Nr&&a.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>Cr(!1),style:{zIndex:700,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"modal-dialog w-full bg-white rounded-t-2xl p-4 shadow-xl flex flex-col mx-0 sm:mx-4",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Report an Issue",style:{position:"relative",maxHeight:.92*window.innerHeight,overflow:"hidden"},children:[a.jsx("div",{className:"w-full h-8 flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full touch-none",style:{cursor:"ns-resize"}})}),$o&&a.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:o("Drag to resize",S)}),a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-50 flex items-center justify-center",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[a.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z",fill:ga}),a.jsx("path",{d:"M12 9v4",stroke:"#111",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("circle",{cx:"12",cy:"17",r:"1",fill:"#111"})]})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-black text-xl font-semibold",children:o("Report an Issue",S)}),a.jsx("div",{className:"text-gray-500 text-sm",children:o("Help us improve your experience by reporting any issues you encounter",S)})]})]}),a.jsx("button",{onClick:()=>Cr(!1),className:"text-gray-600 p-1 rounded-full hover:bg-gray-100",children:"âœ•"})]}),a.jsxs("div",{className:"overflow-auto flex-1 pt-2",style:{paddingRight:6},children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"text-black font-semibold mb-2",children:o("Issue Category",S)}),a.jsxs("div",{style:{position:"relative"},children:[a.jsxs("select",{value:Tr,onChange:e=>Er(e.target.value),className:"w-full bg-white text-black rounded-xl px-3 py-2 border border-gray-200 appearance-none",children:[a.jsx("option",{value:"",disabled:!0,children:o("Select an issue type",S)}),a.jsx("option",{value:"bug",children:o("Bug",S)}),a.jsx("option",{value:"playback",children:o("Playback Issue",S)}),a.jsx("option",{value:"inappropriate",children:o("Inappropriate Content",S)}),a.jsx("option",{value:"other",children:o("Other",S)})]}),a.jsx("div",{style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:"#6b7280"},children:a.jsx(T,{size:18})})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"text-black font-semibold mb-2",children:[o("Describe the issue",S)," ",a.jsx("span",{className:"text-gray-500 font-normal",children:o("(Optional)",S)})]}),a.jsx("textarea",{value:Lr,onChange:e=>Ir(e.target.value.slice(0,500)),placeholder:o("Please provide details about the issue you're experiencing...",S),className:"w-full bg-white text-black border border-gray-200 rounded-xl px-3 py-3 h-28 resize-none outline-none",maxLength:500}),a.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[Lr.length,"/",500," ",o("characters",S)]})]}),a.jsxs("div",{className:"mb-4 bg-gray-50 border border-gray-100 rounded-lg p-3 text-sm text-gray-800",children:[a.jsx("div",{className:"text-gray-800 text-sm mb-2",children:o("Report will include:",S)}),a.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700",children:[a.jsxs("li",{children:[o("Video:",S)," ",Pe]}),a.jsxs("li",{children:[o("Creator:",S)," ",De]}),a.jsxs("li",{children:[o("Timestamp:",S)," ",(()=>{try{const e=bt.current,t=e?Math.floor(e.currentTime||0):Math.floor(pt*St||0),r=Math.floor(t/60);return`${r}:${String(t%60).padStart(2,"0")}`}catch{return"0:00"}})()]})]})]}),a.jsxs("div",{className:"flex flex-col gap-3 mb-6",children:[a.jsx("button",{className:"w-full px-4 py-3 rounded-lg font-medium",style:{background:ga,color:va},onClick:()=>{try{const e=localStorage.getItem("regaarder_token"),t=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,r=bt.current,n=r?Math.floor(r.currentTime||0):Math.floor(pt*St||0);fetch(`${t}/reports`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({videoId:Ce||Pe||null,title:Pe,creator:De,timestamp:n,category:Tr,description:Lr})}).catch(()=>{})}catch(e){}gn(o("Report submitted",S)),Cr(!1),Er(""),Ir(""),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1800)},children:o("Submit Report",S)}),a.jsx("button",{className:"w-full px-4 py-3 rounded-lg bg-transparent text-black border border-gray-200",onClick:()=>Cr(!1),children:o("Cancel",S)})]})]})]})}),ia&&a.jsx(ce,{isOpen:ia,onClose:()=>sa(!1),requestId:Se?.id||Pe||"unknown",selectedLanguage:S}),la&&a.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>ca(!1),style:{zIndex:700,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl flex flex-col mx-4",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Notes",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",maxHeight:.92*window.innerHeight,overflow:"hidden",marginBottom:12},children:[a.jsx("div",{className:"w-full h-10 flex items-center justify-center",children:a.jsx("div",{role:"separator",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",style:{cursor:"ns-resize"}})}),_o&&a.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:o("Drag to resize",S)}),a.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 text-center",children:o("Notes",S)}),a.jsxs("div",{className:"overflow-auto flex-1",style:{paddingRight:6},children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"text-gray-900 font-semibold mb-2",children:o("New Note",S)}),a.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[a.jsx("div",{style:{display:"flex",gap:6},children:["ðŸ“Œ","ðŸ˜€","â¤ï¸","ðŸ”¥"].map(e=>a.jsx("button",{onClick:()=>Ye(t=>t+e),className:"px-2 py-1 rounded bg-gray-100 text-gray-900",children:e},e))}),a.jsxs("label",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:6},children:[a.jsx("input",{name:"attachTimestamp",type:"checkbox",checked:Ve,onChange:e=>He(e.target.checked),className:"w-4 h-4"}),a.jsx("span",{className:"text-gray-500 text-xs",children:o("Attach timestamp",S)})]})]}),a.jsx("textarea",{value:Fe,onChange:e=>Ye(e.target.value),placeholder:o("Add notes... e.g. 'Interesting point', 'Check later'",S),className:"w-full bg-gray-50 text-gray-900 border border-gray-200 rounded-xl px-3 py-3 h-28 resize-none outline-none"}),a.jsxs("div",{className:"flex items-center justify-end gap-3 mt-3",children:[a.jsx("button",{className:"px-4 py-2 rounded-lg bg-transparent text-gray-700 border border-gray-300",onClick:()=>{Ye(""),He(!0)},children:o("Reset",S)}),a.jsx("button",{className:"px-4 py-2 rounded-lg",style:{background:"#111",color:"#fff"},onClick:()=>{const e=Fe.trim();if(!e)return;const t=Ve&&bt.current?Math.floor(bt.current.currentTime||0):null,r=[{id:Date.now(),text:e,time:t},...Oe||[]];Ue(r),Sn(Ce,r),Ye(""),He(!0)},children:o("Add Note",S)})]})]}),a.jsx("div",{children:0===(Oe||[]).length?a.jsx("div",{className:"text-gray-400 text-center py-8",children:o("No notes yet.",S)}):a.jsx("div",{className:"space-y-3",children:Oe.map(e=>a.jsxs("div",{className:"bg-gray-50 border border-gray-100 p-3 rounded-lg flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",style:{whiteSpace:"pre-wrap"},children:e.text}),null!=e.time&&a.jsx("button",{className:"text-sm text-gray-500 mt-2 hover:underline",onClick:()=>{try{bt.current&&(bt.current.currentTime=e.time,lt(!0))}catch{}},children:oo(e.time)})]}),a.jsx("div",{children:a.jsx("button",{className:"text-sm text-gray-400 ml-3 hover:text-red-500",onClick:()=>{const t=Oe.filter(t=>t.id!==e.id);Ue(t),Sn(Ce,t)},children:o("Delete",S)})})]},e.id))})})]})]})}),a.jsxs("div",{"aria-hidden":!Ri&&!gi,style:{pointerEvents:Ri||gi?"auto":"none",position:"fixed",top:0,right:0,height:"100vh",width:Bi.current,maxWidth:"100%",zIndex:1e3},children:[(Ri||gi&&0!==Mi)&&a.jsx("div",{onClick:()=>{zi(!1),Ai(0)},style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.36)",opacity:Ri?1:Math.min(.6,Math.max(0,-Mi/Bi.current)),transition:gi?"none":"opacity 220ms ease",zIndex:999}}),a.jsxs("div",{onPointerDown:e=>{const t=e.clientX??(e.touches&&e.touches[0]?.clientX),r=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"==typeof t){Pi.current={x:t,y:r},yi(!0),Ai(-Bi.current);try{e.target?.setPointerCapture?.(e.pointerId)}catch{}}},onPointerMove:e=>{if(!gi)return;const t=e.clientX??(e.touches&&e.touches[0]?.clientX);if("number"!=typeof t)return;const r=t-Pi.current.x,n=Bi.current;let o=-n+Math.max(0,r);o=Math.min(0,Math.max(-n,o)),Ai(o)},onPointerUp:$i,onPointerCancel:$i,style:{position:"absolute",right:0,top:0,height:"100%",width:Bi.current,background:"#fff",color:"#111",transform:`translateX(${Math.max(0,Bi.current+Mi)}px)`,transition:gi?"none":"transform 260ms cubic-bezier(.2,.9,.2,1)",boxShadow:"-20px 0 40px rgba(0,0,0,0.35)",borderLeft:"1px solid rgba(0,0,0,0.06)",overflowY:"auto",zIndex:1e3,display:"flex",flexDirection:"column",touchAction:"none"},children:[a.jsxs("div",{style:{padding:18,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(0,0,0,0.06)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[a.jsx("div",{className:"w-9 h-9 rounded-md flex items-center justify-center bg-gray-100",style:{color:"#111"},children:a.jsx(w,{size:20,strokeWidth:2.5})}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:18,fontWeight:700},children:"Discover More"}),a.jsx("div",{style:{fontSize:12,color:"#6b7280"},children:"Search and explore related videos"})]})]}),a.jsx("button",{"aria-label":"Close",onClick:()=>{zi(!1),Ai(0)},style:{border:"none",background:"transparent",fontSize:24,cursor:"pointer",color:"#6b7280",padding:"4px"},children:"âœ•"})]}),a.jsxs("div",{style:{padding:14},children:[a.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:a.jsx("input",{name:"discoverQuery",value:qt,onChange:e=>Qt(e.target.value),placeholder:"Search videos...",style:{flex:1,padding:"10px 12px",borderRadius:10,border:"1px solid #e6e6e6",outline:"none"}})}),a.jsx("div",{style:{marginTop:12,display:"flex",gap:8,overflowX:"auto",overflowY:"hidden",paddingBottom:8,whiteSpace:"nowrap",scrollBehavior:"smooth"},children:[{name:"Recommended",icon:x},{name:"Trending Now",icon:f},{name:"New",icon:g},{name:"Travel",icon:y},{name:"Education",icon:b},{name:"Entertainment",icon:v},{name:"Music",icon:j},{name:"Sports",icon:k},{name:"Bookmarks",icon:z},{name:"Liked",icon:P}].map(e=>{const t=e.name===Kt,r=e.icon;return a.jsxs("button",{onClick:()=>Gt(e.name),style:{display:"flex",alignItems:"center",gap:6,paddingLeft:12,paddingRight:12,paddingTop:10,paddingBottom:10,borderRadius:"8px",border:"none",cursor:"pointer",fontSize:13,transition:"all 150ms ease-in-out",background:t?ga:"#fff",color:t?va:"#4b5563",fontWeight:t?700:500,boxShadow:t?`0 4px 10px rgba(0, 0, 0, 0.3), 0 0 10px ${ga}33, inset 0 1px 0 rgba(255, 255, 255, 0.6)`:"0 1px 3px rgba(0, 0, 0, 0.05), inset 0 1px 0 #ffffff",flexShrink:0,whiteSpace:"nowrap"},children:[a.jsx(r,{size:16,strokeWidth:2.5}),e.name]},e.name)})})]}),a.jsxs("div",{style:{padding:12,display:"flex",flexDirection:"column",gap:12,flex:1,overflowY:"auto",minHeight:0},children:[(()=>{const t=void 0!==e&&e&&e.length?e:Zt&&Zt.length?Zt:[],r=(qt||"").trim().toLowerCase();if("Bookmarks"===Kt){const e=(()=>{const e=[];try{for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);if(r&&r.startsWith("bookmarks:")){const t=r.slice(10);try{const n=localStorage.getItem(r),o=n?JSON.parse(n):[];o&&o.length&&e.push({url:t,bookmarks:o})}catch{}}}}catch(t){}return e})();return e.length?e.flatMap(e=>{const r=(t||[]).find(t=>t.url===e.url)||{};return(e.bookmarks||[]).map(t=>{const n=r.thumbnail||"https://placehold.co/220x128/000000/ffffff?text=Video",o=t.label||r.title||e.url,i=r.creator||"",s=r.duration||0,l=`${e.url}::${t.id}`;return a.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{try{zi(!1),e.url&&Te(m(e.url)),setTimeout(()=>{try{const r=bt.current;if(r){e.url&&(r.src=m(e.url));try{r.currentTime=Math.max(0,Math.floor(t.time||0))}catch{}try{const e=r.play();e&&e.catch&&e.catch(()=>{}),jt(!0)}catch{}try{lt(!0),mi(2e3)}catch{}}}catch{}},180);try{gn("Playing from bookmarked moment"),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1400)}catch{}}catch{}},style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",position:"relative"},children:[a.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden",style:{background:`url(${n}) center/cover no-repeat`},children:a.jsx("div",{className:"absolute right-2 bottom-1 bg-black/70 text-white text-xs px-2 py-0.5 rounded",children:oo(t.time||0)})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:700},children:o}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:6},children:[a.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[i,s?a.jsx("span",{style:{background:"#e6f2ff",color:"#2563eb",padding:"2px 6px",borderRadius:8,marginLeft:8,fontSize:11},children:(()=>{const e=s||0;return`${Math.floor(e/60)}:${String(e%60).padStart(2,"0")}`})()}):null]}),a.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:a.jsx("button",{"aria-label":"Share bookmarked moment","data-share-anchor":l,onClick:e=>{e.stopPropagation?.();try{Hn(e=>e===l?null:l)}catch{}},className:"p-1.5 rounded-full hover:bg-gray-100",style:{border:"none",background:"transparent",cursor:"pointer",display:"flex",alignItems:"center"},children:a.jsx(Z,{})})})]})]}),Vn===l&&a.jsxs("div",{role:"dialog","aria-label":"Share bookmark","data-share-key":l,className:"min-w-[220px] sm:min-w-[260px] bg-white rounded-xl p-4 shadow-2xl",style:{position:"absolute",right:12,top:56,zIndex:1100,border:"1px solid rgba(0,0,0,0.06)"},onClick:e=>e.stopPropagation(),children:[a.jsx("div",{style:{fontSize:13,fontWeight:700,marginBottom:8},children:"Share bookmarked moment"}),a.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:8},children:"This link opens the video at the saved time."}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[a.jsx("button",{onClick:()=>{try{const r=Xn(e.url,t.time);jn(r),gn("Link copied"),Hn(null),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1600)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fafafa",cursor:"pointer",textAlign:"left"},children:"Copy link"}),a.jsx("button",{onClick:()=>{try{const r=Xn(e.url,t.time);try{window.location.href=`whatsapp://send?text=${encodeURIComponent(r)}`}catch{}setTimeout(()=>window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(r)}`,"_blank"),600),Hn(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Send to WhatsApp"}),a.jsx("button",{onClick:()=>{try{const r=Xn(e.url,t.time);try{window.location.href=`twitter://post?message=${encodeURIComponent(r)}`}catch{}setTimeout(()=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(r)}`,"_blank"),600),Hn(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Twitter"}),a.jsx("button",{onClick:()=>{try{const r=Xn(e.url,t.time);try{window.location.href=`fb-messenger://share?link=${encodeURIComponent(r)}`}catch{}setTimeout(()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(r)}`,"_blank"),600),Hn(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Facebook"}),a.jsx("button",{onClick:()=>{try{const r=Xn(e.url,t.time);try{window.location.href=`instagram://share?text=${encodeURIComponent(r)}`}catch{}setTimeout(()=>{jn(r),gn("Link copied â€” share via Instagram"),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1600)},600),Hn(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Instagram"}),a.jsxs("div",{style:{display:"flex",gap:8,marginTop:6},children:[a.jsx("button",{onClick:()=>{try{Sr(!0),Hn(null)}catch{}},style:{flex:1,padding:"8px 10px",borderRadius:8,background:ga,color:va,border:"none",cursor:"pointer"},children:"More..."}),a.jsx("button",{onClick:()=>Hn(null),style:{padding:"8px 10px",borderRadius:8,background:"#f3f4f6",border:"none",cursor:"pointer"},children:"Close"})]})]})]})]},l)})}):a.jsx("div",{className:"text-gray-400 text-center py-8",children:"No bookmarks yet."})}if("Liked"===Kt)try{const e=localStorage.getItem("likedVideos"),t=e?JSON.parse(e):[];return t&&t.length?t.map(e=>{const t=e.imageUrl||"https://placehold.co/220x128/000000/ffffff?text=Video",r=e.title||"Untitled Video",n=e.creatorName||"Unknown Creator",o=`liked-${e.videoId}`;return a.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{try{zi(!1),e.url&&Te(m(e.url)),$e(e.title||"Video"),_e(e.creatorName||""),setTimeout(()=>{try{const t=bt.current;if(t){e.url&&(t.src=m(e.url)),t.currentTime=0;try{const e=t.play();e&&e.catch&&e.catch(()=>{}),jt(!0)}catch{}try{lt(!0),mi(2e3)}catch{}}}catch{}},180);try{gn("Now playing"),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1400)}catch{}}catch{}},style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",position:"relative"},children:[a.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden",style:{background:`url(${t}) center/cover no-repeat`,minWidth:"112px"},children:a.jsx("div",{className:"absolute top-1 left-1 bg-red-600 text-white text-xs px-1.5 py-0.5 rounded",style:{fontSize:"10px"},children:"â™¥"})}),a.jsxs("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:700},children:r}),a.jsx("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:n})]})]},o)}):a.jsx("div",{className:"text-gray-400 text-center py-8",children:"No liked videos yet."})}catch(i){return a.jsx("div",{className:"text-gray-400 text-center py-8",children:"Error loading liked videos."})}let n=t;"Recommended"===Kt?n=t:"Trending Now"===Kt?n=t.sort((e,t)=>(parseInt(t.views)||0)-(parseInt(e.views)||0)):"New"===Kt?n=t.sort((e,t)=>(t.timestamp||0)-(e.timestamp||0)):["Recommended","Trending Now","New","Travel","Education","Entertainment","Music","Sports"].includes(Kt)&&(n=t.filter(e=>{const t=(e.category||"").toLowerCase(),r=Kt.toLowerCase();return t.includes(r)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(r))}),0===n.length&&(n=t));const o=r?n.filter(e=>(e.title||"").toLowerCase().includes(r)||(e.creator||"").toLowerCase().includes(r)):n;return 0===o.length?a.jsx("div",{className:"text-gray-400 text-center py-8",children:"No videos found for this category."}):o.map((e,t)=>a.jsx(te,{item:e,onVideoClick:async()=>{try{try{tr.current=o||[],nr(t)}catch{}$e(e.title||"Video"),_e(e.creator||"");try{zi(!1)}catch{}e.url&&Te(m(e.url));try{lt(!0),mi(2600)}catch{}try{gn("Now playing"),yn.current&&clearTimeout(yn.current),yn.current=setTimeout(()=>gn(""),1600)}catch{}setTimeout(async()=>{try{const t=bt.current;if(t){e.url&&(t.src=m(e.url)),t.currentTime=0,await t.play(),jt(!0);try{mi(1600)}catch{}}}catch(i){}},120)}catch{}},setToastMessage:gn,toastTimerRef:yn},e.id))})(),a.jsx("div",{style:{height:8}})]})]})]})]})}const oe=1,ae="https://placehold.co/40x40/CCCCCC/666666?text=JD",ie=({comment:e,onReply:t,selectedLanguage:r})=>{const n=e.userId===oe?ae:"https://placehold.co/40x40/CCCCCC/666666?text=G",i=e.text.split(" "),s=i[0],l=s?.startsWith?.("@"),c=l?s.substring(1):null,d=l?i.slice(1).join(" "):e.text,[h,p]=u.useState(!1),[m,x]=u.useState(!1),[f,g]=u.useState("number"==typeof e.likes?e.likes:0);return a.jsxs("div",{className:"flex space-x-3 py-3 border-b border-gray-50 last:border-b-0 "+(l?"ml-6":""),children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:n,alt:e.userName,className:"w-8 h-8 rounded-full object-cover"})}),a.jsxs("div",{className:"flex-grow min-w-0",children:[a.jsxs("div",{className:"bg-gray-100 rounded-xl p-3 inline-block max-w-full",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-800 break-words",children:e.userName}),a.jsxs("p",{className:"text-sm text-gray-700 break-words",children:[l&&a.jsxs("span",{className:"text-indigo-600 font-medium mr-1",children:["@",c]}),d]})]}),a.jsxs("div",{className:"flex items-center space-x-3 mt-1 ml-1 text-xs text-gray-500",children:[a.jsx("span",{className:"font-medium",children:o("Just now",r)}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsxs("button",{onClick:()=>{p(e=>{const t=!e;return g(e=>Math.max(0,e+(t?1:-1))),t&&m&&x(!1),t})},"aria-pressed":h,className:"flex items-center gap-2 transition-colors",style:{background:h?"rgba(239,68,68,0.06)":"transparent",padding:"6px 8px",borderRadius:12,cursor:"pointer",border:"none"},children:[h?a.jsx(se,{size:14}):a.jsx(le,{size:14}),a.jsx("span",{style:{fontSize:12,color:"#374151"},children:(y=f,y>=1e6?`${(y/1e6).toFixed(1).replace(/\.0$/,"")}M`:y>=1e3?`${(y/1e3).toFixed(1).replace(/\.0$/,"")}k`:String(y))})]}),a.jsx("button",{onClick:()=>{x(e=>{const t=!e;return t&&h&&(p(!1),g(e=>Math.max(0,e-1))),t})},"aria-pressed":m,className:"flex items-center transition-colors",style:{background:m?"#f3f4f6":"transparent",padding:"6px 8px",borderRadius:12,border:"none",cursor:"pointer"},title:"Dislike",children:a.jsx($,{size:14})}),a.jsx("button",{onClick:()=>t(e),className:"hover:text-gray-700 transition-colors",style:{background:"transparent",border:"none",padding:6,cursor:"pointer"},children:o("Reply",r)})]})]})]})]});var y},se=({size:e=16,color:t="#ef4444"})=>a.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:t,stroke:"none","aria-hidden":"true",children:a.jsx("path",{d:"M12 21s-7.5-4.35-9.2-6.02C1.45 12.9 2 9.7 4.5 8.1 6.12 6.95 8.13 7 9 8.1c.87-1.1 2.88-1.15 4.5.0 1.83 1.15 3.05 3.07 3.7 4.0 2.2 1.6 3.05 4.8- - -",fillRule:"evenodd"})}),le=({size:e=16,stroke:t="#ef4444"})=>a.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"})}),ce=({isOpen:e,onClose:r,requestId:n,selectedLanguage:i})=>{const s=u.useRef(null),l=t(),c=u.useRef(null),d=u.useRef(null),[h,p]=u.useState(.9*window.innerHeight),m=.4*window.innerHeight,x=.95*window.innerHeight,[f,g]=u.useState([]),[y,b]=u.useState(""),[v,w]=u.useState(null),[k,j]=u.useState(!1),[S,N]=u.useState(null);u.useEffect(()=>{if(!e||!n)return;let t=!1;const r=window&&window.__BACKEND_URL__||"http://localhost:4000";return j(!0),N(null),fetch(`${r}/requests/${n}/comments`).then(async e=>{const r=await e.json().catch(()=>({}));if(!e.ok)throw new Error(r.error||"Failed to load comments");t||g(Array.isArray(r.comments)?r.comments:[])}).catch(e=>{t||N(e.message||"Network error")}).finally(()=>{t||j(!1)}),()=>{t=!0}},[e,n]);const C=u.useRef({dragging:!1,startY:0,startHeight:0}),[T,E]=u.useState(!1);u.useEffect(()=>{if(e)try{E(!0);const e=setTimeout(()=>E(!1),3400);return()=>clearTimeout(e)}catch{}},[e]),u.useEffect(()=>{if(!e)return;const t=setTimeout(()=>{try{d.current?.focus?.(),d.current?.scrollIntoView?.({behavior:"smooth",block:"nearest"})}catch{}},50);return()=>clearTimeout(t)},[e]);const L=u.useCallback(e=>{w(e),b(`@${e.userName} `),d.current&&d.current.focus()},[]),I=u.useCallback(()=>{w(null),b("")},[]),M=async()=>{if(!l.user)return void l.openAuthModal();if(""===y.trim())return;const e=y.trim(),t=window&&window.__BACKEND_URL__||"http://localhost:4000",r=(()=>{try{return localStorage.getItem("regaarder_token")}catch{return null}})();try{const a=await fetch(`${t}/requests/${n}/comments`,{method:"POST",headers:{"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{}},body:JSON.stringify({text:e,parentId:v?v.id:null})}),i=await a.json().catch(()=>({}));if(!a.ok)throw new Error(i.error||"Failed to post comment");const s=i.comment||null;if(s)g(e=>[...e,s]);else{const t={id:`c_${Date.now()}`,requestId:n,userId:l.user.id||"anon",userName:l.user.name||"You",text:e,parentId:v?v.id:null,createdAt:(new Date).toISOString()};g(e=>[...e,t])}b(""),w(null);try{window.dispatchEvent(new CustomEvent("request:comment_added",{detail:{requestId:n,comment:s||fallback}}))}catch(o){console.warn("Failed to dispatch comment event:",o)}setTimeout(()=>{try{c.current?.scrollTo({top:c.current.scrollHeight,behavior:"smooth"})}catch{}},80)}catch(a){N(a.message||"Network error"),setTimeout(()=>N(null),3e3)}},A=e=>{e.preventDefault();const t=e.clientY??(e.touches&&e.touches[0]?.clientY);C.current.dragging=!0,C.current.startY=t,C.current.startHeight=h,window.addEventListener("pointermove",R),window.addEventListener("pointerup",z)},R=e=>{if(!C.current.dragging)return;const t=e.clientY??(e.touches&&e.touches[0]?.clientY);if("number"!=typeof t)return;const r=C.current.startY-t;let n=C.current.startHeight+r;n=Math.max(m,Math.min(x,n)),p(n)},z=e=>{C.current.dragging&&(C.current.dragging=!1,window.removeEventListener("pointermove",R),window.removeEventListener("pointerup",z),h<m+20&&r())};return u.useEffect(()=>()=>{window.removeEventListener("pointermove",R),window.removeEventListener("pointerup",z)},[]),e?a.jsx("div",{className:"fixed inset-0 z-[1200] flex items-end sm:items-center justify-center",onClick:r,style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:a.jsxs("div",{ref:s,className:"modal-dialog w-full max-w-md bg-white rounded-t-2xl shadow-xl overflow-hidden flex flex-col",style:{height:h},onClick:e=>e.stopPropagation(),children:[a.jsx("div",{className:"w-full h-10 flex items-center justify-center",children:a.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:A,onTouchStart:A,style:{cursor:"ns-resize"}})}),T&&a.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:o("Drag to resize",i)}),a.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-[#f3f4f6] flex items-center justify-center",children:a.jsx(de,{size:16,stroke:"#6b7280"})}),a.jsx("h2",{className:"text-lg font-medium text-gray-800",children:o("Comments",i)})]})})}),a.jsx("div",{ref:c,className:"flex-1 overflow-y-auto px-4 py-3 flex",children:0===f.length?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center text-gray-500",children:[a.jsx(ue,{}),a.jsx("p",{className:"mt-6 text-lg font-medium text-gray-700",children:o("No comments yet",i)}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:o("Be the first to share your thoughts!",i)})]}):a.jsx("div",{className:"w-full",children:f.map(e=>a.jsx(ie,{comment:e,onReply:L,selectedLanguage:i},e.id))})}),a.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 bg-white sticky bottom-0",style:{zIndex:30},children:[v&&a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-2",children:[a.jsxs("span",{children:[o("Replying to",i)," @",v.userName]}),a.jsx("button",{onClick:I,className:"text-indigo-600 hover:underline",children:o("Cancel",i)})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{name:"commentText",ref:d,value:y,onChange:e=>b(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),M())},placeholder:o("Add a comment... (use @ to mention)",i),className:"flex-1 bg-gray-100 border border-gray-200 rounded-xl px-4 py-3 text-sm text-gray-800 outline-none focus:outline-none focus:ring-1 focus:ring-gray-300 focus:border-gray-300"}),a.jsx("button",{onClick:M,className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center shadow-md","aria-label":"Send comment",children:a.jsx(he,{})})]})]})]})}):null},de=({size:e=20,stroke:t="#9CA3AF"})=>a.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),ue=({size:e=96,stroke:t="#E5E7EB"})=>a.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),he=({size:e=18,color:t="#fff"})=>a.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M22 2L11 13"}),a.jsx("path",{d:"M22 2l-7 20  -2-7-7-2 20-11z"})]}),pe=Object.freeze(Object.defineProperty({__proto__:null,VideoPlayer:()=>{p();const e=d(),[t,r]=u.useState("undefined"!=typeof window&&localStorage.getItem("regaarder_language")||"English");u.useEffect(()=>{const e=setInterval(()=>{const e=localStorage.getItem("regaarder_language")||"English";r(e)},1e3);return()=>clearInterval(e)},[]);const[o,i]=u.useState(null),[s,c]=u.useState(null),h=u.useRef(null),x=u.useRef(null),[f,g]=u.useState(0),y=u.useContext(l)||{},b=y.videoRef,v=y.setSource;y.play;const w=u.useRef([]),k=u.useRef(-1),[j,S]=u.useState(-1),N=u.useRef(0);if(u.useEffect(()=>{let t=!1;return(async()=>{try{const o=new URLSearchParams(window.location.search),a=o.get("id"),s=o.get("title"),l=o.get("channel"),d=o.get("subtitle"),u=o.get("src")||o.get("video")||o.get("url")||o.get("videoUrl")||o.get("v");let h=null;try{if(e&&e.state){const t=e.state.miniPlayerData||e.state.video||null;t&&(h=t.video||t||null,h&&!h.src&&(h.src=h.videoUrl||h.url||u||null))}}catch(r){}try{const e=await n(()=>import("./home-CN_asF5T.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47])),t=e.getVideoById,r=e.VIDEOS||e.default?.VIDEOS||null;!h&&a&&"function"==typeof t&&(h=t(a)),h||(s||u)&&(h={id:a||(u?"custom":null),title:s||"",channel:l,subtitle:d,src:u||null}),!h&&Array.isArray(r)&&r.length&&(h=r[0])}catch(r){!h&&s&&(h={id:a||"custom",title:s,channel:l,subtitle:d,src:u||null})}if(t)return;if(!h)return void i("No video information available.");h&&!h.src&&(h.src=h.videoUrl||h.url||h.src||null),c(h);try{const e=localStorage.getItem("videoplayer_source"),t=localStorage.getItem("videoplayer_index");if(e){const r=JSON.parse(e);if(Array.isArray(r)&&r.length){w.current=r;const e=h.id||h.src||h.url||h.videoUrl||h.title;let n=r.findIndex(t=>String(t)===String(e)||String(t)===String(h.url)||String(t)===String(h.src)||"object"==typeof t&&(String(t.id)===String(e)||String(t.url)===String(e)));if(null!=t&&void 0!==t&&!isNaN(parseInt(t,10))){const o=parseInt(t,10);if(o>=0&&o<r.length){const t=r[o],a="object"==typeof t?t.id||t.url:t;-1!==n&&String(a)!==String(e)&&String(a)!==String(h.url)||(n=o)}}-1!==n?(k.current=n,S(n)):(k.current=0,S(0))}}}catch(r){}}catch(o){console.error("videoplayer parse error",o),i("Failed to parse video parameters.")}})(),()=>{t=!0}},[]),u.useEffect(()=>{if(!s)return;const e=b&&b.current||null;try{if(x.current&&e){try{x.current.innerHTML=""}catch{}try{x.current.appendChild(e)}catch{}try{e.style.display="block",e.className="w-full rounded-lg bg-black"}catch{}try{h.current=e}catch{}try{g(e=>e+1)}catch{}}}catch(t){}try{if("function"==typeof v&&s.src){let e=0;try{const t="playback:"+(s.id||s.src||s.url||s.title||""),r=localStorage.getItem(t);if(r){const t=JSON.parse(r);t&&t.currentTime&&(e=t.currentTime)}}catch{}v(s.src,e,!1);try{const e=m(s.src);e&&videoUrl!==e&&setVideoUrl(e)}catch{}}else if(e&&s.src){if(e.src!==(s.src?m(s.src):s.src)){e.src=s.src?m(s.src):s.src;try{e.load()}catch{}}try{e.currentTime=0}catch{}}}catch(t){}},[s,b,v,videoUrl]),u.useEffect(()=>{const e=b&&b.current||h.current;if(!e)return;const t=()=>{try{const t=e.videoWidth||16,r=e.videoHeight||9,n=t&&r?t/r:16/9;try{setDuration(e.duration||0)}catch{}try{setNaturalAspect(n)}catch{}try{setOrientation(n<1?"portrait":"landscape")}catch{}}catch{}},r=()=>{try{e.duration&&!draggingRef.current&&setProgress(e.currentTime/e.duration)}catch{}},n=()=>{try{console.debug("video seeking",e&&e.currentTime)}catch{}},o=()=>{try{console.debug("video seeked",e&&e.currentTime)}catch{}},a=()=>{try{setIsPlaying(!0),handlePlayRecord()}catch{}},i=()=>{try{setIsPlaying(!1)}catch{}},s=()=>{try{setIsPlaying(!1),setShowSuggestionCard(!0)}catch{}};return e.addEventListener("loadedmetadata",t),e.addEventListener("timeupdate",r),e.addEventListener("seeking",n),e.addEventListener("seeked",o),e.addEventListener("play",a),e.addEventListener("pause",i),e.addEventListener("ended",s),()=>{try{e.removeEventListener("loadedmetadata",t)}catch{}try{e.removeEventListener("timeupdate",r)}catch{}try{e.removeEventListener("seeking",n)}catch{}try{e.removeEventListener("seeked",o)}catch{}try{e.removeEventListener("play",a)}catch{}try{e.removeEventListener("pause",i)}catch{}try{e.removeEventListener("ended",s)}catch{}}},[b]),u.useEffect(()=>{const e=async e=>{try{const o=Date.now();if(o-N.current<650)return;const a=e.deltaY<0?1:-1,i=currentPlaylistRef.current||[];if(!i||!i.length)return;let s=k.current;"number"!=typeof s&&(s=-1);const l=s+a;if(l<0||l>=i.length)return;N.current=o;const d=i[l];try{const e=await n(()=>import("./home-CN_asF5T.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47])),o=e.getVideoById,a=e.VIDEOS||e.default?.VIDEOS||e.homeVideos||e.discoverItems||null;let i=null;if("function"==typeof o&&(i=o(d)),!i&&Array.isArray(a)&&(i=a.find(e=>e.id&&String(e.id)===String(d)||e.url&&String(e.url)===String(d)||e.src&&String(e.src)===String(d))),i||"string"==typeof d&&/^(https?:)?\/\//.test(d)&&(i={id:d,title:"Video",src:d}),i){k.current=l,c(i);try{const e=h.current;e&&(i.src||i.url)&&(e.src=m(i.src||i.url),e.currentTime=0)}catch(t){}try{localStorage.setItem("videoplayer_index",String(l))}catch(r){}}}catch(t){}}catch(t){}};return window.addEventListener("wheel",e,{passive:!0}),()=>window.removeEventListener("wheel",e)},[]),o)return a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",style:{border:"none",display:"none"},children:[a.jsx("strong",{children:"Error:"})," ",o]})});if(!s)return a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"text-gray-600",children:"Loading video..."})});const C=s&&s.src&&(s.src.includes("youtube.com")||s.src.includes("youtu.be")),T=(()=>{if(!C||!s?.src)return"";const e=s.src;if(e.includes("youtu.be/"))return e.split("youtu.be/")[1].split(/[?&#]/)[0];if(e.includes("youtube.com"))try{return new URL(e).searchParams.get("v")||""}catch{return""}return""})();return a.jsx("div",{className:"min-h-screen bg-white p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:s.title}),s.channel&&a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:s.channel}),C&&T?a.jsxs("div",{className:"w-full rounded-lg bg-black relative",style:{aspectRatio:"16/9",overflow:"hidden"},children:[a.jsx("iframe",{src:`https://www.youtube-nocookie.com/embed/${T}?autoplay=1&controls=0&modestbranding=1&showinfo=0&rel=0&iv_load_policy=3&fs=0&disablekb=1&playsinline=1&enablejsapi=1`,className:"w-full h-full border-0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",style:{width:"100%",height:"100%",pointerEvents:"none",transform:"scale(1.3)",transformOrigin:"center center"},title:"Video player"}),a.jsx("div",{style:{position:"absolute",inset:0,zIndex:3}}),a.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"10%",background:"linear-gradient(to top, #000 15%, transparent 100%)",zIndex:4,pointerEvents:"none"}}),a.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"6%",background:"linear-gradient(to bottom, #000 5%, transparent 100%)",zIndex:4,pointerEvents:"none"}})]}):s.src?a.jsx("div",{ref:x,className:"w-full rounded-lg bg-black"}):a.jsx("div",{className:"p-6 bg-[var(--color-gold-cream)] rounded-md text-[var(--color-gold)]",style:{borderColor:"var(--color-gold-light)",borderStyle:"solid"},children:"No playable source provided for this video."})]})})},default:ne},Symbol.toStringTag,{value:"Module"}));export{k as D,ne as M,pe as V,j as a};
